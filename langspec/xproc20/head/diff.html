<?xml version="1.0" encoding="UTF-8"?><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><!--Generated by the DeltaXML.com xhtml-outfilter.xsl--><!--Using XSL Processor: SAXON 9.3.0.11 from Saxonica--><title>XProc 2.0: An XML Pipeline Language</title><link rel="alternate" title="XML" href="langspec.xml" /><link rel="alternate" title="ChangeLog" href="changelog.html" /><link rel="alternate" title="Latest editor's draft" href="http://www.w3.org/XML/XProc/docs/langspec.html" /><link rel="alternate" title="Latest Public Working Draft" href="http://www.w3.org/TR/xproc/" /><link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/TR/base.css" /><link rel="stylesheet" type="text/css" href="xproc.css" /><link rel="stylesheet" type="text/css" href="base.css" /><meta charset="utf-8" /><meta name="generator" content="DocBook XSL 2.0 Stylesheets V2.0.5" /><script type="text/javascript" src="http://docbook.github.com/release/2.0.5/base/js/dbmodnizr.js"></script><link href="http://docbook.github.com/release/2.0.5/base/css/prism.css" rel="stylesheet" /><link href="http://docbook.github.com/release/2.0.5/base/css/db-prism.css" rel="stylesheet" /><style type="text/css">
          body { margin-top: 50px }
          a.button { background: #DDD; border: 2px outset black; padding: 2px; margin: 2px; font-family: sans-serif; font-size: small;}
          a.button:hover { cursor:pointer; }
          a.button:active { border-style: inset; }
        </style><script type="text/javascript">
            function view(doc) {
              var allSpans=document.getElementsByTagName("*");
              if(doc=="old") {
                for(i=0;i!=allSpans.length;i++) {
                  var displayType= "inline";
                  if (allSpans[i].localName == "tr") {
                    displayType= "table-row";
                  } else if (allSpans[i].localName == "li") {
                    displayType= "list-item";
                  }
                  var name=allSpans[i].className;
                  if(name=="deltaxml-new" || name=="deltaxml-new-img" || name=="deltaxml-new-format" || name=="add_version" || name=="modify_version") {
                    allSpans[i].style.display="none";
                  } else if (name=="deltaxml-old" || name=="deltaxml-old-img" || name=="deltaxml-old-format" || name=="delete_version") {
                    allSpans[i].style.display= displayType;
                    allSpans[i].style.background="#FFF";
                    //need to take border off images
                    var allImgs=allSpans[i].getElementsByTagName("img");
                    for(j=0;j!=allImgs.length;j++) {
                      allImgs[j].style.border="none";
                    }
                  }
                }
              } else if(doc=="new") {
                for(i=0;i!=allSpans.length;i++) {
                  var displayType= "inline";
                  if (allSpans[i].localName == "tr") {
                    displayType= "table-row";
                  } else if (allSpans[i].localName == "li") {
                    displayType= "list-item";
                  }
                  var name=allSpans[i].className;
                  if(name=="deltaxml-new" || name=="deltaxml-new-img" || name=="deltaxml-new-format" || name=="add_version") {
                    allSpans[i].style.display= displayType;
                    allSpans[i].style.background="#FFF";
                    //need to take border off images
                    var allImgs=allSpans[i].getElementsByTagName("img");
                    for(j=0;j!=allImgs.length;j++) {
                      allImgs[j].style.border="none";
                    }
                  } else if (name=="deltaxml-old" || name=="deltaxml-old-img" || name=="deltaxml-old-format" || name=="delete_version" || name=="modify_version") {
                    allSpans[i].style.display="none";
                   }
                }
              } else if(doc=="both") {
                for(i=0;i!=allSpans.length;i++) {
                  var displayType= "inline";
                  if (allSpans[i].localName == "tr") {
                    displayType= "table-row";
                  } else if (allSpans[i].localName == "li") {
                    displayType= "list-item";
                  }
                  var name=allSpans[i].className;
                  if(name=="deltaxml-new" || name=="deltaxml-new-format" || name=="deltaxml-new-img") {
                    allSpans[i].style.display= displayType;
                    allSpans[i].style.background="#90EE90";
                    //need to add border to images
                    var allImgs=allSpans[i].getElementsByTagName("img");
                    for(j=0;j!=allImgs.length;j++) {
                      allImgs[j].style.border="2px solid green";
                    }
                  } else if(name=="deltaxml-old" || name=="deltaxml-old-format" || name=="deltaxml-old-img") {
                    allSpans[i].style.display= displayType;
                    allSpans[i].style.background="#FF5555";
                    //need to add border to images
                    var allImgs=allSpans[i].getElementsByTagName("img");
                    for(j=0;j!=allImgs.length;j++) {
                      allImgs[j].style.border="2px solid red";
                    }
                  } else if (name=="add_version" || name=="delete_version") {
                    allSpans[i].style.display="none";
                  } else if (name=="modify_version") {
                    allSpans[i].style.display= displayType;
                  }
                }
              }
            }
  
        </script></head><body><div style="position:fixed; clear:both; top:0px"><p><a class="button" onclick="view('old')">
              View Old
            </a><a class="button" onclick="view('new')">
              View New
            </a><a class="button" onclick="view('both')">
              View Both
            </a></p></div><div class="specification"><div id="spec.head" class="head"><p><a href="http://www.w3.org/"><img height="48" width="72" alt="W3C" src="http://www.w3.org/Icons/w3c_home" /></a></p><h1><span class="deltaxml-old" style="background:#FF5555">XProc 2.0: An XML Pipeline Language</span></h1><h1><div class="title"><span class="deltaxml-new" style="background:#90EE90">XProc 2.0: An XML Pipeline Language</span></div></h1><h2>W3C Editor's Draft <span class="deltaxml-old" style="background:#FF5555">3</span><span class="deltaxml-new" style="background:#90EE90">12</span> September 2014 at <span class="deltaxml-old" style="background:#FF5555">15:09</span><span class="deltaxml-new" style="background:#90EE90">12:59</span> UTC (<a href="https://github.com/ndw//specification/commit/05e0e5281a150ca3f35270588071d0a80e742e10">build <span class="deltaxml-old" style="background:#FF5555">45</span><span class="deltaxml-new" style="background:#90EE90">54</span></a>)</h2><dl><dt>This Version:</dt><dd><a href="https://ndw.github.io/specification/langspec">https://<span class="deltaxml-old" style="background:#FF5555">xproc.github.io</span><span class="deltaxml-new" style="background:#90EE90">ndw.github.io</span>/specification/langspec</a></dd><dt>Latest Version:</dt><dd><a href="http://www.w3.org/TR/xproc/">http://www.w3.org/TR/xproc/</a></dd><dt>Editors:</dt><dd><span style="display: none;" class="delete_version"><span class="personname">Norman Walsh</span>, <span class="orgname">MarkLogic Corporation</span><tt class="email">&lt;<a href="mailto:norman.walsh@marklogic.com">norman.walsh@marklogic.com</a>&gt;</tt></span><span style="display: none;" class="add_version"><span class="personname">Norman Walsh</span>, <span class="orgname">MarkLogic Corporation</span><code class="email">&lt;<a href="mailto:norman.walsh@marklogic.com">norman.walsh@marklogic.com</a>&gt;</code></span><span class="modify_version"><span class="personname">Norman Walsh</span>, <span class="orgname">MarkLogic Corporation</span><code class="email">&lt;<a href="mailto:norman.walsh@marklogic.com">norman.walsh@marklogic.com</a>&gt;</code></span></dd><dd><span style="display: none;" class="delete_version"><span class="personname">Alex Milowski</span>, <span class="orgname">Invited expert</span><tt class="email">&lt;<a href="mailto:alex@milowski.org">alex@milowski.org</a>&gt;</tt></span><span style="display: none;" class="add_version"><span class="personname">Alex Milowski</span>, <span class="orgname">Invited expert</span><code class="email">&lt;<a href="mailto:alex@milowski.org">alex@milowski.org</a>&gt;</code></span><span class="modify_version"><span class="personname">Alex Milowski</span>, <span class="orgname">Invited expert</span><code class="email">&lt;<a href="mailto:alex@milowski.org">alex@milowski.org</a>&gt;</code></span></dd><dd><span style="display: none;" class="delete_version"><span class="personname">Henry S. Thompson</span>, <span class="orgname">University of Edinburgh</span><tt class="email">&lt;<a href="mailto:ht@inf.ed.ac.uk">ht@inf.ed.ac.uk</a>&gt;</tt></span><span style="display: none;" class="add_version"><span class="personname">Henry S. Thompson</span>, <span class="orgname">University of Edinburgh</span><code class="email">&lt;<a href="mailto:ht@inf.ed.ac.uk">ht@inf.ed.ac.uk</a>&gt;</code></span><span class="modify_version"><span class="personname">Henry S. Thompson</span>, <span class="orgname">University of Edinburgh</span><code class="email">&lt;<a href="mailto:ht@inf.ed.ac.uk">ht@inf.ed.ac.uk</a>&gt;</code></span></dd></dl><p>This document is also available in these non-normative formats: <a href="langspec.xml">XML</a>, <a href="changelog.html">ChangeLog</a>, automatic <a href="diff.html">change markup</a> from the previous draft courtesy of <a href="http://www.deltaxml.com/">DeltaXML</a>. </p><p class="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2010 <a href="http://www.w3.org/"><acronym title="World Wide Web Consortium">W3C</acronym></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute of Technology">MIT</acronym></a>, <a href="http://www.ercim.org/"><acronym title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>, <a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p><hr /><div class="abstract"><h2>Abstract</h2><p>This specification describes the syntax and semantics of <em class="citetitle">XProc 2.0: An XML Pipeline Language</em>, a language for describing operations to be performed on XML documents.</p><p>An XML Pipeline specifies a sequence of operations to be performed on zero or more XML documents. Pipelines generally accept zero or more XML documents as input and produce zero or more XML documents as output. Pipelines are made up of simple steps which perform atomic operations on XML documents and constructs similar to conditionals, iteration, and exception handlers which control which steps are executed.</p></div><div class="status"><h2>Status of this Document</h2><p><strong>This document is an editor's draft that has no official standing.</strong></p><p><em>This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current W3C publications and the latest revision of this technical report can be found in the <a href="http://www.w3.org/TR/">W3C technical reports index</a> at http://www.w3.org/TR/.</em></p><p>This document is an editor's draft without normative standing. It implements the requirements and use cases documented in [<a href="#use-cases"><span class="abbrev">XProc V2.0 Requirements</span></a>]. This document is a product of the <a href="http://www.w3.org/XML/Processing/">XML Processing Model Working Group</a> as part of the W3C <a href="http://www.w3.org/XML/Activity">XML Activity</a>. </p><p>Please report errors in this document by <a href="https://github.com/xproc/specification/issues">raising issues</a> on the <a href="https://github.com/xproc/specification">specification repository</a>.</p><p>There is an <a href="http://www.w3.org/XML/XProc/2010/02/ir.html">Implementation Report for XProc 1.0</a>. It documents the performance of implementations against the <a href="http://tests.xproc.org/">XProc 1.0 Test Suite</a>. At this time, there are no such reports for XProc 2.0. </p><p>This document was produced by a group operating under the <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent Policy</a>. W3C maintains a <a href="http://www.w3.org/2004/01/pp-impl/38398/status">public list of any patent disclosures</a> made in connection with the deliverables of the group; that page also includes instructions for disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the W3C Patent Policy</a>.</p></div></div><hr /><div id="spectoc"><div class="toc"><h2 id="TableOfContents"><span class="deltaxml-old" style="background:#FF5555">Table of Contents</span></h2><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">1 </span><a href="#introduction"><span class="deltaxml-old" style="background:#FF5555">Introduction</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">2 </span><a href="#pipeline-concepts"><span class="deltaxml-old" style="background:#FF5555">Pipeline Concepts</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">2.1 </span><a href="#step-concept"><span class="deltaxml-old" style="background:#FF5555">Steps</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">2.1.1 </span><a href="#step-names"><span class="deltaxml-old" style="background:#FF5555">Step names</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-old" style="background:#FF5555">2.2 </span><a href="#input-output"><span class="deltaxml-old" style="background:#FF5555">Inputs and Outputs</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">2.2.1 </span><a href="#external-docs"><span class="deltaxml-old" style="background:#FF5555">External Documents</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">2.2.2 </span><a href="#binary"><span class="deltaxml-old" style="background:#FF5555">Non-XML Documents</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-old" style="background:#FF5555">2.3 </span><a href="#primary-input-output"><span class="deltaxml-old" style="background:#FF5555">Primary Inputs and Outputs</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">2.4 </span><a href="#connections"><span class="deltaxml-old" style="background:#FF5555">Connections</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">2.4.1 </span><a href="#namespace-fixup"><span class="deltaxml-old" style="background:#FF5555">Namespace Fixup on Outputs</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-old" style="background:#FF5555">2.5 </span><a href="#environment"><span class="deltaxml-old" style="background:#FF5555">Environment</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">2.6 </span><a href="#xpath-context"><span class="deltaxml-old" style="background:#FF5555">XPaths in XProc</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">2.6.1 </span><a href="#xproc-xpath-context-20"><span class="deltaxml-old" style="background:#FF5555">Processor XPath Context</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">2.6.2 </span><a href="#step-xpath-context-20"><span class="deltaxml-old" style="background:#FF5555">Step XPath Context</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-old" style="background:#FF5555">2.7 </span><a href="#xpath-extension-functions"><span class="deltaxml-old" style="background:#FF5555">XPath Extension Functions</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">2.7.1 </span><a href="#f.system-property"><span class="deltaxml-old" style="background:#FF5555">System Properties</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">2.7.2 </span><a href="#f.step-available"><span class="deltaxml-old" style="background:#FF5555">Step Available</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">2.7.3 </span><a href="#f.value-available"><span class="deltaxml-old" style="background:#FF5555">Value Available</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">2.7.4 </span><a href="#f.iteration-position"><span class="deltaxml-old" style="background:#FF5555">Iteration Position</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">2.7.5 </span><a href="#f.iteration-size"><span class="deltaxml-old" style="background:#FF5555">Iteration Size</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">2.7.6 </span><a href="#f.version-available"><span class="deltaxml-old" style="background:#FF5555">Version Available</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">2.7.7 </span><a href="#f.xpath-version-available"><span class="deltaxml-old" style="background:#FF5555">XPath Version Available</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">2.7.8 </span><a href="#other-xpath-extension-functions"><span class="deltaxml-old" style="background:#FF5555">Other XPath Extension Functions</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-old" style="background:#FF5555">2.8 </span><a href="#psvi-support"><span class="deltaxml-old" style="background:#FF5555">PSVIs in XProc</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">2.9 </span><a href="#variables"><span class="deltaxml-old" style="background:#FF5555">Variables</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">2.10 </span><a href="#options"><span class="deltaxml-old" style="background:#FF5555">Options</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">2.11 </span><a href="#parameters"><span class="deltaxml-old" style="background:#FF5555">Parameters</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">2.12 </span><a href="#security-considerations"><span class="deltaxml-old" style="background:#FF5555">Security Considerations</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">2.13 </span><a href="#versioning-considerations"><span class="deltaxml-old" style="background:#FF5555">Versioning Considerations</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">2.13.1 </span><a href="#vers-backcomp"><span class="deltaxml-old" style="background:#FF5555">Backwards-compatible Mode</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">2.13.2 </span><a href="#vers-forwcomp"><span class="deltaxml-old" style="background:#FF5555">Forwards-compatible Mode</span></a></span></dt></dl></dd></dl></dd><dt><span><span class="deltaxml-old" style="background:#FF5555">3 </span><a href="#syntax"><span class="deltaxml-old" style="background:#FF5555">Syntax Overview</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">3.1 </span><a href="#namespaces"><span class="deltaxml-old" style="background:#FF5555">XProc Namespaces</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">3.2 </span><a href="#scoping"><span class="deltaxml-old" style="background:#FF5555">Scoping of Names</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">3.3 </span><a href="#xml-base-attribute"><span class="deltaxml-old" style="background:#FF5555">Base URIs and xml:base</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">3.4 </span><a href="#xml-id-attribute"><span class="deltaxml-old" style="background:#FF5555">Unique identifiers</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">3.5 </span><a href="#syntax-docs-ports"><span class="deltaxml-old" style="background:#FF5555">Associating Documents with Ports</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">3.6 </span><a href="#documentation"><span class="deltaxml-old" style="background:#FF5555">Documentation</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">3.7 </span><a href="#annotations"><span class="deltaxml-old" style="background:#FF5555">Processor annotations</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">3.8 </span><a href="#extension-attributes"><span class="deltaxml-old" style="background:#FF5555">Extension attributes</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">3.9 </span><a href="#use-when"><span class="deltaxml-old" style="background:#FF5555">Conditional Element Exclusion</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">3.10 </span><a href="#syntax-summaries"><span class="deltaxml-old" style="background:#FF5555">Syntax Summaries</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">3.11 </span><a href="#common-errors"><span class="deltaxml-old" style="background:#FF5555">Common errors</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-old" style="background:#FF5555">4 </span><a href="#steps"><span class="deltaxml-old" style="background:#FF5555">Steps</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">4.1 </span><a href="#p.pipeline"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">4.2 </span><a href="#p.for-each"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">4.2.1 </span><a href="#for-each-xpath-context"><span class="deltaxml-old" style="background:#FF5555">XPath Context</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-old" style="background:#FF5555">4.3 </span><a href="#p.viewport"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">4.3.1 </span><a href="#viewport-xpath-context"><span class="deltaxml-old" style="background:#FF5555">XPath Context</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-old" style="background:#FF5555">4.4 </span><a href="#p.choose"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">4.4.1 </span><a href="#p.xpath-context"><span class="deltaxml-old" style="background:#FF5555">p:xpath-context</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">4.4.2 </span><a href="#p.when"><span class="deltaxml-old" style="background:#FF5555">p:when</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">4.4.3 </span><a href="#p.otherwise"><span class="deltaxml-old" style="background:#FF5555">p:otherwise</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-old" style="background:#FF5555">4.5 </span><a href="#p.group"><span class="deltaxml-old" style="background:#FF5555">p:group</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">4.6 </span><a href="#p.try"><span class="deltaxml-old" style="background:#FF5555">p:try</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">4.6.1 </span><a href="#err-vocab"><span class="deltaxml-old" style="background:#FF5555">The Error Vocabulary</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-old" style="background:#FF5555">4.7 </span><a href="#p.atomic"><span class="deltaxml-old" style="background:#FF5555">Atomic Steps</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">4.8 </span><a href="#p.extension"><span class="deltaxml-old" style="background:#FF5555">Extension Steps</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">4.8.1 </span><a href="#option-shortcut"><span class="deltaxml-old" style="background:#FF5555">Syntactic Shortcut for Option Values</span></a></span></dt></dl></dd></dl></dd><dt><span><span class="deltaxml-old" style="background:#FF5555">5 </span><a href="#other-elements"><span class="deltaxml-old" style="background:#FF5555">Other pipeline elements</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">5.1 </span><a href="#p.input"><span class="deltaxml-old" style="background:#FF5555">p:input</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">5.1.1 </span><a href="#document-inputs"><span class="deltaxml-old" style="background:#FF5555">Document Inputs</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">5.1.2 </span><a href="#parameter-inputs"><span class="deltaxml-old" style="background:#FF5555">Parameter Inputs</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-old" style="background:#FF5555">5.2 </span><a href="#p.iteration-source"><span class="deltaxml-old" style="background:#FF5555">p:iteration-source</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">5.3 </span><a href="#p.viewport-source"><span class="deltaxml-old" style="background:#FF5555">p:viewport-source</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">5.4 </span><a href="#p.output"><span class="deltaxml-old" style="background:#FF5555">p:output</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">5.5 </span><a href="#p.log"><span class="deltaxml-old" style="background:#FF5555">p:log</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">5.6 </span><a href="#p.serialization"><span class="deltaxml-old" style="background:#FF5555">p:serialization</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">5.7 </span><a href="#variables-options-parameters"><span class="deltaxml-old" style="background:#FF5555">Variables, Options, and Parameters</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">5.7.1 </span><a href="#p.variable"><span class="deltaxml-old" style="background:#FF5555">p:variable</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">5.7.2 </span><a href="#p.option"><span class="deltaxml-old" style="background:#FF5555">p:option</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">5.7.3 </span><a href="#p.with-option"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">5.7.4 </span><a href="#p.with-param"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">5.7.5 </span><a href="#opt-param-bindings"><span class="deltaxml-old" style="background:#FF5555">Namespaces on variables, options, and parameters</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-old" style="background:#FF5555">5.8 </span><a href="#p.declare-step"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">5.8.1 </span><a href="#declare-atomic-steps"><span class="deltaxml-old" style="background:#FF5555">Declaring atomic steps</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">5.8.2 </span><a href="#declare-pipelines"><span class="deltaxml-old" style="background:#FF5555">Declaring pipelines</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-old" style="background:#FF5555">5.9 </span><a href="#p.library"><span class="deltaxml-old" style="background:#FF5555">p:library</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">5.10 </span><a href="#p.import"><span class="deltaxml-old" style="background:#FF5555">p:import</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">5.11 </span><a href="#p.pipe"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">5.12 </span><a href="#p.inline"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">5.13 </span><a href="#p.document"><span class="deltaxml-old" style="background:#FF5555">p:document</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">5.14 </span><a href="#p.data"><span class="deltaxml-old" style="background:#FF5555">p:data</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">5.15 </span><a href="#p.empty"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">5.16 </span><a href="#p.documentation"><span class="deltaxml-old" style="background:#FF5555">p:documentation</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">5.17 </span><a href="#p.pipeinfo"><span class="deltaxml-old" style="background:#FF5555">p:pipeinfo</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-old" style="background:#FF5555">6 </span><a href="#errors"><span class="deltaxml-old" style="background:#FF5555">Errors</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">6.1 </span><a href="#static-errors"><span class="deltaxml-old" style="background:#FF5555">Static Errors</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">6.2 </span><a href="#dynamic-errors"><span class="deltaxml-old" style="background:#FF5555">Dynamic Errors</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">6.3 </span><a href="#step-errors"><span class="deltaxml-old" style="background:#FF5555">Step Errors</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-old" style="background:#FF5555">7 </span><a href="#std-components"><span class="deltaxml-old" style="background:#FF5555">Standard Step Library</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1 </span><a href="#std-required"><span class="deltaxml-old" style="background:#FF5555">Required Steps</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.1 </span><a href="#c.add-attribute"><span class="deltaxml-old" style="background:#FF5555">p:add-attribute</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.2 </span><a href="#c.add-xml-base"><span class="deltaxml-old" style="background:#FF5555">p:add-xml-base</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.3 </span><a href="#c.compare"><span class="deltaxml-old" style="background:#FF5555">p:compare</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.4 </span><a href="#c.count"><span class="deltaxml-old" style="background:#FF5555">p:count</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.5 </span><a href="#c.delete"><span class="deltaxml-old" style="background:#FF5555">p:delete</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.6 </span><a href="#c.directory-list"><span class="deltaxml-old" style="background:#FF5555">p:directory-list</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.7 </span><a href="#c.error"><span class="deltaxml-old" style="background:#FF5555">p:error</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.8 </span><a href="#c.escape-markup"><span class="deltaxml-old" style="background:#FF5555">p:escape-markup</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.9 </span><a href="#c.filter"><span class="deltaxml-old" style="background:#FF5555">p:filter</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.10 </span><a href="#c.http-request"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.11 </span><a href="#c.identity"><span class="deltaxml-old" style="background:#FF5555">p:identity</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.12 </span><a href="#c.insert"><span class="deltaxml-old" style="background:#FF5555">p:insert</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.13 </span><a href="#c.label-elements"><span class="deltaxml-old" style="background:#FF5555">p:label-elements</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.14 </span><a href="#c.load"><span class="deltaxml-old" style="background:#FF5555">p:load</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.15 </span><a href="#c.make-absolute-uris"><span class="deltaxml-old" style="background:#FF5555">p:make-absolute-uris</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.16 </span><a href="#c.namespace-rename"><span class="deltaxml-old" style="background:#FF5555">p:namespace-rename</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.17 </span><a href="#c.pack"><span class="deltaxml-old" style="background:#FF5555">p:pack</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.18 </span><a href="#c.parameters"><span class="deltaxml-old" style="background:#FF5555">p:parameters</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.19 </span><a href="#c.rename"><span class="deltaxml-old" style="background:#FF5555">p:rename</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.20 </span><a href="#c.replace"><span class="deltaxml-old" style="background:#FF5555">p:replace</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.21 </span><a href="#c.set-attributes"><span class="deltaxml-old" style="background:#FF5555">p:set-attributes</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.22 </span><a href="#c.sink"><span class="deltaxml-old" style="background:#FF5555">p:sink</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.23 </span><a href="#c.split-sequence"><span class="deltaxml-old" style="background:#FF5555">p:split-sequence</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.24 </span><a href="#c.store"><span class="deltaxml-old" style="background:#FF5555">p:store</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.25 </span><a href="#c.string-replace"><span class="deltaxml-old" style="background:#FF5555">p:string-replace</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.26 </span><a href="#c.unescape-markup"><span class="deltaxml-old" style="background:#FF5555">p:unescape-markup</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.27 </span><a href="#c.unwrap"><span class="deltaxml-old" style="background:#FF5555">p:unwrap</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.28 </span><a href="#c.wrap"><span class="deltaxml-old" style="background:#FF5555">p:wrap</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.29 </span><a href="#c.wrap-sequence"><span class="deltaxml-old" style="background:#FF5555">p:wrap-sequence</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.30 </span><a href="#c.xinclude"><span class="deltaxml-old" style="background:#FF5555">p:xinclude</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.1.31 </span><a href="#c.xslt"><span class="deltaxml-old" style="background:#FF5555">p:xslt</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-old" style="background:#FF5555">7.2 </span><a href="#std-optional"><span class="deltaxml-old" style="background:#FF5555">Optional Steps</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">7.2.1 </span><a href="#c.exec"><span class="deltaxml-old" style="background:#FF5555">p:exec</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.2.2 </span><a href="#c.hash"><span class="deltaxml-old" style="background:#FF5555">p:hash</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.2.3 </span><a href="#c.uuid"><span class="deltaxml-old" style="background:#FF5555">p:uuid</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.2.4 </span><a href="#c.validate-with-relax-ng"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-relax-ng</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.2.5 </span><a href="#c.validate-with-schematron"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-schematron</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.2.6 </span><a href="#c.validate-with-xml-schema"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-xml-schema</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.2.7 </span><a href="#c.www-form-urldecode"><span class="deltaxml-old" style="background:#FF5555">p:www-form-urldecode</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.2.8 </span><a href="#c.www-form-urlencode"><span class="deltaxml-old" style="background:#FF5555">p:www-form-urlencode</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.2.9 </span><a href="#c.xquery"><span class="deltaxml-old" style="background:#FF5555">p:xquery</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">7.2.10 </span><a href="#c.xsl-formatter"><span class="deltaxml-old" style="background:#FF5555">p:xsl-formatter</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-old" style="background:#FF5555">7.3 </span><a href="#serialization-options"><span class="deltaxml-old" style="background:#FF5555">Serialization Options</span></a></span></dt></dl></dd></dl></div><h3><a name="appendices" id="appendices"></a><span class="deltaxml-old" style="background:#FF5555">Appendices</span></h3><div class="toc"><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">A </span><a href="#conformance"><span class="deltaxml-old" style="background:#FF5555">Conformance</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">A.1 </span><a href="#implementation-defined"><span class="deltaxml-old" style="background:#FF5555">Implementation-defined features</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">A.2 </span><a href="#implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">Implementation-dependent features</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">A.3 </span><a href="#infoset-conformance"><span class="deltaxml-old" style="background:#FF5555">Infoset Conformance</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-old" style="background:#FF5555">B </span><a href="#references"><span class="deltaxml-old" style="background:#FF5555">References</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">B.1 </span><a href="#normative-references"><span class="deltaxml-old" style="background:#FF5555">Normative References</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">B.2 </span><a href="#informative-references"><span class="deltaxml-old" style="background:#FF5555">Informative References</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-old" style="background:#FF5555">C </span><a href="#glossary"><span class="deltaxml-old" style="background:#FF5555">Glossary</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">D </span><a href="#language-summary"><span class="deltaxml-old" style="background:#FF5555">Pipeline Language Summary</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">E </span><a href="#errors-list"><span class="deltaxml-old" style="background:#FF5555">List of Error Codes</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">E.1 </span><a href="#app.static-errors"><span class="deltaxml-old" style="background:#FF5555">Static Errors</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">E.2 </span><a href="#app.dynamic-errors"><span class="deltaxml-old" style="background:#FF5555">Dynamic Errors</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">E.3 </span><a href="#app.step-errors"><span class="deltaxml-old" style="background:#FF5555">Step Errors</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-old" style="background:#FF5555">F </span><a href="#namespace-fixup-guidance"><span class="deltaxml-old" style="background:#FF5555">Guidance on Namespace Fixup (Non-Normative)</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">G </span><a href="#handling-imports"><span class="deltaxml-old" style="background:#FF5555">Handling Circular and Re-entrant Library Imports (Non-Normative)</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">H </span><a href="#parallelism"><span class="deltaxml-old" style="background:#FF5555">Sequential steps, parallelism, and side-effects</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">I </span><a href="#xproc-media-type"><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">application/xproc+xml</span></tt><span class="deltaxml-old" style="background:#FF5555"> media type</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-old" style="background:#FF5555">I.1 </span><a href="#media-type-registration"><span class="deltaxml-old" style="background:#FF5555">Registration of MIME media type application/xproc+xml</span></a></span></dt><dt><span><span class="deltaxml-old" style="background:#FF5555">I.2 </span><a href="#fragid"><span class="deltaxml-old" style="background:#FF5555">Fragment Identifiers</span></a></span></dt></dl></dd></dl></div></div><div class="section"><h3><a name="introduction" id="introduction"></a><span class="deltaxml-old" style="background:#FF5555">1 Introduction</span></h3><p><span class="deltaxml-old" style="background:#FF5555">An XML Pipeline specifies a sequence of operations to be performed on a collection of XML input documents. Pipelines take zero or more XML documents as their input and produce zero or more XML documents as their output.</span></p><p><span class="deltaxml-old" style="background:#FF5555">A </span><em class="glossterm"><a href="#dt-pipeline"><span class="deltaxml-old" style="background:#FF5555">pipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555"> consists of steps. Like pipelines, steps take zero or more XML documents as their inputs and produce zero or more XML documents as their outputs. The inputs of a step come from the web, from the pipeline document, from the inputs to the pipeline itself, or from the outputs of other steps in the pipeline. The outputs from a step are consumed by other steps, are outputs of the pipeline as a whole, or are discarded.</span></p><p><span class="deltaxml-old" style="background:#FF5555">There are three kinds of steps: atomic steps, compound steps, and multi-container steps. Atomic steps carry out single operations and have no substructure as far as the pipeline is concerned. Compound steps and multi-container steps control the execution of other steps, which they include in the form of one or more subpipelines.</span></p><p><span class="deltaxml-old" style="background:#FF5555">This specification defines a standard library, </span><a href="#std-components" title="Standard Step Library"><span class="deltaxml-old" style="background:#FF5555">Section 7, “Standard Step Library”</span></a><span class="deltaxml-old" style="background:#FF5555">, of steps. Pipeline implementations </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> support additional types of steps as well. </span></p><p><a href="#fig-xival" title="A simple, linear XInclude/Validate pipeline"><span class="deltaxml-old" style="background:#FF5555">Figure 1, “A simple, linear XInclude/Validate pipeline”</span></a><span class="deltaxml-old" style="background:#FF5555"> is a graphical representation of a simple pipeline that performs XInclude processing and validation on a document.</span></p><div class="figure-wrapper" id="fig-xival"><div class="figure"><div class="mediaobject"><span class="deltaxml-old-img"><img style="border: 2px solid red" src="graphics/sch-xinclude-validate-pipeline.png" alt="A simple, linear XInclude/Validate pipeline" /></span></div></div><div class="title"><span class="deltaxml-old" style="background:#FF5555">Figure 1. A simple, linear XInclude/Validate pipeline</span></div></div><p><span class="deltaxml-old" style="background:#FF5555">This is a pipeline that consists of two atomic steps, XInclude and Validate with XML Schema. The pipeline itself has two inputs, “source” (a source document) and “schemas” (a sequence of W3C XML Schemas). The XInclude step reads the pipeline input “source” and produces a result document. The Validate with XML Schema step reads the pipeline input “schemas” and the result of the XInclude step and produces its own result document. The result of the validation, “result”, is the result of the pipeline. (For consistency across the step vocabulary, the standard input is usually named “source” and the standard output is usually named “result”.) </span></p><p><span class="deltaxml-old" style="background:#FF5555">The pipeline document determines how the steps are connected together inside the pipeline, that is, how the output of one step becomes the input of another.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The pipeline document for this pipeline is shown in </span><a href="#ex1" title="A simple, linear XInclude/Validate pipeline"><span class="deltaxml-old" style="background:#FF5555">Example 1, “A simple, linear XInclude/Validate pipeline”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><div class="example-wrapper" id="ex1"><div class="title"><span class="deltaxml-old" style="background:#FF5555">Example 1. A simple, linear XInclude/Validate pipeline</span></div><div class="example"><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" name="xinclude-and-validate" version="1.0"&gt; &lt;p:input port="source" primary="true"/&gt; &lt;p:input port="schemas" sequence="true"/&gt; &lt;p:output port="result"&gt; &lt;p:pipe step="validated" port="result"/&gt; &lt;/p:output&gt; &lt;p:xinclude name="included"&gt; &lt;p:input port="source"&gt; &lt;p:pipe step="xinclude-and-validate" port="source"/&gt; &lt;/p:input&gt; &lt;/p:xinclude&gt; &lt;p:validate-with-xml-schema name="validated"&gt; &lt;p:input port="source"&gt; &lt;p:pipe step="included" port="result"/&gt; &lt;/p:input&gt; &lt;p:input port="schema"&gt; &lt;p:pipe step="xinclude-and-validate" port="schemas"/&gt; &lt;/p:input&gt; &lt;/p:validate-with-xml-schema&gt; &lt;/p:declare-step&gt; </span></pre></div></div></div><p><span class="deltaxml-old" style="background:#FF5555">The example in </span><a href="#ex1" title="A simple, linear XInclude/Validate pipeline"><span class="deltaxml-old" style="background:#FF5555">Example 1, “A simple, linear XInclude/Validate pipeline”</span></a><span class="deltaxml-old" style="background:#FF5555"> is very verbose. It makes all of the connections seen in the figure explicit. In practice, pipelines do not have to be this verbose. XProc supports defaults for many common cases:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">If you use </span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> instead of </span><a href="#p.declare-step"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, the “</span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555">” input port and “</span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555">” output port are implicitly declared for you.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Where inputs and outputs are connected between sequential sibling steps, they do not have to be made explicit.</span></p></li></ul></div><p><span class="deltaxml-old" style="background:#FF5555">The same pipeline, using XProc defaults, is shown in </span><a href="#ex1-abbr" title="A simple, linear XInclude/Validate pipeline (simplified)"><span class="deltaxml-old" style="background:#FF5555">Example 2, “A simple, linear XInclude/Validate pipeline (simplified)”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><div class="example-wrapper" id="ex1-abbr"><div class="title"><span class="deltaxml-old" style="background:#FF5555">Example 2. A simple, linear XInclude/Validate pipeline (simplified)</span></div><div class="example"><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:pipeline xmlns:p="http://www.w3.org/ns/xproc" name="xinclude-and-validate" version="1.0"&gt; &lt;p:input port="schemas" sequence="true"/&gt; &lt;p:xinclude/&gt; &lt;p:validate-with-xml-schema&gt; &lt;p:input port="schema"&gt; &lt;p:pipe step="xinclude-and-validate" port="schemas"/&gt; &lt;/p:input&gt; &lt;/p:validate-with-xml-schema&gt; &lt;/p:pipeline&gt; </span></pre></div></div></div><p><a href="#fig-style-proc" title="A validate and transform pipeline"><span class="deltaxml-old" style="background:#FF5555">Figure 2, “A validate and transform pipeline”</span></a><span class="deltaxml-old" style="background:#FF5555"> is a more complex example: it performs schema validation with an appropriate schema and then styles the validated document.</span></p><div class="figure-wrapper" id="fig-style-proc"><div class="figure"><div class="mediaobject"><span class="deltaxml-old-img"><img style="border: 2px solid red" src="graphics/sch-transform.png" alt="A validate and transform pipeline" /></span></div></div><div class="title"><span class="deltaxml-old" style="background:#FF5555">Figure 2. A validate and transform pipeline</span></div></div><p><span class="deltaxml-old" style="background:#FF5555">The heart of this example is the conditional. The “choose” step evaluates an XPath expression over a test document. Based on the result of that expression, one or another branch is run. In this example, each branch consists of a single validate step.</span></p><div class="example-wrapper" id="ex2"><div class="title"><span class="deltaxml-old" style="background:#FF5555">Example 3. A validate and transform pipeline</span></div><div class="example"><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:pipeline xmlns:p="http://www.w3.org/ns/xproc" version="1.0"&gt; &lt;p:choose&gt; &lt;p:when test="/*[@version &amp;lt; 2.0]"&gt; &lt;p:validate-with-xml-schema&gt; &lt;p:input port="schema"&gt; &lt;p:document href="v1schema.xsd"/&gt; &lt;/p:input&gt; &lt;/p:validate-with-xml-schema&gt; &lt;/p:when&gt; &lt;p:otherwise&gt; &lt;p:validate-with-xml-schema&gt; &lt;p:input port="schema"&gt; &lt;p:document href="v2schema.xsd"/&gt; &lt;/p:input&gt; &lt;/p:validate-with-xml-schema&gt; &lt;/p:otherwise&gt; &lt;/p:choose&gt; &lt;p:xslt&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="stylesheet.xsl"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;/p:pipeline&gt; </span></pre></div></div></div><p><span class="deltaxml-old" style="background:#FF5555">This example, like the preceding, relies on XProc defaults for simplicity. It is always valid to write the fully explicit form if you prefer.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The media type for pipeline documents is </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">application/xml</span></tt><span class="deltaxml-old" style="background:#FF5555">. Often, pipeline documents are identified by the extension </span><tt class="filename"><span class="deltaxml-old" style="background:#FF5555">.xpl</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">In this specification the words </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555">, </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must not</span></span><span class="deltaxml-old" style="background:#FF5555">, </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555">, </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should not</span></span><span class="deltaxml-old" style="background:#FF5555">, </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> and </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">recommended</span></span><span class="deltaxml-old" style="background:#FF5555"> are to be interpreted as described in [</span><a href="#rfc2119"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RFC 2119</span></span></a><span class="deltaxml-old" style="background:#FF5555">].</span></p></div><div class="section"><h3><a name="pipeline-concepts" id="pipeline-concepts"></a><span class="deltaxml-old" style="background:#FF5555">2 Pipeline Concepts</span></h3><p><span class="termdef" id="dt-pipeline"><span class="deltaxml-old" style="background:#FF5555">[Definition: A </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">pipeline</span></em><span class="deltaxml-old" style="background:#FF5555"> is a set of connected steps, with outputs of one step flowing into inputs of another.]</span></span><span class="deltaxml-old" style="background:#FF5555"> A pipeline is itself a </span><em class="glossterm"><a href="#dt-step"><span class="deltaxml-old" style="background:#FF5555">step</span></a></em><span class="deltaxml-old" style="background:#FF5555"> and must satisfy the constraints on steps. Connections between steps occur where the input of one step is connected to the output of another. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The result of evaluating a pipeline (or </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555">) is the result of evaluating the steps that it contains, in an order consistent with the connections between them. A pipeline must behave as if it evaluated each step each time it is encountered. Unless otherwise indicated, implementations </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must not</span></span><span class="deltaxml-old" style="background:#FF5555"> assume that steps are functional (that is, that their outputs depend only on their </span><a href="#input-output"><span class="deltaxml-old" style="background:#FF5555">inputs</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><em class="glossterm"><a href="#dt-option"><span class="deltaxml-old" style="background:#FF5555">options</span></a></em><span class="deltaxml-old" style="background:#FF5555">, and </span><em class="glossterm"><a href="#dt-parameter"><span class="deltaxml-old" style="background:#FF5555">parameters</span></a></em><span class="deltaxml-old" style="background:#FF5555">) or side-effect free.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The pattern of connections between steps will not always completely determine their order of evaluation. </span><a name="impl-1"></a><span class="deltaxml-old" style="background:#FF5555">The evaluation order of steps not connected to one another is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p><div class="section"><h4><a name="step-concept" id="step-concept"></a><span class="deltaxml-old" style="background:#FF5555">2.1 Steps</span></h4><p><span class="termdef" id="dt-step"><span class="deltaxml-old" style="background:#FF5555">[Definition: A </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">step</span></em><span class="deltaxml-old" style="background:#FF5555"> is the basic computational unit of a pipeline.]</span></span><span class="deltaxml-old" style="background:#FF5555"> A typical step has zero or more inputs, from which it receives XML documents to process, zero or more outputs, to which it sends XML document results, and can have options and/or parameters.</span></p><p><span class="deltaxml-old" style="background:#FF5555">There are three kinds of steps: </span><em class="glossterm"><a href="#dt-atomic-step"><span class="deltaxml-old" style="background:#FF5555">atomic</span></a></em><span class="deltaxml-old" style="background:#FF5555">, </span><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-old" style="background:#FF5555">compound</span></a></em><span class="deltaxml-old" style="background:#FF5555">, and </span><em class="glossterm"><a href="#dt-multi-container-step"><span class="deltaxml-old" style="background:#FF5555">multi-container</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="termdef" id="dt-atomic-step"><span class="deltaxml-old" style="background:#FF5555">[Definition: An </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">atomic step</span></em><span class="deltaxml-old" style="background:#FF5555"> is a step that performs a unit of XML processing, such as XInclude or transformation, and has no internal </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555">. ]</span></span><span class="deltaxml-old" style="background:#FF5555"> Atomic steps carry out fundamental XML operations and can perform arbitrary amounts of computation, but they are indivisible. An XSLT step, for example, performs XSLT processing; a Validate with XML Schema step validates one input with respect to some set of XML Schemas, etc.</span></p><p><span class="deltaxml-old" style="background:#FF5555">There are many </span><em><span class="deltaxml-old" style="background:#FF5555">types</span></em><span class="deltaxml-old" style="background:#FF5555"> of atomic steps. The standard library of atomic steps is described in </span><a href="#std-components" title="Standard Step Library"><span class="deltaxml-old" style="background:#FF5555">Section 7, “Standard Step Library”</span></a><span class="deltaxml-old" style="background:#FF5555">, but implementations </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> provide others as well. </span><a name="impl-2"></a><span class="deltaxml-old" style="background:#FF5555">It is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555"> what additional step types, if any, are provided. Each use, or instance, of an atomic step invokes the processing defined by that type of step. A pipeline may contain instances of many types of steps and many instances of the same type of step.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Compound steps, on the other hand, control and organize the flow of documents through a pipeline, reconstructing familiar programming language functionality such as conditionals, iterators and exception handling. They contain other steps, whose evaluation they control.</span></p><p><span class="termdef" id="dt-compound-step"><span class="deltaxml-old" style="background:#FF5555">[Definition: A </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">compound step</span></em><span class="deltaxml-old" style="background:#FF5555"> is a step that contains a </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555">.]</span></span><span class="deltaxml-old" style="background:#FF5555"> That is, a compound step differs from an atomic step in that its semantics are at least partially determined by the steps that it contains.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Finally, there are two “multi-container steps”: </span><a href="#p.choose"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#p.try"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt></a><span class="deltaxml-old" style="background:#FF5555">. </span><span class="termdef" id="dt-multi-container-step"><span class="deltaxml-old" style="background:#FF5555">[Definition: A </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">multi-container step</span></em><span class="deltaxml-old" style="background:#FF5555"> is a step that contains several alternate </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipelines</span></a></em><span class="deltaxml-old" style="background:#FF5555">. ]</span></span><span class="deltaxml-old" style="background:#FF5555"> Each subpipeline is identified by a non-step wrapper element: </span><a href="#p.when"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:when</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#p.otherwise"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:otherwise</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> in the case of </span><a href="#p.choose"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#p.group"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:group</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#p.catch"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:catch</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> in the case of </span><a href="#p.try"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt></a><span class="deltaxml-old" style="background:#FF5555">. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The output of a multi-container step is the output of exactly one of its subpipelines. In this sense, a multi-container step functions like a </span><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-old" style="background:#FF5555">compound step</span></a></em><span class="deltaxml-old" style="background:#FF5555">. However, evaluating a multi-container step may involve evaluating, or partially evaluating, more than one of its subpipelines. It's possible for steps in a partially evaluated pipeline to have side effects that are visible outside the processor, even if the final output of the multi-container step is the result of some other subpipeline. For example, a web server might record that some interaction was performed, or a file on the local file system might have been modified.</span></p><p><span class="termdef" id="dt-container"><span class="deltaxml-old" style="background:#FF5555">[Definition: A compound step or multi-container step is a </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">container</span></em><span class="deltaxml-old" style="background:#FF5555"> for the steps directly within it or within non-step wrappers directly within it.]</span></span><span class="termdef" id="dt-contained-steps"><span class="deltaxml-old" style="background:#FF5555">[Definition: The steps that occur directly within, or within non-step wrappers directly within, a step are called that step's </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">contained steps</span></em><span class="deltaxml-old" style="background:#FF5555">. In other words, “container” and “contained steps” are inverse relationships.]</span></span><span class="termdef" id="dt-ancestors"><span class="deltaxml-old" style="background:#FF5555">[Definition: The </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">ancestors</span></em><span class="deltaxml-old" style="background:#FF5555"> of a step, if it has any, are its </span><em class="glossterm"><a href="#dt-container"><span class="deltaxml-old" style="background:#FF5555">container</span></a></em><span class="deltaxml-old" style="background:#FF5555"> and the ancestors of its container.]</span></span></p><p><span class="termdef" id="dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">[Definition: Sibling steps (and the connections between them) form a </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></em><span class="deltaxml-old" style="background:#FF5555">.]</span></span><span class="termdef" id="dt-last-step"><span class="deltaxml-old" style="background:#FF5555">[Definition: The </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">last step</span></em><span class="deltaxml-old" style="background:#FF5555"> in a subpipeline is its last step in document order.]</span></span></p><p id="p.subpipeline" class="element-syntax element-syntax-language-construct hanging-indent"><tt class="code"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></tt><span class="deltaxml-old" style="background:#FF5555"> = </span><a href="#p.variable"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:variable</span></tt></a><span class="deltaxml-old" style="background:#FF5555">*, (</span><a href="#p.for-each"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt></a><span class="deltaxml-old" style="background:#FF5555">|</span><a href="#p.viewport"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt></a><span class="deltaxml-old" style="background:#FF5555">|</span><a href="#p.choose"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt></a><span class="deltaxml-old" style="background:#FF5555">|</span><a href="#p.group"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:group</span></tt></a><span class="deltaxml-old" style="background:#FF5555">|</span><a href="#p.try"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt></a><span class="deltaxml-old" style="background:#FF5555">|</span><tt class="code"><a href="#p.atomic"><span class="deltaxml-old" style="background:#FF5555">p:</span><em class="replaceable"><tt class="replaceable"><span class="deltaxml-old" style="background:#FF5555">standard-step</span></tt></em></a></tt><span class="deltaxml-old" style="background:#FF5555">|</span><tt class="code"><a href="#p.atomic"><em class="replaceable"><tt class="replaceable"><span class="deltaxml-old" style="background:#FF5555">pfx:user-pipeline</span></tt></em></a></tt><span class="deltaxml-old" style="background:#FF5555">)+ </span></p><div class="admonition"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">User-defined pipelines (identified with </span><tt class="code"><em class="replaceable"><tt class="replaceable"><span class="deltaxml-old" style="background:#FF5555">pfx:user-pipeline</span></tt></em></tt><span class="deltaxml-old" style="background:#FF5555"> in the preceding syntax summary) are atomic. A pipeline </span><em><span class="deltaxml-old" style="background:#FF5555">declaration</span></em><span class="deltaxml-old" style="background:#FF5555"> may contain a subpipeline, but the invocation of that pipeline is atomic and does not contain a subpipeline.</span></p></div><p><span class="deltaxml-old" style="background:#FF5555">Steps have “ports” into which inputs and outputs are connected. Each step has a number of input ports and a number of output ports; a step can have zero input ports and/or zero output ports. (All steps have an implicit output port for reporting errors that </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must not</span></span><span class="deltaxml-old" style="background:#FF5555"> be declared.) The names of all ports on each step must be unique on that step (you can't have two input ports named “source”, nor can you have an input port named “schema” and an output port named “schema”). </span></p><p><span class="deltaxml-old" style="background:#FF5555">A Step may have zero or more </span><a href="#options"><span class="deltaxml-old" style="background:#FF5555">options</span></a><span class="deltaxml-old" style="background:#FF5555">, all with unique names.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Steps may have parameter input ports, on which </span><a href="#parameters"><span class="deltaxml-old" style="background:#FF5555">parameters</span></a><span class="deltaxml-old" style="background:#FF5555"> can be passed. A step can have zero, one, or many parameter input ports, and each parameter input port can have zero or more parameters passed on it. If more than one parameter with the same name is passed to any given parameter input port, only the last value specified will be available to the step; the names of the parameters passed to the step are unique on each port. Parameters with the same name can be passed to different ports, the uniqueness constraint on names only applies to the parameters passed on each individual port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">All of the different instances of steps (atomic or compound) in a pipeline can be distinguished from one another by name. If the pipeline author does not provide a name for a step, a default name is </span><a href="#step-names"><span class="deltaxml-old" style="background:#FF5555">manufactured automatically</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><div class="section"><h5><a name="step-names" id="step-names"></a><span class="deltaxml-old" style="background:#FF5555">2.1.1 Step names</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">name</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute on any step can be used to give it a name. The name must be unique within its scope, see </span><a href="#scoping" title="Scoping of Names"><span class="deltaxml-old" style="background:#FF5555">Section 3.2, “Scoping of Names”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the pipeline author does not provide an explicit name, the processor manufactures a default name. All default names are of the form “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">!1</span></tt><em class="replaceable"><tt class="replaceable"><span class="deltaxml-old" style="background:#FF5555">.m</span></tt></em><em class="replaceable"><tt class="replaceable"><span class="deltaxml-old" style="background:#FF5555">.n</span></tt></em><span class="deltaxml-old" style="background:#FF5555">…” where “</span><em class="replaceable"><tt class="replaceable"><span class="deltaxml-old" style="background:#FF5555">m</span></tt></em><span class="deltaxml-old" style="background:#FF5555">” is the position (in the sense of counting sibling elements) of the step's highest ancestor element within the pipeline document or library which contains it, “</span><em class="replaceable"><tt class="replaceable"><span class="deltaxml-old" style="background:#FF5555">n</span></tt></em><span class="deltaxml-old" style="background:#FF5555">” is the position of the next-highest ancestor, and so on, including both steps and non-step wrappers. For example, consider the pipeline in </span><a href="#ex2" title="A validate and transform pipeline"><span class="deltaxml-old" style="background:#FF5555">Example 3, “A validate and transform pipeline”</span></a><span class="deltaxml-old" style="background:#FF5555">. The </span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step has no name, so it gets the default name “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">!1</span></tt><span class="deltaxml-old" style="background:#FF5555">”; the </span><a href="#p.choose"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> gets the name “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">!1.1</span></tt><span class="deltaxml-old" style="background:#FF5555">”; the first </span><a href="#p.when"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:when</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> gets the name “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">!1.1.1</span></tt><span class="deltaxml-old" style="background:#FF5555">”; the </span><a href="#p.otherwise"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:otherwise</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> gets the name “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">!1.1.2</span></tt><span class="deltaxml-old" style="background:#FF5555">”, etc. If the </span><a href="#p.choose"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> had a name, it would not have received a default name, but it would still have been counted and its first </span><a href="#p.when"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:when</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> would still have been “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">!1.1.1</span></tt><span class="deltaxml-old" style="background:#FF5555">”.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Providing every step in the pipeline with an interoperable name has several benefits:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-old" style="background:#FF5555">It allows implementers to refer to all steps in an interoperable fashion, for example, in error messages.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Pragmatically, we say that </span><em class="glossterm"><a href="#dt-readable-ports"><span class="deltaxml-old" style="background:#FF5555">readable ports</span></a></em><span class="deltaxml-old" style="background:#FF5555"> are identified by a step name/port name pair. By manufacturing names for otherwise anonymous steps, we include implicit connections without changing our model.</span></p></li></ol></div><p><span class="deltaxml-old" style="background:#FF5555">In a valid pipeline that runs successfully to completion, the manufactured names aren't visible (except perhaps in debugging or logging output).</span></p><div class="admonition" id="def-name-ncname"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">The format for defaulted names does not conform to the requirements of an </span><a href="http://www.w3.org/TR/xml-names/#NT-NCName"><span class="deltaxml-old" style="background:#FF5555">NCName</span></a><span class="deltaxml-old" style="background:#FF5555">. This is an explicit design decision; it prevents pipelines from using the defaulted names on </span><a href="#p.pipe"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> elements. If an explicit connection is required, the pipeline author must provide an explicit name for the step.</span></p></div></div></div><div class="section"><h4><a name="input-output" id="input-output"></a><span class="deltaxml-old" style="background:#FF5555">2.2 Inputs and Outputs</span></h4><p><span class="deltaxml-old" style="background:#FF5555">Although some steps can read and write non-XML resources, what flows </span><em><span class="deltaxml-old" style="background:#FF5555">between</span></em><span class="deltaxml-old" style="background:#FF5555"> steps through input ports and output ports are exclusively XML documents or sequences of XML documents.</span></p><p><span class="deltaxml-old" style="background:#FF5555">For the purposes of this specification, an XML document is an [</span><a href="#xml-infoset-rec"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Infoset</span></span></a><span class="deltaxml-old" style="background:#FF5555">]. Implementations are free to transmit Infosets as sequences of characters, sequences of events, object models, or any other representation that preserves the necessary Infoset properties (see </span><a href="#infoset-conformance" title="Infoset Conformance"><span class="deltaxml-old" style="background:#FF5555">Section A.3, “Infoset Conformance”</span></a><span class="deltaxml-old" style="background:#FF5555">).</span></p><p><span class="deltaxml-old" style="background:#FF5555">Most steps in this specification manipulate XML documents, or portions of XML documents. In these cases, we speak of changing elements, attributes, or nodes without prejudice to the actual representation used by an implementation.</span></p><p><span class="deltaxml-old" style="background:#FF5555">An implementation </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> make it possible for a step to produce non-XML output (through channels other than a named output port)—for example, writing a PDF document to a URI—but that output cannot flow through the pipeline. Similarly, one can imagine a step that takes no pipeline inputs, reads a non-XML file from a URI, and produces an XML output. But the non-XML data cannot arrive on an input port to a step.</span></p><p><a name="err.inline.D0001"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0001"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0001</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if a non-XML resource is produced on a step output or arrives on a step input.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The common case is that each step has one or more inputs and one or more outputs. </span><a href="#fig-atomic-step" title="An atomic step"><span class="deltaxml-old" style="background:#FF5555">Figure 3, “An atomic step”</span></a><span class="deltaxml-old" style="background:#FF5555"> illustrates symbolically an </span><em class="glossterm"><a href="#dt-atomic-step"><span class="deltaxml-old" style="background:#FF5555">atomic step</span></a></em><span class="deltaxml-old" style="background:#FF5555"> with two inputs and one output.</span></p><div class="figure-wrapper" id="fig-atomic-step"><div class="figure"><div class="mediaobject"><span class="deltaxml-old-img"><img style="border: 2px solid red" src="graphics/atomic-step.png" alt="An atomic step with two inputs and one output" /></span></div></div><div class="title"><span class="deltaxml-old" style="background:#FF5555">Figure 3. An atomic step</span></div></div><p><span class="deltaxml-old" style="background:#FF5555">All atomic steps are defined by a </span><a href="#p.declare-step"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt></a><span class="deltaxml-old" style="background:#FF5555">. The declaration of an atomic step type defines the input ports, output ports, and options of all steps of that type. For example, every </span><a href="#c.validate-with-xml-schema"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-xml-schema</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step has two inputs, named “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555">” and “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">schema</span></tt><span class="deltaxml-old" style="background:#FF5555">”, one output named “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555">”, and the same set of options. </span></p><p><span class="deltaxml-old" style="background:#FF5555">Like atomic steps, top level, user-defined pipelines also have declarations. The situation is slightly more complicated for the other compound steps because they don't have separate declarations; each instance of the compound step serves as its own declaration. On these compound steps, the number and names of the outputs can be different on each instance of the step.</span></p><p><a href="#fig-compound-step" title="A compound step"><span class="deltaxml-old" style="background:#FF5555">Figure 4, “A compound step”</span></a><span class="deltaxml-old" style="background:#FF5555"> illustrates symbolically a compound step with one subpipeline and one output. As you can see from the diagram, the output from the compound step comes from one of the outputs of the subpipeline within the step.</span></p><div class="figure-wrapper" id="fig-compound-step"><div class="figure"><div class="mediaobject"><span class="deltaxml-old-img"><img style="border: 2px solid red" src="graphics/compound-step.png" alt="A compound step with two inputs and one output" /></span></div></div><div class="title"><span class="deltaxml-old" style="background:#FF5555">Figure 4. A compound step</span></div></div><p><span class="termdef" id="dt-declared-inputs"><span class="deltaxml-old" style="background:#FF5555">[Definition: The input ports declared on a step are its </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">declared inputs</span></em><span class="deltaxml-old" style="background:#FF5555">.]</span></span><span class="termdef" id="dt-declared-outputs"><span class="deltaxml-old" style="background:#FF5555">[Definition: The output ports declared on a step are its </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">declared outputs</span></em><span class="deltaxml-old" style="background:#FF5555">.]</span></span><span class="deltaxml-old" style="background:#FF5555"> When a step is used in a pipeline, it is connected to other steps through its inputs and outputs. </span></p><p><span class="deltaxml-old" style="background:#FF5555">When a step is used, all of the </span><em class="glossterm"><a href="#dt-declared-inputs"><span class="deltaxml-old" style="background:#FF5555">declared inputs</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of the step </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be connected. Each input can be connected to:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">The output port of some other step.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">A fixed, inline document or sequence of documents.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">A document read from a URI.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">One of the inputs declared on one of its </span><em class="glossterm"><a href="#dt-ancestors"><span class="deltaxml-old" style="background:#FF5555">ancestors</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">A special port provided by an ancestor compound step, for example, “</span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">current</span></tt><span class="deltaxml-old" style="background:#FF5555">” in a </span><a href="#p.for-each"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#p.viewport"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt></a><span class="deltaxml-old" style="background:#FF5555">. </span></p></li></ul></div><p><span class="deltaxml-old" style="background:#FF5555">When an input accepts a sequence of documents, the documents can come from any combination of these locations.</span></p><p><a name="err.inline.S0003"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0003"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0003</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if any declared input is not connected.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><em class="glossterm"><a href="#dt-declared-outputs"><span class="deltaxml-old" style="background:#FF5555">declared outputs</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of a step may be connected to:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">The input port of some other step (including </span><a href="#p.iteration-source"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:iteration-source</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#p.viewport-source"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport-source</span></tt></a><span class="deltaxml-old" style="background:#FF5555">).</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">The </span><a href="#p.xpath-context"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xpath-context</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> of a </span><a href="#p.choose"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#p.when"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:when</span></tt></a><span class="deltaxml-old" style="background:#FF5555">.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">An option assigned with </span><a href="#p.with-option"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or a parameter assigned with </span><a href="#p.with-param"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></tt></a><span class="deltaxml-old" style="background:#FF5555">.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">One of the outputs declared on its container. </span></p></li></ul></div><p><span class="deltaxml-old" style="background:#FF5555">The </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-old" style="background:#FF5555">primary output port</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of a step </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be connected. </span><a name="err.inline.S0005"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0005"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0005</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the primary output port of any step is not connected. Other outputs can remain unconnected. Any documents produced on an unconnected output port are discarded.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Primary input and primary output ports may be implicitly connected if no explicit connection is given, see </span><a href="#primary-input-output" title="Primary Inputs and Outputs"><span class="deltaxml-old" style="background:#FF5555">Section 2.3, “Primary Inputs and Outputs”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Output ports on compound steps have a dual nature: from the perspective of the compound step's siblings, its outputs are just ordinary outputs and must be connected as described above. From the perspective of the subpipeline inside the compound step, they are inputs into which something may be connected.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Within a compound step, the </span><em class="glossterm"><a href="#dt-declared-outputs"><span class="deltaxml-old" style="background:#FF5555">declared outputs</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of the step can be connected to:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">The output port of some </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-old" style="background:#FF5555">contained step</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">A fixed, inline document or sequence of documents.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">A document read from a URI.</span></p></li></ul></div><p><span class="deltaxml-old" style="background:#FF5555">If a (non-primary) output port of a compound step is left unconnected, it produces an empty sequence of documents from the perspective of its siblings.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Each input and output on a step is declared to accept or produce either a single document or a sequence of documents. It </span><em><span class="deltaxml-old" style="background:#FF5555">is not</span></em><span class="deltaxml-old" style="background:#FF5555"> an error to connect a port that is declared to produce a sequence of documents to a port that is declared to accept only a single document. It is, however, an error if the former step actually produces more than one document at run time.</span></p><p><span class="deltaxml-old" style="background:#FF5555">It is also not an error to connect a port that is declared to produce a single document to a port that is declared to accept a sequence. A single document is the same as a sequence of one document.</span></p><p><span class="deltaxml-old" style="background:#FF5555">An output port may have more than one connection: it may be connected to more than one input port, more than one of its container's output ports, or both. At runtime this will result in distinct copies of the output. </span></p><p><span class="termdef" id="dt-signature"><span class="deltaxml-old" style="background:#FF5555">[Definition: The </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">signature</span></em><span class="deltaxml-old" style="background:#FF5555"> of a step is the set of inputs, outputs, and options that it is declared to accept.]</span></span><span class="deltaxml-old" style="background:#FF5555"> The declaration for a step provides a fixed signature which all its instances share.</span></p><p><span class="termdef" id="dt-matches"><span class="deltaxml-old" style="background:#FF5555">[Definition: A step </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">matches</span></em><span class="deltaxml-old" style="background:#FF5555"> its signature if and only if it specifies an input for each declared input, it specifies no inputs that are not declared, it specifies an option for each option that is declared to be required, and it specifies no options that are not declared.]</span></span><span class="deltaxml-old" style="background:#FF5555"> In other words, every input and required option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be specified and only inputs and options that are declared </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> be specified. Options that aren't required do not have to be specified.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Steps </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> also produce error, warning, and informative messages. These messages are captured and provided on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">error</span></tt><span class="deltaxml-old" style="background:#FF5555"> port inside of a </span><a href="#p.catch"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:catch</span></tt></a><span class="deltaxml-old" style="background:#FF5555">. </span><a name="impl-3"></a><span class="deltaxml-old" style="background:#FF5555">Outside of a </span><a href="#p.try"><span class="deltaxml-old" style="background:#FF5555">try/catch</span></a><span class="deltaxml-old" style="background:#FF5555">, the disposition of error messages is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p><p><a name="impl-4"></a><span class="deltaxml-old" style="background:#FF5555">How inputs are connected to XML documents outside the pipeline is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">. In order to be consistent with the XPath data model, all general and external parsed entities in such documents </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be fully expanded; they </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must not</span></span><span class="deltaxml-old" style="background:#FF5555"> contain any representation of [</span><a href="#xml-infoset-rec"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Infoset</span></span></a><span class="deltaxml-old" style="background:#FF5555">] </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[unexpanded entity reference information items]</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><a name="impl-5"></a><span class="deltaxml-old" style="background:#FF5555">How pipeline outputs are connected to XML documents outside the pipeline is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><div class="section"><h5><a name="external-docs" id="external-docs"></a><span class="deltaxml-old" style="background:#FF5555">2.2.1 External Documents</span></h5><p><span class="deltaxml-old" style="background:#FF5555">It's common for some of the documents used in processing a pipeline to be read from URIs. Sometimes this occurs directly, for example with a </span><a href="#p.document"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:document</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element. Sometimes it occurs indirectly, for example if an implementation allows the URI of a pipeline input to be specified on the command line or if an </span><a href="#c.xslt"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xslt</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step encounters an </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">xsl:import</span></tt><span class="deltaxml-old" style="background:#FF5555"> in the stylesheet that it is processing. It's also common for some of the documents produced in processing a pipeline to be written to locations which have, or at least could have, a URI. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The process of dereferencing a URI to retrieve a document is often more interesting than it seems at first. On the web, it may involve caches, proxies, and various forms of indirection. </span><a name="impl-6"></a><span class="deltaxml-old" style="background:#FF5555">Resolving a URI locally may involve resolvers of various sorts and possibly appeal to </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></a></em><span class="deltaxml-old" style="background:#FF5555"> mechanisms such as catalog files.</span></p><p><span class="deltaxml-old" style="background:#FF5555">In XProc, the situation is made even more interesting by the fact that many intermediate results produced by steps in the pipeline have base URIs. </span><a name="impl-7"></a><span class="deltaxml-old" style="background:#FF5555">Whether (and when and how) or not the intermediate results that pass between steps are ever written to a filesystem is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><a name="impl-8"></a><span class="deltaxml-old" style="background:#FF5555">In Version 1.0 of XProc, how (or if) implementers provide local resolution mechanisms and how (or if) they provide access to intermediate results by URI is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p><p><span class="deltaxml-old" style="background:#FF5555">Version 1.0 of XProc does not require implementations to guarantee that multiple attempts to dereference the same URI always produce consistent results.</span></p><div class="admonition"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">On the one hand, this is a somewhat unsatisfying state of affairs because it leaves room for interoperability problems. On the other, it is not expected to cause such problems very often in practice. </span></p><p><span class="deltaxml-old" style="background:#FF5555">If these problems arise in practice, implementers are encouraged to use the existing extension mechanisms to give users the control needed to circumvent them. Should such mechanisms become widespread, a standard mechanism could be added in some future version of the language.</span></p></div></div><div class="section"><h5><a name="binary" id="binary"></a><span class="deltaxml-old" style="background:#FF5555">2.2.2 Non-XML Documents</span></h5><p><span class="deltaxml-old" style="background:#FF5555">XProc is designed to allow pipeline authors to specify how an XML document, or sequence of XML documents, flows through a series of steps. For the most part, non-XML documents are considered out-of-scope.</span></p><p><span class="deltaxml-old" style="background:#FF5555">However, to be useful, XProc pipelines must interact with the real world where non-XML documents (HTML documents, raster images, non-XML encodings of data, etc.) are a fact of life.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Accordingly, some pipelines may need to access non-XML documents and some non-XML documents may “leak” into pipelines. XProc provides a limited set of tools for processing these documents. In particular, XProc offers the ability to turn some “almost-XML” documents into XML and to allow some non-XML documents to flow quietly through the pipeline.</span></p><p><span class="deltaxml-old" style="background:#FF5555">It </span><em><span class="deltaxml-old" style="background:#FF5555">is not</span></em><span class="deltaxml-old" style="background:#FF5555"> a goal of XProc that it should be a general-purpose pipeline language for manipulating arbitrary, non-XML resources.</span></p><p><span class="deltaxml-old" style="background:#FF5555">There are two standard ways that a non-XML document may enter a pipeline: directly through </span><a href="#p.data"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:data</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or as the result of performing an </span><a href="#c.http-request"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step. Loading non-XML data with a computed URI requires the </span><a href="#c.http-request"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step. Implementors are encouraged to support the </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">file:</span></tt><span class="deltaxml-old" style="background:#FF5555"> URI scheme so that users can load local data from computed URIs.</span></p><p><span class="deltaxml-old" style="background:#FF5555">In either case, non-XML documents are converted into text or are base64-encoded, depending on their content type and character encoding. The result is an XML document that consists of a document element containing either escaped text or base64-encoded text. This document can be processed like any other XML document.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><a href="#c.unescape-markup"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:unescape-markup</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step can be used to (attempt to) convert a non-XML document into XML. Well-formed XML that just happens to be represented with escaped markup can always be recovered. For other media types, the ability to construct XML and the precise mechanisms used to make the markup well-formed are </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">XProc provides no standard means to save encoded data in its unencoded binary form. Implementors may provide extension methods to allow the </span><a href="#c.store"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:store</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step to save the binary data. For example, an implementation might provide a </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">ext:binary</span></tt><span class="deltaxml-old" style="background:#FF5555"> serialization method that decoded base64 encoded data before saving it:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:store method="ext:binary" href="my.png"&gt; &lt;p:input port="source"&gt; &lt;p:inline&gt; &lt;c:data content-type="image/png"&gt;BASE64ENCODEDDATA&lt;/c:data&gt; &lt;/p:inline&gt; &lt;/p:input&gt; &lt;/p:store&gt; </span></pre></div></div></div><div class="section"><h4><a name="primary-input-output" id="primary-input-output"></a><span class="deltaxml-old" style="background:#FF5555">2.3 Primary Inputs and Outputs</span></h4><p><span class="deltaxml-old" style="background:#FF5555">As a convenience for pipeline authors, each step may have one input port designated as the primary input port and one output port designated as the primary output port.</span></p><p><span class="termdef" id="dt-primary-input-port"><span class="deltaxml-old" style="background:#FF5555">[Definition: If a step has a document input port which is explicitly marked “</span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">primary='true'</span></tt><span class="deltaxml-old" style="background:#FF5555">”, or if it has exactly one document input port and that port is </span><em><span class="deltaxml-old" style="background:#FF5555">not</span></em><span class="deltaxml-old" style="background:#FF5555"> explicitly marked “</span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">primary='false'</span></tt><span class="deltaxml-old" style="background:#FF5555">”, then that input port is the </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">primary input port</span></em><span class="deltaxml-old" style="background:#FF5555"> of the step.]</span></span><span class="deltaxml-old" style="background:#FF5555"> If a step has a single input port and that port is explicitly marked “</span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">primary='false'</span></tt><span class="deltaxml-old" style="background:#FF5555">”, or if a step has more than one input port and none is explicitly marked as the primary, then the primary input port of that step is undefined. A step can have at most one primary input port.</span></p><p><span class="termdef" id="dt-primary-output-port"><span class="deltaxml-old" style="background:#FF5555">[Definition: If a step has a document output port which is explicitly marked “</span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">primary='true'</span></tt><span class="deltaxml-old" style="background:#FF5555">”, or if it has exactly one document output port and that port is </span><em><span class="deltaxml-old" style="background:#FF5555">not</span></em><span class="deltaxml-old" style="background:#FF5555"> explicitly marked “</span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">primary='false'</span></tt><span class="deltaxml-old" style="background:#FF5555">”, then that output port is the </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">primary output port</span></em><span class="deltaxml-old" style="background:#FF5555"> of the step.]</span></span><span class="deltaxml-old" style="background:#FF5555"> If a step has a single output port and that port is explicitly marked “</span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">primary='false'</span></tt><span class="deltaxml-old" style="background:#FF5555">”, or if a step has more than one output port and none is explicitly marked as the primary, then the primary output port of that step is undefined. A step can have at most one primary output port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The special significance of primary input and output ports is that they are connected automatically by the processor if no explicit connection is given. Generally speaking, if two steps appear sequentially in a subpipeline, then the primary output of the first step will automatically be connected to the primary input of the second.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Additionally, if a compound step has no declared outputs and the </span><em class="glossterm"><a href="#dt-last-step"><span class="deltaxml-old" style="background:#FF5555">last step</span></a></em><span class="deltaxml-old" style="background:#FF5555"> in its subpipeline has an unconnected primary output, then an implicit primary output port will be added to the compound step (and consequently the last step's primary output will be connected to it). This implicit output port has no name. It inherits the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">sequence</span></tt><span class="deltaxml-old" style="background:#FF5555"> property of the port connected to it. This rule does not apply to </span><a href="#p.declare-step"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt></a><span class="deltaxml-old" style="background:#FF5555">; step declarations must provide explicit names for all of their outputs.</span></p></div><div class="section"><h4><a name="connections" id="connections"></a><span class="deltaxml-old" style="background:#FF5555">2.4 Connections</span></h4><p><span class="deltaxml-old" style="background:#FF5555">Steps are connected together by their input ports and output ports. </span><a name="err.inline.S0001"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0001"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0001</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if there are any loops in the connections between steps: no step can be connected to itself nor can there be any sequence of connections through other steps that leads back to itself.</span></p><div class="section"><h5><a name="namespace-fixup" id="namespace-fixup"></a><span class="deltaxml-old" style="background:#FF5555">2.4.1 Namespace Fixup on Outputs</span></h5><p><span class="deltaxml-old" style="background:#FF5555">XProc processors are expected, and sometimes required, to perform </span><em class="glossterm"><a href="#dt-namespace-fixup"><span class="deltaxml-old" style="background:#FF5555">namespace fixup</span></a></em><span class="deltaxml-old" style="background:#FF5555">. Unless the semantics of a step explicitly says otherwise:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">The in-scope namespaces associated with a node (even those that are inherited from namespace bindings that appear among its ancestors in the document in which it appears initially) are assumed to travel with that node.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Changes to one part of a tree (wrapping or unwrapping a node or renaming an element, for example) do not change the in-scope namespaces associated with the descendants of the node so changed.</span></p></li></ul></div><p><span class="deltaxml-old" style="background:#FF5555">As a result, some steps can produce XML documents which have no direct serialization (because they include nodes with conflicting or missing namespace declarations, for example). </span><span class="termdef" id="dt-namespace-fixup"><span class="deltaxml-old" style="background:#FF5555">[Definition: To produce a serializable </span><em class="glossterm"><a href="#dt-XML"><span class="deltaxml-old" style="background:#FF5555">XML</span></a></em><span class="deltaxml-old" style="background:#FF5555"> document, the XProc processor must sometimes add additional namespace nodes, perhaps even renaming prefixes, to satisfy the constraints of </span><em class="glossterm"><a href="#dt-Namespaces-in-XML"><span class="deltaxml-old" style="background:#FF5555">Namespaces in XML</span></a></em><span class="deltaxml-old" style="background:#FF5555">. This process is referred to as </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">namespace fixup</span></em><span class="deltaxml-old" style="background:#FF5555">.]</span></span></p><p><span class="deltaxml-old" style="background:#FF5555">Implementors are encouraged to perform </span><em class="glossterm"><a href="#dt-namespace-fixup"><span class="deltaxml-old" style="background:#FF5555">namespace fixup</span></a></em><span class="deltaxml-old" style="background:#FF5555"> before passing documents between steps, but they are not required to do so. Conversely, an implementation which </span><em><span class="deltaxml-old" style="background:#FF5555">does</span></em><span class="deltaxml-old" style="background:#FF5555"> serialize between steps and therefore must perform such fixups, or reject documents that cannot be serialized, is also conformant.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Except where the semantics of a step explicitly require changes, processors are required to preserve the information in the documents and fragments they manipulate. In particular, the information corresponding to the [</span><a href="#xml-infoset-rec"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Infoset</span></span></a><span class="deltaxml-old" style="background:#FF5555">] properties </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[attributes]</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[base URI]</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[children]</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[local name]</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[namespace name]</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[normalized value]</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[owner]</span></tt><span class="deltaxml-old" style="background:#FF5555">, and </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[parent]</span></tt><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be preserved.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The information corresponding to </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[prefix]</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[in-scope namespaces]</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[namespace attributes]</span></tt><span class="deltaxml-old" style="background:#FF5555">, and </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[attribute type]</span></tt><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> be preserved, with changes to the first three only as required for </span><em class="glossterm"><a href="#dt-namespace-fixup"><span class="deltaxml-old" style="background:#FF5555">namespace fixup</span></a></em><span class="deltaxml-old" style="background:#FF5555">. In particular, processors are encouraged to take account of prefix information in creating new namespace bindings, to minimize negative impact on prefixed names in content.</span></p><p><a name="impl-9"></a><span class="deltaxml-old" style="background:#FF5555">Except for cases which are specifically called out in </span><a href="#std-components" title="Standard Step Library"><span class="deltaxml-old" style="background:#FF5555">Section 7, “Standard Step Library”</span></a><span class="deltaxml-old" style="background:#FF5555">, the extent to which namespace fixup, and other checks for outputs which cannot be serialized, are performed on intermediate outputs is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Whenever an implementation serializes pipeline contents, for example for pipeline outputs, logging, or as part of steps such as </span><a href="#c.store"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:store</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#c.http-request"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, it is a </span><a href="#err.D0001"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a><span class="deltaxml-old" style="background:#FF5555"> if that serialization could not be done so as to produce a document which is both well-formed and namespace-well-formed, as specified in </span><em class="glossterm"><a href="#dt-XML"><span class="deltaxml-old" style="background:#FF5555">XML</span></a></em><span class="deltaxml-old" style="background:#FF5555"> and </span><em class="glossterm"><a href="#dt-Namespaces-in-XML"><span class="deltaxml-old" style="background:#FF5555">Namespaces in XML</span></a></em><span class="deltaxml-old" style="background:#FF5555">, regardless of what serialization method, if any, is called for.</span></p></div></div><div class="section"><h4><a name="environment" id="environment"></a><span class="deltaxml-old" style="background:#FF5555">2.5 Environment</span></h4><p><span class="termdef" id="dt-environment"><span class="deltaxml-old" style="background:#FF5555">[Definition: The </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">environment</span></em><span class="deltaxml-old" style="background:#FF5555"> is a context-dependent collection of information available within subpipelines.]</span></span><span class="deltaxml-old" style="background:#FF5555"> Most of the information in the environment is static and can be computed for each subpipeline before evaluation of the pipeline as a whole begins. The in-scope bindings have to be calculated as the pipeline is being evaluated.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The environment consists of:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-old" style="background:#FF5555">A set of readable ports. </span><span class="termdef" id="dt-readable-ports"><span class="deltaxml-old" style="background:#FF5555">[Definition: The </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">readable ports</span></em><span class="deltaxml-old" style="background:#FF5555"> are a set of step name/port name pairs.]</span></span><span class="deltaxml-old" style="background:#FF5555"> Inputs and outputs can only be connected to readable ports.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">A default readable port. </span><span class="termdef" id="dt-default-readable-port"><span class="deltaxml-old" style="background:#FF5555">[Definition: The </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">default readable port</span></em><span class="deltaxml-old" style="background:#FF5555">, which may be undefined, is a specific step name/port name pair from the set of readable ports.]</span></span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">A set of in-scope bindings. </span><span class="termdef" id="dt-in-scope-bindings"><span class="deltaxml-old" style="background:#FF5555">[Definition: The </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">in-scope bindings</span></em><span class="deltaxml-old" style="background:#FF5555"> are a set of name-value pairs, based on </span><em class="glossterm"><a href="#dt-option"><span class="deltaxml-old" style="background:#FF5555">option</span></a></em><span class="deltaxml-old" style="background:#FF5555"> and </span><em class="glossterm"><a href="#dt-variable"><span class="deltaxml-old" style="background:#FF5555">variable</span></a></em><span class="deltaxml-old" style="background:#FF5555"> bindings.]</span></span></p></li></ol></div><p><span class="termdef" id="dt-empty-environment"><span class="deltaxml-old" style="background:#FF5555">[Definition: The </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">empty environment</span></em><span class="deltaxml-old" style="background:#FF5555"> contains no readable ports, an undefined default readable port and no in-scope bindings.]</span></span></p><p><span class="deltaxml-old" style="background:#FF5555">Unless otherwise specified, the environment of a </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-old" style="background:#FF5555">contained step</span></a></em><span class="deltaxml-old" style="background:#FF5555"> is its </span><em class="glossterm"><a href="#dt-inherited-environment"><span class="deltaxml-old" style="background:#FF5555">inherited environment</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span><span class="termdef" id="dt-inherited-environment"><span class="deltaxml-old" style="background:#FF5555">[Definition: The </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">inherited environment</span></em><span class="deltaxml-old" style="background:#FF5555"> of a </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-old" style="background:#FF5555">contained step</span></a></em><span class="deltaxml-old" style="background:#FF5555"> is an environment that is the same as the environment of its </span><em class="glossterm"><a href="#dt-container"><span class="deltaxml-old" style="background:#FF5555">container</span></a></em><span class="deltaxml-old" style="background:#FF5555"> with the </span><a href="#dt-standard-modifications"><span class="deltaxml-old" style="background:#FF5555">standard modifications</span></a><span class="deltaxml-old" style="background:#FF5555">. ]</span></span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><span id="dt-standard-modifications"><span class="deltaxml-old" style="background:#FF5555">standard modifications</span></span><span class="deltaxml-old" style="background:#FF5555"> made to an inherited environment are:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-old" style="background:#FF5555">The declared inputs of the container are added to the </span><em class="glossterm"><a href="#dt-readable-ports"><span class="deltaxml-old" style="background:#FF5555">readable ports</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">In other words, contained steps can see the inputs to their container.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">The union of all the declared outputs of all of the step's sibling steps are added to the </span><em class="glossterm"><a href="#dt-readable-ports"><span class="deltaxml-old" style="background:#FF5555">readable ports</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">In other words, sibling steps can see each other's outputs in addition to the outputs visible to their container.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">If there is a preceding sibling step element:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">If that preceding sibling has a </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-old" style="background:#FF5555">primary output port</span></a></em><span class="deltaxml-old" style="background:#FF5555">, then that output port becomes the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-old" style="background:#FF5555">default readable port</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Otherwise, the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-old" style="background:#FF5555">default readable port</span></a></em><span class="deltaxml-old" style="background:#FF5555"> is undefined.</span></p></li></ul></div></li><li><p><span class="deltaxml-old" style="background:#FF5555">If there </span><em><span class="deltaxml-old" style="background:#FF5555">is not</span></em><span class="deltaxml-old" style="background:#FF5555"> a preceding sibling step element: </span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">If the container has a </span><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-old" style="background:#FF5555">primary input port</span></a></em><span class="deltaxml-old" style="background:#FF5555">, the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-old" style="background:#FF5555">default readable port</span></a></em><span class="deltaxml-old" style="background:#FF5555"> is that </span><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-old" style="background:#FF5555">primary input port</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Otherwise, the default readable port is unchanged.</span></p></li></ul></div></li><li><p><span class="deltaxml-old" style="background:#FF5555">The names and values from each </span><a href="#p.variable"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:variable</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> present at the beginning of the container are added, in document order, to the </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-old" style="background:#FF5555">in-scope bindings</span></a></em><span class="deltaxml-old" style="background:#FF5555">. A new binding replaces an old binding with the same name. See </span><a href="#p.variable" title="p:variable"><span class="deltaxml-old" style="background:#FF5555">Section 5.7.1, “p:variable”</span></a><span class="deltaxml-old" style="background:#FF5555"> for the specification of variable evaluation.</span></p></li></ol></div><p><span class="deltaxml-old" style="background:#FF5555">A step with no parent inherits the </span><em class="glossterm"><a href="#dt-empty-environment"><span class="deltaxml-old" style="background:#FF5555">empty environment</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p></div><div class="section"><h4><a name="xpath-context" id="xpath-context"></a><span class="deltaxml-old" style="background:#FF5555">2.6 XPaths in XProc</span></h4><p><span class="deltaxml-old" style="background:#FF5555">XProc uses XPath as an expression language. XPath expressions are evaluated by the XProc processor in several places: on compound steps, to compute the default values of options and the values of variables; on atomic steps, to compute the actual values of options and the values of parameters.</span></p><p><span class="deltaxml-old" style="background:#FF5555">XPath expressions are also passed to some steps. These expressions are evaluated by the implementations of the individual steps.</span></p><p><span class="deltaxml-old" style="background:#FF5555">This distinction can be seen in the following example:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:variable name="home" select="'http://example.com/docs'"/&gt; &lt;p:load name="read-from-home"&gt; &lt;p:with-option name="href" select="concat($home,'/document.xml')"/&gt; &lt;/p:load&gt; &lt;p:split-sequence name="select-chapters" test="@role='chapter'"&gt; &lt;p:input port="source" select="//section"/&gt; &lt;/p:split-sequence&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">The select expression on the variable “</span><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">home</span></tt><span class="deltaxml-old" style="background:#FF5555">” is evaluated by the XProc processor. The value of the variable is “</span><tt class="uri"><span class="deltaxml-old" style="background:#FF5555">http://example.com/docs</span></tt><span class="deltaxml-old" style="background:#FF5555">”.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">href</span></tt><span class="deltaxml-old" style="background:#FF5555"> option of the </span><a href="#c.load"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:load</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step is evaluated by the XProc processor. The actual </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">href</span></tt><span class="deltaxml-old" style="background:#FF5555"> option received by the step is simply the string literal “</span><tt class="uri"><span class="deltaxml-old" style="background:#FF5555">http://example.com/docs/document.xml</span></tt><span class="deltaxml-old" style="background:#FF5555">”. (The select expression on the </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> input of the </span><a href="#c.split-sequence"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:split-sequence</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step is also evaluated by the XProc processor.) </span></p><p><span class="deltaxml-old" style="background:#FF5555">The XPath expression “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">@role='chapter'</span></tt><span class="deltaxml-old" style="background:#FF5555">” is passed literally to the </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">test</span></tt><span class="deltaxml-old" style="background:#FF5555"> option on the </span><a href="#c.split-sequence"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:split-sequence</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step. That's because the nature of the </span><a href="#c.split-sequence"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:split-sequence</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> is that </span><em><span class="deltaxml-old" style="background:#FF5555">it evaluates</span></em><span class="deltaxml-old" style="background:#FF5555"> the expression. Only some options on some steps expect XPath expressions. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The XProc processor evaluates all of the XPath expressions in </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> attributes on variables, options, parameters, and inputs, in </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> attributes on </span><a href="#p.viewport"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, and in </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">test</span></tt><span class="deltaxml-old" style="background:#FF5555"> attributes on </span><a href="#p.when"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:when</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> steps.</span></p><div class="section"><h5><a name="xproc-xpath-context-20" id="xproc-xpath-context-20"></a><span class="deltaxml-old" style="background:#FF5555">2.6.1 Processor XPath Context</span></h5><p><span class="deltaxml-old" style="background:#FF5555">When the XProc processor evaluates an XPath expression using XPath, unless otherwise indicated by a particular step, it does so with the following static context:</span></p><div class="variablelist"><dl><dt><span class="deltaxml-old" style="background:#FF5555">XPath 1.0 compatibility mode</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">False</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Statically known namespaces</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The namespace declarations in-scope for the containing element. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Default element/type namespace</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The null namespace.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Default function namespace</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The [</span><a href="#xpath2"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XPath 2.0</span></span></a><span class="deltaxml-old" style="background:#FF5555">] function namespace. Function names that do not contain a colon always refer to the default function namespace, any in-scope binding for the default namespace </span><em><span class="deltaxml-old" style="background:#FF5555">does not</span></em><span class="deltaxml-old" style="background:#FF5555"> apply. This specification does not provide a mechanism to override the default function namespace.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">In-scope schema definitions</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">A basic XPath 2.0 XProc processor includes the following named type definitions in its in-scope schema definitions:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">All the primitive atomic types defined in [</span><a href="#xmlschema-2"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">W3C XML Schema: Part 2</span></span></a><span class="deltaxml-old" style="background:#FF5555">], with the exception of </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:NOTATION</span></tt><span class="deltaxml-old" style="background:#FF5555">. That is: </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:decimal</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:double</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:float</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:date</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:time</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:dateTime</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:duration</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:QName</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:anyURI</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:gDay</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:gMonthDay</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:gMonth</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:gYearMonth</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:gYear</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:base64Binary</span></tt><span class="deltaxml-old" style="background:#FF5555">, and </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:hexBinary</span></tt><span class="deltaxml-old" style="background:#FF5555">. </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">The derived atomic type </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:integer</span></tt><span class="deltaxml-old" style="background:#FF5555"> defined in [</span><a href="#xmlschema-2"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">W3C XML Schema: Part 2</span></span></a><span class="deltaxml-old" style="background:#FF5555">]. </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">The types </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:anyType</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:anySimpleType</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:yearMonthDuration</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:dayTimeDuration</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:anyAtomicType</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:untyped</span></tt><span class="deltaxml-old" style="background:#FF5555">, and </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:untypedAtomic</span></tt><span class="deltaxml-old" style="background:#FF5555"> defined in [</span><a href="#xpath-datamodel"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XQuery 1.0 and XPath 2.0 Data Model (XDM)</span></span></a><span class="deltaxml-old" style="background:#FF5555">]. </span></p></li></ul></div></dd><dt><span class="deltaxml-old" style="background:#FF5555">In-scope variables</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The union of the in-scope </span><em class="glossterm"><a href="#dt-specified-options"><span class="deltaxml-old" style="background:#FF5555">specified options</span></a></em><span class="deltaxml-old" style="background:#FF5555"> and variables are available as variable bindings to the XPath processor. </span></p><div class="admonition"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">An option that has neither a specified value nor a default value will not appear as an in-scope variable. Consequently, an attempt to refer to that variable will raise an error.</span></p></div></dd><dt><span class="deltaxml-old" style="background:#FF5555">Context item static type</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Document.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Function signatures</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The signatures of the [</span><a href="#xpath-functions"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XPath 2.0 Functions and Operators</span></span></a><span class="deltaxml-old" style="background:#FF5555">] and the </span><a href="#xpath-extension-functions" title="XPath Extension Functions"><span class="deltaxml-old" style="background:#FF5555">Section 2.7, “XPath Extension Functions”</span></a><span class="deltaxml-old" style="background:#FF5555">. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Statically known collations</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Implementation-defined but </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> include the Unicode code point collation. </span><a name="impl-10"></a><span class="deltaxml-old" style="background:#FF5555">The version of Unicode supported is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">, but it is recommended that the most recent version of Unicode be used. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Default collation</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Unicode code point collation.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Base URI</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The base URI of the element on which the expression occurs.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Statically known documents</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">None.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Statically known collections</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">None.</span></p></dd></dl></div><p><span class="deltaxml-old" style="background:#FF5555">And the following dynamic context:</span></p><div class="variablelist"><dl><dt><span class="deltaxml-old" style="background:#FF5555">context item</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The document node of a document. The document is either specified with a </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-old" style="background:#FF5555">connection</span></a></em><span class="deltaxml-old" style="background:#FF5555"> or is taken from the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-old" style="background:#FF5555">default readable port</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span><a name="err.inline.D0008"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0008"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0008</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if a document sequence appears where a document to be used as the context node is expected. </span></p><p><span class="deltaxml-old" style="background:#FF5555">If there is no explicit connection and there is no default readable port then the context node is undefined.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">context position and context size</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The context position and context size are both “1”. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Variable values</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The union of the in-scope options and variables are available as variable bindings to the XPath processor. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Function implementations</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The [</span><a href="#xpath-functions"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XPath 2.0 Functions and Operators</span></span></a><span class="deltaxml-old" style="background:#FF5555">] and the </span><a href="#xpath-extension-functions" title="XPath Extension Functions"><span class="deltaxml-old" style="background:#FF5555">Section 2.7, “XPath Extension Functions”</span></a><span class="deltaxml-old" style="background:#FF5555">. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Current dateTime</span></dt><dd><p><a name="impl-11"></a><span class="deltaxml-old" style="background:#FF5555">The point in time returned as the current dateTime is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Implicit timezone</span></dt><dd><p><a name="impl-12"></a><span class="deltaxml-old" style="background:#FF5555">The implicit timezone is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Available documents</span></dt><dd><p><a name="impl-13"></a><span class="deltaxml-old" style="background:#FF5555">The set of available documents (those that may be retrieved with a URI) is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Available collections</span></dt><dd><p><a name="impl-14"></a><span class="deltaxml-old" style="background:#FF5555">The set of available collections is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Default collection</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">None. </span></p></dd></dl></div></div><div class="section"><h5><a name="step-xpath-context-20" id="step-xpath-context-20"></a><span class="deltaxml-old" style="background:#FF5555">2.6.2 Step XPath Context</span></h5><p><span class="deltaxml-old" style="background:#FF5555">When a step evaluates an XPath expression using XPath 2.0, unless otherwise indicated by a particular step, it does so with the following static context:</span></p><div class="variablelist"><dl><dt><span class="deltaxml-old" style="background:#FF5555">XPath 1.0 compatibility mode</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">False</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Statically known namespaces</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The namespace declarations in-scope for the containing element or made available through </span><a href="#p.namespaces"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:namespaces</span></tt></a><span class="deltaxml-old" style="background:#FF5555">. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Default element/type namespace</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The null namespace.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Default function namespace</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The [</span><a href="#xpath2"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XPath 2.0</span></span></a><span class="deltaxml-old" style="background:#FF5555">] function namespace. Function names that do not contain a colon always refer to the default function namespace, any in-scope binding for the default namespace </span><em><span class="deltaxml-old" style="background:#FF5555">does not</span></em><span class="deltaxml-old" style="background:#FF5555"> apply. This specification does not provide a mechanism to override the default function namespace.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">In-scope schema definitions</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The same as the </span><a href="#xproc-xpath-context-20" title="Processor XPath Context"><span class="deltaxml-old" style="background:#FF5555">Section 2.6.1, “Processor XPath Context”</span></a><span class="deltaxml-old" style="background:#FF5555">. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">In-scope variables</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">None, unless otherwise specified by the step. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Context item static type</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Document.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Function signatures</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The signatures of the [</span><a href="#xpath-functions"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XPath 2.0 Functions and Operators</span></span></a><span class="deltaxml-old" style="background:#FF5555">].</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Statically known collations</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Implementation-defined but </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> include the Unicode code point collation.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Default collation</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Unicode code point collation.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Base URI</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The base URI of the element on which the expression occurs.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Statically known documents</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">None.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Statically known collections</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">None.</span></p></dd></dl></div><p><span class="deltaxml-old" style="background:#FF5555">And the following initial dynamic context:</span></p><div class="variablelist"><dl><dt><span class="deltaxml-old" style="background:#FF5555">context item</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The document node of the document that appears on the primary input of the step, unless otherwise specified by the step.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">context position and context size</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The context position and context size are both “1”, unless otherwise specified by the step. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Variable values</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">None, unless otherwise specified by the step. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Function implementations</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The [</span><a href="#xpath-functions"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XPath 2.0 Functions and Operators</span></span></a><span class="deltaxml-old" style="background:#FF5555">]. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Current dateTime</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">An implementation-defined point in time. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Implicit timezone</span></dt><dd><p><a name="impl-15"></a><span class="deltaxml-old" style="background:#FF5555">The implicit timezone is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Available documents</span></dt><dd><p><a name="impl-16"></a><span class="deltaxml-old" style="background:#FF5555">The set of available documents (those that may be retrieved with a URI) is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Available collections</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">None. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Default collection</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">None. </span></p></dd></dl></div><div class="admonition"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">Some steps may also provide for implementation-defined or implementation-dependent amendments to the contexts. Those amendments are in addition to any specified by XProc.</span></p></div></div></div><div class="section"><h4><a name="xpath-extension-functions" id="xpath-extension-functions"></a><span class="deltaxml-old" style="background:#FF5555">2.7 XPath Extension Functions</span></h4><p><span class="deltaxml-old" style="background:#FF5555">The XProc processor </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> support the additional functions described in this section in XPath expressions evaluated by the processor.</span></p><div class="section"><h5><a name="f.system-property" id="f.system-property"></a><span class="deltaxml-old" style="background:#FF5555">2.7.1 System Properties</span></h5><p><span class="deltaxml-old" style="background:#FF5555">XPath expressions within a pipeline document can interrogate the processor for information about the current state of the pipeline. Various aspects of the processor are exposed through the </span><a href="#f.system-property"><tt class="function"><span class="deltaxml-old" style="background:#FF5555">p:system-property</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> function in the pipeline namespace:</span></p><div class="funcsynopsis"><span class="funcname"><span class="deltaxml-old" style="background:#FF5555">p:system-property</span></span><span class="funcparen"><span class="deltaxml-old" style="background:#FF5555">(</span></span><span class="paramname"><span class="deltaxml-old" style="background:#FF5555">$property</span></span><span class="typeas"><span class="deltaxml-old" style="background:#FF5555"> as </span></span><span class="type"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></span><span class="funcparen"><span class="deltaxml-old" style="background:#FF5555">)</span></span><span class="typeas"><span class="deltaxml-old" style="background:#FF5555"> as </span></span><span class="type"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></span></div><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">$property</span></tt><span class="deltaxml-old" style="background:#FF5555"> string must have the form of a </span><a href="http://www.w3.org/TR/xml-names/#NT-QName"><span class="deltaxml-old" style="background:#FF5555">QName</span></a><span class="deltaxml-old" style="background:#FF5555">; the QName is expanded into a name using the namespace declarations in scope for the expression. </span><a name="err.inline.D0015"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0015"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0015</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the specified QName cannot be resolved with the in-scope namespace declarations. The </span><a href="#f.system-property"><tt class="function"><span class="deltaxml-old" style="background:#FF5555">p:system-property</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> function returns the string representing the value of the system property identified by the QName. If there is no such property, the empty string </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be returned.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Implementations </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> provide the following system properties, which are all in the XProc namespace:</span></p><div class="variablelist"><dl><dt><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">p:episode</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Returns a string which </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> be unique for each invocation of the pipeline processor. In other words, if a processor is run several times in succession, or if several processors are running simultaneously, each invocation of each processor should get a distinct value from </span><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">p:episode</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The unique identifier must be a valid </span><a href="http://www.w3.org/TR/XML#NT-Name"><span class="deltaxml-old" style="background:#FF5555">XML name</span></a><span class="deltaxml-old" style="background:#FF5555">. </span></p></dd><dt><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">p:language</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Returns a string which identifies the current language, for example, for message localization purposes. </span><a name="impl-17"></a><span class="deltaxml-old" style="background:#FF5555">The exact format of the language string is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555"> but </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> be consistent with the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">xml:lang</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute.</span></p></dd><dt><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">p:product-name</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Returns a string containing the name of the implementation, as defined by the implementer. This should normally remain constant from one release of the product to the next. It should also be constant across platforms in cases where the same source code is used to produce compatible products for multiple execution platforms.</span></p></dd><dt><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">p:product-version</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Returns a string identifying the version of the implementation, as defined by the implementer. This should normally vary from one release of the product to the next, and at the discretion of the implementer it may also vary across different execution platforms. </span></p></dd><dt><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">p:vendor</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Returns a string which identifies the vendor of the processor.</span></p></dd><dt><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">p:vendor-uri</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Returns a URI which identifies the vendor of the processor. Often, this is the URI of the vendor's web site.</span></p></dd><dt><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">p:version</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Returns the version(s) of XProc implemented by the processor as a space-separated list. For example, a processor that supports XProc 1.0 would return “1.0”; a processor that supports XProc 1.0 and 2.0 would return “1.0 2.0”; a processor that supports only XProc 2.0 would return “2.0”.</span></p></dd><dt><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">p:xpath-version</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Returns the version(s) of XPath implemented by the processor for evaluating XPath expressions on XProc elements. The result is a space-separated list of versions supported. For example, a processor that only supports XPath 2.0 would return “2.0”; a processor that supports XPath 2.0 and XPath 3.0 could return “2.0 3.0”; a processor that supports only XPath 2.0 would return “2.0”.</span></p></dd><dt><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">p:psvi-supported</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Returns true if the implementation supports passing PSVI annotations between steps, false otherwise.</span></p></dd></dl></div><p><span class="deltaxml-old" style="background:#FF5555">Implementations may support additional system properties but such properties </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be in a namespace and </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must not</span></span><span class="deltaxml-old" style="background:#FF5555"> be in the XProc namespace.</span></p></div><div class="section"><h5><a name="f.step-available" id="f.step-available"></a><span class="deltaxml-old" style="background:#FF5555">2.7.2 Step Available</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><a href="#f.step-available"><tt class="function"><span class="deltaxml-old" style="background:#FF5555">p:step-available</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> function reports whether or not a particular type of step is understood by the processor.</span></p><div class="funcsynopsis"><span class="funcname"><span class="deltaxml-old" style="background:#FF5555">p:step-available</span></span><span class="funcparen"><span class="deltaxml-old" style="background:#FF5555">(</span></span><span class="paramname"><span class="deltaxml-old" style="background:#FF5555">$step-name</span></span><span class="typeas"><span class="deltaxml-old" style="background:#FF5555"> as </span></span><span class="type"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></span><span class="funcparen"><span class="deltaxml-old" style="background:#FF5555">)</span></span><span class="typeas"><span class="deltaxml-old" style="background:#FF5555"> as </span></span><span class="type"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></span></div><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">$step-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> string </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> have the form of a QName; the QName is expanded into a name using the namespace declarations in-scope for the expression. The </span><a href="#f.step-available"><tt class="function"><span class="deltaxml-old" style="background:#FF5555">p:step-available</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> function returns true if and only if the processor knows how to evaluate steps of the specified type.</span></p></div><div class="section"><h5><a name="f.value-available" id="f.value-available"></a><span class="deltaxml-old" style="background:#FF5555">2.7.3 Value Available</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><a href="#f.value-available"><tt class="function"><span class="deltaxml-old" style="background:#FF5555">p:value-available</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> function reports whether or not a particular in-scope option has a value.</span></p><div class="funcsynopsis"><span class="funcname"><span class="deltaxml-old" style="background:#FF5555">p:value-available</span></span><span class="funcparen"><span class="deltaxml-old" style="background:#FF5555">(</span></span><span class="paramname"><span class="deltaxml-old" style="background:#FF5555">$option-name</span></span><span class="typeas"><span class="deltaxml-old" style="background:#FF5555"> as </span></span><span class="type"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></span><span class="funcparen"><span class="deltaxml-old" style="background:#FF5555">)</span></span><span class="typeas"><span class="deltaxml-old" style="background:#FF5555"> as </span></span><span class="type"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></span></div><div class="funcsynopsis"><span class="funcname"><span class="deltaxml-old" style="background:#FF5555">p:value-available</span></span><span class="funcparen"><span class="deltaxml-old" style="background:#FF5555">(</span></span><span class="paramname"><span class="deltaxml-old" style="background:#FF5555">$option-name</span></span><span class="typeas"><span class="deltaxml-old" style="background:#FF5555"> as </span></span><span class="type"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></span><span class="funccomma"><span class="deltaxml-old" style="background:#FF5555">, </span></span><span class="paramname"><span class="deltaxml-old" style="background:#FF5555">$fail-if-unknown</span></span><span class="typeas"><span class="deltaxml-old" style="background:#FF5555"> as </span></span><span class="type"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></span><span class="funcparen"><span class="deltaxml-old" style="background:#FF5555">)</span></span><span class="typeas"><span class="deltaxml-old" style="background:#FF5555"> as </span></span><span class="type"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></span></div><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">$option-name</span></tt><span class="deltaxml-old" style="background:#FF5555"> string </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> have the form of a QName; the QName is expanded into a name using the namespace declarations in-scope for the expression. The </span><a href="#f.value-available"><tt class="function"><span class="deltaxml-old" style="background:#FF5555">p:value-available</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> function returns true if and only if the name specified is the name of an </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-old" style="background:#FF5555">in-scope binding</span></a></em><span class="deltaxml-old" style="background:#FF5555"> and the binding has a value. </span><a name="err.inline.D0033"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0033"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0033</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the name specified is not the name of an in-scope option or variable.</span></p><p><span class="deltaxml-old" style="background:#FF5555">In the two-argument form, it is not an error to specify a name that is not the name of an in-scope option or variable if </span><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">$fail-if-unknown</span></tt><span class="deltaxml-old" style="background:#FF5555"> is false; the function simply returns false. The semantics of the two-argument form when </span><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">$fail-if-unknown</span></tt><span class="deltaxml-old" style="background:#FF5555"> is true are precisely the same as the single argument form.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Consider the following example:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step type="ex:dir-list"&gt; &lt;p:output port="result"/&gt; &lt;p:option name="path"/&gt; &lt;p:choose&gt; &lt;p:when test="p:value-available('path')"&gt; &lt;p:directory-list&gt; &lt;p:with-option name="path" select="$path"/&gt; &lt;/p:directory-list&gt; &lt;/p:when&gt; &lt;p:otherwise&gt; &lt;p:directory-list path="."/&gt; &lt;/p:otherwise&gt; &lt;/p:choose&gt; &lt;/p:declare-step&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">path</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is specified in the call to </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">ex:dir-list</span></tt><span class="deltaxml-old" style="background:#FF5555">, then the first </span><a href="#p.when"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:when</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> clause will be evaluated and the specified value will be used. If the option is not specified, then the </span><a href="#p.otherwise"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:otherwise</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> clause will be evaluated and "</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">.</span></tt><span class="deltaxml-old" style="background:#FF5555">" will be used instead.</span></p></div><div class="section"><h5><a name="f.iteration-position" id="f.iteration-position"></a><span class="deltaxml-old" style="background:#FF5555">2.7.4 Iteration Position</span></h5><p><span class="deltaxml-old" style="background:#FF5555">Both </span><a href="#p.for-each"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#p.viewport"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> process a sequence of documents. The iteration position is the position of the current document in that sequence: the first document has position 1, the second 2, etc. The </span><a href="#f.iteration-position"><tt class="function"><span class="deltaxml-old" style="background:#FF5555">p:iteration-position</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> function returns the iteration position of the nearest ancestor </span><a href="#p.for-each"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#p.viewport"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><div class="funcsynopsis"><span class="funcname"><span class="deltaxml-old" style="background:#FF5555">p:iteration-position</span></span><span class="funcparen"><span class="deltaxml-old" style="background:#FF5555">(</span></span><span class="funcparen"><span class="deltaxml-old" style="background:#FF5555">)</span></span><span class="typeas"><span class="deltaxml-old" style="background:#FF5555"> as </span></span><span class="type"><span class="deltaxml-old" style="background:#FF5555">xs:integer</span></span></div><p><span class="deltaxml-old" style="background:#FF5555">If there is no </span><a href="#p.for-each"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#p.viewport"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> among the ancestors of the element on which the expression involving </span><a href="#f.iteration-position"><tt class="function"><span class="deltaxml-old" style="background:#FF5555">p:iteration-position</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> occurs, it returns 1.</span></p></div><div class="section"><h5><a name="f.iteration-size" id="f.iteration-size"></a><span class="deltaxml-old" style="background:#FF5555">2.7.5 Iteration Size</span></h5><p><span class="deltaxml-old" style="background:#FF5555">Both </span><a href="#p.for-each"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#p.viewport"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> process a sequence of documents. The iteration size is the total number of documents in that sequence. The </span><a href="#f.iteration-size"><tt class="function"><span class="deltaxml-old" style="background:#FF5555">p:iteration-size</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> function returns the iteration size of the nearest ancestor </span><a href="#p.for-each"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#p.viewport"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><div class="funcsynopsis"><span class="funcname"><span class="deltaxml-old" style="background:#FF5555">p:iteration-size</span></span><span class="funcparen"><span class="deltaxml-old" style="background:#FF5555">(</span></span><span class="funcparen"><span class="deltaxml-old" style="background:#FF5555">)</span></span><span class="typeas"><span class="deltaxml-old" style="background:#FF5555"> as </span></span><span class="type"><span class="deltaxml-old" style="background:#FF5555">xs:integer</span></span></div><p><span class="deltaxml-old" style="background:#FF5555">If there is no </span><a href="#p.for-each"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#p.viewport"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> among the ancestors of the element on which the expression involving </span><a href="#f.iteration-size"><tt class="function"><span class="deltaxml-old" style="background:#FF5555">p:iteration-size</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> occurs, it returns 1.</span></p></div><div class="section"><h5><a name="f.version-available" id="f.version-available"></a><span class="deltaxml-old" style="background:#FF5555">2.7.6 Version Available</span></h5><p><span class="deltaxml-old" style="background:#FF5555">Returns true if and only if the processor supports the version specified.</span></p><div class="funcsynopsis"><span class="funcname"><span class="deltaxml-old" style="background:#FF5555">p:version-available</span></span><span class="funcparen"><span class="deltaxml-old" style="background:#FF5555">(</span></span><span class="paramname"><span class="deltaxml-old" style="background:#FF5555">$version</span></span><span class="typeas"><span class="deltaxml-old" style="background:#FF5555"> as </span></span><span class="type"><span class="deltaxml-old" style="background:#FF5555">xs:decimal</span></span><span class="funcparen"><span class="deltaxml-old" style="background:#FF5555">)</span></span><span class="typeas"><span class="deltaxml-old" style="background:#FF5555"> as </span></span><span class="type"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></span></div><p><span class="deltaxml-old" style="background:#FF5555">A version 1.0 processor will return </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true()</span></tt><span class="deltaxml-old" style="background:#FF5555"> when </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:version-available(1.0)</span></tt><span class="deltaxml-old" style="background:#FF5555"> is evaluated.</span></p></div><div class="section"><h5><a name="f.xpath-version-available" id="f.xpath-version-available"></a><span class="deltaxml-old" style="background:#FF5555">2.7.7 XPath Version Available</span></h5><p><span class="deltaxml-old" style="background:#FF5555">Returns true if and only if the processor supports the XPath version specified.</span></p><div class="funcsynopsis"><span class="funcname"><span class="deltaxml-old" style="background:#FF5555">p:xpath-version-available</span></span><span class="funcparen"><span class="deltaxml-old" style="background:#FF5555">(</span></span><span class="paramname"><span class="deltaxml-old" style="background:#FF5555">$version</span></span><span class="typeas"><span class="deltaxml-old" style="background:#FF5555"> as </span></span><span class="type"><span class="deltaxml-old" style="background:#FF5555">xs:decimal</span></span><span class="funcparen"><span class="deltaxml-old" style="background:#FF5555">)</span></span><span class="typeas"><span class="deltaxml-old" style="background:#FF5555"> as </span></span><span class="type"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></span></div><p><span class="deltaxml-old" style="background:#FF5555">A processor that supports XPath 2.0 will return </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true()</span></tt><span class="deltaxml-old" style="background:#FF5555"> when </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:xpath-version-available(2.0)</span></tt><span class="deltaxml-old" style="background:#FF5555"> is evaluated.</span></p></div><div class="section"><h5><a name="other-xpath-extension-functions" id="other-xpath-extension-functions"></a><span class="deltaxml-old" style="background:#FF5555">2.7.8 Other XPath Extension Functions</span></h5><p><a name="impl-18"></a><span class="deltaxml-old" style="background:#FF5555">It is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555"> if the processor supports any other XPath extension functions. Additional extension functions, if any, </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must not</span></span><span class="deltaxml-old" style="background:#FF5555"> use any of the XProc namespaces. </span></p></div></div><div class="section"><h4><a name="psvi-support" id="psvi-support"></a><span class="deltaxml-old" style="background:#FF5555">2.8 PSVIs in XProc</span></h4><p><span class="deltaxml-old" style="background:#FF5555">XML documents flow between steps in an XProc pipeline. </span><a href="#infoset-conformance" title="Infoset Conformance"><span class="deltaxml-old" style="background:#FF5555">Section A.3, “Infoset Conformance”</span></a><span class="deltaxml-old" style="background:#FF5555"> identifies the properties of those documents that </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be available. Implementations </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> also have the ability to pass PSVI annotations between steps.</span></p><p><a name="impl-19"></a><span class="deltaxml-old" style="background:#FF5555">Whether or not the pipeline processor supports passing PSVI annotations between steps is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span><a name="impl-20"></a><span class="deltaxml-old" style="background:#FF5555">The exact PSVI properties that are preserved when documents are passed between steps is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">A pipeline can use the </span><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">p:psvi-supported</span></tt><span class="deltaxml-old" style="background:#FF5555"> system property to determine whether or not PSVI properties can be passed between steps.</span></p><p><span class="deltaxml-old" style="background:#FF5555">A pipeline can assert that PSVI support is required with the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">psvi-required</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">On a </span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#p.declare-step"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">psvi-required</span></tt><span class="deltaxml-old" style="background:#FF5555"> indicates whether or not the declared step requires PSVI support. </span><a name="err.inline.D0022"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0022"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0022</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if a processor that does not support PSVI annotations attempts to invoke a step which asserts that they are required.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">On a </span><a href="#p.library"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:library</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">psvi-required</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute provides a default value for all of its </span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#p.declare-step"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt></a><em><span class="deltaxml-old" style="background:#FF5555">children</span></em><span class="deltaxml-old" style="background:#FF5555"> that do not specify a value themselves.</span></p></li></ul></div><p><span class="deltaxml-old" style="background:#FF5555">Many of the steps that an XProc pipeline can use are transformative in nature. The </span><a href="#c.delete"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:delete</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step, for example, can remove elements and attributes; the </span><a href="#c.label-elements"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:label-elements</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step can add attributes; etc. If PSVI annotations were always preserved, the use of such steps could result in documents that were inconsistent with their schema annotations.</span></p><p><span class="deltaxml-old" style="background:#FF5555">In order to avoid these inconsistencies, most steps </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must not</span></span><span class="deltaxml-old" style="background:#FF5555"> produce PSVI annotated results even when PSVI passing is supported.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If PSVI passing is supported, the following constraints apply:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-old" style="background:#FF5555">Implementations </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> faithfully transmit any PSVI properties produced on step outputs to the steps to which they are connected.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">When only a subset of the input is processed by a step (because a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression appears on an input port or a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression is used to process only part of the input), any PSVI annotations that appear on the selected input </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be preserved in the resulting documents passed to the step.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Note that ID/IDREF constraints, and any other whole-document constraints, may not be satisfied within the selected portion, irrespective of what its PSVI properties claim.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">If an output of a compound step is connected to an output which includes PSVI properties, those properties </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be preserved on the output of the compound step, </span><em><span class="deltaxml-old" style="background:#FF5555">except</span></em><span class="deltaxml-old" style="background:#FF5555"> for the output of </span><a href="#p.viewport"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> which </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must not</span></span><span class="deltaxml-old" style="background:#FF5555"> contain any PSVI properties.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">If an implementation supports XPath 2.0, the data model constructed with which to evaluate XPath expressions and match patterns </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> take advantage of as much PSVI information as possible. </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Except as specified above, or in the descriptions of individual steps, implementations </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must not</span></span><span class="deltaxml-old" style="background:#FF5555"> include PSVI properties in the outputs of steps defined by this specification. </span><a name="impl-21"></a><span class="deltaxml-old" style="background:#FF5555">It is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555"> what PSVI properties, if any, are produced by extension steps.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The exceptions in the standard XProc steps are the </span><a href="#c.validate-with-xml-schema"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-xml-schema</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#c.validate-with-relax-ng"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-relax-ng</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, and </span><a href="#c.validate-with-schematron"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-schematron</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> steps, </span><a href="#c.xslt"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xslt</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> (when XSLT 2.0 is used), </span><a href="#c.xquery"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xquery</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#c.identity"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:identity</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, and </span><a href="#c.split-sequence"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:split-sequence</span></tt></a><span class="deltaxml-old" style="background:#FF5555">. </span></p></li></ol></div><div class="admonition"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">A processor that supports passing PSVI properties between steps is always free to do so. Even if </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">psvi-required="false"</span></tt><span class="deltaxml-old" style="background:#FF5555"> is explicitly specified, it is not an error for a step to produce a result that includes additional PSVI properties, provide it does not violate the constraints above.</span></p></div></div><div class="section"><h4><a name="variables" id="variables"></a><span class="deltaxml-old" style="background:#FF5555">2.9 Variables</span></h4><p><span class="deltaxml-old" style="background:#FF5555">Variables are name/value pairs. Pipeline authors can create variables to hold computed values.</span></p><p><span class="termdef" id="dt-variable"><span class="deltaxml-old" style="background:#FF5555">[Definition: A </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">variable</span></em><span class="deltaxml-old" style="background:#FF5555"> is a name/value pair where the name is an </span><a href="http://www.w3.org/TR/REC-xml-names/#dt-expname"><span class="deltaxml-old" style="background:#FF5555">expanded name</span></a><span class="deltaxml-old" style="background:#FF5555"> and the value </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a string or </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">xs:untypedAtomic</span></tt><span class="deltaxml-old" style="background:#FF5555">.]</span></span></p><p><span class="deltaxml-old" style="background:#FF5555">Variables and options share the same scope and may shadow each other. </span></p></div><div class="section"><h4><a name="options" id="options"></a><span class="deltaxml-old" style="background:#FF5555">2.10 Options</span></h4><p><span class="deltaxml-old" style="background:#FF5555">Some steps accept options. Options are name/value pairs, like variables. Unlike variables, the value of an option can be changed by the caller.</span></p><p><span class="termdef" id="dt-option"><span class="deltaxml-old" style="background:#FF5555">[Definition: An </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">option</span></em><span class="deltaxml-old" style="background:#FF5555"> is a name/value pair where the name is an </span><a href="http://www.w3.org/TR/REC-xml-names/#dt-expname"><span class="deltaxml-old" style="background:#FF5555">expanded name</span></a><span class="deltaxml-old" style="background:#FF5555"> and the value </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a string or </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">xs:untypedAtomic</span></tt><span class="deltaxml-old" style="background:#FF5555">.]</span></span></p><p><span class="termdef" id="dt-declared-options"><span class="deltaxml-old" style="background:#FF5555">[Definition: The options declared on a step are its </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">declared options</span></em><span class="deltaxml-old" style="background:#FF5555">.]</span></span><span class="deltaxml-old" style="background:#FF5555"> Option names are always expressed as literal values, pipelines cannot construct option names dynamically. </span></p><p><span class="termdef" id="dt-specified-options"><span class="deltaxml-old" style="background:#FF5555">[Definition: The options on a step which have specified values, either because a </span><a href="#p.with-option"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element specifies a value or because the declaration included a default value, are its </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">specified options</span></em><span class="deltaxml-old" style="background:#FF5555">.]</span></span></p><p><a name="impl-22"></a><span class="deltaxml-old" style="background:#FF5555">How outside values are specified for pipeline options on the pipeline initially invoked by the processor is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">. In other words, the command line options, APIs, or other mechanisms available to specify such options values are outside the scope of this specification.</span></p></div><div class="section"><h4><a name="parameters" id="parameters"></a><span class="deltaxml-old" style="background:#FF5555">2.11 Parameters</span></h4><p><span class="deltaxml-old" style="background:#FF5555">Some steps accept parameters. Parameters are name/value pairs, like variables and options. Unlike variables and options, which have names known in advance to the pipeline, parameters are not declared and their names may be unknown to the pipeline author. Pipelines can dynamically construct sets of parameters. Steps can read dynamically constructed sets on </span><em class="glossterm"><a href="#dt-parameter-input-port"><span class="deltaxml-old" style="background:#FF5555">parameter input ports</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p><p><span class="termdef" id="dt-parameter"><span class="deltaxml-old" style="background:#FF5555">[Definition: A </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">parameter</span></em><span class="deltaxml-old" style="background:#FF5555"> is a name/value pair where the name is an </span><a href="http://www.w3.org/TR/REC-xml-names/#dt-expname"><span class="deltaxml-old" style="background:#FF5555">expanded name</span></a><span class="deltaxml-old" style="background:#FF5555"> and the value </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a string or </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">xs:untypedAtomic</span></tt><span class="deltaxml-old" style="background:#FF5555">.]</span></span></p><p><span class="termdef" id="dt-parameter-input-port"><span class="deltaxml-old" style="background:#FF5555">[Definition: A </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">parameter input port</span></em><span class="deltaxml-old" style="background:#FF5555"> is a distinguished kind of input port which accepts (only) dynamically constructed parameter name/value pairs.]</span></span><span class="deltaxml-old" style="background:#FF5555"> See </span><a href="#parameter-inputs" title="Parameter Inputs"><span class="deltaxml-old" style="background:#FF5555">Section 5.1.2, “Parameter Inputs”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Analogous to </span><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-old" style="background:#FF5555">primary input ports</span></a></em><span class="deltaxml-old" style="background:#FF5555">, steps that have parameter inputs may designate at most one parameter input port as a primary parameter input port.</span></p><p><span class="termdef" id="dt-primary-parameter-input-port"><span class="deltaxml-old" style="background:#FF5555">[Definition: If a step has a parameter input port which is explicitly marked “</span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">primary='true'</span></tt><span class="deltaxml-old" style="background:#FF5555">”, or if it has exactly one parameter input port and that port is </span><em><span class="deltaxml-old" style="background:#FF5555">not</span></em><span class="deltaxml-old" style="background:#FF5555"> explicitly marked “</span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">primary='false'</span></tt><span class="deltaxml-old" style="background:#FF5555">”, then that parameter input port is the </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">primary parameter input port</span></em><span class="deltaxml-old" style="background:#FF5555"> of the step.]</span></span><span class="deltaxml-old" style="background:#FF5555"> If a step has a single parameter input port and that port is explicitly marked “</span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">primary='false'</span></tt><span class="deltaxml-old" style="background:#FF5555">”, or if a step has more than one parameter input port and none is explicitly marked as the primary, then the primary parameter input port of that step is undefined.</span></p><p><a name="impl-23"></a><span class="deltaxml-old" style="background:#FF5555">How outside values are specified for pipeline parameters on the pipeline initially invoked by the processor is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">. In other words, the command line options, APIs, or other mechanisms available to specify such parameter values are outside the scope of this specification.</span></p></div><div class="section"><h4><a name="security-considerations" id="security-considerations"></a><span class="deltaxml-old" style="background:#FF5555">2.12 Security Considerations</span></h4><p><span class="deltaxml-old" style="background:#FF5555">An XProc pipeline may attempt to access arbitrary network resources: steps such as </span><a href="#c.load"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:load</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#c.http-request"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> can attempt to read from an arbitrary URI; steps such as </span><a href="#c.store"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:store</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> can attempt to write to an arbitrary location; </span><a href="#c.exec"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:exec</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> can attempt to execute an arbitrary program. Note, also, that some steps, such as </span><a href="#c.xslt"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xslt</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#c.xquery"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xquery</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, include extension mechanisms which may attempt to execute arbitrary code. </span></p><p><span class="deltaxml-old" style="background:#FF5555">In some environments, it may be inappropriate to provide the XProc pipeline with access to these resources. In a server environment, for example, it may be impractical to allow pipelines to store data. In environments where the pipeline cannot be trusted, allowing the pipeline to access arbitrary resources or execute arbitrary code may be a security risk.</span></p><p><a name="err.inline.D0021"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0021"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0021</span></code></a><span class="deltaxml-old" style="background:#FF5555">) for a pipeline to attempt to access a resource for which it has insufficient privileges or perform a step which is forbidden. </span><a name="impl-24"></a><span class="deltaxml-old" style="background:#FF5555">Which steps are forbidden, what privileges are needed to access resources, and under what circumstances these security constraints apply is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p><p><span class="deltaxml-old" style="background:#FF5555">Steps in a pipeline may call themselves recursively which could result in pipelines which will never terminate.</span></p><p><span class="deltaxml-old" style="background:#FF5555">A conformant XProc processor may limit the resources available to any or all steps in a pipeline. A conformant implementation may raise dynamic errors, or take any other corrective action, for any security problems that it detects.</span></p></div><div class="section"><h4><a name="versioning-considerations" id="versioning-considerations"></a><span class="deltaxml-old" style="background:#FF5555">2.13 Versioning Considerations</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A pipeline author </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> identify the version of XProc for which a particular pipeline was authored by setting the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">version</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute. The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">version</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute can be specified on </span><a href="#p.declare-step"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, or </span><a href="#p.library"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:library</span></tt></a><span class="deltaxml-old" style="background:#FF5555">. If specified, the value of the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">version</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">xs:decimal</span></tt><span class="deltaxml-old" style="background:#FF5555">. </span><a name="err.inline.S0063"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0063"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0063</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the value of the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">version</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is not a </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">xs:decimal</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The version of XProc defined by this specification is “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">1.0</span></tt><span class="deltaxml-old" style="background:#FF5555">”.</span></p><p><span class="deltaxml-old" style="background:#FF5555">A pipeline author </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> identify the version of XProc on the document element of a pipeline document. </span><a name="err.inline.S0062"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0062"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0062</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if a required </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">version</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is not present.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The version identified applies to the element on which the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">version</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute appears and all of its descendants, unless or until another version is explicitly identified.</span></p><p><span class="deltaxml-old" style="background:#FF5555">When a processor encounters an explicit version (other than a version which it implements), it proceeds in backwards- or forwards-compatible mode. </span></p><div class="section"><h5><a name="vers-backcomp" id="vers-backcomp"></a><span class="deltaxml-old" style="background:#FF5555">2.13.1 Backwards-compatible Mode</span></h5><p><span class="deltaxml-old" style="background:#FF5555">If the processor encounters a request for a previous version of XProc (e.g., if a "2.0" processor encounters an explicit request for the "1.0" language), it </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> process the pipeline as if it was a processor for the requested version: it </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> enforce the semantics of the requested version, it </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> report steps not known in that version as errors, etc. </span><a name="err.inline.S0060"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0060"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0060</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the processor encounters an explicit request for a previous version of the language and it is unable to process the pipeline using those semantics.</span></p></div><div class="section"><h5><a name="vers-forwcomp" id="vers-forwcomp"></a><span class="deltaxml-old" style="background:#FF5555">2.13.2 Forwards-compatible Mode</span></h5><p><span class="deltaxml-old" style="background:#FF5555">If the processor encounters an explicit version which it does not recognize, it processes the pipeline in forwards-compatible mode. Forwards-compatible mode relaxes several static errors, turning them into dynamic errors so that a pipeline author can write a pipeline which conditionally uses new language features.</span></p><p><span class="deltaxml-old" style="background:#FF5555">In forwards-compatible mode:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-old" style="background:#FF5555">On any element in the XProc namespace, unrecognized attributes (other than extension attributes) are ignored.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">On any step in the XProc namespace, unknown options are ignored. </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">If a step in the XProc namespace includes an unknown input port with an explicit connection, the connection is treated normally for the purpose of computing the dependencies in the pipeline but it is otherwise ignored. Unknown input ports </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must not</span></span><span class="deltaxml-old" style="background:#FF5555"> be treated as </span><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-old" style="background:#FF5555">primary input ports</span></a></em><span class="deltaxml-old" style="background:#FF5555">; it will always be an error if they are used but not explicitly connected. </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">If a step in the pipeline includes an explicit connection to an unknown output port on a step in the XProc namespace, the connection is treated normally for the purpose of computing the dependencies in the pipeline. An empty sequence of documents </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> appear on that connection. </span></p></li></ol></div><p><span class="deltaxml-old" style="background:#FF5555">As a consequence of the rules above, future specifications </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must not</span></span><span class="deltaxml-old" style="background:#FF5555"> change the semantics of existing step types without changing their names. Although they may add new input and output ports, such changes should be done with care; they </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> in some sense be limited to ancillary inputs and outputs and they </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must not</span></span><span class="deltaxml-old" style="background:#FF5555"> be </span><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-old" style="background:#FF5555">primary input ports</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p><div class="section"><h6><a name="vers-forwcomp-ex" id="vers-forwcomp-ex"></a><span class="deltaxml-old" style="background:#FF5555">2.13.2.1 Examples</span></h6><p><span class="deltaxml-old" style="background:#FF5555">In forwards-compatible mode, it is not a static error to encounter the following step:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:string-replace match="div/@class" replace="newclass"&gt; &lt;p:input port="ancillary"&gt; &lt;p:document href="doc.xml"/&gt; &lt;/p:input&gt; &lt;/p:string-replace&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">The processor will simply ignore the “</span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">ancillary</span></tt><span class="deltaxml-old" style="background:#FF5555">” port. </span></p><p><span class="deltaxml-old" style="background:#FF5555">Suppose that XProc version 2.0 changes the definition of the </span><a href="#c.xslt"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xslt</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step so that it has an additional output port, </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">messages</span></tt><span class="deltaxml-old" style="background:#FF5555">. Then consider the following pipeline: </span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:pipeline xmlns:p="http://www.w3.org/ns/xproc" version="2.0"&gt; &lt;p:xslt name="style"&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="style.xsl"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;p:sink/&gt; &lt;p:count&gt; &lt;p:input port="source"&gt; &lt;p:pipe step="style" port="messages"/&gt; &lt;/p:input&gt; &lt;/p:count&gt; &lt;/p:pipeline&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">When run by a "2.0" or later processor, it will count the documents that appear on the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">messages</span></tt><span class="deltaxml-old" style="background:#FF5555"> port. When run by a “1.0” processor in forwards-compatible mode, the binding to the “</span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">messages</span></tt><span class="deltaxml-old" style="background:#FF5555">” port is not a static error. Dynamically, the "1.0" processor will always produce a count of zero, because an empty sequence of documents will always appear on the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">messages</span></tt><span class="deltaxml-old" style="background:#FF5555"> port.</span></p></div></div></div></div><div class="section"><h3><a name="syntax" id="syntax"></a><span class="deltaxml-old" style="background:#FF5555">3 Syntax Overview</span></h3><p><span class="deltaxml-old" style="background:#FF5555">This section describes the normative XML syntax of XProc. This syntax is sufficient to represent all the aspects of a pipeline, as set out in the preceding sections. </span><span class="termdef" id="dt-XML"><span class="deltaxml-old" style="background:#FF5555">[Definition: XProc is intended to work equally well with [</span><a href="#xml10"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XML 1.0</span></span></a><span class="deltaxml-old" style="background:#FF5555">] and [</span><a href="#xml11"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XML 1.1</span></span></a><span class="deltaxml-old" style="background:#FF5555">]. Unless otherwise noted, the term “</span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">XML</span></em><span class="deltaxml-old" style="background:#FF5555">” refers equally to both versions.]</span></span><span class="termdef" id="dt-Namespaces-in-XML"><span class="deltaxml-old" style="background:#FF5555">[Definition: Unless otherwise noted, the term </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">Namespaces in XML</span></em><span class="deltaxml-old" style="background:#FF5555"> refers equally to [</span><a href="#xmlns10"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Namespaces 1.0</span></span></a><span class="deltaxml-old" style="background:#FF5555">] and [</span><a href="#xmlns11"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Namespaces 1.1</span></span></a><span class="deltaxml-old" style="background:#FF5555">].]</span></span><a name="impl-25"></a><span class="deltaxml-old" style="background:#FF5555">Support for pipeline documents written in XML 1.1 and pipeline inputs and outputs that use XML 1.1 is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p><p><span class="deltaxml-old" style="background:#FF5555">Elements in a pipeline document represent the pipeline, the steps it contains, the connections between those steps, the steps and connections contained within them, and so on. Each step is represented by an element; a combination of elements and attributes specify how the inputs and outputs of each step are connected and how options and parameters are passed.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Conceptually, we can speak of steps as objects that have inputs and outputs, that are connected together and which may contain additional steps. Syntactically, we need a mechanism for specifying these relationships.</span></p><p><em class="glossterm"><a href="#dt-container"><span class="deltaxml-old" style="background:#FF5555">Containment</span></a></em><span class="deltaxml-old" style="background:#FF5555"> is represented naturally using nesting of XML elements. If a particular element identifies a </span><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-old" style="background:#FF5555">compound step</span></a></em><span class="deltaxml-old" style="background:#FF5555"> then the step elements that are its immediate children form its </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The connections between steps are expressed using names and references to those names.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Six kinds of things are named in XProc:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><span class="deltaxml-old" style="background:#FF5555"> Step types, </span></li><li><span class="deltaxml-old" style="background:#FF5555"> Steps, </span></li><li><span class="deltaxml-old" style="background:#FF5555"> Input ports (both parameter and document), </span></li><li><span class="deltaxml-old" style="background:#FF5555"> Output ports, </span></li><li><span class="deltaxml-old" style="background:#FF5555"> Options and variables, and </span></li><li><span class="deltaxml-old" style="background:#FF5555"> Parameters </span></li></ol></div><div class="section"><h4><a name="namespaces" id="namespaces"></a><span class="deltaxml-old" style="background:#FF5555">3.1 XProc Namespaces</span></h4><p><span class="deltaxml-old" style="background:#FF5555">There are three namespaces associated with XProc:</span></p><div class="variablelist"><dl><dt><tt class="uri"><span class="deltaxml-old" style="background:#FF5555">http://www.w3.org/ns/xproc</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The namespace of the XProc XML vocabulary described by this specification; by convention, the namespace prefix “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">p:</span></tt><span class="deltaxml-old" style="background:#FF5555">” is used for this namespace.</span></p></dd><dt><tt class="uri"><span class="deltaxml-old" style="background:#FF5555">http://www.w3.org/ns/xproc-step</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The namespace used for documents that are inputs to and outputs from several standard and optional steps described in this specification. Some steps, such as </span><a href="#c.http-request"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#c.store"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:store</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, have defined input or output vocabularies. We use this namespace for all of those documents. The conventional prefix “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">c:</span></tt><span class="deltaxml-old" style="background:#FF5555">” is used for this namespace.</span></p></dd><dt><tt class="uri"><span class="deltaxml-old" style="background:#FF5555">http://www.w3.org/ns/xproc-error</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The namespace used for errors. The conventional prefix “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">err:</span></tt><span class="deltaxml-old" style="background:#FF5555">” is used for this namespace. </span></p></dd></dl></div><p><span class="deltaxml-old" style="background:#FF5555">This specification also makes use of the prefix “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xs:</span></tt><span class="deltaxml-old" style="background:#FF5555">” to refer to the [</span><a href="#xmlschema-1"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">W3C XML Schema: Part 1</span></span></a><span class="deltaxml-old" style="background:#FF5555">] namespace </span><tt class="uri"><span class="deltaxml-old" style="background:#FF5555">http://www.w3.org/2001/XMLSchema</span></tt><span class="deltaxml-old" style="background:#FF5555">. </span></p></div><div class="section"><h4><a name="scoping" id="scoping"></a><span class="deltaxml-old" style="background:#FF5555">3.2 Scoping of Names</span></h4><p><span class="deltaxml-old" style="background:#FF5555">Names are used to identify step types, steps, ports, options and variables, and parameters. Step types, options, variables, and parameters are named with QNames. Steps and ports are named with NCNames. The scope of a name is a measure of where it is available in a pipeline. </span><span class="termdef" id="dt-visible"><span class="deltaxml-old" style="background:#FF5555">[Definition: If two names are in the same scope, we say that they are </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">visible</span></em><span class="deltaxml-old" style="background:#FF5555"> to each other. ]</span></span></p><p><span class="deltaxml-old" style="background:#FF5555">The scope of the names of the step types is the pipeline in which they are declared, including any declarations imported from libraries via </span><a href="#p.import"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:import</span></tt></a><span class="deltaxml-old" style="background:#FF5555">. Nested pipelines inherit the step types in scope for their parent.</span></p><p><span class="deltaxml-old" style="background:#FF5555">In other words, the step types that are in scope in a </span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#p.declare-step"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> are:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">The standard, built-in types (</span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#p.choose"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, etc.). </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Any implementation-provided types. </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Any step types declared in the pipeline (the </span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#p.declare-step"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> children of the pipeline element). </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">The types of any </span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555">s or </span><a href="#p.declare-step"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt></a><span class="deltaxml-old" style="background:#FF5555">s that are imported. </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Any types that are in the scope of any </span><a href="#p.library"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:library</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> that is imported. </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Any step types that are in scope for the pipeline's parent </span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#p.declare-step"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, if it has one. </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">The type of the pipeline itself, if it has one. </span></p></li></ul></div><p><span class="deltaxml-old" style="background:#FF5555">The step types that are in scope in a </span><a href="#p.library"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:library</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> are:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">The standard, built-in types (</span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#p.choose"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, etc.). </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Any implementation-provided types. </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Any step types declared in the library (the </span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#p.declare-step"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> children of the </span><a href="#p.library"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:library</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element). </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">The types of </span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555">s or </span><a href="#p.declare-step"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt></a><span class="deltaxml-old" style="background:#FF5555">s that are imported into the library. </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Any types that are in the scope of any </span><a href="#p.library"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:library</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> that is imported. </span></p></li></ul></div><p><a name="err.inline.S0036"></a><span class="deltaxml-old" style="background:#FF5555">All the step types in a pipeline or library </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> have unique names: it is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0036"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0036</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if any step type name is built-in and/or declared or defined more than once in the same scope.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The scope of the names of the steps themselves is determined by the </span><em class="glossterm"><a href="#dt-environment"><span class="deltaxml-old" style="background:#FF5555">environment</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of each step. In general, the name of a step, the names of its sibling steps, the names of any steps that it contains directly, the names of its ancestors, and the names of the siblings of its ancestors are all in a common scope. </span><a name="err.inline.S0002"></a><span class="deltaxml-old" style="background:#FF5555">All steps in the same scope </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> have unique names: it is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0002"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0002</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if two steps with the same name appear in the same scope.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The scope of an input or output port name is the step on which it is defined. The names of all the ports on any step </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be unique.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Taken together, these uniqueness constraints guarantee that the combination of a step name and a port name uniquely identifies exactly one port on exactly one in-scope step.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The scope of option and variable names is determined by where they are declared. When an option is declared with </span><a href="#p.option"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:option</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> (or a variable with </span><a href="#p.variable"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:variable</span></tt></a><span class="deltaxml-old" style="background:#FF5555">), unless otherwise specified, its scope consists of the sibling elements that follow its declaration and the descendants of those siblings. </span><a name="err.inline.S0004"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0004"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0004</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if an option or variable declaration duplicates the name of any other option or variable in the same </span><em class="glossterm"><a href="#dt-environment"><span class="deltaxml-old" style="background:#FF5555">environment</span></a></em><span class="deltaxml-old" style="background:#FF5555">. That is, no option or variable may lexically shadow another option or variable with the same name. </span></p><p><span class="deltaxml-old" style="background:#FF5555">Parameter names are not scoped; they are distinct on each step.</span></p></div><div class="section"><h4><a name="xml-base-attribute" id="xml-base-attribute"></a><span class="deltaxml-old" style="background:#FF5555">3.3 Base URIs and xml:base</span></h4><p><span class="deltaxml-old" style="background:#FF5555">When a relative URI appears in an option value, the base URI against which it </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be made absolute is the base URI of the </span><a href="#p.option"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:option</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element. If an option value is specified using a </span><a href="#option-shortcut"><span class="deltaxml-old" style="background:#FF5555">syntactic shortcut</span></a><span class="deltaxml-old" style="background:#FF5555">, the base URI of the step on which the shortcut attribute appears </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be used. In general, whenever a relative URI appears, its base URI is the base URI of the nearest ancestor element.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The pipeline author can control the base URIs of elements within the pipeline document with the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">xml:base</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute. The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">xml:base</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> appear on any element in a pipeline and has the semantics outlined in [</span><a href="#xml-base"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XML Base</span></span></a><span class="deltaxml-old" style="background:#FF5555">].</span></p></div><div class="section"><h4><a name="xml-id-attribute" id="xml-id-attribute"></a><span class="deltaxml-old" style="background:#FF5555">3.4 Unique identifiers</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A pipeline author can provide a globally unique identifier for any element in a pipeline with the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">xml:id</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">xml:id</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> appear on any element in a pipeline and has the semantics outlined in [</span><a href="#xml-id"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">xml:id</span></span></a><span class="deltaxml-old" style="background:#FF5555">].</span></p></div><div class="section"><h4><a name="syntax-docs-ports" id="syntax-docs-ports"></a><span class="deltaxml-old" style="background:#FF5555">3.5 Associating Documents with Ports</span></h4><p><span class="termdef" id="dt-connection"><span class="deltaxml-old" style="background:#FF5555">[Definition: A </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">connection</span></em><span class="deltaxml-old" style="background:#FF5555"> associates an input or output port with some data source.]</span></span><span class="deltaxml-old" style="background:#FF5555"> A document or a sequence of documents can be connected to a port in four ways: </span><em class="glossterm"><a href="#dt-by-source"><span class="deltaxml-old" style="background:#FF5555">by source</span></a></em><span class="deltaxml-old" style="background:#FF5555">, </span><em class="glossterm"><a href="#dt-by-URI"><span class="deltaxml-old" style="background:#FF5555">by URI</span></a></em><span class="deltaxml-old" style="background:#FF5555">, by providing an </span><em class="glossterm"><a href="#dt-inline-document"><span class="deltaxml-old" style="background:#FF5555">inline document</span></a></em><span class="deltaxml-old" style="background:#FF5555">, or by making it </span><em class="glossterm"><a href="#dt-empty-sequence"><span class="deltaxml-old" style="background:#FF5555">explicitly empty</span></a></em><span class="deltaxml-old" style="background:#FF5555">. Each of these mechanisms is allowed on the </span><a href="#p.input"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:input</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#p.output"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:output</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#p.xpath-context"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xpath-context</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#p.iteration-source"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:iteration-source</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, and </span><a href="#p.viewport-source"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport-source</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> elements.</span></p><div class="variablelist"><dl><dt><span class="deltaxml-old" style="background:#FF5555">Specified by URI</span></dt><dd><p><span class="termdef" id="dt-by-URI"><span class="deltaxml-old" style="background:#FF5555">[Definition: A document is specified </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">by URI</span></em><span class="deltaxml-old" style="background:#FF5555"> if it is referenced with a URI.]</span></span><span class="deltaxml-old" style="background:#FF5555"> The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">href</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute on the </span><a href="#p.document"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:document</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#p.data"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:data</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element is used to refer to documents by URI.</span></p><p><span class="deltaxml-old" style="background:#FF5555">In this example, the input to the </span><a href="#c.identity"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:identity</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step named “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">otherstep</span></tt><span class="deltaxml-old" style="background:#FF5555">” comes from “</span><tt class="uri"><span class="deltaxml-old" style="background:#FF5555">http://example.com/input.xml</span></tt><span class="deltaxml-old" style="background:#FF5555">”. </span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:output port="result"/&gt; &lt;p:identity name="otherstep"&gt; &lt;p:input port="source"&gt; &lt;p:document href="http://example.com/input.xml"/&gt; &lt;/p:input&gt; &lt;/p:identity&gt; </span></pre></div></dd><dt><span class="deltaxml-old" style="background:#FF5555">Specified by source</span></dt><dd><p><span class="termdef" id="dt-by-source"><span class="deltaxml-old" style="background:#FF5555">[Definition: A document is specified </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">by source</span></em><span class="deltaxml-old" style="background:#FF5555"> if it references a specific port on another step.]</span></span><span class="deltaxml-old" style="background:#FF5555"> The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">step</span></tt><span class="deltaxml-old" style="background:#FF5555"> and </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">port</span></tt><span class="deltaxml-old" style="background:#FF5555"> attributes on the </span><a href="#p.pipe"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element are used for this purpose. </span></p><p><span class="deltaxml-old" style="background:#FF5555">In this example, the “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555">” input to the </span><a href="#c.xinclude"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xinclude</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step named “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">expand</span></tt><span class="deltaxml-old" style="background:#FF5555">” comes from the “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555">” port of the step named “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">otherstep</span></tt><span class="deltaxml-old" style="background:#FF5555">”.</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:xinclude name="expand"&gt; &lt;p:input port="source"&gt; &lt;p:pipe step="otherstep" port="result"/&gt; &lt;/p:input&gt; &lt;/p:xinclude&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">See the description of </span><a href="#p.pipe"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> for a complete description of the ports that can be connected.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Specified inline</span></dt><dd><p><span class="termdef" id="dt-inline-document"><span class="deltaxml-old" style="background:#FF5555">[Definition: An </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">inline document</span></em><span class="deltaxml-old" style="background:#FF5555"> is specified directly in the body of the element to which it connects.]</span></span><span class="deltaxml-old" style="background:#FF5555"> The content of the </span><a href="#p.inline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element is used for this purpose. </span></p><p><span class="deltaxml-old" style="background:#FF5555">In this example, the “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">stylesheet</span></tt><span class="deltaxml-old" style="background:#FF5555">” input to the XSLT step named “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xform</span></tt><span class="deltaxml-old" style="background:#FF5555">” comes from the content of the </span><a href="#p.input"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:input</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element itself.</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:xslt name="xform"&gt; &lt;p:input port="stylesheet"&gt; &lt;p:inline&gt; &lt;xsl:stylesheet version="1.0"&gt; ... &lt;/xsl:stylesheet&gt; &lt;/p:inline&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">Inline documents are considered “quoted”. The pipeline processor passes them literally to the port, even if they contain elements from the XProc namespace or other namespaces that would have other semantics outside of the </span><a href="#p.inline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></tt></a><span class="deltaxml-old" style="background:#FF5555">.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Specified explicitly empty</span></dt><dd><p><span class="termdef" id="dt-empty-sequence"><span class="deltaxml-old" style="background:#FF5555">[Definition: An </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">empty sequence</span></em><span class="deltaxml-old" style="background:#FF5555"> of documents is specified with the </span><a href="#p.empty"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element.]</span></span></p><p><span class="deltaxml-old" style="background:#FF5555">In this example, the “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555">” input to the XSLT 2.0 step named “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">generate</span></tt><span class="deltaxml-old" style="background:#FF5555">” is explicitly empty:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:xslt name="generate" version="2.0"&gt; &lt;p:input port="source"&gt; &lt;p:empty/&gt; &lt;/p:input&gt; &lt;p:input port="stylesheet"&gt; &lt;p:inline&gt; &lt;xsl:stylesheet version="2.0"&gt; ... &lt;/xsl:stylesheet&gt; &lt;/p:inline&gt; &lt;/p:input&gt; &lt;p:with-option name="template-name" select="'someName'"/&gt; &lt;/p:xslt&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">If you omit the connection on a primary input port, a connection to the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-old" style="background:#FF5555">default readable port</span></a></em><span class="deltaxml-old" style="background:#FF5555"> will be assumed. Making the connection explicitly empty guarantees that the connection will be to an empty sequence of documents.</span></p></dd></dl></div><p><span class="deltaxml-old" style="background:#FF5555">Note that a </span><a href="#p.input"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:input</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#p.output"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:output</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element may contain more than one </span><a href="#p.pipe"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#p.document"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:document</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#p.data"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:data</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, or </span><a href="#p.inline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element. If more than one </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-old" style="background:#FF5555">connection</span></a></em><span class="deltaxml-old" style="background:#FF5555"> is provided, then the specified sequence of documents is made available on that port in the same order as the connections.</span></p></div><div class="section"><h4><a name="documentation" id="documentation"></a><span class="deltaxml-old" style="background:#FF5555">3.6 Documentation</span></h4><p><span class="deltaxml-old" style="background:#FF5555">Pipeline authors may add documentation to their pipeline documents with the </span><a href="#p.documentation"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:documentation</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element. Except when it appears as a descendant of </span><a href="#p.inline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, the </span><a href="#p.documentation"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:documentation</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element is completely ignored by pipeline processors, it exists simply for documentation purposes. If a </span><a href="#p.documentation"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:documentation</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> is provided as a descendant of </span><a href="#p.inline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, it has no special semantics, it is treated literally as part of the document to be provided on that port. The </span><a href="#p.documentation"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:documentation</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element has no special semantics when it appears in documents that flow through the pipeline.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Pipeline processors that inspect the contents of </span><a href="#p.documentation"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:documentation</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> elements and behave differently on the basis of what they find are </span><em><span class="deltaxml-old" style="background:#FF5555">not conformant</span></em><span class="deltaxml-old" style="background:#FF5555">. Processor extensions </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be specified with </span><a href="#p.pipeinfo"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeinfo</span></tt></a><span class="deltaxml-old" style="background:#FF5555">.</span></p></div><div class="section"><h4><a name="annotations" id="annotations"></a><span class="deltaxml-old" style="background:#FF5555">3.7 Processor annotations</span></h4><p><span class="deltaxml-old" style="background:#FF5555">Pipeline authors may add annotations to their pipeline documents with the </span><a href="#p.pipeinfo"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeinfo</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element. </span><a name="impl-26"></a><span class="deltaxml-old" style="background:#FF5555">The semantics of </span><a href="#p.pipeinfo"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeinfo</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> elements are </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">. Processors </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> specify a way for their annotations to be identified, perhaps with </span><a href="#extension-attributes"><span class="deltaxml-old" style="background:#FF5555">extension attributes</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Where </span><a href="#p.documentation"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:documentation</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> is intended for human consumption, </span><a href="#p.pipeinfo"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeinfo</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> elements are intended for processor consumption. A processor might, for example, use annotations to identify some particular aspect of an implementation, to request additional, perhaps non-standard features, to describe parallelism constraints, etc.</span></p><p><span class="deltaxml-old" style="background:#FF5555">When a </span><a href="#p.pipeinfo"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeinfo</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> appears as a descendant of </span><a href="#p.inline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, it has no special semantics; in that context it </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be treated literally as part of the document to be provided on that port. The </span><a href="#p.pipeinfo"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeinfo</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element has no special semantics when it appears in documents that flow through the pipeline. </span></p></div><div class="section"><h4><a name="extension-attributes" id="extension-attributes"></a><span class="deltaxml-old" style="background:#FF5555">3.8 Extension attributes</span></h4><p><span class="termdef" id="dt-extension-attribute"><span class="deltaxml-old" style="background:#FF5555">[Definition: An element from the XProc namespace </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> have any attribute not from the XProc namespace, provided that the expanded-QName of the attribute has a non-null namespace URI. Such an attribute is called an </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">extension attribute</span></em><span class="deltaxml-old" style="background:#FF5555">.]</span></span></p><p><span class="deltaxml-old" style="background:#FF5555">The presence of an extension attribute must not cause the connections between steps to differ from the connections that would arise in the absence of the attribute. They must not cause the processor to fail to signal an error that would be signaled in the absence of the attribute.</span></p><p><span class="deltaxml-old" style="background:#FF5555">A processor which encounters an extension attribute that it does not implement </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> behave as if the attribute was not present.</span></p></div><div class="section"><h4><a name="use-when" id="use-when"></a><span class="deltaxml-old" style="background:#FF5555">3.9 Conditional Element Exclusion</span></h4><p><span class="deltaxml-old" style="background:#FF5555">Any element in the XProc namespace may have a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">use-when</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute which </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> contain an XPath expression that can be evaluated statically. If the attribute is present and the effective boolean value of the expression is false, then the element and all of its descendants are effectively excluded from the pipeline document. If a node is effectively excluded, the processor </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> behave as if the element was not present in the document.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Elements that are not in the XProc namespace </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> also have a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">use-when</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute, but the attribute must be in the XProc namespace. The semantics of a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">p:use-when</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute on an element not in the XProc namespace are the same as the semantics of a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">use-when</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute on an element in the XProc namespace.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Conditional element exclusion occurs before any static analysis of the pipeline.</span></p><div class="admonition"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">The effective exclusion of </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">use-when</span></tt><span class="deltaxml-old" style="background:#FF5555"> processing occurs after XML parsing and has no effect on well-formedness or validation errors which will be reported in the usual way. Note also that </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">use-when</span></tt><span class="deltaxml-old" style="background:#FF5555"> is not performed when it occurs on the descendant of a </span><a href="#p.inline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element.</span></p></div><p><span class="deltaxml-old" style="background:#FF5555">For the purposes of evaluating a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">use-when</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression, the context node, position, and size are all undefined. No </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-old" style="background:#FF5555">in-scope bindings</span></a></em><span class="deltaxml-old" style="background:#FF5555"> are available. There are no readable ports. There are no available documents or available collections. </span></p><p><span class="deltaxml-old" style="background:#FF5555">There are some additional restrictions on the XPath extension functions that are available in a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">use-when</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">p:episode</span></tt><span class="deltaxml-old" style="background:#FF5555"> system property </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should not</span></span><span class="deltaxml-old" style="background:#FF5555"> be used. </span><a name="impl-27"></a><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">p:episode</span></tt><span class="deltaxml-old" style="background:#FF5555"> system property in a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">use-when</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">The </span><a href="#f.step-available"><tt class="function"><span class="deltaxml-old" style="background:#FF5555">p:step-available</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> function cannot be used to test for the availability of extension steps (because the libraries that declare them may not have been imported). </span><a name="impl-28"></a><span class="deltaxml-old" style="background:#FF5555">The results of testing for steps not in the XProc namespace in a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">use-when</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression are </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">The steps available and possibly other aspects of the expression may depend on the version specified for a pipeline, see </span><a href="#versioning-considerations" title="Versioning Considerations"><span class="deltaxml-old" style="background:#FF5555">Section 2.13, “Versioning Considerations”</span></a><span class="deltaxml-old" style="background:#FF5555">. For example, in a “1.0” pipeline, the processor </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should not</span></span><span class="deltaxml-old" style="background:#FF5555"> report that “2.0” steps are available.</span></p></li></ul></div><p><a name="err.inline.S0061"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0061"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0061</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">use-when</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression refers to the context or attempts to refer to any documents or collections. </span></p></div><div class="section"><h4><a name="syntax-summaries" id="syntax-summaries"></a><span class="deltaxml-old" style="background:#FF5555">3.10 Syntax Summaries</span></h4><p><span class="deltaxml-old" style="background:#FF5555">The description of each element in the pipeline namespace is accompanied by a syntactic summary that provides a quick overview of the element's syntax:</span></p><p class="element-syntax element-syntax-language-example"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:some-element</span><span class="deltaxml-old" style="background:#FF5555">  some-attribute? = </span><var><span class="deltaxml-old" style="background:#FF5555">some-type</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><var><span class="deltaxml-old" style="background:#FF5555">some</span></var><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><var><span class="deltaxml-old" style="background:#FF5555">elements</span></var><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><var><span class="deltaxml-old" style="background:#FF5555">allowed</span></var><span class="deltaxml-old" style="background:#FF5555">)*,</span><span class="deltaxml-old" style="background:#FF5555">    </span><var><span class="deltaxml-old" style="background:#FF5555">other-elements?</span></var><span class="deltaxml-old" style="background:#FF5555">&lt;/p:some-element&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The content model fragments in these tableaux are presented in a simple, compact notation. In brief:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">A name represent exactly one occurrence of an element with that name.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Parentheses are used for grouping. </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Elements or groups separated by a comma (“,”) represent an ordered sequence: a followed by b followed by c: (a,b,c).</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Elements or groups separated by a vertical bar (“|”) represent a choice: a or b or c: (a | b | c).</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Elements or groups separated by an ampersand (“&amp;”) represent an unordered sequence: a and b and c, in any order: (a &amp; b &amp; c).</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">An element or group followed by a question mark (“?”) is optional; it may or may not occur but if it occurs it can occur only once.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">An element or group followed by an asterisk (“*”) is optional and may be repeated; it may or may not occur and if it occurs it can occur any number of times. </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">An element or group followed by a plus (“+”) is required and may be repeated; it must occur at least once, and it can occur any number of times. </span></p></li></ul></div><p><span class="deltaxml-old" style="background:#FF5555">For clarity of exposition, some attributes and elements are elided from the summaries:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">An </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">xml:id</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is allowed on any element. It has the semantics of [</span><a href="#xml-id"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">xml:id</span></span></a><span class="deltaxml-old" style="background:#FF5555">].</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">An </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">xml:base</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is allowed on any element. It has the semantics of [</span><a href="#xml-base"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XML Base</span></span></a><span class="deltaxml-old" style="background:#FF5555">].</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">use-when</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is allowed on any element, see </span><a href="#use-when" title="Conditional Element Exclusion"><span class="deltaxml-old" style="background:#FF5555">Section 3.9, “Conditional Element Exclusion”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">The </span><a href="#p.documentation"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:documentation</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#p.pipeinfo"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeinfo</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> elements are not shown, but they are allowed anywhere.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">The </span><a href="#p.log"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:log</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element is allowed on any step that has a </span><a href="#p.output"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:output</span></tt></a><span class="deltaxml-old" style="background:#FF5555">.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Attributes that are </span><a href="#option-shortcut"><span class="deltaxml-old" style="background:#FF5555">syntactic shortcuts for option values</span></a><span class="deltaxml-old" style="background:#FF5555"> are not shown.</span></p></li></ul></div><p><span class="deltaxml-old" style="background:#FF5555">The types given for attributes should be understood as follows:</span></p><div class="itemizedlist"><ul><li><p><tt class="type"><span class="deltaxml-old" style="background:#FF5555">ID</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">NCName</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">NMTOKEN</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">NMTOKENS</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">integer</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">string</span></tt><span class="deltaxml-old" style="background:#FF5555">: As per [</span><a href="#xmlschema-2"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">W3C XML Schema: Part 2</span></span></a><span class="deltaxml-old" style="background:#FF5555">] including whitespace normalization as appropriate.</span></p></li><li><p><tt class="type"><span class="deltaxml-old" style="background:#FF5555">QName</span></tt><span class="deltaxml-old" style="background:#FF5555">: With whitespace normalization as per [</span><a href="#xmlschema-2"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">W3C XML Schema: Part 2</span></span></a><span class="deltaxml-old" style="background:#FF5555">] and according to the following definition: In the context of XProc, a </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">QName</span></tt><span class="deltaxml-old" style="background:#FF5555"> is almost always a QName in the </span><em class="glossterm"><a href="#dt-Namespaces-in-XML"><span class="deltaxml-old" style="background:#FF5555">Namespaces in XML</span></a></em><span class="deltaxml-old" style="background:#FF5555"> sense. Note, however, that </span><a href="#p.option"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:option</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#p.with-param"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> values can get their namespace declarations in a non-standard way (with </span><a href="#p.namespaces"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:namespaces</span></tt></a><span class="deltaxml-old" style="background:#FF5555">) and QNames that have no prefix are always in no-namespace, irrespective of the default namespace. </span></p></li><li><p><tt class="type"><span class="deltaxml-old" style="background:#FF5555">PrefixList</span></tt><span class="deltaxml-old" style="background:#FF5555">: As a list with </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[item type]</span></tt><tt class="type"><span class="deltaxml-old" style="background:#FF5555">NMTOKEN</span></tt><span class="deltaxml-old" style="background:#FF5555">, per [</span><a href="#xmlschema-2"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">W3C XML Schema: Part 2</span></span></a><span class="deltaxml-old" style="background:#FF5555">], including whitespace normalization. </span></p></li><li><p><tt class="type"><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></tt><span class="deltaxml-old" style="background:#FF5555">: As a string per [</span><a href="#xmlschema-2"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">W3C XML Schema: Part 2</span></span></a><span class="deltaxml-old" style="background:#FF5555">], including whitespace normalization, and the further requirement to be a conformant Expression per [</span><a href="#xpath2"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XPath 2.0</span></span></a><span class="deltaxml-old" style="background:#FF5555">] or Match pattern per [</span><a href="#xslt20"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XSLT 2.0</span></span></a><span class="deltaxml-old" style="background:#FF5555">]. </span></p></li></ul></div></div><div class="section"><h4><a name="common-errors" id="common-errors"></a><span class="deltaxml-old" style="background:#FF5555">3.11 Common errors</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A number of errors apply generally:</span></p><div class="itemizedlist"><ul><li><p><a name="err.inline.S0059"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0059"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0059</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the pipeline element is not </span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#p.declare-step"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, or </span><a href="#p.library"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:library</span></tt></a><span class="deltaxml-old" style="background:#FF5555">. </span></p></li><li><p><a name="err.inline.S0008"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0008"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0008</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if any element in the XProc namespace has attributes not defined by this specification unless they are </span><em class="glossterm"><a href="#dt-extension-attribute"><span class="deltaxml-old" style="background:#FF5555">extension attributes</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p></li><li><p><a name="err.inline.S0038"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0038"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0038</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if any required attribute is not provided. </span></p></li><li><p><a name="err.inline.D0028"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0028"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0028</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if any attribute value does not satisfy the type required for that attribute.</span></p></li><li><p><a name="err.inline.S0044"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0044"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0044</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if any element in the XProc namespace or any step has element children other than those specified for it by this specification. In particular, the presence of atomic steps for which there is no visible declaration may raise this error. </span></p></li><li><p><a name="err.inline.S0037"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0037"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0037</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if any step directly contains text nodes that do not consist entirely of whitespace. </span></p></li><li><p><a name="err.inline.D0019"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0019"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0019</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if any option value does not satisfy the type required for that option. </span></p></li><li><p><a name="err.inline.S0015"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0015"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0015</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if a compound step has no </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-old" style="background:#FF5555">contained steps</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p></li><li><p><a name="err.inline.D0012"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0012"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0012</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if any attempt is made to dereference a URI where the scheme of the URI reference is not supported. Implementations are encouraged to support as many schemes as is practical and, in particular, they </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> support both the </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">file:</span></tt><span class="deltaxml-old" style="background:#FF5555"> and </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">http(s):</span></tt><span class="deltaxml-old" style="background:#FF5555"> schemes. </span><a name="impl-29"></a><span class="deltaxml-old" style="background:#FF5555">The set of URI schemes actually supported is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p></li><li><p><a name="err.inline.D0030"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0030"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0030</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if a step is unable or incapable of performing its function. This is a general error code for “step failed” (e.g., if the input isn't of the expected type or if attempting to process the input causes the implementation to abort). Users and implementers who create extension steps are encouraged to use this code for general failures.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">In most steps which use a select expression or match pattern, any kind of node can be identified by the expression or pattern. However, some expressions and patterns on some steps are only applicable to some kinds of nodes (e.g., it doesn't make sense to speak of adding attributes to a comment!). </span></p><p><a name="err.inline.C0023"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0023"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0023</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if a select expression or match pattern returns a node type that is not allowed by the step. </span></p></li></ul></div><p><span class="deltaxml-old" style="background:#FF5555">If an XProc processor can determine statically that a dynamic error will </span><em><span class="deltaxml-old" style="background:#FF5555">always</span></em><span class="deltaxml-old" style="background:#FF5555"> occur, it </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> report that error statically provided that the error </span><em><span class="deltaxml-old" style="background:#FF5555">does not</span></em><span class="deltaxml-old" style="background:#FF5555"> occur among the descendants of a </span><a href="#p.try"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt></a><span class="deltaxml-old" style="background:#FF5555">. Dynamic errors inside a </span><a href="#p.try"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt></a><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must not</span></span><span class="deltaxml-old" style="background:#FF5555"> be reported statically. They must be raised dynamically so that </span><a href="#p.catch"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:catch</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> processing can be performed on them. </span></p></div></div><div class="section"><h3><a name="steps" id="steps"></a><span class="deltaxml-old" style="background:#FF5555">4 Steps</span></h3><p><span class="deltaxml-old" style="background:#FF5555">This section describes the core steps of XProc.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Several of the steps defined in this specification refer to other, evolving XML technologies (XSLT, XQuery, XSL-FO, etc.). Where this specification identifies a specific version of a technology, implementers </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> implement the specified version or any subsequent edition or version that is backwards compatible. At user option, they may support other, incompatible versions or extensions.</span></p><div class="section"><h4><a name="p.pipeline" id="p.pipeline"></a><span class="deltaxml-old" style="background:#FF5555">4.1 p:pipeline</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt><span class="deltaxml-old" style="background:#FF5555"> declares a pipeline that can be evaluated by an XProc processor. It encapsulates the behavior of a </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555">. Its children declare inputs, outputs, and options that the pipeline exposes and identify the steps in its subpipeline. (A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt><span class="deltaxml-old" style="background:#FF5555"> is a simplified form of </span><a href="#p.declare-step"><span class="deltaxml-old" style="background:#FF5555">step declaration</span></a><span class="deltaxml-old" style="background:#FF5555">.) </span></p><p><span class="deltaxml-old" style="background:#FF5555">All </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt><span class="deltaxml-old" style="background:#FF5555"> pipelines have an implicit </span><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-old" style="background:#FF5555">primary input port</span></a></em><span class="deltaxml-old" style="background:#FF5555"> named “</span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555">”, an implicit </span><em class="glossterm"><a href="#dt-primary-parameter-input-port"><span class="deltaxml-old" style="background:#FF5555">primary parameter input port</span></a></em><span class="deltaxml-old" style="background:#FF5555"> named “</span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">parameters</span></tt><span class="deltaxml-old" style="background:#FF5555">”, and an implicit </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-old" style="background:#FF5555">primary output port</span></a></em><span class="deltaxml-old" style="background:#FF5555"> named “</span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555">”. Any input or output ports that the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt><span class="deltaxml-old" style="background:#FF5555"> declares explicitly are </span><em><span class="deltaxml-old" style="background:#FF5555">in addition</span></em><span class="deltaxml-old" style="background:#FF5555"> to those ports and may not be declared primary.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:pipeline</span><span class="deltaxml-old" style="background:#FF5555">  name? = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  type? = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  psvi-required? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  xpath-version? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  exclude-inline-prefixes? = </span><var><span class="deltaxml-old" style="background:#FF5555">prefix list</span></var><span class="deltaxml-old" style="background:#FF5555">  version? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.input"><span class="deltaxml-old" style="background:#FF5555">p:input</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.output"><span class="deltaxml-old" style="background:#FF5555">p:output</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.option"><span class="deltaxml-old" style="background:#FF5555">p:option</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.log"><span class="deltaxml-old" style="background:#FF5555">p:log</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.serialization"><span class="deltaxml-old" style="background:#FF5555">p:serialization</span></a><span class="deltaxml-old" style="background:#FF5555">)*,</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.declare-step"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.pipeline"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.import"><span class="deltaxml-old" style="background:#FF5555">p:import</span></a><span class="deltaxml-old" style="background:#FF5555">)*,</span><span class="deltaxml-old" style="background:#FF5555">    </span><var><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></var><span class="deltaxml-old" style="background:#FF5555">&lt;/p:pipeline&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">Viewed from the outside, a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt><span class="deltaxml-old" style="background:#FF5555"> is a black box which performs some calculation on its inputs and produces its outputs. From the pipeline author's perspective, the computation performed by the pipeline is described in terms of </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-old" style="background:#FF5555">contained steps</span></a></em><span class="deltaxml-old" style="background:#FF5555"> which read the pipeline's inputs and produce the pipeline's outputs.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">version</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute identifies the version of XProc for which this pipeline was authored. If the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt><span class="deltaxml-old" style="background:#FF5555"> has no ancestors in the XProc namespace, then it </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> have a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">version</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute. See </span><a href="#versioning-considerations" title="Versioning Considerations"><span class="deltaxml-old" style="background:#FF5555">Section 2.13, “Versioning Considerations”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If a pipeline does not have a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">type</span></tt><span class="deltaxml-old" style="background:#FF5555"> then that pipeline cannot be invoked as a step.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt><span class="deltaxml-old" style="background:#FF5555"> element is just a simplified form of step declaration. A document that reads:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:pipeline </span><em class="replaceable"><tt class="replaceable"><span class="deltaxml-old" style="background:#FF5555">some-attributes</span></tt></em><span class="deltaxml-old" style="background:#FF5555">&gt; </span><em class="replaceable"><tt class="replaceable"><span class="deltaxml-old" style="background:#FF5555">some-content</span></tt></em><span class="deltaxml-old" style="background:#FF5555"> &lt;/p:pipeline&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">can be interpreted as if it read:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step </span><em class="replaceable"><tt class="replaceable"><span class="deltaxml-old" style="background:#FF5555">some-attributes</span></tt></em><span class="deltaxml-old" style="background:#FF5555">&gt; &lt;p:input port='source' primary='true'/&gt; &lt;p:input port='parameters' kind='parameter' primary='true'/&gt; &lt;p:output port='result' primary='true'/&gt; </span><em class="replaceable"><tt class="replaceable"><span class="deltaxml-old" style="background:#FF5555">some-content</span></tt></em><span class="deltaxml-old" style="background:#FF5555"> &lt;/p:declare-step&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">See </span><a href="#p.declare-step"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> for more details.</span></p><div class="section"><h5><a name="example-pipeline" id="example-pipeline"></a><span class="deltaxml-old" style="background:#FF5555">4.1.1 Example</span></h5><p><span class="deltaxml-old" style="background:#FF5555">A pipeline might accept a document as input; perform XInclude, validation, and transformation; and produce the transformed document as its output.</span></p><div class="example-wrapper" id="ex.p.pipeline"><div class="title"><span class="deltaxml-old" style="background:#FF5555">Example 4. A Sample Pipeline Document</span></div><div class="example"><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:pipeline xmlns:p="http://www.w3.org/ns/xproc" version="1.0"&gt; &lt;p:xinclude/&gt; &lt;p:validate-with-xml-schema&gt; &lt;p:input port="schema"&gt; &lt;p:document href="http://example.com/path/to/schema.xsd"/&gt; &lt;/p:input&gt; &lt;/p:validate-with-xml-schema&gt; &lt;p:xslt&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="http://example.com/path/to/stylesheet.xsl"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;/p:pipeline&gt; </span></pre></div></div></div></div></div><div class="section"><h4><a name="p.for-each" id="p.for-each"></a><span class="deltaxml-old" style="background:#FF5555">4.2 p:for-each</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A for-each is specified by the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt><span class="deltaxml-old" style="background:#FF5555"> element. It is a </span><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-old" style="background:#FF5555">compound step</span></a></em><span class="deltaxml-old" style="background:#FF5555"> that processes a sequence of documents, applying its </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555"> to each document in turn.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:for-each</span><span class="deltaxml-old" style="background:#FF5555">  name? = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    ((</span><a href="#p.iteration-source"><span class="deltaxml-old" style="background:#FF5555">p:iteration-source</span></a><span class="deltaxml-old" style="background:#FF5555">? &amp; </span><span class="deltaxml-old" style="background:#FF5555">      (</span><a href="#p.output"><span class="deltaxml-old" style="background:#FF5555">p:output</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.log"><span class="deltaxml-old" style="background:#FF5555">p:log</span></a><span class="deltaxml-old" style="background:#FF5555">)*),</span><span class="deltaxml-old" style="background:#FF5555">     </span><var><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></var><span class="deltaxml-old" style="background:#FF5555">)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:for-each&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">When a pipeline needs to process a sequence of documents using a subpipeline that only processes a single document, the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt><span class="deltaxml-old" style="background:#FF5555"> construct can be used as a wrapper around that subpipeline. The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt><span class="deltaxml-old" style="background:#FF5555"> will apply that subpipeline to each document in the sequence in turn.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The result of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt><span class="deltaxml-old" style="background:#FF5555"> is a sequence of documents produced by processing each individual document in the input sequence. If the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt><span class="deltaxml-old" style="background:#FF5555"> has one or more output ports, what appears on each of those ports is the sequence of documents that is the concatenation of the sequence produced by each iteration of the loop on the port to which it is connected. If the iteration source for a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt><span class="deltaxml-old" style="background:#FF5555"> is an empty sequence, then the subpipeline is never run and an empty sequence is produced on all of the outputs. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><a href="#p.iteration-source"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:iteration-source</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> is an anonymous input: its </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-old" style="background:#FF5555">connection</span></a></em><span class="deltaxml-old" style="background:#FF5555"> provides a sequence of documents to the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt><span class="deltaxml-old" style="background:#FF5555"> step. If no iteration sequence is explicitly provided, then the iteration source is read from the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-old" style="background:#FF5555">default readable port</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The processor provides each document, one at a time, to the </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555"> represented by the children of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt><span class="deltaxml-old" style="background:#FF5555"> on a port named </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">current</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">For each declared output, the processor collects all the documents that are produced for that output from all the iterations, in order, into a sequence. The result of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt><span class="deltaxml-old" style="background:#FF5555"> on that output is that sequence of documents.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The environment inherited by the </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-old" style="background:#FF5555">contained steps</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt><span class="deltaxml-old" style="background:#FF5555"> is the </span><em class="glossterm"><a href="#dt-inherited-environment"><span class="deltaxml-old" style="background:#FF5555">inherited environment</span></a></em><span class="deltaxml-old" style="background:#FF5555"> with these modifications:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">The port named “</span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">current</span></tt><span class="deltaxml-old" style="background:#FF5555">” on the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt><span class="deltaxml-old" style="background:#FF5555"> is added to the </span><em class="glossterm"><a href="#dt-readable-ports"><span class="deltaxml-old" style="background:#FF5555">readable ports</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">The port named “</span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">current</span></tt><span class="deltaxml-old" style="background:#FF5555">” on the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt><span class="deltaxml-old" style="background:#FF5555"> is made the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-old" style="background:#FF5555">default readable port</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></li></ul></div><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt><span class="deltaxml-old" style="background:#FF5555"> has a </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-old" style="background:#FF5555">primary output port</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (explicit or </span><a href="#primary-input-output"><span class="deltaxml-old" style="background:#FF5555">supplied by default</span></a><span class="deltaxml-old" style="background:#FF5555">) and that port has no </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-old" style="background:#FF5555">connection</span></a></em><span class="deltaxml-old" style="background:#FF5555">, then it is connected to the </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-old" style="background:#FF5555">primary output port</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of the </span><em class="glossterm"><a href="#dt-last-step"><span class="deltaxml-old" style="background:#FF5555">last step</span></a></em><span class="deltaxml-old" style="background:#FF5555"> in the </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span><a name="err.inline.S0006"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0006"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0006</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the primary output port has no explicit connection and the </span><em class="glossterm"><a href="#dt-last-step"><span class="deltaxml-old" style="background:#FF5555">last step</span></a></em><span class="deltaxml-old" style="background:#FF5555"> in the subpipeline does not have a primary output port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Note that outputs declared for a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt><span class="deltaxml-old" style="background:#FF5555"> serve a dual role. Inside the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt><span class="deltaxml-old" style="background:#FF5555">, they are used to read results from the subpipeline. Outside the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt><span class="deltaxml-old" style="background:#FF5555">, they provide the aggregated results.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">sequence</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute on a </span><a href="#p.output"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:output</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> inside a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt><span class="deltaxml-old" style="background:#FF5555"> only applies inside the step. From the outside, all of the outputs produce sequences.</span></p><div class="section"><h5><a name="for-each-xpath-context" id="for-each-xpath-context"></a><span class="deltaxml-old" style="background:#FF5555">4.2.1 XPath Context</span></h5><p><span class="deltaxml-old" style="background:#FF5555">Within a </span><a href="#p.for-each"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, the </span><a href="#f.iteration-position"><tt class="function"><span class="deltaxml-old" style="background:#FF5555">p:iteration-position</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#f.iteration-size"><tt class="function"><span class="deltaxml-old" style="background:#FF5555">p:iteration-size</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> are taken from the sequence of documents that will be processed by the </span><a href="#p.for-each"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt></a><span class="deltaxml-old" style="background:#FF5555">. The total number of documents is the </span><a href="#f.iteration-size"><tt class="function"><span class="deltaxml-old" style="background:#FF5555">p:iteration-size</span></tt></a><span class="deltaxml-old" style="background:#FF5555">; the ordinal value of the current document (the document appearing on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">current</span></tt><span class="deltaxml-old" style="background:#FF5555"> port) is the </span><a href="#f.iteration-position"><tt class="function"><span class="deltaxml-old" style="background:#FF5555">p:iteration-position</span></tt></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><div class="admonition" id="impl1"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note to implementers</span></div><p><span class="deltaxml-old" style="background:#FF5555">In the case where no XPath expression that must be evaluated by the processor makes any reference to </span><a href="#f.iteration-size"><tt class="function"><span class="deltaxml-old" style="background:#FF5555">p:iteration-size</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, its value does not actually have to be calculated (and the entire input sequence does not, therefore, need to be buffered so that its size can be calculated before processing begins).</span></p></div></div><div class="section"><h5><a name="example-for-each" id="example-for-each"></a><span class="deltaxml-old" style="background:#FF5555">4.2.2 Example</span></h5><p><span class="deltaxml-old" style="background:#FF5555">A </span><a href="#p.for-each"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> might accept a sequence of chapters as its input, process each chapter in turn with XSLT, a step that accepts only a single input document, and produce a sequence of formatted chapters as its output.</span></p><div class="example-wrapper" id="ex.p.for-each"><div class="title"><span class="deltaxml-old" style="background:#FF5555">Example 5. A Sample For-Each</span></div><div class="example"><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:for-each name="chapters"&gt; &lt;p:iteration-source select="//chapter"/&gt; &lt;p:output port="html-results"&gt; &lt;p:pipe step="make-html" port="result"/&gt; &lt;/p:output&gt; &lt;p:output port="fo-results"&gt; &lt;p:pipe step="make-fo" port="result"/&gt; &lt;/p:output&gt; &lt;p:xslt name="make-html"&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="http://example.com/xsl/html.xsl"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;p:xslt name="make-fo"&gt; &lt;p:input port="source"&gt; &lt;p:pipe step="chapters" port="current"/&gt; &lt;/p:input&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="http://example.com/xsl/fo.xsl"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;/p:for-each&gt; </span></pre></div></div></div><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">//chapter</span></tt><span class="deltaxml-old" style="background:#FF5555"> elements of the document are selected. Each chapter is transformed into HTML and XSL Formatting Objects using an XSLT step. The resulting HTML and FO documents are aggregated together and appear on the </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">html-results</span></tt><span class="deltaxml-old" style="background:#FF5555"> and </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">fo-results</span></tt><span class="deltaxml-old" style="background:#FF5555"> ports, respectively, of the </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">chapters</span></tt><span class="deltaxml-old" style="background:#FF5555"> step itself.</span></p></div></div><div class="section"><h4><a name="p.viewport" id="p.viewport"></a><span class="deltaxml-old" style="background:#FF5555">4.3 p:viewport</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A viewport is specified by the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt><span class="deltaxml-old" style="background:#FF5555"> element. It is a </span><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-old" style="background:#FF5555">compound step</span></a></em><span class="deltaxml-old" style="background:#FF5555"> that processes a single document, applying its </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555"> to one or more subtrees of the document. </span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:viewport</span><span class="deltaxml-old" style="background:#FF5555">  name? = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">match</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    ((</span><a href="#p.viewport-source"><span class="deltaxml-old" style="background:#FF5555">p:viewport-source</span></a><span class="deltaxml-old" style="background:#FF5555">? &amp; </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.output"><span class="deltaxml-old" style="background:#FF5555">p:output</span></a><span class="deltaxml-old" style="background:#FF5555">? &amp; </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.log"><span class="deltaxml-old" style="background:#FF5555">p:log</span></a><span class="deltaxml-old" style="background:#FF5555">?),</span><span class="deltaxml-old" style="background:#FF5555">     </span><var><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></var><span class="deltaxml-old" style="background:#FF5555">)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:viewport&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The result of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt><span class="deltaxml-old" style="background:#FF5555"> is a copy of the original document where the selected subtrees have been replaced by the results of applying the subpipeline to them.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><a href="#p.viewport-source"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport-source</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> is an anonymous input: its </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-old" style="background:#FF5555">connection</span></a></em><span class="deltaxml-old" style="background:#FF5555"> provides a single document to the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt><span class="deltaxml-old" style="background:#FF5555"> step. If no document is explicitly provided, then the viewport source is read from the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-old" style="background:#FF5555">default readable port</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span><a name="err.inline.D0003"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0003"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0003</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the viewport source does not provide exactly one document. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute specifies an XSLT match pattern. Each matching node in the source document is wrapped in a document node, as necessary, and provided, one at a time, to the viewport's </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555"> on a port named </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">current</span></tt><span class="deltaxml-old" style="background:#FF5555">. The base URI of the resulting document that is passed to the subpipeline is the base URI of the matched element or document. </span><a name="err.inline.D0010"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0010"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0010</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression on </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt><span class="deltaxml-old" style="background:#FF5555"> does not match an element or document. </span></p><p><span class="deltaxml-old" style="background:#FF5555">After a match is found, the entire subtree rooted at that match is processed as a unit. No further attempts are made to match nodes among the descendants of any matched node.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The environment inherited by the </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-old" style="background:#FF5555">contained steps</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt><span class="deltaxml-old" style="background:#FF5555"> is the </span><em class="glossterm"><a href="#dt-inherited-environment"><span class="deltaxml-old" style="background:#FF5555">inherited environment</span></a></em><span class="deltaxml-old" style="background:#FF5555"> with these modifications:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">The port named “</span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">current</span></tt><span class="deltaxml-old" style="background:#FF5555">” on the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt><span class="deltaxml-old" style="background:#FF5555"> is added to the </span><em class="glossterm"><a href="#dt-readable-ports"><span class="deltaxml-old" style="background:#FF5555">readable ports</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">The port named “</span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">current</span></tt><span class="deltaxml-old" style="background:#FF5555">” on the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt><span class="deltaxml-old" style="background:#FF5555"> is made the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-old" style="background:#FF5555">default readable port</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></li></ul></div><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt><span class="deltaxml-old" style="background:#FF5555"> must contain a single, </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-old" style="background:#FF5555">primary output port</span></a></em><span class="deltaxml-old" style="background:#FF5555"> declared explicitly or </span><a href="#primary-input-output"><span class="deltaxml-old" style="background:#FF5555">supplied by default</span></a><span class="deltaxml-old" style="background:#FF5555">. If that port has no </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-old" style="background:#FF5555">connection</span></a></em><span class="deltaxml-old" style="background:#FF5555">, then it is connected to the </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-old" style="background:#FF5555">primary output port</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of the </span><em class="glossterm"><a href="#dt-last-step"><span class="deltaxml-old" style="background:#FF5555">last step</span></a></em><span class="deltaxml-old" style="background:#FF5555"> in the </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span><a name="err.inline.S0006.1"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0006"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0006</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the primary output port is unconnected and the </span><em class="glossterm"><a href="#dt-last-step"><span class="deltaxml-old" style="background:#FF5555">last step</span></a></em><span class="deltaxml-old" style="background:#FF5555"> in the subpipeline does not have a primary output port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">What appears on the output from the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt><span class="deltaxml-old" style="background:#FF5555"> will be a copy of the input document where each matching node is replaced by the result of applying the subpipeline to the subtree rooted at that node. In other words, if the match pattern matches a particular element then that element is wrapped in a document node and provided on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">current</span></tt><span class="deltaxml-old" style="background:#FF5555"> port, the subpipeline in the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt><span class="deltaxml-old" style="background:#FF5555"> is evaluated, and the result that appears on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">output</span></tt><span class="deltaxml-old" style="background:#FF5555"> port replaces the matched element. </span></p><p><span class="deltaxml-old" style="background:#FF5555">If no documents appear on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">output</span></tt><span class="deltaxml-old" style="background:#FF5555"> port, the matched element will effectively be deleted. If exactly one document appears, the contents of that document will replace the matched element. If a sequence of documents appears, then the contents of each document in that sequence (in the order it appears in the sequence) will replace the matched element.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The output of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt><span class="deltaxml-old" style="background:#FF5555"> itself is a single document that appears on a port named “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555">”. Note that the semantics of </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt><span class="deltaxml-old" style="background:#FF5555"> are special. The </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">output</span></tt><span class="deltaxml-old" style="background:#FF5555"> port in the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt><span class="deltaxml-old" style="background:#FF5555"> is used only to access the results of the subpipeline. The output of the step itself appears on a port with the fixed name “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555">” that is never explicitly declared.</span></p><div class="section"><h5><a name="viewport-xpath-context" id="viewport-xpath-context"></a><span class="deltaxml-old" style="background:#FF5555">4.3.1 XPath Context</span></h5><p><span class="deltaxml-old" style="background:#FF5555">Within a </span><a href="#p.viewport"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, the </span><a href="#f.iteration-position"><tt class="function"><span class="deltaxml-old" style="background:#FF5555">p:iteration-position</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#f.iteration-size"><tt class="function"><span class="deltaxml-old" style="background:#FF5555">p:iteration-size</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> are taken from the sequence of documents that will be processed by the </span><a href="#p.viewport"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt></a><span class="deltaxml-old" style="background:#FF5555">. The total number of documents is the </span><a href="#f.iteration-size"><tt class="function"><span class="deltaxml-old" style="background:#FF5555">p:iteration-size</span></tt></a><span class="deltaxml-old" style="background:#FF5555">; the ordinal value of the current document (the document appearing on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">current</span></tt><span class="deltaxml-old" style="background:#FF5555"> port) is the </span><a href="#f.iteration-position"><tt class="function"><span class="deltaxml-old" style="background:#FF5555">p:iteration-position</span></tt></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><div class="admonition" id="impl2"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note to implementers</span></div><p><span class="deltaxml-old" style="background:#FF5555">In the case where no XPath expression that must be evaluated by the processor makes any reference to </span><a href="#f.iteration-size"><tt class="function"><span class="deltaxml-old" style="background:#FF5555">p:iteration-size</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, its value does not actually have to be calculated (and the entire input sequence does not, therefore, need to be buffered so that its size can be calculated before processing begins).</span></p></div></div><div class="section"><h5><a name="example-viewport" id="example-viewport"></a><span class="deltaxml-old" style="background:#FF5555">4.3.2 Example</span></h5><p><span class="deltaxml-old" style="background:#FF5555">A </span><a href="#p.viewport"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> might accept an XHTML document as its input, add an </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">hr</span></tt><span class="deltaxml-old" style="background:#FF5555"> element at the beginning of all </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">div</span></tt><span class="deltaxml-old" style="background:#FF5555"> elements that have the class value “chapter”, and return an XHTML document that is the same as the original except for that change.</span></p><div class="example-wrapper" id="ex.p.viewport"><div class="title"><span class="deltaxml-old" style="background:#FF5555">Example 6. A Sample Viewport</span></div><div class="example"><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:viewport match="h:div[@class='chapter']" xmlns:h="http://www.w3.org/1999/xhtml"&gt; &lt;p:insert position="first-child"&gt; &lt;p:input port="insertion"&gt; &lt;p:inline&gt; &lt;hr xmlns="http://www.w3.org/1999/xhtml"/&gt; &lt;/p:inline&gt; &lt;/p:input&gt; &lt;/p:insert&gt; &lt;/p:viewport&gt; </span></pre></div></div></div><p><span class="deltaxml-old" style="background:#FF5555">The nodes which match </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">h:div[@class='chapter']</span></tt><span class="deltaxml-old" style="background:#FF5555"> in the input document are selected. An </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">hr</span></tt><span class="deltaxml-old" style="background:#FF5555"> is inserted as the first child of each </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">h:div</span></tt><span class="deltaxml-old" style="background:#FF5555"> and the resulting version replaces the original </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">h:div</span></tt><span class="deltaxml-old" style="background:#FF5555">. The result of the whole step is a copy of the input document with a horizontal rule as the first child of each selected </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">h:div</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p></div></div><div class="section"><h4><a name="p.choose" id="p.choose"></a><span class="deltaxml-old" style="background:#FF5555">4.4 p:choose</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A choose is specified by the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt><span class="deltaxml-old" style="background:#FF5555"> element. It is a </span><em class="glossterm"><a href="#dt-multi-container-step"><span class="deltaxml-old" style="background:#FF5555">multi-container step</span></a></em><span class="deltaxml-old" style="background:#FF5555"> that selects exactly one of a list of alternative </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipelines</span></a></em><span class="deltaxml-old" style="background:#FF5555"> based on the evaluation of XPath expressions.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:choose</span><span class="deltaxml-old" style="background:#FF5555">  name? = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.xpath-context"><span class="deltaxml-old" style="background:#FF5555">p:xpath-context</span></a><span class="deltaxml-old" style="background:#FF5555">?,</span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.variable"><span class="deltaxml-old" style="background:#FF5555">p:variable</span></a><span class="deltaxml-old" style="background:#FF5555">*,</span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.when"><span class="deltaxml-old" style="background:#FF5555">p:when</span></a><span class="deltaxml-old" style="background:#FF5555">*,</span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.otherwise"><span class="deltaxml-old" style="background:#FF5555">p:otherwise</span></a><span class="deltaxml-old" style="background:#FF5555">?)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:choose&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt><span class="deltaxml-old" style="background:#FF5555"> has no inputs. It contains an arbitrary number of alternative </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipelines</span></a></em><span class="deltaxml-old" style="background:#FF5555">, exactly one of which will be evaluated.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The list of alternative subpipelines consists of zero or more subpipelines guarded by an XPath expression, followed optionally by a single default subpipeline.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt><span class="deltaxml-old" style="background:#FF5555"> considers each subpipeline in turn and selects the first (and only the first) subpipeline for which the guard expression evaluates to true in its context. If there are no subpipelines for which the expression evaluates to true, the default subpipeline, if it was specified, is selected.</span></p><p><span class="deltaxml-old" style="background:#FF5555">After a </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555"> is selected, it is evaluated as if only it had been present.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The outputs of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt><span class="deltaxml-old" style="background:#FF5555"> are taken from the outputs of the selected </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555">. The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt><span class="deltaxml-old" style="background:#FF5555"> has the same number of outputs as the selected subpipeline with the same names. If the selected subpipeline has a </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-old" style="background:#FF5555">primary output port</span></a></em><span class="deltaxml-old" style="background:#FF5555">, the port with the same name on the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt><span class="deltaxml-old" style="background:#FF5555"> is also a primary output port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">In order to ensure that the output of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt><span class="deltaxml-old" style="background:#FF5555"> is consistent irrespective of the </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555"> chosen, each </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555"> must declare the same number of outputs with the same names. If any of the subpipelines specifies a </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-old" style="background:#FF5555">primary output port</span></a></em><span class="deltaxml-old" style="background:#FF5555">, each subpipeline must specify exactly the same output as primary. </span><a name="err.inline.S0007"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0007"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0007</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if two </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipelines</span></a></em><span class="deltaxml-old" style="background:#FF5555"> in a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt><span class="deltaxml-old" style="background:#FF5555"> declare different outputs.</span></p><p><span class="deltaxml-old" style="background:#FF5555">As a convenience to authors, it is not an error if some subpipelines declare outputs that can produce sequences and some do not. Each output of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt><span class="deltaxml-old" style="background:#FF5555"> is declared to produce a sequence if that output is declared to produce a sequence in any of its subpipelines.</span></p><p><a name="err.inline.D0004"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0004"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0004</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if no </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555"> is selected by the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt><span class="deltaxml-old" style="background:#FF5555"> and no default is provided.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt><span class="deltaxml-old" style="background:#FF5555"> can specify the context node against which the XPath expressions that occur on each branch are evaluated. The context node is specified as a </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-old" style="background:#FF5555">connection</span></a></em><span class="deltaxml-old" style="background:#FF5555"> in the </span><a href="#p.xpath-context"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xpath-context</span></tt></a><span class="deltaxml-old" style="background:#FF5555">. If no explicit connection is provided, the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-old" style="background:#FF5555">default readable port</span></a></em><span class="deltaxml-old" style="background:#FF5555"> is used. If the context node is connected to </span><a href="#p.empty"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, or is unconnected and the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-old" style="background:#FF5555">default readable port</span></a></em><span class="deltaxml-old" style="background:#FF5555"> is undefined, the context item is undefined.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Each conditional </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555"> is represented by a </span><a href="#p.when"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:when</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element. The default branch is represented by a </span><a href="#p.otherwise"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:otherwise</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element.</span></p><div class="section"><h5><a name="p.xpath-context" id="p.xpath-context"></a><span class="deltaxml-old" style="background:#FF5555">4.4.1 p:xpath-context</span></h5><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xpath-context</span></tt><span class="deltaxml-old" style="background:#FF5555"> element specifies the context node against which an XPath expression will be evaluated. When it appears in a </span><a href="#p.when"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:when</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, it specifies the context for that </span><a href="#p.when"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:when</span></tt></a><span class="deltaxml-old" style="background:#FF5555">’s </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">test</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute. When it appears in </span><a href="#p.choose"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, it specifies the default context for all of the </span><a href="#p.when"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:when</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> elements in that </span><a href="#p.choose"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:xpath-context&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.empty"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.pipe"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.document"><span class="deltaxml-old" style="background:#FF5555">p:document</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.inline"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.data"><span class="deltaxml-old" style="background:#FF5555">p:data</span></a><span class="deltaxml-old" style="background:#FF5555">)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:xpath-context&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">Only one </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-old" style="background:#FF5555">connection</span></a></em><span class="deltaxml-old" style="background:#FF5555"> is allowed and it works the same way that connections work on a </span><a href="#p.input"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:input</span></tt></a><span class="deltaxml-old" style="background:#FF5555">. No </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression is allowed. </span><a name="err.inline.D0005"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0005"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0005</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if more than one document appears on the connection for the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">xpath-context</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xpath-context</span></tt><span class="deltaxml-old" style="background:#FF5555"> element only provides the context node. The namespace bindings, in-scope variables, and other aspects of the context come from the element on which the XPath expression occurs.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the context node is connected to </span><a href="#p.empty"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, or is unconnected and the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-old" style="background:#FF5555">default readable port</span></a></em><span class="deltaxml-old" style="background:#FF5555"> is undefined, the context item is undefined.</span></p></div><div class="section"><h5><a name="p.when" id="p.when"></a><span class="deltaxml-old" style="background:#FF5555">4.4.2 p:when</span></h5><p><span class="deltaxml-old" style="background:#FF5555">A when specifies one subpipeline guarded by a test expression. </span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:when</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">test</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.xpath-context"><span class="deltaxml-old" style="background:#FF5555">p:xpath-context</span></a><span class="deltaxml-old" style="background:#FF5555">?,</span><span class="deltaxml-old" style="background:#FF5555">     (</span><a href="#p.output"><span class="deltaxml-old" style="background:#FF5555">p:output</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.log"><span class="deltaxml-old" style="background:#FF5555">p:log</span></a><span class="deltaxml-old" style="background:#FF5555">)*,</span><span class="deltaxml-old" style="background:#FF5555">     </span><var><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></var><span class="deltaxml-old" style="background:#FF5555">)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:when&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">Each </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:when</span></tt><span class="deltaxml-old" style="background:#FF5555"> branch of the </span><a href="#p.choose"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> has a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">test</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute which </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> contain an XPath expression. That XPath expression's effective boolean value is the guard for the </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555"> contained within that </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:when</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:when</span></tt><span class="deltaxml-old" style="background:#FF5555"> can specify a context node against which its </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">test</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression is to be evaluated. That context node is specified as a </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-old" style="background:#FF5555">connection</span></a></em><span class="deltaxml-old" style="background:#FF5555"> for the </span><a href="#p.xpath-context"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xpath-context</span></tt></a><span class="deltaxml-old" style="background:#FF5555">. If no context is specified on the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:when</span></tt><span class="deltaxml-old" style="background:#FF5555">, the context of the </span><a href="#p.choose"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> is used.</span></p></div><div class="section"><h5><a name="p.otherwise" id="p.otherwise"></a><span class="deltaxml-old" style="background:#FF5555">4.4.3 p:otherwise</span></h5><p><span class="deltaxml-old" style="background:#FF5555">An otherwise specifies the default branch; the subpipeline selected if no test expression on any preceding </span><a href="#p.when"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:when</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> evaluates to true.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:otherwise&gt;</span><span class="deltaxml-old" style="background:#FF5555">    ((</span><a href="#p.output"><span class="deltaxml-old" style="background:#FF5555">p:output</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.log"><span class="deltaxml-old" style="background:#FF5555">p:log</span></a><span class="deltaxml-old" style="background:#FF5555">)*,</span><span class="deltaxml-old" style="background:#FF5555">     </span><var><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></var><span class="deltaxml-old" style="background:#FF5555">)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:otherwise&gt;</span></code></p></div><div class="section"><h5><a name="example-choose" id="example-choose"></a><span class="deltaxml-old" style="background:#FF5555">4.4.4 Example</span></h5><p><span class="deltaxml-old" style="background:#FF5555">A </span><a href="#p.choose"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> might test the version attribute of the document element and validate with an appropriate schema.</span></p><div class="example-wrapper" id="ex.p.choose"><div class="title"><span class="deltaxml-old" style="background:#FF5555">Example 7. A Sample Choose</span></div><div class="example"><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:choose name="version"&gt; &lt;p:when test="/*[@version = 2]"&gt; &lt;p:validate-with-xml-schema&gt; &lt;p:input port="schema"&gt; &lt;p:document href="v2schema.xsd"/&gt; &lt;/p:input&gt; &lt;/p:validate-with-xml-schema&gt; &lt;/p:when&gt; &lt;p:when test="/*[@version = 1]"&gt; &lt;p:validate-with-xml-schema&gt; &lt;p:input port="schema"&gt; &lt;p:document href="v1schema.xsd"/&gt; &lt;/p:input&gt; &lt;/p:validate-with-xml-schema&gt; &lt;/p:when&gt; &lt;p:when test="/*[@version]"&gt; &lt;p:identity/&gt; &lt;/p:when&gt; &lt;p:otherwise&gt; &lt;p:error code="NOVERSION"&gt; &lt;p:input port="source"&gt; &lt;p:inline&gt; &lt;message&gt;Required version attribute missing.&lt;/message&gt; &lt;/p:inline&gt; &lt;/p:input&gt; &lt;/p:error&gt; &lt;/p:otherwise&gt; &lt;/p:choose&gt; </span></pre></div></div></div></div></div><div class="section"><h4><a name="p.group" id="p.group"></a><span class="deltaxml-old" style="background:#FF5555">4.5 p:group</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A group is specified by the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:group</span></tt><span class="deltaxml-old" style="background:#FF5555"> element. In a </span><a href="#p.try"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, it is a non-step wrapper, everywhere else, it is a </span><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-old" style="background:#FF5555">compound step</span></a></em><span class="deltaxml-old" style="background:#FF5555">. A group encapsulates the behavior of its </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:group</span><span class="deltaxml-old" style="background:#FF5555">  name? = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    ((</span><a href="#p.output"><span class="deltaxml-old" style="background:#FF5555">p:output</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.log"><span class="deltaxml-old" style="background:#FF5555">p:log</span></a><span class="deltaxml-old" style="background:#FF5555">)*,</span><span class="deltaxml-old" style="background:#FF5555">     </span><var><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></var><span class="deltaxml-old" style="background:#FF5555">)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:group&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:group</span></tt><span class="deltaxml-old" style="background:#FF5555"> is a convenience wrapper for a collection of steps. </span></p><div class="section"><h5><a name="example-group" id="example-group"></a><span class="deltaxml-old" style="background:#FF5555">4.5.1 Example</span></h5><div class="example-wrapper" id="ex.p.group"><div class="title"><span class="deltaxml-old" style="background:#FF5555">Example 8. An Example Group</span></div><div class="example"><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:group&gt; &lt;p:variable name="db-key" select="'some-long-string-of-nearly-random-characters'"/&gt; &lt;p:choose&gt; &lt;p:when test="/config/output = 'fo'"&gt; &lt;p:xslt&gt; &lt;p:with-param name="key" select="$db-key"/&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="fo.xsl"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;/p:when&gt; &lt;p:when test="/config/output = 'svg'"&gt; &lt;p:xslt&gt; &lt;p:with-param name="key" select="$db-key"/&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="svg.xsl"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;/p:when&gt; &lt;p:otherwise&gt; &lt;p:xslt&gt; &lt;p:with-param name="key" select="$db-key"/&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="html.xsl"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;/p:otherwise&gt; &lt;/p:choose&gt; &lt;/p:group&gt; </span></pre></div></div></div></div></div><div class="section"><h4><a name="p.try" id="p.try"></a><span class="deltaxml-old" style="background:#FF5555">4.6 p:try</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A try/catch is specified by the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt><span class="deltaxml-old" style="background:#FF5555"> element. It is a </span><em class="glossterm"><a href="#dt-multi-container-step"><span class="deltaxml-old" style="background:#FF5555">multi-container step</span></a></em><span class="deltaxml-old" style="background:#FF5555"> that isolates a </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555">, preventing any dynamic errors that arise within it from being exposed to the rest of the pipeline.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:try</span><span class="deltaxml-old" style="background:#FF5555">  name? = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.variable"><span class="deltaxml-old" style="background:#FF5555">p:variable</span></a><span class="deltaxml-old" style="background:#FF5555">*,</span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.group"><span class="deltaxml-old" style="background:#FF5555">p:group</span></a><span class="deltaxml-old" style="background:#FF5555">,</span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.catch"><span class="deltaxml-old" style="background:#FF5555">p:catch</span></a><span class="deltaxml-old" style="background:#FF5555">)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:try&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><a href="#p.group"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:group</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> represents the initial subpipeline and the recovery (or “catch”) pipeline is identified with a </span><a href="#p.catch"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:catch</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt><span class="deltaxml-old" style="background:#FF5555"> step evaluates the initial subpipeline and, if no errors occur, the outputs of that pipeline are the outputs of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt><span class="deltaxml-old" style="background:#FF5555"> step. However, if any errors occur, the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt><span class="deltaxml-old" style="background:#FF5555"> abandons the first subpipeline, discarding any output that it might have generated, and evaluates the recovery subpipeline.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the recovery subpipeline is evaluated, the outputs of the recovery subpipeline are the outputs of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt><span class="deltaxml-old" style="background:#FF5555"> step. If the recovery subpipeline is evaluated and a step within that subpipeline fails, the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt><span class="deltaxml-old" style="background:#FF5555"> fails.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The outputs of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt><span class="deltaxml-old" style="background:#FF5555"> are taken from the outputs of the initial subpipeline or the recovery subpipeline if an error occurred in the initial subpipeline. The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt><span class="deltaxml-old" style="background:#FF5555"> has the same number of outputs as the selected subpipeline with the same names. If the selected subpipeline has a </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-old" style="background:#FF5555">primary output port</span></a></em><span class="deltaxml-old" style="background:#FF5555">, the port with the same name on the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt><span class="deltaxml-old" style="background:#FF5555"> is also a primary output port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">In order to ensure that the output of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt><span class="deltaxml-old" style="background:#FF5555"> is consistent irrespective of whether the initial subpipeline provides its output or the recovery subpipeline does, both subpipelines must declare the same number of outputs with the same names. If either of the subpipelines specifies a </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-old" style="background:#FF5555">primary output port</span></a></em><span class="deltaxml-old" style="background:#FF5555">, both subpipelines must specify exactly the same output as primary. </span><a name="err.inline.S0009"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0009"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0009</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><a href="#p.group"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:group</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#p.catch"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:catch</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> subpipelines declare different outputs.</span></p><p><span class="deltaxml-old" style="background:#FF5555">As a convenience to authors, it is not an error if an output port can produce a sequence in the initial subpipeline but not in the recovery subpipeline, or vice versa. Each output of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt><span class="deltaxml-old" style="background:#FF5555"> is declared to produce a sequence if that output is declared to produce a sequence in either of its subpipelines.</span></p><p><span class="deltaxml-old" style="background:#FF5555">A pipeline author can cause an error to occur with the </span><a href="#c.error"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:error</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The recovery subpipeline of a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt><span class="deltaxml-old" style="background:#FF5555"> is identified with a </span><a href="#p.catch"><tt class="tag-element" id="p.catch"><span class="deltaxml-old" style="background:#FF5555">p:catch</span></tt></a><span class="deltaxml-old" style="background:#FF5555">:</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:catch</span><span class="deltaxml-old" style="background:#FF5555">  name? = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    ((</span><a href="#p.output"><span class="deltaxml-old" style="background:#FF5555">p:output</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.log"><span class="deltaxml-old" style="background:#FF5555">p:log</span></a><span class="deltaxml-old" style="background:#FF5555">)*,</span><span class="deltaxml-old" style="background:#FF5555">     </span><var><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></var><span class="deltaxml-old" style="background:#FF5555">)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:catch&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The environment inherited by the </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-old" style="background:#FF5555">contained steps</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of the </span><a href="#p.catch"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:catch</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> is the </span><em class="glossterm"><a href="#dt-inherited-environment"><span class="deltaxml-old" style="background:#FF5555">inherited environment</span></a></em><span class="deltaxml-old" style="background:#FF5555"> with this modification:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">The port named “</span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">error</span></tt><span class="deltaxml-old" style="background:#FF5555">” on the </span><a href="#p.catch"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:catch</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> is added to the </span><em class="glossterm"><a href="#dt-readable-ports"><span class="deltaxml-old" style="background:#FF5555">readable ports</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></li></ul></div><p><span class="deltaxml-old" style="background:#FF5555">What appears on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">error</span></tt><span class="deltaxml-old" style="background:#FF5555"> output port is an </span><a href="#err-vocab"><span class="deltaxml-old" style="background:#FF5555">error document</span></a><span class="deltaxml-old" style="background:#FF5555">. The error document may contain messages generated by steps that were part of the initial subpipeline. Not all messages that appear are indicative of errors; for example, it is common for all </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">xsl:message</span></tt><span class="deltaxml-old" style="background:#FF5555"> output from the XSLT component to appear on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">error</span></tt><span class="deltaxml-old" style="background:#FF5555"> output port. It is possible that the component which fails may not produce any messages at all. It is also possible that the failure of one component may cause others to fail so that there may be multiple failure messages in the document.</span></p><div class="section"><h5><a name="err-vocab" id="err-vocab"></a><span class="deltaxml-old" style="background:#FF5555">4.6.1 The Error Vocabulary</span></h5><p><span class="deltaxml-old" style="background:#FF5555">In general, it is very difficult to predict error behavior. Step failure may be catastrophic (programmer error), or it may be the result of user error, resource failures, etc. Steps may detect more than one error, and the failure of one step may cause other steps to fail as well.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><a href="#p.try"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt></a><span class="deltaxml-old" style="background:#FF5555">/</span><a href="#p.catch"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:catch</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> mechanism gives pipeline authors the opportunity to process the errors that caused the </span><a href="#p.try"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> to fail. In order to facilitate some modicum of interoperability among processors, errors that are reported on the </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">error</span></tt><span class="deltaxml-old" style="background:#FF5555"> output port of a </span><a href="#p.catch"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:catch</span></tt></a><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> conform to the format described here. </span></p><div class="section"><h6><a name="cv.errors" id="cv.errors"></a><span class="deltaxml-old" style="background:#FF5555">4.6.1.1 c:errors</span></h6><p><span class="deltaxml-old" style="background:#FF5555">The error vocabulary consists of a root element, </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:errors</span></tt><span class="deltaxml-old" style="background:#FF5555"> which contains zero or more </span><a href="#cv.error"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:error</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> elements.</span></p><p class="element-syntax element-syntax-error-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:errors&gt;</span><span class="deltaxml-old" style="background:#FF5555">    </span><a href="#cv.error"><span class="deltaxml-old" style="background:#FF5555">c:error</span></a><span class="deltaxml-old" style="background:#FF5555">*</span><span class="deltaxml-old" style="background:#FF5555">&lt;/c:errors&gt;</span></code></p></div><div class="section"><h6><a name="cv.error" id="cv.error"></a><span class="deltaxml-old" style="background:#FF5555">4.6.1.2 c:error</span></h6><p><span class="deltaxml-old" style="background:#FF5555">Each specific error is represented by an </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:error</span></tt><span class="deltaxml-old" style="background:#FF5555"> element:</span></p><p class="element-syntax element-syntax-error-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:error</span><span class="deltaxml-old" style="background:#FF5555">  name? = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  type? = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  code? = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  href? = </span><var><span class="deltaxml-old" style="background:#FF5555">anyURI</span></var><span class="deltaxml-old" style="background:#FF5555">  line? = </span><var><span class="deltaxml-old" style="background:#FF5555">integer</span></var><span class="deltaxml-old" style="background:#FF5555">  column? = </span><var><span class="deltaxml-old" style="background:#FF5555">integer</span></var><span class="deltaxml-old" style="background:#FF5555">  offset? = </span><var><span class="deltaxml-old" style="background:#FF5555">integer</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><var><span class="deltaxml-old" style="background:#FF5555">anyElement</span></var><span class="deltaxml-old" style="background:#FF5555">)*</span><span class="deltaxml-old" style="background:#FF5555">&lt;/c:error&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">name</span></tt><span class="deltaxml-old" style="background:#FF5555"> and </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">type</span></tt><span class="deltaxml-old" style="background:#FF5555"> attributes identify the name and type, respectively, of the step which failed.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">code</span></tt><span class="deltaxml-old" style="background:#FF5555"> is a QName which identifies the error. For steps which have defined error codes, this is an opportunity for the step to identify the error in a machine-processable fashion. Many steps omit this because they do not include the concept of errors identified by QNames.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the error was caused by a specific document, or by the location of some erroneous construction in a specific document, the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">href</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">line</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">column</span></tt><span class="deltaxml-old" style="background:#FF5555">, and </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">offset</span></tt><span class="deltaxml-old" style="background:#FF5555"> attributes identify this location. Generally, the error location is identified either with line and column numbers or with an offset from the beginning of the document, but not usually both.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The content of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:error</span></tt><span class="deltaxml-old" style="background:#FF5555"> element is any well-formed XML. Specific steps, or specific implementations, may provide more detail about the format of the content of an error message.</span></p></div><div class="section"><h6><a name="error-example" id="error-example"></a><span class="deltaxml-old" style="background:#FF5555">4.6.1.3 Error Example</span></h6><p><span class="deltaxml-old" style="background:#FF5555">Consider the following XSLT stylesheet:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt; &lt;xsl:template match="/"&gt; &lt;xsl:message terminate="yes"&gt; &lt;xsl:text&gt;This stylesheet is &lt;/xsl:text&gt; &lt;emph&gt;pointless&lt;/emph&gt; &lt;xsl:text&gt;.&lt;/xsl:text&gt; &lt;/xsl:message&gt; &lt;/xsl:template&gt; &lt;/xsl:stylesheet&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">If it was used in a step named “xform” in a </span><a href="#p.try"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, the following error document might be produced:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;c:errors xmlns:c="http://www.w3.org/ns/xproc-step"&gt; &lt;c:error name="xform" type="p:xslt" href="style.xsl" line="6"&gt;This stylesheet is &lt;emph&gt;pointless&lt;/emph&gt;.&lt;/c:error&gt; &lt;/c:errors&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">It is not an error for steps to generate non-standard error output as long as it is well-formed.</span></p></div></div><div class="section"><h5><a name="example-try" id="example-try"></a><span class="deltaxml-old" style="background:#FF5555">4.6.2 Example</span></h5><p><span class="deltaxml-old" style="background:#FF5555">A pipeline might attempt to process a document by dispatching it to some web service. If the web service succeeds, then those results are passed to the rest of the pipeline. However, if the web service cannot be contacted or reports an error, the </span><a href="#p.catch"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:catch</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step can provide some sort of default for the rest of the pipeline.</span></p><div class="example-wrapper" id="ex.p.trycatch"><div class="title"><span class="deltaxml-old" style="background:#FF5555">Example 9. An Example Try/Catch</span></div><div class="example"><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:try&gt; &lt;p:group&gt; &lt;p:http-request&gt; &lt;p:input port="source"&gt; &lt;p:inline&gt; &lt;c:request method="post" href="http://example.com/form-action"&gt; &lt;c:body content-type="application/x-www-form-urlencoded"&gt;name=W3C&amp;amp;spec=XProc&lt;/c:body&gt; &lt;/c:request&gt; &lt;/p:inline&gt; &lt;/p:input&gt; &lt;/p:http-request&gt; &lt;/p:group&gt; &lt;p:catch&gt; &lt;p:identity&gt; &lt;p:input port="source"&gt; &lt;p:inline&gt; &lt;c:error&gt;HTTP Request Failed&lt;/c:error&gt; &lt;/p:inline&gt; &lt;/p:input&gt; &lt;/p:identity&gt; &lt;/p:catch&gt; &lt;/p:try&gt; </span></pre></div></div></div></div></div><div class="section"><h4><a name="p.atomic" id="p.atomic"></a><span class="deltaxml-old" style="background:#FF5555">4.7 Atomic Steps</span></h4><p><span class="deltaxml-old" style="background:#FF5555">In addition to the six step types described in the preceding sections, XProc provides a standard library of atomic step types. The full vocabulary of standards steps is described in </span><a href="#std-components" title="Standard Step Library"><span class="deltaxml-old" style="background:#FF5555">Section 7, “Standard Step Library”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">All of the standard, atomic steps are invoked in the same way:</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;</span><var><span class="deltaxml-old" style="background:#FF5555">p:atomic-step</span></var><span class="deltaxml-old" style="background:#FF5555">  name? = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.input"><span class="deltaxml-old" style="background:#FF5555">p:input</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.with-option"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.with-param"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.log"><span class="deltaxml-old" style="background:#FF5555">p:log</span></a><span class="deltaxml-old" style="background:#FF5555">)*</span><span class="deltaxml-old" style="background:#FF5555">&lt;/</span><var><span class="deltaxml-old" style="background:#FF5555">p:atomic-step</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">Where “</span><em class="replaceable"><tt class="replaceable"><span class="deltaxml-old" style="background:#FF5555">p:atomic-step</span></tt></em><span class="deltaxml-old" style="background:#FF5555">” </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be in the XProc namespace and </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be declared in either the standard library for the XProc version supported by the processor or explicitly imported by the surrounding pipeline (see </span><a href="#versioning-considerations" title="Versioning Considerations"><span class="deltaxml-old" style="background:#FF5555">Section 2.13, “Versioning Considerations”</span></a><span class="deltaxml-old" style="background:#FF5555">). </span></p></div><div class="section"><h4><a name="p.extension" id="p.extension"></a><span class="deltaxml-old" style="background:#FF5555">4.8 Extension Steps</span></h4><p><span class="deltaxml-old" style="background:#FF5555">Pipeline authors may also have access to additional steps not defined or described by this specification. Atomic extension steps are invoked just like standard steps:</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;</span><var><span class="deltaxml-old" style="background:#FF5555">pfx:atomic-step</span></var><span class="deltaxml-old" style="background:#FF5555">  name? = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.input"><span class="deltaxml-old" style="background:#FF5555">p:input</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.with-option"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.with-param"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.log"><span class="deltaxml-old" style="background:#FF5555">p:log</span></a><span class="deltaxml-old" style="background:#FF5555">)*</span><span class="deltaxml-old" style="background:#FF5555">&lt;/</span><var><span class="deltaxml-old" style="background:#FF5555">pfx:atomic-step</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">Extension steps </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must not</span></span><span class="deltaxml-old" style="background:#FF5555"> be in the XProc namespace and there </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a </span><em class="glossterm"><a href="#dt-visible"><span class="deltaxml-old" style="background:#FF5555">visible</span></a></em><span class="deltaxml-old" style="background:#FF5555"> step declaration at the point of use (see </span><a href="#scoping" title="Scoping of Names"><span class="deltaxml-old" style="background:#FF5555">Section 3.2, “Scoping of Names”</span></a><span class="deltaxml-old" style="background:#FF5555">).</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the relevant step declaration has no </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555">, then that step invokes the declared atomic step, which the processor must know how to perform. These steps are implementation-defined extensions. </span></p><p><span class="deltaxml-old" style="background:#FF5555">If the relevant step declaration has a </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555">, then that step runs the declared subpipeline. These steps are user- or implementation-defined extensions. Pipelines can refer to themselves (recursion is allowed), to pipelines defined in imported libraries, and to other pipelines in the same library if they are in a library.</span></p><p><a name="err.inline.S0010"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0010"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0010</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if a pipeline contains a step whose specified inputs, outputs, and options do not </span><em class="glossterm"><a href="#dt-matches"><span class="deltaxml-old" style="background:#FF5555">match</span></a></em><span class="deltaxml-old" style="background:#FF5555"> the </span><em class="glossterm"><a href="#dt-signature"><span class="deltaxml-old" style="background:#FF5555">signature</span></a></em><span class="deltaxml-old" style="background:#FF5555"> for steps of that type.</span></p><p><a name="err.inline.D0017"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0017"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0017</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the running pipeline attempts to invoke a step which the processor does not know how to perform.</span></p><p><a name="impl-30"></a><span class="deltaxml-old" style="background:#FF5555">The presence of other </span><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-old" style="background:#FF5555">compound steps</span></a></em><span class="deltaxml-old" style="background:#FF5555"> is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">; XProc provides no standard mechanism for defining them or describing what they can contain. </span><a name="err.inline.S0048"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0048"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0048</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to use a declared step as a </span><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-old" style="background:#FF5555">compound step</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><div class="section"><h5><a name="option-shortcut" id="option-shortcut"></a><span class="deltaxml-old" style="background:#FF5555">4.8.1 Syntactic Shortcut for Option Values</span></h5><p><span class="deltaxml-old" style="background:#FF5555">Namespace qualified attributes on a step are </span><em class="glossterm"><a href="#dt-extension-attribute"><span class="deltaxml-old" style="background:#FF5555">extension attributes</span></a></em><span class="deltaxml-old" style="background:#FF5555">. Attributes, other than </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">name</span></tt><span class="deltaxml-old" style="background:#FF5555">, that are not namespace qualified are treated as a syntactic shortcut for specifying the value of an option. In other words, the following two steps are equivalent:</span></p><p><span class="deltaxml-old" style="background:#FF5555">The first step uses the standard </span><a href="#p.with-option"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> syntax:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;ex:stepType&gt; &lt;p:with-option name="option-name" select="'some value'"/&gt; &lt;/ex:stepType&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">The second step uses the syntactic shortcut:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;ex:stepType option-name="some value"/&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">Note that there are significant limitations to this shortcut syntax:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-old" style="background:#FF5555">It only applies to option names that are not in a namespace.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">It only applies to option names that are not otherwise used on the step, such as “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">name</span></tt><span class="deltaxml-old" style="background:#FF5555">”.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">It can only be used to specify a constant value. Options that are computed at runtime must be written using the longer form.</span></p></li></ol></div><p><a name="err.inline.S0027"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0027"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0027</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if an option is specified with both the shortcut form and the long form. </span><a name="err.inline.S0031"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0031"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0031</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to use an option on an </span><em class="glossterm"><a href="#dt-atomic-step"><span class="deltaxml-old" style="background:#FF5555">atomic step</span></a></em><span class="deltaxml-old" style="background:#FF5555"> that is not declared on steps of that type. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The syntactic shortcuts apply equally to standard atomic steps and extension atomic steps.</span></p></div></div></div><div class="section"><h3><a name="other-elements" id="other-elements"></a><span class="deltaxml-old" style="background:#FF5555">5 Other pipeline elements</span></h3><div class="section"><h4><a name="p.input" id="p.input"></a><span class="deltaxml-old" style="background:#FF5555">5.1 p:input</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:input</span></tt><span class="deltaxml-old" style="background:#FF5555"> identifies an input port for a step. In some contexts, </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:input</span></tt><span class="deltaxml-old" style="background:#FF5555"> declares that a port with the specified name exists and identifies the properties of that port. In other contexts, it provides a connection for a port declared elsewhere. And in some contexts, it does both. The semantics of </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:input</span></tt><span class="deltaxml-old" style="background:#FF5555"> are complicated further by the fact that there are two kinds of inputs, ordinary “document” inputs and “parameter” inputs.</span></p><div class="section"><h5><a name="document-inputs" id="document-inputs"></a><span class="deltaxml-old" style="background:#FF5555">5.1.1 Document Inputs</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The declaration of a document input identifies the name of the port, whether or not the port accepts a sequence, whether or not the port is a </span><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-old" style="background:#FF5555">primary input port</span></a></em><span class="deltaxml-old" style="background:#FF5555">, and may provide a default connection for the port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">An input </span><em><span class="deltaxml-old" style="background:#FF5555">declaration</span></em><span class="deltaxml-old" style="background:#FF5555"> has the following form:</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">port</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  sequence? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  primary? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  kind? = "document"</span><span class="deltaxml-old" style="background:#FF5555">  select? = </span><var><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.empty"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      (</span><a href="#p.document"><span class="deltaxml-old" style="background:#FF5555">p:document</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.inline"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.data"><span class="deltaxml-old" style="background:#FF5555">p:data</span></a><span class="deltaxml-old" style="background:#FF5555">)+)?</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:input&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">port</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute defines the name of the port. </span><a name="err.inline.S0011"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0011"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0011</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to identify two ports with the same name on the same step.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">sequence</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute determines whether or not a sequence of documents is allowed on the port. </span><a name="err.inline.D0006"></a><span class="deltaxml-old" style="background:#FF5555">If </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">sequence</span></tt><span class="deltaxml-old" style="background:#FF5555"> is not specified, or has the value false, then it is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0006"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0006</span></code></a><span class="deltaxml-old" style="background:#FF5555">) unless exactly one document appears on the declared port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">primary</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is used to identify the </span><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-old" style="background:#FF5555">primary input port</span></a></em><span class="deltaxml-old" style="background:#FF5555">. An input port is a </span><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-old" style="background:#FF5555">primary input port</span></a></em><span class="deltaxml-old" style="background:#FF5555"> if </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">primary</span></tt><span class="deltaxml-old" style="background:#FF5555"> is specified with the value </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555"> or if the step has only a single input port and </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">primary</span></tt><span class="deltaxml-old" style="background:#FF5555"> is not specified. </span><a name="err.inline.S0030"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0030"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0030</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to specify that more than one input port is the primary.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">kind</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute distinguishes between the two kinds of inputs: document inputs and parameter inputs. An input port is a document input port if </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">kind</span></tt><span class="deltaxml-old" style="background:#FF5555"> is specified with the value “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">document</span></tt><span class="deltaxml-old" style="background:#FF5555">” or if </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">kind</span></tt><span class="deltaxml-old" style="background:#FF5555"> is not specified.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If a connection is provided in the declaration, then </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> may be used to select a portion of the input identified by the </span><a href="#p.empty"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#p.document"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:document</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#p.data"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:data</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, or </span><a href="#p.inline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> elements in the </span><a href="#p.input"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:input</span></tt></a><span class="deltaxml-old" style="background:#FF5555">. This select expression applies </span><em><span class="deltaxml-old" style="background:#FF5555">only</span></em><span class="deltaxml-old" style="background:#FF5555"> if the default connection is used. If an explicit connection is provided by the caller, then the default select expression is ignored.</span></p><div class="admonition"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">The </span><a href="#p.pipe"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element is explicitly excluded from a declaration because it would make the default value of an input dependent on the execution of some part of the pipeline. Default values are designed so that they can be computed statically.</span></p></div><p><span class="deltaxml-old" style="background:#FF5555">On a </span><a href="#p.declare-step"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> for an atomic step, the </span><a href="#p.input"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:input</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> simply declares the input port. </span><a name="err.inline.S0042"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0042"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0042</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to attempt to provide a connection for an input port on the declaration of an atomic step.</span></p><p><span class="deltaxml-old" style="background:#FF5555">An input </span><em><span class="deltaxml-old" style="background:#FF5555">connection</span></em><span class="deltaxml-old" style="background:#FF5555"> has the following form:</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">port</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  select? = </span><var><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.empty"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      (</span><a href="#p.pipe"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.document"><span class="deltaxml-old" style="background:#FF5555">p:document</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.inline"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.data"><span class="deltaxml-old" style="background:#FF5555">p:data</span></a><span class="deltaxml-old" style="background:#FF5555">)+)?</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:input&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">If no connection is provided for a </span><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-old" style="background:#FF5555">primary input port</span></a></em><span class="deltaxml-old" style="background:#FF5555">, the input will be connected to the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-old" style="background:#FF5555">default readable port</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span><a name="err.inline.S0032"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0032"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0032</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if no connection is provided and the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-old" style="background:#FF5555">default readable port</span></a></em><span class="deltaxml-old" style="background:#FF5555"> is undefined.</span></p><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> also be provided with a connection. The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression, if specified, applies the specified XPath select expression to the document(s) that are read. Each selected node is wrapped in a document (unless it is a document) and provided to the input port. In other words,</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:input port="source"&gt; &lt;p:document href="http://example.org/input.html"/&gt; &lt;/p:input&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">provides a single document, but</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:input port="source" select="//html:div" xmlns:html="http://www.w3.org/1999/xhtml"&gt; &lt;p:document href="http://example.org/input.html"/&gt; &lt;/p:input&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">provides a sequence of zero or more documents, one for each </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">html:div</span></tt><span class="deltaxml-old" style="background:#FF5555"> in </span><tt class="uri"><span class="deltaxml-old" style="background:#FF5555">http://example.org/input.html</span></tt><span class="deltaxml-old" style="background:#FF5555">. (Note that in the case of nested </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">html:div</span></tt><span class="deltaxml-old" style="background:#FF5555"> elements, this may result in the same content being returned in several documents.)</span></p><p><span class="deltaxml-old" style="background:#FF5555">A select expression can equally be applied to input read from another step. This input:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:input port="source" select="//html:div" xmlns:html="http://www.w3.org/1999/xhtml"&gt; &lt;p:pipe step="origin" port="result"/&gt; &lt;/p:input&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">provides a sequence of zero or more documents, one for each </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">html:div</span></tt><span class="deltaxml-old" style="background:#FF5555"> in the document (or each of the documents) that is read from the </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555"> port of the step named </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">origin</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The base URI of the document that results from a select expression is the base URI of the matched element or document. </span><a name="err.inline.D0016"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0016"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0016</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression on a </span><a href="#p.input"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:input</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> returns atomic values or anything other than element or document nodes (or an empty sequence).</span></p><p><span class="deltaxml-old" style="background:#FF5555">An input declaration may include a default connection. If no connection is provided for an input port which has a default connection, then the input is treated as if the default connection appeared.</span></p><p><span class="deltaxml-old" style="background:#FF5555">A default connection does not satisfy the requirement that a primary input port is automatically connected by the processor, nor is it used when no default readable port is defined. In other words, a </span><a href="#p.declare-step"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or a </span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> can define defaults for all of its inputs, whether they are primary or not, but defining a default for a primary input usually has no effect. It's never used by an atomic step since the step, when it's called, will always connect the primary input port to the default readable port (or cause a static error). The only case where it has value is on a </span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> when that pipeline is invoked directly by the processor. In that case, the processor </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> use the default connection if no external connection is provided for the port.</span></p></div><div class="section"><h5><a name="parameter-inputs" id="parameter-inputs"></a><span class="deltaxml-old" style="background:#FF5555">5.1.2 Parameter Inputs</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The declaration of a parameter input identifies the name of the port and that the port is a parameter input.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">port</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  sequence? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  primary? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">kind</span></strong><span class="deltaxml-old" style="background:#FF5555"> = "parameter"&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.empty"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      (</span><a href="#p.document"><span class="deltaxml-old" style="background:#FF5555">p:document</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.inline"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a><span class="deltaxml-old" style="background:#FF5555">)+)?</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:input&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">port</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute defines the name of the port. </span><a name="err.inline.S0011.1"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0011"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0011</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to identify two ports with the same name on the same step. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">sequence</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute determines whether or not a sequence of documents is allowed on the port. A sequence of documents is always allowed on a parameter input port. </span><a name="err.inline.S0040"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0040"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0040</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to specify any value other than </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">primary</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is used to identify the </span><em class="glossterm"><a href="#dt-primary-parameter-input-port"><span class="deltaxml-old" style="background:#FF5555">primary parameter input port</span></a></em><span class="deltaxml-old" style="background:#FF5555">. An input port is a </span><em class="glossterm"><a href="#dt-primary-parameter-input-port"><span class="deltaxml-old" style="background:#FF5555">primary parameter input port</span></a></em><span class="deltaxml-old" style="background:#FF5555"> if it is a </span><em class="glossterm"><a href="#dt-parameter-input-port"><span class="deltaxml-old" style="background:#FF5555">parameter input port</span></a></em><span class="deltaxml-old" style="background:#FF5555"> and </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">primary</span></tt><span class="deltaxml-old" style="background:#FF5555"> is specified with the value </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555"> or if the step has only a single parameter input port and </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">primary</span></tt><span class="deltaxml-old" style="background:#FF5555"> is not specified. </span><a name="err.inline.S0030.1"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0030"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0030</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to specify that more than one parameter input port is the primary.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">kind</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute distinguishes between the two kinds of inputs: document inputs and parameter inputs. An input port is a parameter input port only if the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">kind</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is specified with the value “parameter”. </span><a name="err.inline.S0033"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0033"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0033</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to specify any kind of input other than “document” or “parameter”. </span></p><p><span class="deltaxml-old" style="background:#FF5555">A parameter input port is a distinguished kind of input port. It exists only to receive computed parameters; if a step does not have a parameter input port then it cannot receive parameters. A parameter input port must satisfy all the constraints of a normal, document input port.</span></p><p><a name="err.inline.S0035"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0035"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0035</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the declaration of a parameter input port contains a connection; parameter input port declarations must be empty. </span></p><p><span class="deltaxml-old" style="background:#FF5555">When used on a step, parameter input ports are connected just like ordinary document ports. Parameter input ports always accept a sequence of documents. If no explicit connection is provided for a </span><em class="glossterm"><a href="#dt-primary-parameter-input-port"><span class="deltaxml-old" style="background:#FF5555">primary parameter input port</span></a></em><span class="deltaxml-old" style="background:#FF5555">, then the port will be connected to the primary parameter input port of the pipeline which contains the step. If no connection is provided for a parameter input port other than the primary parameter input port, then the port will be connected to an </span><em class="glossterm"><a href="#dt-empty-sequence"><span class="deltaxml-old" style="background:#FF5555">empty sequence</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of documents.</span></p><p><a name="err.inline.S0055"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0055"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0055</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if a primary parameter input port is unconnected and the pipeline that contains the step has no primary parameter input port unless at least one explicit </span><a href="#p.with-param"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> is provided for that port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">In other words, it is an error to leave a parameter input port unconnected, but any parameter passed explicitly to that port satisfies the connection requirement.</span></p><p><span class="deltaxml-old" style="background:#FF5555">This is an error:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="1.0"&gt; &lt;p:input port="source"/&gt; &lt;p:output port="result"/&gt; &lt;p:xslt&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="http://example.com/stylesheets/doc.xsl"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;/p:declare-step&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">The parameter input port on the </span><a href="#c.xslt"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xslt</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step has no connection and the pipeline that contains the step has no primary parameter input port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">This is not an error:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="1.0"&gt; &lt;p:input port="source"/&gt; &lt;p:output port="result"/&gt; &lt;p:xslt&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="http://example.com/stylesheets/doc.xsl"/&gt; &lt;/p:input&gt; &lt;p:with-param name="mode" select="'debug'"/&gt; &lt;/p:xslt&gt; &lt;/p:declare-step&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">Explicitly setting the “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">mode</span></tt><span class="deltaxml-old" style="background:#FF5555">” parameter satisfies the binding requirement. No other parameters can be passed to the </span><a href="#c.xslt"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xslt</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step.</span></p><p><span class="deltaxml-old" style="background:#FF5555">This, also, is not an error:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:pipeline xmlns:p="http://www.w3.org/ns/xproc" version="1.0"&gt; &lt;p:xslt&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="http://example.com/stylesheets/doc.xsl"/&gt; &lt;/p:input&gt; &lt;p:with-param name="mode" select="'debug'"/&gt; &lt;/p:xslt&gt; &lt;/p:pipeline&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">The parameter input port on the </span><a href="#c.xslt"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xslt</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step is bound to the primary parameter input port of the pipeline. The </span><a href="#c.xslt"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xslt</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step will receive the “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">mode</span></tt><span class="deltaxml-old" style="background:#FF5555">” parameter and any other parameters passed to the pipeline.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If a parameter input port on a </span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> is not connected, it is treated as if it was connected to an automatically created </span><a href="#c.sink"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:sink</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step. In other words, if a </span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> does not contain any steps that have parameter input ports, or if those ports are all explicitly connected elsewhere, the parameter input port is ignored. In this one case, it is not an error for an input port to be unconnected.</span></p><p><span class="deltaxml-old" style="background:#FF5555">A step which accepts a parameter input reads all of the documents presented on that port, using each </span><a href="#cv.param"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> (either at the root or inside the </span><a href="#cv.param-set"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param-set</span></tt></a><span class="deltaxml-old" style="background:#FF5555">) to establish the value of the named parameter. If the same name appears more than once, the last value specified is used. If the step also has literal </span><a href="#p.with-param"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> elements, they are also considered in document order. In other words, </span><a href="#p.with-param"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> elements that appear before the parameter input may be overridden by the computed parameters; </span><a href="#p.with-param"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> elements that appear after may override the computed values.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If a connection is manufactured for a primary parameter input port, that connection occurs logically last among the other parameters, options, and connections passed to the step. In other words, the parameter values that appear on that port will be used even if other values were specified with </span><a href="#p.with-param"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> elements. Users can change this priority by making the connection explicit and placing any </span><a href="#p.with-param"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> elements that they wish to function as overrides after the connection.</span></p><p><span class="deltaxml-old" style="background:#FF5555">All of the documents that appear on a parameter input must either be </span><a href="#cv.param"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> documents or </span><a href="#cv.param-set"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param-set</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> documents.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Consider the example in </span><a href="#ex.parameter" title="A Parameter Example"><span class="deltaxml-old" style="background:#FF5555">Example 10, “A Parameter Example”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><div class="example-wrapper" id="ex.parameter"><div class="title"><span class="deltaxml-old" style="background:#FF5555">Example 10. A Parameter Example</span></div><div class="example"><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:pipeline xmlns:p="http://www.w3.org/ns/xproc" version="1.0" name="main"&gt; &lt;p:xslt&gt; &lt;p:input port="source"&gt; &lt;p:pipe step="main" port="source"/&gt; &lt;/p:input&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="http://example.com/stylesheets/doc.xsl"/&gt; &lt;/p:input&gt; &lt;p:with-param name="output-type" select="'html'"/&gt; &lt;p:input port="parameters"&gt; &lt;p:pipe step="main" port="parameters"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;/p:pipeline&gt; </span></pre></div></div></div><p><span class="deltaxml-old" style="background:#FF5555">This </span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> declares that it accepts parameters. Suppose that (through some </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555"> mechanism) I have passed the parameters “</span><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">output-type</span></tt><span class="deltaxml-old" style="background:#FF5555">=</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">fo</span></tt><span class="deltaxml-old" style="background:#FF5555">” and “</span><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">profile</span></tt><span class="deltaxml-old" style="background:#FF5555">=</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">unclassified</span></tt><span class="deltaxml-old" style="background:#FF5555">” to the pipeline. These parameters are available on the </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">parameters</span></tt><span class="deltaxml-old" style="background:#FF5555"> input port. </span></p><p><span class="deltaxml-old" style="background:#FF5555">When the XSLT step runs, it will read those parameters and combine them with any parameters specified literally on the step. Because the parameter input comes </span><em><span class="deltaxml-old" style="background:#FF5555">after</span></em><span class="deltaxml-old" style="background:#FF5555"> the literal declaration for </span><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">output-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> on the step, the XSLT stylesheet will see both values that I passed in (“</span><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">output-type</span></tt><span class="deltaxml-old" style="background:#FF5555">=</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">fo</span></tt><span class="deltaxml-old" style="background:#FF5555">” and “</span><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">profile</span></tt><span class="deltaxml-old" style="background:#FF5555">=</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">unclassified</span></tt><span class="deltaxml-old" style="background:#FF5555">”).</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the parameter input came </span><em><span class="deltaxml-old" style="background:#FF5555">before</span></em><span class="deltaxml-old" style="background:#FF5555"> the literal declaration, then the XSLT stylesheet would see “</span><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">output-type</span></tt><span class="deltaxml-old" style="background:#FF5555">=</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">html</span></tt><span class="deltaxml-old" style="background:#FF5555">” and “</span><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">profile</span></tt><span class="deltaxml-old" style="background:#FF5555">=</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">unclassified</span></tt><span class="deltaxml-old" style="background:#FF5555">”.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Most steps don't bother to declare parameter inputs, or provide explicit connections for them, and “the right thing” usually happens.</span></p><div class="section"><h6><a name="cv.param" id="cv.param"></a><span class="deltaxml-old" style="background:#FF5555">5.1.2.1 The c:param element</span></h6><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param</span></tt><span class="deltaxml-old" style="background:#FF5555"> represents a parameter on a parameter input.</span></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:param</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">name</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  namespace? = </span><var><span class="deltaxml-old" style="background:#FF5555">anyURI</span></var><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">value</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">name</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param</span></tt><span class="deltaxml-old" style="background:#FF5555"> must have the lexical form of a QName.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">namespace</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is specified, then the expanded name of the parameter is constructed from the specified namespace and the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">name</span></tt><span class="deltaxml-old" style="background:#FF5555"> value. </span><a name="err.inline.D0025"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0025"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0025</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">namespace</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is specified, the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">name</span></tt><span class="deltaxml-old" style="background:#FF5555"> contains a colon, and the specified namespace is not the same as the in-scope namespace binding for the specified prefix. </span></p><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">namespace</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is not specified, and the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">name</span></tt><span class="deltaxml-old" style="background:#FF5555"> contains a colon, then the expanded name of the parameter is constructed using the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">name</span></tt><span class="deltaxml-old" style="background:#FF5555"> value and the namespace declarations in-scope on the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param</span></tt><span class="deltaxml-old" style="background:#FF5555"> element.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">namespace</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is not specified, and the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">name</span></tt><span class="deltaxml-old" style="background:#FF5555"> does not contain a colon, then the expanded name of the parameter is in no namespace.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Any namespace-qualified attribute names that appear on the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param</span></tt><span class="deltaxml-old" style="background:#FF5555"> element are ignored. </span><a name="err.inline.D0014"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0014"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0014</span></code></a><span class="deltaxml-old" style="background:#FF5555">) for any unqualified attribute names other than “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">name</span></tt><span class="deltaxml-old" style="background:#FF5555">”, “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">namespace</span></tt><span class="deltaxml-old" style="background:#FF5555">”, or “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">value</span></tt><span class="deltaxml-old" style="background:#FF5555">” to appear on a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param</span></tt><span class="deltaxml-old" style="background:#FF5555"> element.</span></p></div><div class="section"><h6><a name="cv.param-set" id="cv.param-set"></a><span class="deltaxml-old" style="background:#FF5555">5.1.2.2 The c:param-set element</span></h6><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param-set</span></tt><span class="deltaxml-old" style="background:#FF5555"> represents a set of parameters on a parameter input.</span></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:param-set&gt;</span><span class="deltaxml-old" style="background:#FF5555">    </span><a href="#cv.param"><span class="deltaxml-old" style="background:#FF5555">c:param</span></a><span class="deltaxml-old" style="background:#FF5555">*</span><span class="deltaxml-old" style="background:#FF5555">&lt;/c:param-set&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param-set</span></tt><span class="deltaxml-old" style="background:#FF5555"> contains zero or more </span><a href="#cv.param"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> elements. </span><a name="err.inline.D0018"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0018"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0018</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the parameter list contains any elements other than </span><a href="#cv.param"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param</span></tt></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Any namespace-qualified attribute names that appear on the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param-set</span></tt><span class="deltaxml-old" style="background:#FF5555"> element are ignored. </span><a name="err.inline.D0014.1"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0014"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0014</span></code></a><span class="deltaxml-old" style="background:#FF5555">) for any unqualified attribute names to appear on a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param-set</span></tt><span class="deltaxml-old" style="background:#FF5555"> element.</span></p></div></div></div><div class="section"><h4><a name="p.iteration-source" id="p.iteration-source"></a><span class="deltaxml-old" style="background:#FF5555">5.2 p:iteration-source</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:iteration-source</span></tt><span class="deltaxml-old" style="background:#FF5555"> identifies input to a </span><a href="#p.for-each"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></tt></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:iteration-source</span><span class="deltaxml-old" style="background:#FF5555">  select? = </span><var><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.empty"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      (</span><a href="#p.pipe"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.document"><span class="deltaxml-old" style="background:#FF5555">p:document</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.inline"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.data"><span class="deltaxml-old" style="background:#FF5555">p:data</span></a><span class="deltaxml-old" style="background:#FF5555">)+)?</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:iteration-source&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute and </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-old" style="background:#FF5555">connection</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:iteration-source</span></tt><span class="deltaxml-old" style="background:#FF5555"> work the same way that they do in a </span><a href="#p.input"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:input</span></tt></a><span class="deltaxml-old" style="background:#FF5555">.</span></p></div><div class="section"><h4><a name="p.viewport-source" id="p.viewport-source"></a><span class="deltaxml-old" style="background:#FF5555">5.3 p:viewport-source</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport-source</span></tt><span class="deltaxml-old" style="background:#FF5555"> identifies input to a </span><a href="#p.viewport"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></tt></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:viewport-source&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.pipe"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.document"><span class="deltaxml-old" style="background:#FF5555">p:document</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.inline"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.data"><span class="deltaxml-old" style="background:#FF5555">p:data</span></a><span class="deltaxml-old" style="background:#FF5555">)?</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:viewport-source&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">Only one </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-old" style="background:#FF5555">connection</span></a></em><span class="deltaxml-old" style="background:#FF5555"> is allowed and it works the same way that connections work on a </span><a href="#p.input"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:input</span></tt></a><span class="deltaxml-old" style="background:#FF5555">. </span><a name="err.inline.D0003.1"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0003"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0003</span></code></a><span class="deltaxml-old" style="background:#FF5555">) unless exactly one document appears on the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:viewport-source</span></tt><span class="deltaxml-old" style="background:#FF5555">. No </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression is allowed.</span></p></div><div class="section"><h4><a name="p.output" id="p.output"></a><span class="deltaxml-old" style="background:#FF5555">5.4 p:output</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:output</span></tt><span class="deltaxml-old" style="background:#FF5555"> identifies an output port, optionally connecting an input for it, if necessary.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">port</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  sequence? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  primary? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">port</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute defines the name of the port. </span><a name="err.inline.S0011.2"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0011"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0011</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to identify two ports with the same name on the same step.</span></p><p><span class="deltaxml-old" style="background:#FF5555">An output declaration can indicate if a sequence of documents is allowed to appear on the declared port. If </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">sequence</span></tt><span class="deltaxml-old" style="background:#FF5555"> is specified with the value </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555">, then a sequence is allowed. </span><a name="err.inline.D0007"></a><span class="deltaxml-old" style="background:#FF5555">If </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">sequence</span></tt><span class="deltaxml-old" style="background:#FF5555"> is not specified on </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:output</span></tt><span class="deltaxml-old" style="background:#FF5555">, or has the value false, then it is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0007"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0007</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the step does not produce exactly one document on the declared port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">primary</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is used to identify the primary output port. An output port is a primary output port if </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">primary</span></tt><span class="deltaxml-old" style="background:#FF5555"> is specified with the value </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555"> or if the step has only a single output port and primary is not specified. </span><a name="err.inline.S0014"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0014"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0014</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to identify more than one output port as primary.</span></p><p><span class="deltaxml-old" style="background:#FF5555">On </span><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-old" style="background:#FF5555">compound steps</span></a></em><span class="deltaxml-old" style="background:#FF5555">, the declaration </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> be accompanied by a </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-old" style="background:#FF5555">connection</span></a></em><span class="deltaxml-old" style="background:#FF5555"> for the output.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">port</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  sequence? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  primary? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.empty"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      (</span><a href="#p.pipe"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.document"><span class="deltaxml-old" style="background:#FF5555">p:document</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.inline"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.data"><span class="deltaxml-old" style="background:#FF5555">p:data</span></a><span class="deltaxml-old" style="background:#FF5555">)+)?</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:output&gt;</span></code></p><p><a name="err.inline.S0029"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0029"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0029</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to specify a connection for a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:output</span></tt><span class="deltaxml-old" style="background:#FF5555"> inside a </span><a href="#p.declare-step"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> for an atomic step.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If a connection is provided for a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:output</span></tt><span class="deltaxml-old" style="background:#FF5555">, documents are </span><em><span class="deltaxml-old" style="background:#FF5555">read from</span></em><span class="deltaxml-old" style="background:#FF5555"> that connection and those documents form the output that </span><em><span class="deltaxml-old" style="background:#FF5555">is written</span></em><span class="deltaxml-old" style="background:#FF5555"> to the output port. In other words, placing a </span><a href="#p.document"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:document</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> inside a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:output</span></tt><span class="deltaxml-old" style="background:#FF5555"> causes the processor to </span><em><span class="deltaxml-old" style="background:#FF5555">read that document</span></em><span class="deltaxml-old" style="background:#FF5555"> and provide it on the output port. It </span><em><span class="deltaxml-old" style="background:#FF5555">does not</span></em><span class="deltaxml-old" style="background:#FF5555"> cause the processor to </span><em><span class="deltaxml-old" style="background:#FF5555">write</span></em><span class="deltaxml-old" style="background:#FF5555"> the output to that document.</span></p></div><div class="section"><h4><a name="p.log" id="p.log"></a><span class="deltaxml-old" style="background:#FF5555">5.5 p:log</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:log</span></tt><span class="deltaxml-old" style="background:#FF5555"> element is a debugging aid. It associates a URI with a specific output port on a step:</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:log</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">port</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  href? = </span><var><span class="deltaxml-old" style="background:#FF5555">anyURI</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The semantics of </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:log</span></tt><span class="deltaxml-old" style="background:#FF5555"> are that it writes to the specified IRI whatever document or documents appear on the specified port. </span><a name="impl-31"></a><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">href</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is not specified, the location of the log file or files is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><a name="impl-32"></a><span class="deltaxml-old" style="background:#FF5555">How each document or sequence of documents is represented in a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:log</span></tt><span class="deltaxml-old" style="background:#FF5555"> is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">. Pipelines are not expected to be able to consume their own logging output. </span><a name="impl-33"></a><span class="deltaxml-old" style="background:#FF5555">The ability of a step to read the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:log</span></tt><span class="deltaxml-old" style="background:#FF5555"> output of some former step is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p><p><a name="err.inline.S0026"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0026"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0026</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the port specified on the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:log</span></tt><span class="deltaxml-old" style="background:#FF5555"> is not the name of an output port on the step in which it appears or if more than one </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:log</span></tt><span class="deltaxml-old" style="background:#FF5555"> element is applied to the same port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Implementations may, at user option, ignore all </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:log</span></tt><span class="deltaxml-old" style="background:#FF5555"> elements.</span></p><div class="admonition"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">This element represents a potential security risk: running unexamined 3rd-party pipelines could result in vital system resources being overwritten.</span></p></div></div><div class="section"><h4><a name="p.serialization" id="p.serialization"></a><span class="deltaxml-old" style="background:#FF5555">5.6 p:serialization</span></h4><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:serialization</span></tt><span class="deltaxml-old" style="background:#FF5555"> element allows the user to request serialization properties on a </span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> output. </span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:serialization</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">port</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  byte-order-mark? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  cdata-section-elements? = </span><var><span class="deltaxml-old" style="background:#FF5555">NMTOKENS</span></var><span class="deltaxml-old" style="background:#FF5555">  doctype-public? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  doctype-system? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  encoding? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  escape-uri-attributes? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  include-content-type? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  indent? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  media-type? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  method? = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  normalization-form? = </span><var><span class="deltaxml-old" style="background:#FF5555">NFC|NFD|NFKC|NFKD|fully-normalized|none|xs:NMTOKEN</span></var><span class="deltaxml-old" style="background:#FF5555">  omit-xml-declaration? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  standalone? = </span><var><span class="deltaxml-old" style="background:#FF5555">true|false|omit</span></var><span class="deltaxml-old" style="background:#FF5555">  undeclare-prefixes? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  version? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">If the pipeline processor serializes the output on the specified port, it </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> use the serialization options specified. If the processor is not serializing (if, for example, the pipeline has been called from another pipeline), then the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:serialization</span></tt><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be ignored. The processor </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> reject statically a pipeline that requests serialization options that it cannot provide.</span></p><p><a name="impl-34"></a><span class="deltaxml-old" style="background:#FF5555">The default value of any serialization options not specified on a particular </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:serialization</span></tt><span class="deltaxml-old" style="background:#FF5555"> element is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">. The allowed options are defined by [</span><a href="#xml-serialization"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Serialization</span></span></a><span class="deltaxml-old" style="background:#FF5555">]. </span><a name="err.inline.D0020"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0020"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0020</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the combination of serialization options specified or defaulted is not allowed. Implementations </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> check that all of the specified serialization options are allowed if they serialize the specified output. If the specified output is not being serialized (because it is being returned as the result of a call from within another pipeline, for example) implementations </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> but are not required to check that the specified options are allowed.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The semantics of the attributes on a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:serialization</span></tt><span class="deltaxml-old" style="background:#FF5555"> are described in </span><a href="#serialization-options" title="Serialization Options"><span class="deltaxml-old" style="background:#FF5555">Section 7.3, “Serialization Options”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><a name="err.inline.S0039"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0039"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0039</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the port specified on the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:serialization</span></tt><span class="deltaxml-old" style="background:#FF5555"> is not the name of an output port on the pipeline in which it appears or if more than one </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:serialization</span></tt><span class="deltaxml-old" style="background:#FF5555"> element is applied to the same port.</span></p></div><div class="section"><h4><a name="variables-options-parameters" id="variables-options-parameters"></a><span class="deltaxml-old" style="background:#FF5555">5.7 Variables, Options, and Parameters</span></h4><p><span class="deltaxml-old" style="background:#FF5555">Variables, options, and parameters provide a mechanism for pipeline authors to construct temporary results and hold onto them for reuse.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Variables are created in compound steps and, like XSLT variables, are single assignment, though they may be shadowed by subsequent declarations of other variables with the same name.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Options can be declared on atomic or compound steps. The value of an option can be specified by the caller invoking the step. Any value specified by the caller takes precedence over any default value specified in the declaration.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Parameters, unlike options and variables, have names that can be computed at runtime. The most common use of parameters is to pass parameter values to XSLT stylesheets.</span></p><div class="section"><h5><a name="p.variable" id="p.variable"></a><span class="deltaxml-old" style="background:#FF5555">5.7.1 p:variable</span></h5><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:variable</span></tt><span class="deltaxml-old" style="background:#FF5555"> declares a variable and associates a value with it.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The name of the variable </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a QName. If it does not contain a prefix then it is in no namespace. </span><a name="err.inline.S0028"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0028"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0028</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to declare an option or variable in the XProc namespace. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The variable's value is specified with a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute. The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be specified. The content of the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is an XPath expression which will be evaluated to provide the value of the variable.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:variable</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">name</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">select</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    ((</span><a href="#p.empty"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.pipe"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.document"><span class="deltaxml-old" style="background:#FF5555">p:document</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.inline"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.data"><span class="deltaxml-old" style="background:#FF5555">p:data</span></a><span class="deltaxml-old" style="background:#FF5555">)? &amp; </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.namespaces"><span class="deltaxml-old" style="background:#FF5555">p:namespaces</span></a><span class="deltaxml-old" style="background:#FF5555">*)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:variable&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">If a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression is given, it is evaluated as an XPath expression using the appropriate context as described in </span><a href="#xpath-context" title="XPaths in XProc"><span class="deltaxml-old" style="background:#FF5555">Section 2.6, “XPaths in XProc”</span></a><span class="deltaxml-old" style="background:#FF5555">, for the enclosing </span><em class="glossterm"><a href="#dt-container"><span class="deltaxml-old" style="background:#FF5555">container</span></a></em><span class="deltaxml-old" style="background:#FF5555">, with the addition of bindings for all preceding-sibling </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:variable</span></tt><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#p.option"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:option</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> elements. Regardless of the implicit type of the expression, the type is treated as an </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">xs:untypedAtomic</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Since all </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-old" style="background:#FF5555">in-scope bindings</span></a></em><span class="deltaxml-old" style="background:#FF5555"> are present in the Processor XPath Context as variable bindings, </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> expressions may refer to the value of </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-old" style="background:#FF5555">in-scope bindings</span></a></em><span class="deltaxml-old" style="background:#FF5555"> by variable reference. If a variable reference uses a QName that is not the name of an </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-old" style="background:#FF5555">in-scope binding</span></a></em><span class="deltaxml-old" style="background:#FF5555">, an XPath evaluation error will occur.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression is given, the </span><em class="glossterm"><a href="#dt-readable-ports"><span class="deltaxml-old" style="background:#FF5555">readable ports</span></a></em><span class="deltaxml-old" style="background:#FF5555"> available for document connections are the </span><em class="glossterm"><a href="#dt-readable-ports"><span class="deltaxml-old" style="background:#FF5555">readable ports</span></a></em><span class="deltaxml-old" style="background:#FF5555"> in the environment inherited by the first step in the surrounding </span><em class="glossterm"><a href="#dt-container"><span class="deltaxml-old" style="background:#FF5555">container</span></a></em><span class="deltaxml-old" style="background:#FF5555">'s </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-old" style="background:#FF5555">contained steps</span></a></em><span class="deltaxml-old" style="background:#FF5555">. However, in order to avoid ordering paradoxes, </span><a name="err.inline.S0019"></a><span class="deltaxml-old" style="background:#FF5555">it is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0019"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0019</span></code></a><span class="deltaxml-old" style="background:#FF5555">) for a variable's document connection to refer to the output port of any step in the surrounding </span><em class="glossterm"><a href="#dt-container"><span class="deltaxml-old" style="background:#FF5555">container</span></a></em><span class="deltaxml-old" style="background:#FF5555">'s </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-old" style="background:#FF5555">contained steps</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression is given but no document connection is provided, the implicit connection is to the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-old" style="background:#FF5555">default readable port</span></a></em><span class="deltaxml-old" style="background:#FF5555"> in the environment inherited by the first step in the surrounding </span><em class="glossterm"><a href="#dt-container"><span class="deltaxml-old" style="background:#FF5555">container</span></a></em><span class="deltaxml-old" style="background:#FF5555">'s </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-old" style="background:#FF5555">contained steps</span></a></em><span class="deltaxml-old" style="background:#FF5555">. If there is no default readable port, the connection is treated as if </span><a href="#p.empty"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> was specified.</span></p><p><a name="err.inline.D0008.1"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0008"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0008</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if a sequence of more than one document appears on the connection for a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:variable</span></tt><span class="deltaxml-old" style="background:#FF5555">. If </span><a href="#p.empty"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> is given or implied as the document connection, the context item is undefined. </span><a name="err.inline.D0026"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0026"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0026</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression makes reference to the context node, size, or position when the context item is undefined. </span></p></div><div class="section"><h5><a name="p.option" id="p.option"></a><span class="deltaxml-old" style="background:#FF5555">5.7.2 p:option</span></h5><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:option</span></tt><span class="deltaxml-old" style="background:#FF5555"> declares an option and may associate a default value with it. The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:option</span></tt><span class="deltaxml-old" style="background:#FF5555"> tag can only be used in a </span><a href="#p.declare-step"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or a </span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> (which is a syntactic abbreviation for a step declaration).</span></p><p><span class="deltaxml-old" style="background:#FF5555">The name of the option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a QName. If it does not contain a prefix then it is in no namespace. </span><a name="err.inline.S0028.1"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0028"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0028</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to declare an option or variable in the XProc namespace.</span></p><p><a name="err.inline.S0004.1"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0004"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0004</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to declare two or more options on the same step with the same name.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">name</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  required? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">An option may be declared as </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">required</span></tt><span class="deltaxml-old" style="background:#FF5555">. </span><a name="err.inline.S0018"></a><span class="deltaxml-old" style="background:#FF5555">If an option is required, it is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0018"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0018</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to invoke the step without specifying a value for that option.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If an option is not declared to be required, it </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> be given a default value. The value is specified with a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">name</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  required? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">select</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">If a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is specified, its content is an XPath expression which will be evaluated to provide the value of the option, which may differ from one instance of the step type to another.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression is only evaluated when its actual value is needed by an instance of the step type being declared. In this case, it is evaluated as described in </span><a href="#p.with-option" title="p:with-option"><span class="deltaxml-old" style="background:#FF5555">Section 5.7.3, “p:with-option”</span></a><span class="deltaxml-old" style="background:#FF5555"> except that</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">The context item is undefined.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">the variable bindings consist only of bindings for options whose declaration precedes the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:option</span></tt><span class="deltaxml-old" style="background:#FF5555"> itself in the surrounding step </span><em class="glossterm"><a href="#dt-signature"><span class="deltaxml-old" style="background:#FF5555">signature</span></a></em><span class="deltaxml-old" style="background:#FF5555">;</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">the in-scope namespaces are the in-scope namespaces of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:option</span></tt><span class="deltaxml-old" style="background:#FF5555"> itself.</span></p></li></ul></div><p><a name="err.inline.S0017"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0017"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0017</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to specify that an option is both </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">required</span></tt><em><span class="deltaxml-old" style="background:#FF5555">and</span></em><span class="deltaxml-old" style="background:#FF5555"> has a default value.</span></p><p><a name="err.inline.D0026.1"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0026"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0026</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression makes reference to the context node, size, or position.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Regardless of the implicit type of the expression, the value is an </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">xs:untypedAtomic</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p></div><div class="section"><h5><a name="p.with-option" id="p.with-option"></a><span class="deltaxml-old" style="background:#FF5555">5.7.3 p:with-option</span></h5><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></tt><span class="deltaxml-old" style="background:#FF5555"> provides an actual value for an option when a step is invoked.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The name of the option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a QName. If it does not contain a prefix then it is in no namespace. </span><a name="err.inline.S0031.1"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0031"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0031</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to use an option name in </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></tt><span class="deltaxml-old" style="background:#FF5555"> if the step type being invoked has not declared an option with that name. (This error does not apply for steps in the XProc namespace when the processor is operating in </span><a href="#vers-forwcomp"><span class="deltaxml-old" style="background:#FF5555">forwards-compatible mode</span></a><span class="deltaxml-old" style="background:#FF5555">.)</span></p><p><a name="err.inline.S0004.2"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0004"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0004</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to include more than one </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></tt><span class="deltaxml-old" style="background:#FF5555"> with the same option name as part of the same step invocation.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The actual value is specified with a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute. The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be specified. The value of the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is an XPath expression which will be evaluated to provide the value of the variable.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:with-option</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">name</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">select</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    ((</span><a href="#p.empty"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.pipe"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.document"><span class="deltaxml-old" style="background:#FF5555">p:document</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.inline"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.data"><span class="deltaxml-old" style="background:#FF5555">p:data</span></a><span class="deltaxml-old" style="background:#FF5555">)? &amp; </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.namespaces"><span class="deltaxml-old" style="background:#FF5555">p:namespaces</span></a><span class="deltaxml-old" style="background:#FF5555">*)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:with-option&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">Regardless of the implicit type of the expression, the value is an </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">xs:untypedAtomic</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">All </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-old" style="background:#FF5555">in-scope bindings</span></a></em><span class="deltaxml-old" style="background:#FF5555"> for the step instance itself are present in the Processor XPath Context as variable bindings, so </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> expressions may refer to any option or variable bound in those </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-old" style="background:#FF5555">in-scope bindings</span></a></em><span class="deltaxml-old" style="background:#FF5555"> by variable reference. If a variable reference uses a QName that is not the name of an </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-old" style="background:#FF5555">in-scope binding</span></a></em><span class="deltaxml-old" style="background:#FF5555"> or preceding sibling option, an XPath evaluation error will occur.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression is used but no document connection is provided, the implicit connection is to the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-old" style="background:#FF5555">default readable port</span></a></em><span class="deltaxml-old" style="background:#FF5555">. If there is no default readable port, the connection is treated as if </span><a href="#p.empty"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> was specified.</span></p><p><a name="err.inline.D0008.2"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0008"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0008</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if a sequence of more than one document appears on the connection for a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></tt><span class="deltaxml-old" style="background:#FF5555">. If </span><a href="#p.empty"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> is given or implied as the document connection, the context item is undefined. </span><a name="err.inline.D0026.2"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0026"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0026</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression makes reference to the context node, size, or position when the context item is undefined. </span></p></div><div class="section"><h5><a name="p.with-param" id="p.with-param"></a><span class="deltaxml-old" style="background:#FF5555">5.7.4 p:with-param</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></tt><span class="deltaxml-old" style="background:#FF5555"> element is used to establish the value of a parameter. The parameter </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be given a value when it is used. (Parameter names aren't known in advance; there's no provision for declaring them.)</span></p><p><span class="deltaxml-old" style="background:#FF5555">The name of the parameter </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a QName. If it does not contain a prefix then it is in no namespace. </span><a name="err.inline.D0031"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0031"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0031</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to use the XProc namespace in the name of a parameter.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The value is specified with a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute. The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be specified. The content of the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is an XPath expression which will be evaluated to provide the value of the variable.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:with-param</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">name</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">select</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></var><span class="deltaxml-old" style="background:#FF5555">  port? = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    ((</span><a href="#p.empty"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.pipe"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.document"><span class="deltaxml-old" style="background:#FF5555">p:document</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.inline"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.data"><span class="deltaxml-old" style="background:#FF5555">p:data</span></a><span class="deltaxml-old" style="background:#FF5555">)? &amp; </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.namespaces"><span class="deltaxml-old" style="background:#FF5555">p:namespaces</span></a><span class="deltaxml-old" style="background:#FF5555">*)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:with-param&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The values of parameters for a step </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be computed after all the options in the step's </span><em class="glossterm"><a href="#dt-signature"><span class="deltaxml-old" style="background:#FF5555">signature</span></a></em><span class="deltaxml-old" style="background:#FF5555"> have had their values computed. If a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression is given on a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></tt><span class="deltaxml-old" style="background:#FF5555">, it is evaluated as an XPath expression using the appropriate context as described in </span><a href="#xpath-context" title="XPaths in XProc"><span class="deltaxml-old" style="background:#FF5555">Section 2.6, “XPaths in XProc”</span></a><span class="deltaxml-old" style="background:#FF5555">, for the containing step, with the addition of variable bindings for all options declared in the containing step's </span><em class="glossterm"><a href="#dt-signature"><span class="deltaxml-old" style="background:#FF5555">signature</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Regardless of the implicit type of the expression, the value is an </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">xs:untypedAtomic</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">All </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-old" style="background:#FF5555">in-scope bindings</span></a></em><span class="deltaxml-old" style="background:#FF5555"> for the step instance itself are present in the Processor XPath Context as variable bindings, so </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> expressions may refer to any option or variable bound in those </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-old" style="background:#FF5555">in-scope bindings</span></a></em><span class="deltaxml-old" style="background:#FF5555">, as well as to any option declared in the step signature, by variable reference. If a variable reference uses a QName that is not the name of an </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-old" style="background:#FF5555">in-scope binding</span></a></em><span class="deltaxml-old" style="background:#FF5555"> or declared option, an XPath evaluation error will occur.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression is used but no document connection is provided, the implicit connection is to the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-old" style="background:#FF5555">default readable port</span></a></em><span class="deltaxml-old" style="background:#FF5555">. If there is no default readable port, the connection is treated as if </span><a href="#p.empty"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> was specified.</span></p><p><a name="err.inline.D0008.3"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0008"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0008</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if a sequence of more than one document appears on the connection for a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></tt><span class="deltaxml-old" style="background:#FF5555">. If </span><a href="#p.empty"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> is given or implied as the document connection, the context item is undefined. </span><a name="err.inline.D0026.3"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0026"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0026</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression makes reference to the context node, size, or position when the context item is undefined. </span></p><p><span class="deltaxml-old" style="background:#FF5555">If the optional </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">port</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is specified, then the parameter appears on the named port, otherwise the parameter appears on the step's </span><em class="glossterm"><a href="#dt-primary-parameter-input-port"><span class="deltaxml-old" style="background:#FF5555">primary parameter input port</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span><a name="err.inline.S0034"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0034"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0034</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the specified port is not a parameter input port or if no port is specified and the step does not have a primary parameter input port. </span></p></div><div class="section"><h5><a name="opt-param-bindings" id="opt-param-bindings"></a><span class="deltaxml-old" style="background:#FF5555">5.7.5 Namespaces on variables, options, and parameters</span></h5><p><span class="deltaxml-old" style="background:#FF5555">Variable, option and parameter values carry with them not only their literal or computed string value but also a set of namespaces. To see why this is necessary, consider the following step:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:delete xmlns:p="http://www.w3.org/ns/xproc"&gt; &lt;p:with-option name="match" select="'html:div'" xmlns:html="http://www.w3.org/1999/xhtml"/&gt; &lt;/p:delete&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">The </span><a href="#c.delete"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:delete</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step will delete elements that match the expression “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">html:div</span></tt><span class="deltaxml-old" style="background:#FF5555">”, but that expression can only be correctly interpreted if there's a namespace binding for the prefix “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">html</span></tt><span class="deltaxml-old" style="background:#FF5555">” so that binding has to travel with the option.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The default namespace bindings associated with a variable, option or parameter value are computed as follows:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute was used to specify the value and it consisted of a single </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">VariableReference</span></tt><span class="deltaxml-old" style="background:#FF5555"> (per [</span><a href="#xpath2"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XPath 2.0</span></span></a><span class="deltaxml-old" style="background:#FF5555">]), then the namespace bindings from the referenced option or variable are used.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute was used to specify the value and it evaluated to a node-set, then the in-scope namespaces from the first node in the selected node-set (or, if it's not an element, its parent) are used.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The expression is evaluated in the appropriate context, See </span><a href="#xpath-context" title="XPaths in XProc"><span class="deltaxml-old" style="background:#FF5555">Section 2.6, “XPaths in XProc”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Otherwise, the in-scope namespaces from the element providing the value are used. (For options specified using </span><a href="#option-shortcut"><span class="deltaxml-old" style="background:#FF5555">syntactic shortcuts</span></a><span class="deltaxml-old" style="background:#FF5555">, the step element itself is providing the value.)</span></p></li></ol></div><p><span class="deltaxml-old" style="background:#FF5555">The default namespace is never included in the namespace bindings for a variable, option or parameter value. Unqualified names are always in no-namespace.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Unfortunately, in more complex situations, there may be no single variable, option or parameter that can reliably be expected to have the correct set of namespace bindings. Consider this pipeline:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:pipeline type="ex:delete-in-div" version="1.0" xmlns:p="http://www.w3.org/ns/xproc" xmlns:ex="http://example.org/ns/ex" xmlns:h="http://www.w3.org/1999/xhtml"&gt; &lt;p:option name="divchild" required="true"/&gt; &lt;p:delete&gt; &lt;p:with-option name="match" select="concat('h:div/',$divchild)"/&gt; &lt;/p:delete&gt; &lt;/p:pipeline&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">It defines an atomic step (“</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">ex:delete-in-div</span></tt><span class="deltaxml-old" style="background:#FF5555">”) that deletes elements that occur inside of XHTML div elements. It might be used as follows:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;ex:delete-in-div xmlns:p="http://www.w3.org/ns/xproc" xmlns:ex="http://example.org/ns/ex" xmlns:html="http://www.w3.org/1999/xhtml" divchild="html:p[@class='delete']"/&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">In this case, the </span><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option passed to the </span><a href="#c.delete"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:delete</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step needs </span><em><span class="deltaxml-old" style="background:#FF5555">both</span></em><span class="deltaxml-old" style="background:#FF5555"> the namespace binding of “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">h</span></tt><span class="deltaxml-old" style="background:#FF5555">” specified in the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">ex:delete-in-div</span></tt><span class="deltaxml-old" style="background:#FF5555"> pipeline definition </span><em><span class="deltaxml-old" style="background:#FF5555">and</span></em><span class="deltaxml-old" style="background:#FF5555"> the namespace binding of “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">html</span></tt><span class="deltaxml-old" style="background:#FF5555">” specified in the </span><tt class="varname"><span class="deltaxml-old" style="background:#FF5555">divchild</span></tt><span class="deltaxml-old" style="background:#FF5555"> option on the call of that pipeline. It's not sufficient to provide just one of the sets of bindings.</span></p><p id="p.namespaces"><span class="deltaxml-old" style="background:#FF5555">The </span><a href="#p.namespaces"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:namespaces</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element can be used as a child of </span><a href="#p.variable"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:variable</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#p.with-option"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#p.with-param"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> to provide explicit bindings.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:namespaces</span><span class="deltaxml-old" style="background:#FF5555">  binding? = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  element? = </span><var><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></var><span class="deltaxml-old" style="background:#FF5555">  except-prefixes? = </span><var><span class="deltaxml-old" style="background:#FF5555">prefix list</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The namespace bindings specified by a </span><a href="#p.namespaces"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:namespaces</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element are determined as follows:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">binding</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is specified, it </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> contain the name of a single </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-old" style="background:#FF5555">in-scope binding</span></a></em><span class="deltaxml-old" style="background:#FF5555">. The namespace bindings associated with that binding are used. </span><a name="err.inline.S0020"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0020"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0020</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">binding</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute on </span><a href="#p.namespaces"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:namespaces</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> is specified and its value is not the name of an </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-old" style="background:#FF5555">in-scope binding</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">element</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is specified, it </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> contain an XPath expression which identifies a single element node (the input connection for this expression is the same as the connection for the </span><a href="#p.option"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:option</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#p.with-param"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> which contains it). The in-scope namespaces of that node are used.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The expression is evaluated in the appropriate context, See </span><a href="#xpath-context" title="XPaths in XProc"><span class="deltaxml-old" style="background:#FF5555">Section 2.6, “XPaths in XProc”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><a name="err.inline.D0009"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0009"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0009</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">element</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute on </span><a href="#p.namespaces"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:namespaces</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> is specified and it does not identify a single element node. </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">If neither </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">binding</span></tt><span class="deltaxml-old" style="background:#FF5555"> nor </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">element</span></tt><span class="deltaxml-old" style="background:#FF5555"> is specified, the in-scope namespaces on the </span><a href="#p.namespaces"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:namespaces</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element itself are used.</span></p></li></ol></div><p><span class="deltaxml-old" style="background:#FF5555">Irrespective of how the set of namespaces are determined, the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">except-prefixes</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute can be used to exclude one or more namespaces. The value of the except-prefixes attribute </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a sequence of tokens, each of which </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a prefix bound to a namespace in the in-scope namespaces of the </span><a href="#p.namespaces"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:namespaces</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element. All bindings of prefixes to each of the namespaces thus identified are excluded. </span><a name="err.inline.S0051"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0051"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0051</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">except-prefixes</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute on </span><a href="#p.namespaces"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:namespaces</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> does not contain a list of tokens or if any of those tokens is not a prefix bound to a namespace in the in-scope namespaces of the </span><a href="#p.namespaces"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:namespaces</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element. </span></p><p><a name="err.inline.S0041"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0041"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0041</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to specify both </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">binding</span></tt><span class="deltaxml-old" style="background:#FF5555"> and </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">element</span></tt><span class="deltaxml-old" style="background:#FF5555"> on the same </span><a href="#p.namespaces"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:namespaces</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element. </span></p><p><span class="deltaxml-old" style="background:#FF5555">If a </span><a href="#p.variable"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:variable</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#p.with-option"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#p.with-param"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> includes one or more </span><a href="#p.namespaces"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:namespaces</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> elements, then the union of all the namespaces specified on those elements are used as the bindings for the variable, option or parameter value. In this case, the in-scope namespaces on the </span><a href="#p.variable"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:variable</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#p.with-option"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#p.with-param"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> are ignored. </span><a name="err.inline.D0013"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0013"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0013</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the specified namespace bindings are inconsistent; that is, if the same prefix is bound to two different namespace names.</span></p><p><span class="deltaxml-old" style="background:#FF5555">For example, this would allow the preceding example to work:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:pipeline type="ex:delete-in-div" version="1.0" xmlns:p="http://www.w3.org/ns/xproc" xmlns:ex="http://example.org/ns/ex" xmlns:h="http://www.w3.org/1999/xhtml"&gt; &lt;p:option name="divchild" required="true"/&gt; &lt;p:delete&gt; &lt;p:with-option name="match" select="concat('h:div/',$divchild)"&gt; &lt;p:namespaces xmlns:html="http://www.w3.org/1999/xhtml"/&gt; &lt;/p:with-option&gt; &lt;/p:delete&gt; &lt;/p:pipeline&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">The </span><a href="#p.namespaces"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:namespaces</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element provides namespace bindings for both of the prefixes necessary to correctly interpret the expression ultimately passed to the </span><a href="#c.delete"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:delete</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step (the binding for </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">html:</span></tt><span class="deltaxml-old" style="background:#FF5555"> is explicitly provided and the binding for </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">h:</span></tt><span class="deltaxml-old" style="background:#FF5555"> is in-scope). </span></p><div class="admonition"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">The use of </span><a href="#p.namespaces"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:namespaces</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> here, when all of the bindings are provided with explicit namespace declarations, is unnecessary. The bindings could simply be placed on the parent </span><a href="#p.with-option"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element. We use </span><a href="#p.namespaces"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:namespaces</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> here only to make the example parallel to the one which follows.</span></p></div><p><span class="deltaxml-old" style="background:#FF5555">The preceding solution has the weakness that it depends on knowing the bindings that will be used by the caller. A more flexible solution would use the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">binding</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute to copy the bindings from the caller's option value.</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:pipeline type="ex:delete-in-div" version="1.0" xmlns:p="http://www.w3.org/ns/xproc" xmlns:ex="http://example.org/ns/ex" xmlns:h="http://www.w3.org/1999/xhtml"&gt; &lt;p:option name="divchild" required="true"/&gt; &lt;p:delete&gt; &lt;p:with-option name="match" select="concat('h:div/',$divchild)"&gt; &lt;p:namespaces binding="divchild"/&gt; &lt;p:namespaces xmlns:h="http://www.w3.org/1999/xhtml"/&gt; &lt;/p:with-option&gt; &lt;/p:delete&gt; &lt;/p:pipeline&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">This example will succeed as long as the caller-specified option does not bind the “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">h</span></tt><span class="deltaxml-old" style="background:#FF5555">” prefix to something other than the XHTML namespace. </span></p></div></div><div class="section"><h4><a name="p.declare-step" id="p.declare-step"></a><span class="deltaxml-old" style="background:#FF5555">5.8 p:declare-step</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt><span class="deltaxml-old" style="background:#FF5555"> provides the type and </span><em class="glossterm"><a href="#dt-signature"><span class="deltaxml-old" style="background:#FF5555">signature</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of an </span><em class="glossterm"><a href="#dt-atomic-step"><span class="deltaxml-old" style="background:#FF5555">atomic step</span></a></em><span class="deltaxml-old" style="background:#FF5555"> or pipeline. It declares the inputs, outputs, and options for all steps of that type.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span><span class="deltaxml-old" style="background:#FF5555">  name? = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  type? = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  psvi-required? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  xpath-version? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  exclude-inline-prefixes? = </span><var><span class="deltaxml-old" style="background:#FF5555">prefix list</span></var><span class="deltaxml-old" style="background:#FF5555">  version? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.input"><span class="deltaxml-old" style="background:#FF5555">p:input</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.output"><span class="deltaxml-old" style="background:#FF5555">p:output</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.option"><span class="deltaxml-old" style="background:#FF5555">p:option</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.log"><span class="deltaxml-old" style="background:#FF5555">p:log</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.serialization"><span class="deltaxml-old" style="background:#FF5555">p:serialization</span></a><span class="deltaxml-old" style="background:#FF5555">)*,</span><span class="deltaxml-old" style="background:#FF5555">    ((</span><a href="#p.declare-step"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.pipeline"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.import"><span class="deltaxml-old" style="background:#FF5555">p:import</span></a><span class="deltaxml-old" style="background:#FF5555">)*,</span><span class="deltaxml-old" style="background:#FF5555">     </span><var><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></var><span class="deltaxml-old" style="background:#FF5555">)?</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">type</span></tt><span class="deltaxml-old" style="background:#FF5555"> can be from any namespace provided that the expanded-QName of the value has a non-null namespace URI. </span><a name="err.inline.S0025"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0025"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0025</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the expanded-QName value of the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">type</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is in no namespace or in the XProc namespace. Except as described in </span><a href="#versioning-considerations" title="Versioning Considerations"><span class="deltaxml-old" style="background:#FF5555">Section 2.13, “Versioning Considerations”</span></a><span class="deltaxml-old" style="background:#FF5555">, the XProc namespace </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must not</span></span><span class="deltaxml-old" style="background:#FF5555"> be used in the type of steps. Neither users nor implementers may define additional steps in the XProc namespace.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Irrespective of the context in which the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt><span class="deltaxml-old" style="background:#FF5555"> occurs, there are initially no option or variable names in-scope inside a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt><span class="deltaxml-old" style="background:#FF5555">. That is, </span><a href="#p.option"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:option</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#p.variable"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:variable</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> elements can refer to values declared by their preceding siblings, but not by any of their ancestors.</span></p><p><a name="impl-35"></a><span class="deltaxml-old" style="background:#FF5555">When a declared step is evaluated directly by the XProc processor (as opposed to occurring as an atomic step in some </span><em class="glossterm"><a href="#dt-container"><span class="deltaxml-old" style="background:#FF5555">container</span></a></em><span class="deltaxml-old" style="background:#FF5555">), how the input and output ports are connected to documents is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">A step declaration is not a </span><a href="#step-concept"><span class="deltaxml-old" style="background:#FF5555">step</span></a><span class="deltaxml-old" style="background:#FF5555"> in its own right. Sibling steps cannot refer to the inputs or outputs of a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt><span class="deltaxml-old" style="background:#FF5555"> using </span><a href="#p.pipe"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></tt></a><span class="deltaxml-old" style="background:#FF5555">; only instances of the type can be referenced.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">version</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute identifies the version of XProc for which this step declaration was authored. If the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt><span class="deltaxml-old" style="background:#FF5555"> has no ancestors in the XProc namespace, then it </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> have a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">version</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute. See </span><a href="#versioning-considerations" title="Versioning Considerations"><span class="deltaxml-old" style="background:#FF5555">Section 2.13, “Versioning Considerations”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">For a description of </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">psvi-required</span></tt><span class="deltaxml-old" style="background:#FF5555">, see </span><a href="#psvi-support" title="PSVIs in XProc"><span class="deltaxml-old" style="background:#FF5555">Section 2.8, “PSVIs in XProc”</span></a><span class="deltaxml-old" style="background:#FF5555">. For </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">xpath-version</span></tt><span class="deltaxml-old" style="background:#FF5555">, see </span><a href="#xpath-context" title="XPaths in XProc"><span class="deltaxml-old" style="background:#FF5555">Section 2.6, “XPaths in XProc”</span></a><span class="deltaxml-old" style="background:#FF5555">. For </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">exclude-inline-prefixes</span></tt><span class="deltaxml-old" style="background:#FF5555">, see </span><a href="#p.inline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></tt></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><div class="section"><h5><a name="declare-atomic-steps" id="declare-atomic-steps"></a><span class="deltaxml-old" style="background:#FF5555">5.8.1 Declaring atomic steps</span></h5><p><span class="deltaxml-old" style="background:#FF5555">When declaring an atomic step, the subpipeline in the declaration </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be empty. And, conversely, if the subpipeline in a declaration is empty, the declaration </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be for an atomic step.</span></p><p><a name="impl-36"></a><span class="deltaxml-old" style="background:#FF5555">Implementations may use </span><em class="glossterm"><a href="#dt-extension-attribute"><span class="deltaxml-old" style="background:#FF5555">extension attributes</span></a></em><span class="deltaxml-old" style="background:#FF5555"> to provide </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></a></em><span class="deltaxml-old" style="background:#FF5555"> information about a declared step. For example, such an attribute might identify the code which implements steps of this type.</span></p><p><span class="deltaxml-old" style="background:#FF5555">It is not an error for a pipeline to include declarations for steps that a particular processor does not know how to implement. It is, of course, an error to attempt to evaluate such steps.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If </span><a href="#p.log"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:log</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#p.serialization"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:serialization</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> elements appear in the declaration of an atomic step, they will only be used if the atomic step is directly evaluated by the processor. They have no effect if the step appears in a </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555">; only the serialization options of the “top level” step or pipeline are used because that is the only step which the processor is required to serialize.</span></p></div><div class="section"><h5><a name="declare-pipelines" id="declare-pipelines"></a><span class="deltaxml-old" style="background:#FF5555">5.8.2 Declaring pipelines</span></h5><p><span class="deltaxml-old" style="background:#FF5555">When a </span><a href="#p.declare-step"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> declares a pipeline, that pipeline encapsulates the behavior of the specified </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555">. Its children declare inputs, outputs, and options that the pipeline exposes and identify the steps in its subpipeline. </span></p><p><a name="impl-37"></a><span class="deltaxml-old" style="background:#FF5555">The subpipeline may include declarations of additional steps (e.g., other pipelines or other step types that are provided by a particular implementation or in some </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555"> way) and import other pipelines. If a pipeline has been imported, it may be invoked as a step within the subpipeline that imported it.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The environment inherited by the </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555"> is the </span><em class="glossterm"><a href="#dt-empty-environment"><span class="deltaxml-old" style="background:#FF5555">empty environment</span></a></em><span class="deltaxml-old" style="background:#FF5555"> with these modifications:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">All of the declared inputs are added to the </span><em class="glossterm"><a href="#dt-readable-ports"><span class="deltaxml-old" style="background:#FF5555">readable ports</span></a></em><span class="deltaxml-old" style="background:#FF5555"> in the environment.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">If a </span><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-old" style="background:#FF5555">primary input port</span></a></em><span class="deltaxml-old" style="background:#FF5555"> is declared, that port is the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-old" style="background:#FF5555">default readable port</span></a></em><span class="deltaxml-old" style="background:#FF5555">, otherwise the default readable port is undefined.</span></p></li></ul></div><p><span class="deltaxml-old" style="background:#FF5555">If a </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-old" style="background:#FF5555">primary output port</span></a></em><span class="deltaxml-old" style="background:#FF5555"> is declared and that port has no </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-old" style="background:#FF5555">connection</span></a></em><span class="deltaxml-old" style="background:#FF5555">, then it is connected to the </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-old" style="background:#FF5555">primary output port</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of the </span><em class="glossterm"><a href="#dt-last-step"><span class="deltaxml-old" style="background:#FF5555">last step</span></a></em><span class="deltaxml-old" style="background:#FF5555"> in the </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span><a name="err.inline.S0006.2"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0006"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0006</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the primary output port is unconnected and the </span><em class="glossterm"><a href="#dt-last-step"><span class="deltaxml-old" style="background:#FF5555">last step</span></a></em><span class="deltaxml-old" style="background:#FF5555"> in the subpipeline does not have a primary output port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The requested </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">xpath-version</span></tt><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be used to evaluate XPath expressions subject to the constraints outlined in </span><a href="#xpath-context" title="XPaths in XProc"><span class="deltaxml-old" style="background:#FF5555">Section 2.6, “XPaths in XProc”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">psvi-required</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute allows the author to declare that a step relies on the processor's ability to pass PSVI annotations between steps, see </span><a href="#psvi-support" title="PSVIs in XProc"><span class="deltaxml-old" style="background:#FF5555">Section 2.8, “PSVIs in XProc”</span></a><span class="deltaxml-old" style="background:#FF5555">. If the attribute is not specified, the value “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">false</span></tt><span class="deltaxml-old" style="background:#FF5555">” is assumed. </span></p></div></div><div class="section"><h4><a name="p.library" id="p.library"></a><span class="deltaxml-old" style="background:#FF5555">5.9 p:library</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:library</span></tt><span class="deltaxml-old" style="background:#FF5555"> is a collection of step declarations and/or pipeline definitions.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:library</span><span class="deltaxml-old" style="background:#FF5555">  psvi-required? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  xpath-version? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  exclude-inline-prefixes? = </span><var><span class="deltaxml-old" style="background:#FF5555">prefix list</span></var><span class="deltaxml-old" style="background:#FF5555">  version? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.import"><span class="deltaxml-old" style="background:#FF5555">p:import</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.declare-step"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.pipeline"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></a><span class="deltaxml-old" style="background:#FF5555">)*</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:library&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">version</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute identifies the version of XProc for which this library was authored. If the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:library</span></tt><span class="deltaxml-old" style="background:#FF5555"> has no ancestors in the XProc namespace, then it </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> have a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">version</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute. See </span><a href="#versioning-considerations" title="Versioning Considerations"><span class="deltaxml-old" style="background:#FF5555">Section 2.13, “Versioning Considerations”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">For a description of </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">psvi-required</span></tt><span class="deltaxml-old" style="background:#FF5555">, see </span><a href="#psvi-support" title="PSVIs in XProc"><span class="deltaxml-old" style="background:#FF5555">Section 2.8, “PSVIs in XProc”</span></a><span class="deltaxml-old" style="background:#FF5555">; for </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">xpath-version</span></tt><span class="deltaxml-old" style="background:#FF5555">, see </span><a href="#xpath-context" title="XPaths in XProc"><span class="deltaxml-old" style="background:#FF5555">Section 2.6, “XPaths in XProc”</span></a><span class="deltaxml-old" style="background:#FF5555">; for </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">exclude-inline-prefixes</span></tt><span class="deltaxml-old" style="background:#FF5555">, see </span><a href="#p.inline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></tt></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><div class="admonition"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">The steps declared in a pipeline library are referred to by their type. It is not an error to put a </span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#p.declare-step"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> without a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">type</span></tt><span class="deltaxml-old" style="background:#FF5555"> in a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:library</span></tt><span class="deltaxml-old" style="background:#FF5555">, but there is no standard mechanism for instantiating it or referring to it. It is effectively invisible.</span></p></div><p><span class="deltaxml-old" style="background:#FF5555">Libraries can import pipelines and/or other libraries. See also </span><a href="#handling-imports" title="Handling Circular and Re-entrant Library Imports (Non-Normative)"><span class="deltaxml-old" style="background:#FF5555">Appendix G, </span><i><span class="deltaxml-old" style="background:#FF5555">Handling Circular and Re-entrant Library Imports (Non-Normative)</span></i></a><span class="deltaxml-old" style="background:#FF5555">.</span></p></div><div class="section"><h4><a name="p.import" id="p.import"></a><span class="deltaxml-old" style="background:#FF5555">5.10 p:import</span></h4><p><span class="deltaxml-old" style="background:#FF5555">An </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:import</span></tt><span class="deltaxml-old" style="background:#FF5555"> loads a pipeline or pipeline library, making it available in the pipeline or library which contains the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:import</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:import</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">href</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">anyURI</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">An import statement loads the specified IRI and makes any pipelines declared within it available to the current pipeline. </span></p><p><a name="err.inline.S0052"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0052"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0052</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the URI of a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:import</span></tt><span class="deltaxml-old" style="background:#FF5555"> cannot be retrieved or if, once retrieved, it does not point to a </span><a href="#p.library"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:library</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#p.declare-step"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, or </span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555">. </span><a name="err.inline.S0053"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0053"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0053</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to import a single pipeline if that pipeline does not have a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">type</span></tt><span class="deltaxml-old" style="background:#FF5555">. </span></p><p><span class="deltaxml-old" style="background:#FF5555">Attempts to retrieve the library identified by the URI value may be redirected at the parser level (for example, in an entity resolver) or below (at the protocol level, for example, via an HTTP Location: header). In the absence of additional information outside the scope of this specification within the resource, the base URI of the library is always the URI of the actual resource returned. In other words, it is the URI of the resource retrieved after all redirection has occurred.</span></p><p><span class="deltaxml-old" style="background:#FF5555">As imports are processed, a processor may encounter new </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:import</span></tt><span class="deltaxml-old" style="background:#FF5555"> elements whose library URI is the same as one it has already processed in some other context. This may happen as a consequence of resolving the URI. If the actual base URI is the same as one that has already been processed, the implementation must recognize it as the same library and should not need to process the resource. Also, a duplicate, circular chain of imports, or a re-entrant import is not an error and implementations must take the necessary steps to avoid infinite loops and/or incorrect notification of duplicate step definitions. It is not an error for a library to import itself. An example of such steps is listed in </span><a href="#handling-imports" title="Handling Circular and Re-entrant Library Imports (Non-Normative)"><span class="deltaxml-old" style="background:#FF5555">Appendix G, </span><i><span class="deltaxml-old" style="background:#FF5555">Handling Circular and Re-entrant Library Imports (Non-Normative)</span></i></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">A library is considered the same library if the URI of the resource retrieved is the same. If a pipeline or library author uses two different URI values that resolve to the same resource, they must not be considered the same imported library.</span></p></div><div class="section"><h4><a name="p.pipe" id="p.pipe"></a><span class="deltaxml-old" style="background:#FF5555">5.11 p:pipe</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></tt><span class="deltaxml-old" style="background:#FF5555"> connects an input to a port on another step.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:pipe</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">step</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">port</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></tt><span class="deltaxml-old" style="background:#FF5555"> element connects to a readable port of another step. It identifies the readable port to which it connects with the name of the step in the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">step</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute and the name of the port on that step in the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">port</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute.</span></p><p><a name="err.inline.S0022"></a><span class="deltaxml-old" style="background:#FF5555">In all cases except the </span><a href="#p.output"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:output</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> of a </span><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-old" style="background:#FF5555">compound step</span></a></em><span class="deltaxml-old" style="background:#FF5555">, it is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0022"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0022</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the port identified by a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></tt><span class="deltaxml-old" style="background:#FF5555"> is not in the </span><em class="glossterm"><a href="#dt-readable-ports"><span class="deltaxml-old" style="background:#FF5555">readable ports</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of the step that contains the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></tt><span class="deltaxml-old" style="background:#FF5555"> that is a </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-old" style="background:#FF5555">connection</span></a></em><span class="deltaxml-old" style="background:#FF5555"> for an </span><a href="#p.output"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:output</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> of a </span><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-old" style="background:#FF5555">compound step</span></a></em><span class="deltaxml-old" style="background:#FF5555"> may connect to one of the readable ports of the compound step or to an output port on one of the compound step's </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-old" style="background:#FF5555">contained steps</span></a></em><span class="deltaxml-old" style="background:#FF5555">. In other words, the output of a compound step can simply be a copy of one of the available inputs or it can be the output of one of its children.</span></p></div><div class="section"><h4><a name="p.inline" id="p.inline"></a><span class="deltaxml-old" style="background:#FF5555">5.12 p:inline</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></tt><span class="deltaxml-old" style="background:#FF5555"> provides a document inline.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:inline</span><span class="deltaxml-old" style="background:#FF5555">  exclude-inline-prefixes? = </span><var><span class="deltaxml-old" style="background:#FF5555">prefix list</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    </span><var><span class="deltaxml-old" style="background:#FF5555">anyElement</span></var><span class="deltaxml-old" style="background:#FF5555">&lt;/p:inline&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The content of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></tt><span class="deltaxml-old" style="background:#FF5555"> element is wrapped in a document node and passed as input. The base URI of the document is the base URI of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></tt><span class="deltaxml-old" style="background:#FF5555"> element. </span><a name="err.inline.S0024"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0024"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0024</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the content of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></tt><span class="deltaxml-old" style="background:#FF5555"> element does not consist of exactly one element, optionally preceded and/or followed by any number of processing instructions, comments or whitespace characters.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The in-scope namespaces of the inline document differ from the in-scope namespace of the content of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></tt><span class="deltaxml-old" style="background:#FF5555"> element in that bindings for all its </span><em><span class="deltaxml-old" style="background:#FF5555">excluded namespaces</span></em><span class="deltaxml-old" style="background:#FF5555">, as defined below, are removed:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">The XProc namespace itself (</span><tt class="uri"><span class="deltaxml-old" style="background:#FF5555">http://www.w3.org/ns/xproc</span></tt><span class="deltaxml-old" style="background:#FF5555">) is excluded.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">A namespace URI designated by using an </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">exclude-inline-prefixes</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute on the enclosing </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></tt><span class="deltaxml-old" style="background:#FF5555"> is excluded.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">A namespace URI designated by using an </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">exclude-inline-prefixes</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute on any ancestor </span><a href="#p.declare-step"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#p.pipeline"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, or </span><a href="#p.library"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:library</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> is also excluded. (In other words, the effect of several </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">exclude-inline-prefixes</span></tt><span class="deltaxml-old" style="background:#FF5555"> attributes among the ancestors of </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></tt><span class="deltaxml-old" style="background:#FF5555"> is cumulative.)</span></p></li></ul></div><p><span class="deltaxml-old" style="background:#FF5555">The value of each </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">exclude-inline-prefixes</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is interpreted as follows:</span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the attribute is either </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">#all</span></tt><span class="deltaxml-old" style="background:#FF5555">, or a whitespace-separated list of tokens, each of which is either a namespace prefix or </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">#default</span></tt><span class="deltaxml-old" style="background:#FF5555">. The namespace bound to each of the prefixes is designated as an excluded namespace. </span><a name="err.inline.S0057"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0057"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0057</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">exclude-inline-prefixes</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute does not contain a list of tokens or if any of those tokens (except </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">#all</span></tt><span class="deltaxml-old" style="background:#FF5555"> or </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">#default</span></tt><span class="deltaxml-old" style="background:#FF5555">) is not a prefix bound to a namespace in the in-scope namespaces of the element on which it occurs.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The default namespace of the element on which </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">exclude-inline-prefixes</span></tt><span class="deltaxml-old" style="background:#FF5555"> occurs may be designated as an excluded namespace by including </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">#default</span></tt><span class="deltaxml-old" style="background:#FF5555"> in the list of namespace prefixes. </span><a name="err.inline.S0058"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0058"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0058</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the value </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">#default</span></tt><span class="deltaxml-old" style="background:#FF5555"> is used within the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">exclude-inline-prefixes</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute and there is no default namespace in scope. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The value </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">#all</span></tt><span class="deltaxml-old" style="background:#FF5555"> indicates that all namespaces that are in scope for the element on which </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">exclude-inline-prefixes</span></tt><span class="deltaxml-old" style="background:#FF5555"> occurs are designated as excluded namespaces.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The XProc processor </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> include all in-scope prefixes that are not explicitly excluded. If the namespace associated with an excluded prefix is used in the expanded-QName of a descendant element or attribute, the processor </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> include that prefix anyway, or it may generate a new prefix.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Consider this example:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="1.0"&gt; &lt;p:output port="result"/&gt; &lt;p:serialization port="result" indent="true"/&gt; &lt;p:identity xmlns:a="http://example.com/a" xmlns:b="http://example.com/b" xmlns:c="http://example.com/c"&gt; &lt;p:input port="source"&gt; &lt;p:inline exclude-inline-prefixes="a b"&gt; &lt;doc&gt; &lt;b:part/&gt; &lt;/doc&gt; &lt;/p:inline&gt; &lt;/p:input&gt; &lt;/p:identity&gt; &lt;/p:declare-step&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">which might produce a result like this:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;doc xmlns:c="http://example.com/c"&gt; &lt;b:part xmlns:b="http://example.com/b"/&gt; &lt;/doc&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">The declaration for “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">c</span></tt><span class="deltaxml-old" style="background:#FF5555">” must be present because it was not excluded. The “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">part</span></tt><span class="deltaxml-old" style="background:#FF5555">” element uses the namespace bound to “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">b</span></tt><span class="deltaxml-old" style="background:#FF5555">”, so </span><em><span class="deltaxml-old" style="background:#FF5555">some</span></em><span class="deltaxml-old" style="background:#FF5555"> binding must be present. In this example, the original prefix has been preserved, but it would be equally correct if a different prefix had been used.</span></p></div><div class="section"><h4><a name="p.document" id="p.document"></a><span class="deltaxml-old" style="background:#FF5555">5.13 p:document</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:document</span></tt><span class="deltaxml-old" style="background:#FF5555"> reads an XML document from a URI.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:document</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">href</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">anyURI</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The document identified by the URI in the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">href</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is loaded and returned. If the URI protocol supports redirection, then redirects </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be followed.</span></p><p><a name="err.inline.D0011"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0011"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0011</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the resource referenced by a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:document</span></tt><span class="deltaxml-old" style="background:#FF5555"> element does not exist, cannot be accessed, or is not a well-formed XML document. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The parser which the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:document</span></tt><span class="deltaxml-old" style="background:#FF5555"> element employs </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> process the external subset; all general and external parsed entities </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be fully expanded. It </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> perform </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">xml:id</span></tt><span class="deltaxml-old" style="background:#FF5555"> processing, but it </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must not</span></span><span class="deltaxml-old" style="background:#FF5555"> perform any other processing, such as expanding XIncludes. The parser </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be conformant to </span><em class="citetitle"><span class="deltaxml-old" style="background:#FF5555">Namespaces in XML</span></em><span class="deltaxml-old" style="background:#FF5555">. Loading the document </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must not</span></span><span class="deltaxml-old" style="background:#FF5555"> fail due to validation errors.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Use the </span><a href="#c.load"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:load</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step if you need to perform DTD-based validation. </span></p><div class="admonition"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:document</span></tt><span class="deltaxml-old" style="background:#FF5555"> always </span><em><span class="deltaxml-old" style="background:#FF5555">reads</span></em><span class="deltaxml-old" style="background:#FF5555"> from the specified IRI. In the context of a </span><a href="#p.input"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:input</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, this seems perfectly natural. In the context of a </span><a href="#p.output"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:output</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, this may seem a little asymmetrical. Putting a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:document</span></tt><span class="deltaxml-old" style="background:#FF5555"> in a </span><a href="#p.output"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:output</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> causes the pipeline to </span><em><span class="deltaxml-old" style="background:#FF5555">read</span></em><span class="deltaxml-old" style="background:#FF5555"> from the specified IRI and provide that document </span><em><span class="deltaxml-old" style="background:#FF5555">as an output</span></em><span class="deltaxml-old" style="background:#FF5555"> on that port. </span></p><p><span class="deltaxml-old" style="background:#FF5555">Use </span><a href="#c.store"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:store</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> to store the results that appear on a </span><a href="#p.output"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:output</span></tt></a><span class="deltaxml-old" style="background:#FF5555">.</span></p></div></div><div class="section"><h4><a name="p.data" id="p.data"></a><span class="deltaxml-old" style="background:#FF5555">5.14 p:data</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:data</span></tt><span class="deltaxml-old" style="background:#FF5555"> reads an arbitrary resource from a URI.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:data</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">href</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">anyURI</span></var><span class="deltaxml-old" style="background:#FF5555">  wrapper? = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  wrapper-prefix? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  wrapper-namespace? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  content-type? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The resource identified by the URI in the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">href</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is loaded, encoded, wrapped in the wrapper element, and returned as a document. If the URI protocol supports redirection, then redirects </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be followed.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">wrapper</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">QName</span></tt><span class="deltaxml-old" style="background:#FF5555">. If the lexical value does not contain a colon, then the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">wrapper-namespace</span></tt><span class="deltaxml-old" style="background:#FF5555"> may be used to specify the namespace of the wrapper. In that case, the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">wrapper-prefix</span></tt><span class="deltaxml-old" style="background:#FF5555"> may be specified to suggest a prefix for the wrapper element. </span><a name="err.inline.D0034"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0034"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0034</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to specify a new namespace or prefix if the lexical value of the specified name contains a colon (or if no </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">wrapper</span></tt><span class="deltaxml-old" style="background:#FF5555"> is explicitly specified).</span></p><p><span class="deltaxml-old" style="background:#FF5555">In other words, these two </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:data</span></tt><span class="deltaxml-old" style="background:#FF5555"> elements produce equivalent wrappers:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:data href="..." xmlns:x="http://example.com/ns/" wrapper="x:wrap"/&gt; &lt;p:data href="..." wrapper="wrap" wrapper-prefix="x" wrapper-namespace="http://example.com/ns/"/&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">but this </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:data</span></tt><span class="deltaxml-old" style="background:#FF5555"> element will raise an error:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:data href="..." xmlns:x="http://example.com/ns/" wrapper="x:wrap" wrapper-prefix="x" wrapper-namespace="http://example.com/ns/"/&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">If no wrapper element is specified, the default is </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:data</span></tt><span class="deltaxml-old" style="background:#FF5555">:</span></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:data</span><span class="deltaxml-old" style="background:#FF5555">  content-type? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  charset? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  encoding? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&lt;/c:data&gt;</span></code></p><p><a name="err.inline.D0029"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0029"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0029</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the document referenced by a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:data</span></tt><span class="deltaxml-old" style="background:#FF5555"> element does not exist, cannot be accessed, or cannot be encoded as specified. </span></p><p><span class="deltaxml-old" style="background:#FF5555">Exactly how the data is encoded depends on the media type of the resource. If the resource has a content type associated with it (e.g., if the resource was retrieved with HTTP), then that content type </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be used, otherwise, if the user specified a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">content-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> on the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:data</span></tt><span class="deltaxml-old" style="background:#FF5555">, then that content type should be assumed. </span><a name="impl-38"></a><span class="deltaxml-old" style="background:#FF5555">If no content type was specified or is associated with the resource, the inferred content type is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">If the media type of the response is an XML media type or text type with a </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">charset</span></tt><span class="deltaxml-old" style="background:#FF5555"> parameter that is a Unicode character encoding (per [</span><a href="#unicodetr17"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Unicode TR#17</span></span></a><span class="deltaxml-old" style="background:#FF5555">]) or is recognized as a non-XML media type whose contents are encoded as a sequence of Unicode characters (e.g. it has a </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">charset</span></tt><span class="deltaxml-old" style="background:#FF5555"> parameter or the definition of the media type is such that it requires Unicode), the data </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be encoded as Unicode character sequence.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">If the media type is not an appropriate text type, or if the processor does not recognize the media type, the content is base64-encoded.</span></p></li></ul></div><p><span class="deltaxml-old" style="background:#FF5555">The resulting data is wrapped in an element with the name specified in the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">wrapper</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute (or </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:data</span></tt><span class="deltaxml-old" style="background:#FF5555"> if no </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">wrapper</span></tt><span class="deltaxml-old" style="background:#FF5555"> is specified).</span></p><p><span class="deltaxml-old" style="background:#FF5555">Implementations </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> add a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">content-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute to the wrapper element which indicates the specified or inferred media type of the resource (including any parameters). If the content was base64-encoded, the wrapper </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> have an </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">encoding</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute which specifies “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">base64</span></tt><span class="deltaxml-old" style="background:#FF5555">”.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If an </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">encoding</span></tt><span class="deltaxml-old" style="background:#FF5555"> is specified, a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">charset</span></tt><span class="deltaxml-old" style="background:#FF5555"> may also be specified. The character set may be specified as a parameter on the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">content-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> or via the separate </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">charset</span></tt><span class="deltaxml-old" style="background:#FF5555"> option. If it is specified in both places, the values </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be consistent.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">content-type</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">encoding</span></tt><span class="deltaxml-old" style="background:#FF5555">, or </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">charset</span></tt><span class="deltaxml-old" style="background:#FF5555"> attributes are specified on a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:data</span></tt><span class="deltaxml-old" style="background:#FF5555"> wrapper, they </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must not</span></span><span class="deltaxml-old" style="background:#FF5555"> be in a namespace; if the user-specified wrapper is not </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:data</span></tt><span class="deltaxml-old" style="background:#FF5555">, then the attributes </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be in the </span><tt class="uri"><span class="deltaxml-old" style="background:#FF5555">http://www.w3.org/ns/xproc-step</span></tt><span class="deltaxml-old" style="background:#FF5555"> namespace.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Implementations may record additional details in </span><a href="#extension-attributes"><span class="deltaxml-old" style="background:#FF5555">extension attributes</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">For example, this </span><a href="#c.identity"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:identity</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:identity name="readcsv"&gt; &lt;p:input port="source"&gt; &lt;p:data href="stateabbr.csv"/&gt; &lt;/p:input&gt; &lt;/p:identity&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">might produce output like this:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;c:data xmlns:c="http://www.w3.org/2007/03/xproc-step" content-type="text/plain"&gt; AL,Alabama AK,Alaska AZ,Arizona … &lt;/c:data&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">Whereas this pipeline fragment:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:identity name="readpng"&gt; &lt;p:input port="source"&gt; &lt;p:data href="icon.png" content-type="image/png"/&gt; &lt;/p:input&gt; &lt;/p:identity&gt; &lt;p:add-attribute name="makeimg" match="img" attribute-name="src"&gt; &lt;p:input port="source"&gt;&lt;p:inline&gt;&lt;img/&gt;&lt;/p:inline&gt;&lt;/p:input&gt; &lt;p:with-option name="attribute-value" select="concat('data:image/png;base64,',/*/node())"&gt; &lt;p:pipe step="readpng" port="result"/&gt; &lt;/p:with-option&gt; &lt;/p:add-attribute&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">produces a single </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">img</span></tt><span class="deltaxml-old" style="background:#FF5555"> element with an inline graphic (represented using a </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">data:</span></tt><span class="deltaxml-old" style="background:#FF5555"> URI):</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBI WXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH1QsEDycHOWjhgQAAAB10RVh0Q29tbWVudABDcmVhdGVk IHdpdGggVGhlIEdJTVDvZCVuAAABjklEQVQ4y42Tv0tbcRTFz3t5kuQFwUVFEYIGU6q4mU0RlCDR qYO2g4gdghUyKSFDwD/AwS2IoIMSHOLgpOLg4CIOWdy76GBoqQUJLlr66aCW6LuoF+7wvefcc3/w vZLgpbe0wOoqn/Ro5TKRVIpLi6tkkpoFpFJUj48JSVI2y4LnBTm+D1paYqa5OQiGw5DN8nV7m1hv L99f4o4Dk5Mc6Pwcd2yMXauL/n5+FAqsWdXjca5LJbokSXt7fOzu5toSaWsLxpqaIJcjr0ZbXGQh HDaWZPjQEGc7O3jPBC4u8EZHOXkruaODPxsbDMuylRWSra3cviYwO0upMcdtfNRqGq/X5esVu7nR BxMol4knEtTfGsH3+bu8zLdnydUqXjrN/nsWKEEiwdXmJp3/BYpFctFokOi6EIsF444DU1McSZLW 1+nq6eGnVWlkhNrcHBXXNUe5z+f5rEyGA8cxD+pufp7BYtH+yhL09fFbkYjd4vQ0W08jFgp8se7l wY3gwAC/KhXanwROTwlNTHBocf8BTQe7F9dc2bMAAAAASUVORK5CYII="/&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">Some steps, such as </span><a href="#c.xquery"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xquery</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#c.validate-with-relax-ng"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-relax-ng</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, are designed to process non-XML inputs. If a base64-encoded input occurs in such a context, it </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> be decoded before processing. In this way, for example, an XQuery document can be read with </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:data</span></tt><span class="deltaxml-old" style="background:#FF5555"> and passed to the </span><a href="#c.xquery"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xquery</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step without regard to how the data was encoded.</span></p></div><div class="section"><h4><a name="p.empty" id="p.empty"></a><span class="deltaxml-old" style="background:#FF5555">5.15 p:empty</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></tt><span class="deltaxml-old" style="background:#FF5555"> connects to an </span><em class="glossterm"><a href="#dt-empty-sequence"><span class="deltaxml-old" style="background:#FF5555">empty sequence</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of documents.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:empty /&gt;</span></code></p></div><div class="section"><h4><a name="p.documentation" id="p.documentation"></a><span class="deltaxml-old" style="background:#FF5555">5.16 p:documentation</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:documentation</span></tt><span class="deltaxml-old" style="background:#FF5555"> contains human-readable documentation.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:documentation&gt;</span><span class="deltaxml-old" style="background:#FF5555">    </span><var><span class="deltaxml-old" style="background:#FF5555">any-well-formed-content</span></var><span class="deltaxml-old" style="background:#FF5555">*</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:documentation&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">There are no constraints on the content of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:documentation</span></tt><span class="deltaxml-old" style="background:#FF5555"> element. Documentation is ignored by pipeline processors. See </span><a href="#documentation" title="Documentation"><span class="deltaxml-old" style="background:#FF5555">Section 3.6, “Documentation”</span></a><span class="deltaxml-old" style="background:#FF5555">. </span></p></div><div class="section"><h4><a name="p.pipeinfo" id="p.pipeinfo"></a><span class="deltaxml-old" style="background:#FF5555">5.17 p:pipeinfo</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeinfo</span></tt><span class="deltaxml-old" style="background:#FF5555"> contains ancillary information for steps in the pipeline.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:pipeinfo&gt;</span><span class="deltaxml-old" style="background:#FF5555">    </span><var><span class="deltaxml-old" style="background:#FF5555">any-well-formed-content</span></var><span class="deltaxml-old" style="background:#FF5555">*</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:pipeinfo&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">There are no constraints on the content of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeinfo</span></tt><span class="deltaxml-old" style="background:#FF5555"> element, see </span><a href="#annotations" title="Processor annotations"><span class="deltaxml-old" style="background:#FF5555">Section 3.7, “Processor annotations”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p></div></div><div class="section"><h3><a name="errors" id="errors"></a><span class="deltaxml-old" style="background:#FF5555">6 Errors</span></h3><p><span class="deltaxml-old" style="background:#FF5555">Errors in a pipeline can be divided into two classes: static errors and dynamic errors.</span></p><div class="section"><h4><a name="static-errors" id="static-errors"></a><span class="deltaxml-old" style="background:#FF5555">6.1 Static Errors</span></h4><p><span class="termdef" id="dt-static-error"><span class="deltaxml-old" style="background:#FF5555">[Definition: A </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">static error</span></em><span class="deltaxml-old" style="background:#FF5555"> is one which can be detected before pipeline evaluation is even attempted.]</span></span><span class="deltaxml-old" style="background:#FF5555"> Examples of static errors include cycles and incorrect specification of inputs and outputs. </span></p><p><span class="deltaxml-old" style="background:#FF5555">Static errors are fatal and must be detected before any steps are evaluated.</span></p><p><span class="deltaxml-old" style="background:#FF5555">For a complete list of static errors, see </span><a href="#app.static-errors" title="Static Errors"><span class="deltaxml-old" style="background:#FF5555">Section E.1, “Static Errors”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p></div><div class="section"><h4><a name="dynamic-errors" id="dynamic-errors"></a><span class="deltaxml-old" style="background:#FF5555">6.2 Dynamic Errors</span></h4><p><span class="deltaxml-old" style="background:#FF5555">A </span><span class="termdef" id="dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">[Definition: A </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></em><span class="deltaxml-old" style="background:#FF5555"> is one which occurs while a pipeline is being evaluated.]</span></span><span class="deltaxml-old" style="background:#FF5555"> Examples of dynamic errors include references to URIs that cannot be resolved, steps which fail, and pipelines that exhaust the capacity of an implementation (such as memory or disk space).</span></p><p><span class="deltaxml-old" style="background:#FF5555">If a step fails due to a dynamic error, failure propagates upwards until either a </span><a href="#p.try"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> is encountered or the entire pipeline fails. In other words, outside of a </span><a href="#p.try"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, step failure causes the entire pipeline to fail.</span></p><p><span class="deltaxml-old" style="background:#FF5555">For a complete list of dynamic errors, see </span><a href="#app.dynamic-errors" title="Dynamic Errors"><span class="deltaxml-old" style="background:#FF5555">Section E.2, “Dynamic Errors”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p></div><div class="section"><h4><a name="step-errors" id="step-errors"></a><span class="deltaxml-old" style="background:#FF5555">6.3 Step Errors</span></h4><p><span class="deltaxml-old" style="background:#FF5555">Several of the steps in the standard and option step library can generate dynamic errors.</span></p><p><span class="deltaxml-old" style="background:#FF5555">For a complete list of the dynamic errors raised by builtin pipeline steps, see </span><a href="#app.step-errors" title="Step Errors"><span class="deltaxml-old" style="background:#FF5555">Section E.3, “Step Errors”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p></div></div><div class="toc"><h3><a name="std-components" id="std-components"></a><span class="deltaxml-old" style="background:#FF5555">7 Standard Step Library</span></h3><p><span class="deltaxml-old" style="background:#FF5555">This section describes the standard XProc steps. A machine-readable description of these steps may be found in </span><a href="http://www.w3.org/2008/xproc-1.0.xpl"><span class="deltaxml-old" style="background:#FF5555">xproc-1.0.xpl</span></a><span class="deltaxml-old" style="background:#FF5555">. </span></p><p><span class="deltaxml-old" style="background:#FF5555">When a step in this library produces an output document, the base URI of the output is the base URI of the step's primary input document unless the step's process explicitly sets an </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">xml:base</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute or the step's description explicitly states how the base URI is constructed.</span></p><p id="cv.result"><span class="deltaxml-old" style="background:#FF5555">Also, in this section, several steps use this element for result information:</span></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:result&gt;</span><span class="deltaxml-old" style="background:#FF5555">    </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&lt;/c:result&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">When a step uses an XPath to compute an option value, the XPath context is as defined in </span><a href="#xpath-context" title="XPaths in XProc"><span class="deltaxml-old" style="background:#FF5555">Section 2.6, “XPaths in XProc”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">When a step specifies a particular version of a technology, implementations </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> implement that version or a subsequent version that is backwards compatible with that version. At user-option, they may implement other non-backwards compatible versions.</span></p><div class="section"><h4><a name="std-required" id="std-required"></a><span class="deltaxml-old" style="background:#FF5555">7.1 Required Steps</span></h4><p><span class="deltaxml-old" style="background:#FF5555">This section describes standard steps that must be supported by any conforming processor.</span></p><div class="section"><h5><a name="c.add-attribute" id="c.add-attribute"></a><span class="deltaxml-old" style="background:#FF5555">7.1.1 p:add-attribute</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:add-attribute</span></tt><span class="deltaxml-old" style="background:#FF5555"> step adds a single attribute to a set of matching elements. The input document specified on the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> is processed for matches specified by the match pattern in the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option. For each of these matches, the attribute whose name is specified by the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">attribute-name</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is set to the attribute value specified by the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">attribute-value</span></tt><span class="deltaxml-old" style="background:#FF5555"> option. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The resulting document is produced on the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555"> output port and consists of a exact copy of the input with the exception of the matched elements. Each of the matched elements is copied to the output with the addition of the specified attribute with the specified value. </span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:add-attribute</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">attribute-name</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">attribute-prefix</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                           </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">NCName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">attribute-namespace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                        </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">attribute-value</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">            </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an XSLTMatchPattern. </span><a name="err.inline.C0023.1"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0023"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0023</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the match pattern does not match an element.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">attribute-name</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">QName</span></tt><span class="deltaxml-old" style="background:#FF5555">. If the lexical value does not contain a colon, then the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">attribute-namespace</span></tt><span class="deltaxml-old" style="background:#FF5555"> may be used to specify the namespace of the attribute. In that case, the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">attribute-prefix</span></tt><span class="deltaxml-old" style="background:#FF5555"> may be specified to suggest a prefix for the attribute name. </span><a name="err.inline.D0034.1"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0034"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0034</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to specify a new namespace or prefix if the lexical value of the specified name contains a colon. The corresponding expanded name is used to construct the attribute.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">attribute-value</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a legal attribute value according to XML.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If an attribute with the same name as the expanded name from the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">attribute-name</span></tt><span class="deltaxml-old" style="background:#FF5555"> option exists on the matched element, the value specified in the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">attribute-value</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is used to set the value of that existing attribute. That is, the value of the existing attribute is changed to the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">attribute-value</span></tt><span class="deltaxml-old" style="background:#FF5555"> value. </span></p><div class="admonition"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">If multiple attributes need to be set on the same element(s), the </span><a href="#c.set-attributes"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:set-attributes</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step can be used to set them all at once.</span></p></div><p><span class="deltaxml-old" style="background:#FF5555">This step cannot be used to add namespace declarations. </span><a name="err.inline.C0059"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0059"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0059</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the QName value in the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">attribute-name</span></tt><span class="deltaxml-old" style="background:#FF5555"> option uses the prefix “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xmlns</span></tt><span class="deltaxml-old" style="background:#FF5555">” or any other prefix that resolves to the namespace name “</span><tt class="uri"><span class="deltaxml-old" style="background:#FF5555">http://www.w3.org/2000/xmlns/</span></tt><span class="deltaxml-old" style="background:#FF5555">”. Note, however, that while namespace declarations cannot be added explicitly by this step, adding an attribute whose name is in a namespace for which there is no namespace declaration in scope on the matched element may result in a namespace binding being added by </span><a href="#namespace-fixup" title="Namespace Fixup on Outputs"><span class="deltaxml-old" style="background:#FF5555">Section 2.4.1, “Namespace Fixup on Outputs”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If an attribute named </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">xml:base</span></tt><span class="deltaxml-old" style="background:#FF5555"> is added or changed, the base URI of the element </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> also be amended accordingly.</span></p></div><div class="section"><h5><a name="c.add-xml-base" id="c.add-xml-base"></a><span class="deltaxml-old" style="background:#FF5555">7.1.2 p:add-xml-base</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:add-xml-base</span></tt><span class="deltaxml-old" style="background:#FF5555"> step exposes the base URI via explicit </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">xml:base</span></tt><span class="deltaxml-old" style="background:#FF5555"> attributes. The input document from the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port is replicated to the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555"> port with </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">xml:base</span></tt><span class="deltaxml-old" style="background:#FF5555"> attributes added to or corrected on each element as specified by the options on this step.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:add-xml-base</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">all</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">relative</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                   </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">all</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a boolean.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">relative</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a boolean.</span></p><p><a name="err.inline.C0058"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0058"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0058</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">all</span></tt><span class="deltaxml-old" style="background:#FF5555"> and </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">relative</span></tt><span class="deltaxml-old" style="background:#FF5555"> options are </span><em><span class="deltaxml-old" style="background:#FF5555">both</span></em><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:add-xml-base</span></tt><span class="deltaxml-old" style="background:#FF5555"> step modifies its input as follows:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">For the document element: force the element to have an </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">xml:base</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute with the document's [base URI] property's value as its value.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">For other elements:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">all</span></tt><span class="deltaxml-old" style="background:#FF5555"> option has the value </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555">, force the element to have an </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">xml:base</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute with the element's [base URI] value as its value.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">If the element's [base URI] is different from the its parent's [base URI], force the element to have an </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">xml:base</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute with the following value: if the value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">relative</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555">, a string which, when resolved against the parent's [base URI], will give the element's [base URI], otherwise the element's [base URI].</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Otherwise, if there is an </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">xml:base</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute present, remove it. </span></p></li></ul></div></li></ul></div></div><div class="section"><h5><a name="c.compare" id="c.compare"></a><span class="deltaxml-old" style="background:#FF5555">7.1.3 p:compare</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:compare</span></tt><span class="deltaxml-old" style="background:#FF5555"> step compares two documents for equality.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:compare</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">alternate</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">fail-if-not-equal</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">fail-if-not-equal</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a boolean.</span></p><p><span class="deltaxml-old" style="background:#FF5555">This step takes single documents on each of two ports and compares them using the </span><tt class="function"><span class="deltaxml-old" style="background:#FF5555">fn:deep-equal</span></tt><span class="deltaxml-old" style="background:#FF5555"> (as defined in [</span><a href="#xpath-functions"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XPath 2.0 Functions and Operators</span></span></a><span class="deltaxml-old" style="background:#FF5555">]). </span><a name="err.inline.C0019"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0019"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0019</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the documents are not equal, and the value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">fail-if-not-equal</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555">. If the documents are equal, or if the value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">fail-if-not-equal</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">false</span></tt><span class="deltaxml-old" style="background:#FF5555">, a </span><a href="#cv.result"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:result</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> document is produced with contents </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555"> if the documents are equal, otherwise </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">false</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p></div><div class="section"><h5><a name="c.count" id="c.count"></a><span class="deltaxml-old" style="background:#FF5555">7.1.4 p:count</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:count</span></tt><span class="deltaxml-old" style="background:#FF5555"> step counts the number of documents in the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> input sequence and returns a single document on </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555"> containing that number. The generated document contains a single </span><a href="#cv.result"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:result</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element whose contents is the string representation of the number of documents in the sequence.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:count</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">limit</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">0</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                           </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">integer</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">limit</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is specified and is greater than zero, the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:count</span></tt><span class="deltaxml-old" style="background:#FF5555"> step will count at most that many documents. This provides a convenient mechanism to discover, for example, if a sequence consists of more than 1 document, without requiring every single document to be buffered before processing can continue.</span></p></div><div class="section"><h5><a name="c.delete" id="c.delete"></a><span class="deltaxml-old" style="background:#FF5555">7.1.5 p:delete</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:delete</span></tt><span class="deltaxml-old" style="background:#FF5555"> step deletes items specified by a match pattern from the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> input document and produces the resulting document, with the deleted items removed, on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555"> port.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:delete</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an XSLTMatchPattern. A match pattern may match multiple items to be deleted.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If an element is selected by the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option, the entire subtree rooted at that element is deleted.</span></p><p><span class="deltaxml-old" style="background:#FF5555">This step cannot be used to remove namespaces. </span><a name="err.inline.C0062"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0062"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0062</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option matches a namespace node. Also, note that deleting an attribute named </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">xml:base</span></tt><span class="deltaxml-old" style="background:#FF5555"> does not change the base URI of the element on which it occurred.</span></p></div><div class="section"><h5><a name="c.directory-list" id="c.directory-list"></a><span class="deltaxml-old" style="background:#FF5555">7.1.6 p:directory-list</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:directory-list</span></tt><span class="deltaxml-old" style="background:#FF5555"> step produces a list of the contents of a specified directory.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:directory-list</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">path</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">include-filter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">RegularExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">exclude-filter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">RegularExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">path</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></tt><span class="deltaxml-old" style="background:#FF5555">. It is interpreted as an IRI reference. If it is relative, it is made absolute against the base URI of the element on which it is specified (</span><a href="#p.with-option"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:directory-list</span></tt><span class="deltaxml-old" style="background:#FF5555"> in the case of a </span><a href="#option-shortcut"><span class="deltaxml-old" style="background:#FF5555">syntactic shortcut</span></a><span class="deltaxml-old" style="background:#FF5555"> value).</span></p><p><a name="err.inline.C0017"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0017"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0017</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the absolute path does not identify a directory. </span><a name="err.inline.C0012"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0012"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0012</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the contents of the directory path are not available to the step due to access restrictions in the environment in which the pipeline is run.</span></p><p><a name="impl-39"></a><span class="deltaxml-old" style="background:#FF5555">Conformant processors </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> support directory paths whose scheme is </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">file</span></tt><span class="deltaxml-old" style="background:#FF5555">. It is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555"> what other schemes are supported by </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:directory-list</span></tt><span class="deltaxml-old" style="background:#FF5555">, and what the interpretation of 'directory', 'file' and 'contents' is for those schemes. </span></p><p><span class="deltaxml-old" style="background:#FF5555">If present, the value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">include-filter</span></tt><span class="deltaxml-old" style="background:#FF5555"> or </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">exclude-filter</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a regular expression as specified in [</span><a href="#xpath-functions"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XPath 2.0 Functions and Operators</span></span></a><span class="deltaxml-old" style="background:#FF5555">], section 7.61 “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">Regular Expression Syntax</span></tt><span class="deltaxml-old" style="background:#FF5555">”.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">include-filter</span></tt><span class="deltaxml-old" style="background:#FF5555"> pattern matches a directory entry's name, the entry is included in the output. If the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">exclude-filter</span></tt><span class="deltaxml-old" style="background:#FF5555"> pattern matches a directory entry's name, the entry is excluded in the output. If both options are provided, the include filter is processed first, then the exclude filter.</span></p><p id="cv.directory"><span class="deltaxml-old" style="background:#FF5555">The result document produced for the specified directory path has a </span><a href="#cv.directory"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:directory</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> document element whose base URI is the directory path and whose </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">name</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is the last segment of the directory path (that is, the directory's (local) name).</span></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:directory</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">name</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#cv.file"><span class="deltaxml-old" style="background:#FF5555">c:file</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#cv.directory"><span class="deltaxml-old" style="background:#FF5555">c:directory</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#cv.other"><span class="deltaxml-old" style="background:#FF5555">c:other</span></a><span class="deltaxml-old" style="background:#FF5555">)*</span><span class="deltaxml-old" style="background:#FF5555">&lt;/c:directory&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">Its contents are determined as follows, based on the entries in the directory identified by the directory path. For each entry in the directory, if either no </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">filter</span></tt><span class="deltaxml-old" style="background:#FF5555"> was specified, or the (local) name of the entry matches the filter pattern, a </span><a href="#cv.file"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:file</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, a </span><a href="#cv.directory"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:directory</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, or a </span><a href="#cv.other"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:other</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element is produced, as follows: </span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">A </span><a href="#cv.directory"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:directory</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> is produced for each subdirectory not determined to be special.</span></p></li><li><p id="cv.file"><span class="deltaxml-old" style="background:#FF5555">A </span><a href="#cv.file"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:file</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> is produced for each file not determined to be special.</span></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:file</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">name</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p></li><li><p id="cv.other"><a name="impl-40"></a><span class="deltaxml-old" style="background:#FF5555">Any file or directory determined to be special by the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:directory-list</span></tt><span class="deltaxml-old" style="background:#FF5555"> step may be output using a </span><a href="#cv.other"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:other</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element but the criteria for marking a file as special are </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:other</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">name</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p></li></ul></div><p><span class="deltaxml-old" style="background:#FF5555">When a directory entry is a subdirectory, that directory's entries are not output as part of that entry's </span><a href="#cv.directory"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:directory</span></tt></a><span class="deltaxml-old" style="background:#FF5555">. A user must apply this step again to the subdirectory to list subdirectory contents.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Each of the elements </span><a href="#cv.file"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:file</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#cv.directory"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:directory</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, and </span><a href="#cv.other"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:other</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> has a </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">name</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute when it appears within the top-level </span><a href="#cv.directory"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:directory</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element, whose value is a relative IRI reference, giving the (local) file or directory name.</span></p><p><a name="impl-41"></a><span class="deltaxml-old" style="background:#FF5555">Any attributes other than </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">name</span></tt><span class="deltaxml-old" style="background:#FF5555"> on </span><a href="#cv.file"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:file</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#cv.directory"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:directory</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, or </span><a href="#cv.other"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:other</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> are </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></div><div class="section"><h5><a name="c.error" id="c.error"></a><span class="deltaxml-old" style="background:#FF5555">7.1.7 p:error</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:error</span></tt><span class="deltaxml-old" style="background:#FF5555"> step generates a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> using the input provided to the step.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:error</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">code</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">code-prefix</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">NCName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">code-namespace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">code</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">QName</span></tt><span class="deltaxml-old" style="background:#FF5555">. If the lexical value does not contain a colon, then the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">code-namespace</span></tt><span class="deltaxml-old" style="background:#FF5555"> may be used to specify the namespace of the code. In that case, the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">code-prefix</span></tt><span class="deltaxml-old" style="background:#FF5555"> may be specified to suggest a prefix for the code. </span><a name="err.inline.D0034.2"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0034"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0034</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to specify a new namespace or prefix if the lexical value of the specified name contains a colon.</span></p><p><span class="deltaxml-old" style="background:#FF5555">This step uses the document provided on its input as the content of the error raised. An instance of the </span><a href="#cv.errors"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:errors</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element will be produced on the error output port, as is always the case for </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic errors</span></a></em><span class="deltaxml-old" style="background:#FF5555">. The error generated can be caught by a </span><a href="#p.try"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> just like any other dynamic error.</span></p><p><span class="deltaxml-old" style="background:#FF5555">For authoring convenience, the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:error</span></tt><span class="deltaxml-old" style="background:#FF5555"> step is declared with a single, primary output port. With respect to </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-old" style="background:#FF5555">connections</span></a></em><span class="deltaxml-old" style="background:#FF5555">, this port behaves like any other output port even though nothing can ever appear on it since the step always fails.</span></p><p><span class="deltaxml-old" style="background:#FF5555">For example, given the following invocation:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555"> &lt;p:error xmlns:my="http://www.example.org/error" name="bad-document" code="my:unk12"&gt; &lt;p:input port="source"&gt; &lt;p:inline&gt; &lt;message&gt;The document element is unknown.&lt;/message&gt; &lt;/p:inline&gt; &lt;/p:input&gt; &lt;/p:error&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">The error vocabulary element (and document) generated on the error output port would be:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555"> &lt;c:errors xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:p="http://www.w3.org/ns/xproc" xmlns:my="http://www.example.org/error"&gt; &lt;c:error name="bad-document" type="p:error" code="my:unk12"&gt;&lt;message&gt;The document element is unknown.&lt;/message&gt; &lt;/c:error&gt; &lt;/c:errors&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">href</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">line</span></tt><span class="deltaxml-old" style="background:#FF5555"> and </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">column</span></tt><span class="deltaxml-old" style="background:#FF5555">, or </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">offset</span></tt><span class="deltaxml-old" style="background:#FF5555">, might also be present on the </span><a href="#cv.error"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:error</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> to identify the location of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:error</span></tt><span class="deltaxml-old" style="background:#FF5555"> element in the pipeline.</span></p></div><div class="section"><h5><a name="c.escape-markup" id="c.escape-markup"></a><span class="deltaxml-old" style="background:#FF5555">7.1.8 p:escape-markup</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:escape-markup</span></tt><span class="deltaxml-old" style="background:#FF5555"> step applies XML serialization to the children of the document element and replaces those children with their serialization. The outcome is a single element with text content that represents the "escaped" syntax of the children as they were serialized.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:escape-markup</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">cdata-section-elements</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">''</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">ListOfQNames</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">doctype-public</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">doctype-system</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">escape-uri-attributes</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">include-content-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">indent</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">media-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                 </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">method</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'xml'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">omit-xml-declaration</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">standalone</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'omit'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                 </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">"true" | "false" | "omit"</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">undeclare-prefixes</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">version</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'1.0'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                     </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">This step supports the standard serialization options as specified in </span><a href="#serialization-options" title="Serialization Options"><span class="deltaxml-old" style="background:#FF5555">Section 7.3, “Serialization Options”</span></a><span class="deltaxml-old" style="background:#FF5555">. These options control how the output markup is produced before it is escaped. </span></p><p><span class="deltaxml-old" style="background:#FF5555">For example, the input:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;description&gt; &lt;div xmlns="http://www.w3.org/1999/xhtml"&gt; &lt;p&gt;This is a chunk of XHTML.&lt;/p&gt; &lt;/div&gt; &lt;/description&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">produces:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;description&gt; &amp;lt;div xmlns="http://www.w3.org/1999/xhtml"&amp;gt; &amp;lt;p&gt;This is a chunk of XHTML.&amp;lt;/p&amp;gt; &amp;lt;/div&amp;gt; &lt;/description&gt; </span></pre></div><div class="admonition"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">The result of this step is an XML document that contains the Unicode characters that are the characters that result from escaping the input. It is not encoded characters in a serialized octet stream, therefore, the serialization options related to encoding characters (</span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">byte-order-mark</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">encoding</span></tt><span class="deltaxml-old" style="background:#FF5555">, and </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">normalization-form</span></tt><span class="deltaxml-old" style="background:#FF5555">) do not apply. They are omitted from the standard serialization options on this step.</span></p></div><p><span class="deltaxml-old" style="background:#FF5555">By default, this step </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must not</span></span><span class="deltaxml-old" style="background:#FF5555"> generate an XML declaration in the escaped result.</span></p></div><div class="section"><h5><a name="c.filter" id="c.filter"></a><span class="deltaxml-old" style="background:#FF5555">7.1.9 p:filter</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:filter</span></tt><span class="deltaxml-old" style="background:#FF5555"> step selects portions of the source document based on a (possibly dynamically constructed) XPath select expression.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:filter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                     </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">This step behaves just like an </span><a href="#p.input"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:input</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> with a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">select</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression except that the select expression is computed dynamically.</span></p></div><div class="section"><h5><a name="c.http-request" id="c.http-request"></a><span class="deltaxml-old" style="background:#FF5555">7.1.10 p:http-request</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></tt><span class="deltaxml-old" style="background:#FF5555"> step provides for interaction with resources over HTTP or related protocols. The input document provided on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port specifies a request by a single </span><a href="#cv.request"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:request</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element. This element specifies the method, resource, and other request properties as well as possibly including an entity body (content) for the request.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">byte-order-mark</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                            </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">cdata-section-elements</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">''</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">ListOfQNames</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">doctype-public</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">doctype-system</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">encoding</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                   </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">escape-uri-attributes</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">include-content-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">indent</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">media-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                 </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">method</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'xml'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">normalization-form</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'none'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">NormalizationForm</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">omit-xml-declaration</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">standalone</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'omit'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                 </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">"true" | "false" | "omit"</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">undeclare-prefixes</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">version</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'1.0'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                     </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The standard serialization options are provided to control the serialization of any XML content which is sent as part of the request. The effect of these options is as specified in </span><a href="#serialization-options" title="Serialization Options"><span class="deltaxml-old" style="background:#FF5555">Section 7.3, “Serialization Options”</span></a><span class="deltaxml-old" style="background:#FF5555">. See </span><a href="#c.request_body" title="Request Entity body conversion"><span class="deltaxml-old" style="background:#FF5555">Section 7.1.10.2, “Request Entity body conversion”</span></a><span class="deltaxml-old" style="background:#FF5555"> for a discussion of when serialization occurs in constructing a request.</span></p><p><a name="err.inline.C0040"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0040"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0040</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the document element of the document that arrives on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port is not </span><a href="#cv.request"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:request</span></tt></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><div class="section"><h6><a name="cv.request" id="cv.request"></a><span class="deltaxml-old" style="background:#FF5555">7.1.10.1 Specifying a request</span></h6><p><span class="deltaxml-old" style="background:#FF5555">An HTTP request is represented by a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:request</span></tt><span class="deltaxml-old" style="background:#FF5555"> element.</span></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:request</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">method</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  href? = </span><var><span class="deltaxml-old" style="background:#FF5555">anyURI</span></var><span class="deltaxml-old" style="background:#FF5555">  detailed? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  status-only? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  username? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  password? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  auth-method? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  send-authorization? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  override-content-type? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#cv.header"><span class="deltaxml-old" style="background:#FF5555">c:header</span></a><span class="deltaxml-old" style="background:#FF5555">*,</span><span class="deltaxml-old" style="background:#FF5555">     (</span><a href="#cv.multipart"><span class="deltaxml-old" style="background:#FF5555">c:multipart</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#cv.body"><span class="deltaxml-old" style="background:#FF5555">c:body</span></a><span class="deltaxml-old" style="background:#FF5555">)?)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/c:request&gt;</span></code></p><p><a name="err.inline.C0006"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0006"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0006</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">method</span></tt><span class="deltaxml-old" style="background:#FF5555"> is not specified on a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:request</span></tt><span class="deltaxml-old" style="background:#FF5555">. </span><a name="err.inline.C0005"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0005"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0005</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the request contains a </span><a href="#cv.body"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:body</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#cv.multipart"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:multipart</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> but the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">method</span></tt><span class="deltaxml-old" style="background:#FF5555"> does not allow for an entity body being sent with the request.</span></p><p><a name="err.inline.C0004"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0004"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0004</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">status-only</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute has the value </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555"> and the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">detailed</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute does not have the value </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">method</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute specifies the method to be used against the IRI specified by the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">href</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute, e.g. </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">GET</span></tt><span class="deltaxml-old" style="background:#FF5555"> or </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">POST</span></tt><span class="deltaxml-old" style="background:#FF5555"> (the value is not case-sensitive). If the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">href</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is not absolute, it will be resolved against the base URI of the element on which it is occurs.</span></p><div class="admonition"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">In the case of simple “GET” requests, implementors are encouraged to support as many protocols as practical. In particular, pipeline authors may attempt to use </span><a href="#c.http-request"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> to load documents with computed URIs using the </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">file:</span></tt><span class="deltaxml-old" style="background:#FF5555"> scheme.</span></p></div><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">username</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is specified, the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">username</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">password</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">auth-method</span></tt><span class="deltaxml-old" style="background:#FF5555">, and </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">send-authorization</span></tt><span class="deltaxml-old" style="background:#FF5555"> attributes are used to handle authentication according to the selected authentication method.</span></p><p><span class="deltaxml-old" style="background:#FF5555">For the purposes of avoiding an authentication challenge, if the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">send-authorization</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute has the value </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555"> and the authentication method specified by the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">auth-method</span></tt><span class="deltaxml-old" style="background:#FF5555"> supports generation of an </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">Authorization</span></tt><span class="deltaxml-old" style="background:#FF5555"> header without a challenge, then an </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">Authorization</span></tt><span class="deltaxml-old" style="background:#FF5555"> header is generated and sent on the first request. If the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">send-authorization</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is absent or has the value </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">false</span></tt><span class="deltaxml-old" style="background:#FF5555">, then the first request is sent without an </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">Authorization</span></tt><span class="deltaxml-old" style="background:#FF5555"> header.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the initial response to the request is an authentication challenge, the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">auth-method</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">username</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">password</span></tt><span class="deltaxml-old" style="background:#FF5555"> and any relevant data from the challenge are used to generate an </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">Authorization</span></tt><span class="deltaxml-old" style="background:#FF5555"> header and the request is sent again. If that authorization fails, the request is not retried.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Appropriate values for the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">auth-method</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute are “Basic” or “Digest” but other values are allowed. If the authentication method is “Basic” or “Digest”, authentication is handled as per [</span><a href="#rfc2617"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RFC 2617</span></span></a><span class="deltaxml-old" style="background:#FF5555">]. </span><a name="impl-42"></a><span class="deltaxml-old" style="background:#FF5555">The interpretation of </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">auth-method</span></tt><span class="deltaxml-old" style="background:#FF5555"> values on </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:request</span></tt><span class="deltaxml-old" style="background:#FF5555"> other than “Basic” or “Digest” is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><a name="err.inline.C0003"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0003"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0003</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if a </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">username</span></tt><span class="deltaxml-old" style="background:#FF5555"> or </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">password</span></tt><span class="deltaxml-old" style="background:#FF5555"> is specified without specifying an </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">auth-method</span></tt><span class="deltaxml-old" style="background:#FF5555">, if the requested </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">auth-method</span></tt><span class="deltaxml-old" style="background:#FF5555"> isn't supported, or the authentication challenge contains an authentication method that isn't supported. All implementations are required to support "Basic" and "Digest" authentication per [</span><a href="#rfc2617"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RFC 2617</span></span></a><span class="deltaxml-old" style="background:#FF5555">].</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">c:header</span></tt><span class="deltaxml-old" style="background:#FF5555"> element specifies a header name and value, either for inclusion in a request, or as received in a response.</span></p><p class="element-syntax element-syntax-step-vocabulary" id="cv.header"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:header</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">name</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">value</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The request is formulated from the attribute values on the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:request</span></tt><span class="deltaxml-old" style="background:#FF5555"> element and its </span><a href="#cv.header"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:header</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#cv.multipart"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:multipart</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#cv.body"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:body</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> children, if present, and transmitted to the host (and port, if present) specified by the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">href</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute. The details of how the request entity body, if any, is constructed are given in </span><a href="#c.response_body" title="Converting Response Entity Bodies"><span class="deltaxml-old" style="background:#FF5555">Section 7.1.10.4, “Converting Response Entity Bodies”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">When the request is formulated, the step and/or protocol implementation may add headers as necessary to either complete the request or as appropriate for the content specified (e.g. transfer encodings). A user of this step is guaranteed that their requested headers and content will be sent with the exception of any conflicts with protocol-related headers.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><a href="#c.http-request"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step allows users to specify independently values that are not always independent. For example, some combinations of </span><a href="#cv.header"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:header</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> values (e.g., </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">Content-Type</span></tt><span class="deltaxml-old" style="background:#FF5555">) may be inconsistent with values that the step and/or protocol implementation must set. In a few cases, the step provides more than one mechanism to specify what is actually a single value (e.g., the boundary string in multipart messages). </span><a name="err.inline.C0020"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0020"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0020</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the the user specifies a value or values that are inconsistent with each other or with the requirements of the step or protocol. </span></p></div><div class="section"><h6><a name="c.request_body" id="c.request_body"></a><span class="deltaxml-old" style="background:#FF5555">7.1.10.2 Request Entity body conversion</span></h6><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">c:multipart</span></tt><span class="deltaxml-old" style="background:#FF5555"> element specifies a multi-part body, per [</span><a href="#rfc1521"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RFC 1521</span></span></a><span class="deltaxml-old" style="background:#FF5555">], either for inclusion in a request or as received in a response.</span></p><p class="element-syntax element-syntax-step-vocabulary" id="cv.multipart"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:multipart</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">content-type</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">boundary</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    </span><a href="#cv.body"><span class="deltaxml-old" style="background:#FF5555">c:body</span></a><span class="deltaxml-old" style="background:#FF5555">+</span><span class="deltaxml-old" style="background:#FF5555">&lt;/c:multipart&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">In the context of a request, the media type of the </span><a href="#cv.multipart"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:multipart</span></tt></a><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a multipart media type (i.e. have a main type of 'multipart'). If the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">content-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is not specified, a value of "multipart/mixed" will be assumed.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">boundary</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is required and is used to provide a multipart boundary marker. The implementation must use this boundary marker and must prefix the value with the string “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">--</span></tt><span class="deltaxml-old" style="background:#FF5555">” when formulating the multipart message. </span><a name="err.inline.C0002"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0002"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0002</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the value starts with the string “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">--</span></tt><span class="deltaxml-old" style="background:#FF5555">”.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the boundary is also specified as a parameter in the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">content-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> option, then the parameter value specified and the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">boundary</span></tt><span class="deltaxml-old" style="background:#FF5555"> value specified </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be the same. If the boundary is specified in both the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">boundary</span></tt><span class="deltaxml-old" style="background:#FF5555"> option and the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">content-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> option then the two values </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be the same.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><a href="#cv.body"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:body</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element holds the body or body part of the message. Each of the attributes holds controls some aspect of the encoding the request body or decoding the body element's content when the request is formulated. These are specified as follows:</span></p><p class="element-syntax element-syntax-step-vocabulary" id="cv.body"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:body</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">content-type</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  encoding? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  id? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  description? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  disposition? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    </span><var><span class="deltaxml-old" style="background:#FF5555">anyElement</span></var><span class="deltaxml-old" style="background:#FF5555">*</span><span class="deltaxml-old" style="background:#FF5555">&lt;/c:body&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">content-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute specifies the media type of the body or body part, that is, the value of its </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">Content-Type</span></tt><span class="deltaxml-old" style="background:#FF5555"> header. If the media type is not an XML type or text, the content must already be base64-encoded.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">encoding</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute controls the decoding of the element content for formulating the body. A value of </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">base64</span></tt><span class="deltaxml-old" style="background:#FF5555"> indicates the element's content is a base64 encoded string whose byte stream should be sent as the message body. </span><a name="impl-43"></a><span class="deltaxml-old" style="background:#FF5555">An implementation may support encodings other than </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">base64</span></tt><span class="deltaxml-old" style="background:#FF5555"> but these encodings and their names are </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span><a name="err.inline.C0052"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0052"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0052</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the encoding specified is not supported by the implementation.</span></p><div class="admonition"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">The </span><a href="#c.http-request"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step provides only a single set of serialization options for XML media types. There's no direct support for sending a multipart message with two XML parts encoded differently.</span></p></div><p><span class="deltaxml-old" style="background:#FF5555">For each body or body part, the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">id</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute specifies the value of the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">Content-ID</span></tt><span class="deltaxml-old" style="background:#FF5555"> header; the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">description</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute specifies the value of the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">Content-Description</span></tt><span class="deltaxml-old" style="background:#FF5555"> header; and the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">disposition</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute specifies the value of the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">Content-Disposition</span></tt><span class="deltaxml-old" style="background:#FF5555"> header. </span></p><p><span class="deltaxml-old" style="background:#FF5555">If an entity body is to be sent as part of a request (e.g. a </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">POST</span></tt><span class="deltaxml-old" style="background:#FF5555">), either a </span><a href="#cv.body"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:body</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element, specifying the request entity body, or a </span><a href="#cv.multipart"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:multipart</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element, specifying multiple entity body parts, may be used. When </span><a href="#cv.multipart"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:multipart</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> is used it may contain multiple </span><a href="#cv.body"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:body</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> children. A </span><a href="#cv.body"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:body</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> specifies the construction of a body or body part as follows:</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">content-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute does not specify an XML media type, or the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">encoding</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">base64</span></tt><span class="deltaxml-old" style="background:#FF5555">”, then </span><a name="err.inline.C0028"></a><span class="deltaxml-old" style="background:#FF5555">it is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0028"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0028</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the content of the </span><a href="#cv.body"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:body</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element does not consist entirely of characters, and the entity body or body part will consist of exactly those characters.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Otherwise (the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">content-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute </span><em><span class="deltaxml-old" style="background:#FF5555">does</span></em><span class="deltaxml-old" style="background:#FF5555"> specify an XML media type and the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">encoding</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is </span><em><span class="deltaxml-old" style="background:#FF5555">not</span></em><span class="deltaxml-old" style="background:#FF5555"> 'base64'), </span><a name="err.inline.C0022"></a><span class="deltaxml-old" style="background:#FF5555">it is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0022"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0022</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the content of the </span><a href="#cv.body"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:body</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element does not consist of exactly one element, optionally preceded and/or followed by any number of processing instructions, comments or whitespace characters, and the entity body or body part will consist of the serialization of a document node containing that content. The serialization of that document is controlled by the serialization options on the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></tt><span class="deltaxml-old" style="background:#FF5555"> step itself.</span></p><p><span class="deltaxml-old" style="background:#FF5555">For example, the following input to a </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></tt><span class="deltaxml-old" style="background:#FF5555"> step will POST a small XML document:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555"> &lt;c:request method="POST" href="http://example.com/someservice"&gt; &lt;c:body xmlns:c="http://www.w3.org/ns/xproc-step" content-type="application/xml"&gt; &lt;doc&gt; &lt;title&gt;My document&lt;/title&gt; &lt;/doc&gt; &lt;/c:body&gt; &lt;/c:request&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">The corresponding request should look something like this:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">POST http://example.com/someservice HTTP/1.1 Host: example.com Content-Type: application/xml; charset="utf-8" &lt;?xml version='1.0'?&gt; &lt;doc&gt; &lt;title&gt;My document&lt;/title&gt; &lt;/doc&gt; </span></pre></div></div><div class="section"><h6><a name="c.request_response" id="c.request_response"></a><span class="deltaxml-old" style="background:#FF5555">7.1.10.3 Managing the response</span></h6><p><span class="deltaxml-old" style="background:#FF5555">The handling of the response to the request and the generation of the step's result document is controlled by the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">status-only</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">override-content-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> and </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">detailed</span></tt><span class="deltaxml-old" style="background:#FF5555"> attributes on the </span><a href="#cv.request"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:request</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> input.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">override-content-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute controls interpretation of the response's </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">Content-Type</span></tt><span class="deltaxml-old" style="background:#FF5555"> header. If this attribute is present, the response will be treated as if it returned the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">Content-Type</span></tt><span class="deltaxml-old" style="background:#FF5555"> given by its value. This original </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">Content-Type</span></tt><span class="deltaxml-old" style="background:#FF5555"> header will however be reflected unchanged as a </span><a href="#cv.header"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:header</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> in the result document. </span><a name="err.inline.C0030"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0030"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0030</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">override-content-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> value cannot be used (e.g. </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">text/plain</span></tt><span class="deltaxml-old" style="background:#FF5555"> to override </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">image/png</span></tt><span class="deltaxml-old" style="background:#FF5555">).</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">status-only</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute has the value </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555">, the result document will contain only header information. The entity of the response will not be processed to produce a </span><a href="#cv.body"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:body</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#cv.multipart"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:multipart</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><a href="#c.response"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:response</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element represents an HTTP response. The response's status code is encoded in the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">status</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute and the headers and entity body are processing into </span><a href="#cv.header"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:header</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#cv.multipart"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:multipart</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#cv.body"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:body</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> content.</span></p><p class="element-syntax element-syntax-step-vocabulary" id="c.response"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:response</span><span class="deltaxml-old" style="background:#FF5555">  status? = </span><var><span class="deltaxml-old" style="background:#FF5555">integer</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#cv.header"><span class="deltaxml-old" style="background:#FF5555">c:header</span></a><span class="deltaxml-old" style="background:#FF5555">*,</span><span class="deltaxml-old" style="background:#FF5555">     (</span><a href="#cv.multipart"><span class="deltaxml-old" style="background:#FF5555">c:multipart</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#cv.body"><span class="deltaxml-old" style="background:#FF5555">c:body</span></a><span class="deltaxml-old" style="background:#FF5555">)?)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/c:response&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">detailed</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute determines the content of the result document. If it is </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555">, the response to the request is handled as follows:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-old" style="background:#FF5555">A single </span><a href="#c.response"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:response</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element is produced with the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">status</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute containing the status of the response received.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Each response header is translated into a </span><a href="#cv.header"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:header</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Unless the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">status-only</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute has a value </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555">, the entity body of the response is converted into a </span><a href="#cv.body"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:body</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#cv.multipart"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:multipart</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element via the rules given in </span><a href="#c.response_body" title="Converting Response Entity Bodies"><span class="deltaxml-old" style="background:#FF5555">Section 7.1.10.4, “Converting Response Entity Bodies”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p></li></ol></div><p><span class="deltaxml-old" style="background:#FF5555">Otherwise (the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">detailed</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute is not specified or its value is </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">false</span></tt><span class="deltaxml-old" style="background:#FF5555">), the response to the request is handled as follows:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-old" style="background:#FF5555">If the media type (as determined by the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">override-content-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute or the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">Content-Type</span></tt><span class="deltaxml-old" style="background:#FF5555"> response header) is an XML media type, the entity is decoded if necessary, then parsed as an XML document and produced on the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555"> output port as the entire output of the step.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Otherwise, the entity body of the response is converted into a </span><a href="#cv.body"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:body</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#cv.multipart"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:multipart</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element via the rules given in </span><a href="#c.response_body" title="Converting Response Entity Bodies"><span class="deltaxml-old" style="background:#FF5555">Section 7.1.10.4, “Converting Response Entity Bodies”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p></li></ol></div><p><span class="deltaxml-old" style="background:#FF5555">In either case the base URI of the output document is the resolved value of the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">href</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute from the input </span><a href="#cv.request"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:request</span></tt></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><div class="section"><h6><a name="redirects" id="redirects"></a><span class="deltaxml-old" style="background:#FF5555">7.1.10.3.1 Redirects</span></h6><p><span class="deltaxml-old" style="background:#FF5555">One possible response from an HTTP request is a redirect, indicated by a status code in the three-hundred range. The precise semantics of the 3xx return codes are laid out by section </span><em class="citetitle"><span class="deltaxml-old" style="background:#FF5555">10.3 Redirection 3xx</span></em><span class="deltaxml-old" style="background:#FF5555"> in [</span><a href="#rfc2616"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RFC 2616</span></span></a><span class="deltaxml-old" style="background:#FF5555">]. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><a href="#c.http-request"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> follow redirect requests (in a manner consistent with [</span><a href="#rfc2616"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RFC 2616</span></span></a><span class="deltaxml-old" style="background:#FF5555">]) if they are returned by the server. </span></p></div><div class="section"><h6><a name="cookies" id="cookies"></a><span class="deltaxml-old" style="background:#FF5555">7.1.10.3.2 Cookies</span></h6><p><span class="deltaxml-old" style="background:#FF5555">With one exception, in version 1.0 of XProc, the </span><a href="#c.http-request"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step does not provide any standard mechanisms for managing cookies. </span><a name="impl-44"></a><span class="deltaxml-old" style="background:#FF5555">Pipeline authors that need to preserve cookies across several </span><a href="#c.http-request"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> calls in the same pipeline or across multiple invocations of the same or different pipelines will have to rely on </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555"> mechanisms. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The exception arises in the case of redirection. If a redirect response includes cookies, those cookies </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> be forwarded as appropriate to the redirected location when the redirection is followed.</span></p><p><span class="deltaxml-old" style="background:#FF5555">This behavior will allow the </span><a href="#c.http-request"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step to interoperate with web services that use cookies as part of an authentication protocol.</span></p></div></div><div class="section"><h6><a name="c.response_body" id="c.response_body"></a><span class="deltaxml-old" style="background:#FF5555">7.1.10.4 Converting Response Entity Bodies</span></h6><p><span class="deltaxml-old" style="background:#FF5555">The entity of a response may be multipart per [</span><a href="#rfc1521"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RFC 1521</span></span></a><span class="deltaxml-old" style="background:#FF5555">]. In those situations, the result document will be a </span><a href="#cv.multipart"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:multipart</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element that contains multiple </span><a href="#cv.body"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:body</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> elements inside.</span></p><div class="admonition"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">Although it is technically possible for any of the individual parts of a multipart message to </span><em><span class="deltaxml-old" style="background:#FF5555">also</span></em><span class="deltaxml-old" style="background:#FF5555"> be multipart, XProc does not provide a standard representation for such messages. </span><a name="impl-45"></a><span class="deltaxml-old" style="background:#FF5555">The interpretation of a multipart message inside another multipart message is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></div><p><span class="deltaxml-old" style="background:#FF5555">The result of the </span><a href="#c.http-request"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step is an XML document. For media types (images, binaries, etc.) that can't be represented as a sequence of Unicode characters, the response is encoded as </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">base64</span></tt><span class="deltaxml-old" style="background:#FF5555"> and then returned as text children of the </span><a href="#cv.body"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:body</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element. If the content is base64-encoded, the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">encoding</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute on </span><a href="#cv.body"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:body</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> must be set to “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">base64</span></tt><span class="deltaxml-old" style="background:#FF5555">”.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the media type of the response is a text type with a </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">charset</span></tt><span class="deltaxml-old" style="background:#FF5555"> parameter that is a Unicode character encoding (per [</span><a href="#unicodetr17"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Unicode TR#17</span></span></a><span class="deltaxml-old" style="background:#FF5555">]) or is recognized as a non-XML media type whose contents are encoded as a sequence of Unicode characters (e.g. it has a character parameter or the definition of the media type is such that it requires Unicode), the content of the constructed </span><a href="#cv.body"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:body</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element is the translation of the text into a sequence of Unicode characters.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the response is an XML media type, the content of the constructed </span><a href="#cv.body"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:body</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element is the result of decoding the body as necessary, then parsing it with an XML parser. If the content is not well-formed, the step fails.</span></p><p><span class="deltaxml-old" style="background:#FF5555">In a </span><a href="#cv.body"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:body</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> in a response, the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">content-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an exact copy of the value returned in the </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">Content-Type</span></tt><span class="deltaxml-old" style="background:#FF5555"> header. That is, it must reflect the content type actually returned, not any override value that may have been specified, and it must include any parameters returned by the server.</span></p><p><span class="deltaxml-old" style="background:#FF5555">In the case of a multipart response, the same rules apply when constructing a </span><a href="#cv.body"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:body</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element for each body part encountered.</span></p><div class="admonition"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">Given the above description, any content identified as </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">text/html</span></tt><span class="deltaxml-old" style="background:#FF5555"> will be encoded as (escaped) text or base64-encoded in the </span><a href="#cv.body"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:body</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element, as HTML isn't always well-formed XML. A user can attempt to convert such content into XML using the </span><a href="#c.unescape-markup"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:unescape-markup</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step.</span></p></div></div><div class="section"><h6><a name="example-http-request" id="example-http-request"></a><span class="deltaxml-old" style="background:#FF5555">7.1.10.5 HTTP Request Example</span></h6><p><span class="deltaxml-old" style="background:#FF5555">A simple form might be posted as follows:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;c:request method="POST" href="http://www.example.com/form-action" xmlns:c="http://www.w3.org/ns/xproc-step"&gt; &lt;c:body content-type="application/x-www-form-urlencoded"&gt; name=W3C&amp;amp;spec=XProc &lt;/c:body&gt; &lt;/c:request&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">and if the response was an XHTML document, the result document would be:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;c:response status="200" xmlns:c="http://www.w3.org/ns/xproc-step"&gt; &lt;c:header name="Date" value=" Wed, 09 May 2007 23:12:24 GMT"/&gt; &lt;c:header name="Server" value="Apache/1.3.37 (Unix) PHP/4.4.5"/&gt; &lt;c:header name="Vary" value="negotiate,accept"/&gt; &lt;c:header name="TCN" value="choice"/&gt; &lt;c:header name="P3P" value="policyref='http://www.w3.org/2001/05/P3P/p3p.xml'"/&gt; &lt;c:header name="Cache-Control" value="max-age=600"/&gt; &lt;c:header name="Expires" value="Wed, 09 May 2007 23:22:24 GMT"/&gt; &lt;c:header name="Last-Modified" value="Tue, 08 May 2007 16:10:49 GMT"/&gt; &lt;c:header name="ETag" value="'4640a109;42380ddc'"/&gt; &lt;c:header name="Accept-Ranges" value="bytes"/&gt; &lt;c:header name="Keep-Alive" value="timeout=2, max=100"/&gt; &lt;c:header name="Connection" value="Keep-Alive"/&gt; &lt;c:body content-type="application/xhtml+xml"&gt; &lt;html xmlns="http://www.w3.org/1999/xhtml"&gt; &lt;head&gt;&lt;title&gt;OK&lt;/title&gt;&lt;/head&gt; &lt;body&gt;&lt;p&gt;OK!&lt;/p&gt;&lt;/body&gt; &lt;/html&gt; &lt;/c:body&gt; &lt;/c:response&gt; </span></pre></div></div></div><div class="section"><h5><a name="c.identity" id="c.identity"></a><span class="deltaxml-old" style="background:#FF5555">7.1.11 p:identity</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:identity</span></tt><span class="deltaxml-old" style="background:#FF5555"> step makes a verbatim copy of its input available on its output.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:identity</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">If the implementation supports passing PSVI annotations between steps, the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:identity</span></tt><span class="deltaxml-old" style="background:#FF5555"> step </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> preserve any annotations that appear in the input.</span></p></div><div class="section"><h5><a name="c.insert" id="c.insert"></a><span class="deltaxml-old" style="background:#FF5555">7.1.12 p:insert</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:insert</span></tt><span class="deltaxml-old" style="background:#FF5555"> step inserts the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">insertion</span></tt><span class="deltaxml-old" style="background:#FF5555"> port's document into the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port's document relative to the matching elements in the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port's document.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:insert</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">insertion</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'/*'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                        </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">position</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                   </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">"first-child" | "last-child" | "before" | "after"</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an XSLTMatchPattern. </span><a name="err.inline.C0023.2"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0023"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0023</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if that pattern matches anything other than element, text, processing-instruction, or comment nodes. Multiple matches are allowed, in which case multiple copies of the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">insertion</span></tt><span class="deltaxml-old" style="background:#FF5555"> documents will occur. If no elements match, then the document is unchanged.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">position</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an NMTOKEN in the following list: </span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">“</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">first-child</span></tt><span class="deltaxml-old" style="background:#FF5555">” - the insertion is made as the first child of the match;</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">“</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">last-child</span></tt><span class="deltaxml-old" style="background:#FF5555">” - the insertion is made as the last child of the match;</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">“</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">before</span></tt><span class="deltaxml-old" style="background:#FF5555">” - the insertion is made as the immediate preceding sibling of the match;</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">“</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">after</span></tt><span class="deltaxml-old" style="background:#FF5555">” - the insertion is made as the immediate following sibling of the match.</span></p></li></ul></div><p><a name="err.inline.C0025"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0025"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0025</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the match pattern matches anything other than an element node and the value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">position</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">first-child</span></tt><span class="deltaxml-old" style="background:#FF5555">” or “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">last-child</span></tt><span class="deltaxml-old" style="background:#FF5555">”.</span></p><p><span class="deltaxml-old" style="background:#FF5555">As the inserted elements are part of the output of the step they are not considered in determining matching elements. If an empty sequence appears on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">insertion</span></tt><span class="deltaxml-old" style="background:#FF5555"> port, the result will be the same as the source.</span></p></div><div class="section"><h5><a name="c.label-elements" id="c.label-elements"></a><span class="deltaxml-old" style="background:#FF5555">7.1.13 p:label-elements</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:label-elements</span></tt><span class="deltaxml-old" style="background:#FF5555"> step generates a label for each matched element and stores that label in the specified attribute.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:label-elements</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">attribute</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'xml:id'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">attribute-prefix</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                           </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">NCName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">attribute-namespace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                        </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">label</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'concat("_",$p:index)'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'*'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">replace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">attribute</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">QName</span></tt><span class="deltaxml-old" style="background:#FF5555">. If the lexical value does not contain a colon, then the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">attribute-namespace</span></tt><span class="deltaxml-old" style="background:#FF5555"> may be used to specify the namespace of the attribute name. In that case, the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">attribute-prefix</span></tt><span class="deltaxml-old" style="background:#FF5555"> may be specified to suggest a prefix for the attribute name. </span><a name="err.inline.D0034.3"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0034"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0034</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to specify a new namespace or prefix if the lexical value of the specified name contains a colon. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">label</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is an XPath expression used to generate the value of the attribute label.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an XSLTMatchPattern. </span><a name="err.inline.C0023.3"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0023"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0023</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if that expression matches anything other than element nodes.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">replace</span></tt><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a boolean value and is used to indicate whether existing attribute values are replaced.</span></p><p><span class="deltaxml-old" style="background:#FF5555">This step operates by generating attribute labels for each element matched. For every matched element, the expression is evaluated with the context node set to the matched element. An attribute is added to the matched element using the attribute name is specified the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">attribute</span></tt><span class="deltaxml-old" style="background:#FF5555"> option and the string value of result of evaluating the expression. If the attribute already exists on the matched element, the value is replaced with the string value only if the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">replace</span></tt><span class="deltaxml-old" style="background:#FF5555"> option has the value of </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If this step is used to add or change the value of an attribute named “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xml:base</span></tt><span class="deltaxml-old" style="background:#FF5555">”, the base URI of the element </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> also be amended accordingly.</span></p><p><span class="deltaxml-old" style="background:#FF5555">An implementation must bind the variable “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">p:index</span></tt><span class="deltaxml-old" style="background:#FF5555">” in the static context of each evaluation of the XPath expression to the position of the element in the sequence of matched elements. In other words, the first element (in document order) matched gets the value “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">1</span></tt><span class="deltaxml-old" style="background:#FF5555">”, the second gets the value “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">2</span></tt><span class="deltaxml-old" style="background:#FF5555">”, the third, “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">3</span></tt><span class="deltaxml-old" style="background:#FF5555">”, etc.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The result of the p:label-elements step is the input document with the attribute labels associated with matched elements. All other non-matching content remains the same.</span></p></div><div class="section"><h5><a name="c.load" id="c.load"></a><span class="deltaxml-old" style="background:#FF5555">7.1.14 p:load</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:load</span></tt><span class="deltaxml-old" style="background:#FF5555"> step has no inputs but produces as its result an XML resource specified by an IRI.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:load</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">href</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">dtd-validate</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">              </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">href</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></tt><span class="deltaxml-old" style="background:#FF5555">. It is interpreted as an IRI reference. If it is relative, it is made absolute against the base URI of the element on which it is specified (</span><a href="#p.with-option"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:load</span></tt><span class="deltaxml-old" style="background:#FF5555"> in the case of a </span><a href="#option-shortcut"><span class="deltaxml-old" style="background:#FF5555">syntactic shortcut</span></a><span class="deltaxml-old" style="background:#FF5555"> value).</span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">dtd-validate</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a boolean.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:load</span></tt><span class="deltaxml-old" style="background:#FF5555"> step is the same as </span><a href="#p.document"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:document</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> with two additions:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-old" style="background:#FF5555">The URI to be accessed can be constructed dynamically by the pipeline.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:load</span></tt><span class="deltaxml-old" style="background:#FF5555"> step has an option to invoke DTD validation. </span></p></li></ol></div><p><span class="deltaxml-old" style="background:#FF5555">When </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">dtd-validate</span></tt><span class="deltaxml-old" style="background:#FF5555"> is </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">false</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:load</span></tt><span class="deltaxml-old" style="background:#FF5555"> processing is the same as </span><a href="#p.document"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:document</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> processing on the computed </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">href</span></tt><span class="deltaxml-old" style="background:#FF5555"> value.</span></p><p><span class="deltaxml-old" style="background:#FF5555">When </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">dtd-validate</span></tt><span class="deltaxml-old" style="background:#FF5555"> is </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:load</span></tt><span class="deltaxml-old" style="background:#FF5555"> processing is the same as </span><a href="#p.document"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:document</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> processing on the computed </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">href</span></tt><span class="deltaxml-old" style="background:#FF5555"> value but </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> use a validating parser. </span><a name="err.inline.C0027"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0027"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0027</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the document is not valid or the step doesn't support DTD validation. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The retrieved document is produced on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555"> port. The base URI of the result is the (absolute) IRI used to retrieve it.</span></p></div><div class="section"><h5><a name="c.make-absolute-uris" id="c.make-absolute-uris"></a><span class="deltaxml-old" style="background:#FF5555">7.1.15 p:make-absolute-uris</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:make-absolute-uris</span></tt><span class="deltaxml-old" style="background:#FF5555"> step makes an element or attribute's value in the source document an absolute IRI value in the result document.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:make-absolute-uris</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">base-uri</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                   </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an XSLTMatchPattern. </span><a name="err.inline.C0023.4"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0023"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0023</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the pattern matches anything other than element or attribute nodes.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">base-uri</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></tt><span class="deltaxml-old" style="background:#FF5555">. It is interpreted as an IRI reference. If it is relative, it is made absolute against the base URI of the element on which it is specified (</span><a href="#p.with-option"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:make-absolute-uris</span></tt><span class="deltaxml-old" style="background:#FF5555"> in the case of a </span><a href="#option-shortcut"><span class="deltaxml-old" style="background:#FF5555">syntactic shortcut</span></a><span class="deltaxml-old" style="background:#FF5555"> value).</span></p><p><span class="deltaxml-old" style="background:#FF5555">For every element or attribute in the input document which matches the specified pattern, its XPath string-value is resolved against the specified base URI and the resulting absolute IRI is used as the matched node's entire contents in the output.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The base URI used for resolution defaults to the matched attribute's element or the matched element's base URI unless the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">base-uri</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is specified. When the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">base-uri</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is specified, the option value is used as the base URI regardless of any contextual base URI value in the document. This option value is resolved against the base URI of the </span><a href="#p.option"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:option</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element used to set the option.</span></p><p><a name="impl-46"></a><span class="deltaxml-old" style="background:#FF5555">If the IRI reference specified by the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">base-uri</span></tt><span class="deltaxml-old" style="background:#FF5555"> option on </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:make-absolute-uris</span></tt><span class="deltaxml-old" style="background:#FF5555"> is not valid, or if it is absent and the input document has no base URI, the results are </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p></div><div class="section"><h5><a name="c.namespace-rename" id="c.namespace-rename"></a><span class="deltaxml-old" style="background:#FF5555">7.1.16 p:namespace-rename</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:namespace-rename</span></tt><span class="deltaxml-old" style="background:#FF5555"> step renames any namespace declaration or use of a namespace in a document to a new IRI value.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:namespace-rename</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">from</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">to</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">apply-to</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'all'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">"all" | "elements" | "attributes"</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">from</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></tt><span class="deltaxml-old" style="background:#FF5555">. It </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> be either empty or absolute, but will not be resolved in any case.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">to</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></tt><span class="deltaxml-old" style="background:#FF5555">. It </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> be empty or absolute, but will not be resolved in any case.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">apply-to</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be one of “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">all</span></tt><span class="deltaxml-old" style="background:#FF5555">”, “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">elements</span></tt><span class="deltaxml-old" style="background:#FF5555">”, or “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">attributes</span></tt><span class="deltaxml-old" style="background:#FF5555">”. If the value is “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">elements</span></tt><span class="deltaxml-old" style="background:#FF5555">”, only elements will be renamed, if the value is “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">attributes</span></tt><span class="deltaxml-old" style="background:#FF5555">”, only attributes will be renamed, if the value is “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">all</span></tt><span class="deltaxml-old" style="background:#FF5555">”, both elements and attributes will be renamed.</span></p><p><a name="err.inline.C0014"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0014"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0014</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the XML namespace (</span><tt class="uri"><span class="deltaxml-old" style="background:#FF5555">http://www.w3.org/XML/1998/namespace</span></tt><span class="deltaxml-old" style="background:#FF5555">) or the XMLNS namespace (</span><tt class="uri"><span class="deltaxml-old" style="background:#FF5555">http://www.w3.org/2000/xmlns/</span></tt><span class="deltaxml-old" style="background:#FF5555">) is the value of either the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">from</span></tt><span class="deltaxml-old" style="background:#FF5555"> option or the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">to</span></tt><span class="deltaxml-old" style="background:#FF5555"> option.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">from</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is the same as the value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">to</span></tt><span class="deltaxml-old" style="background:#FF5555"> option, the input is reproduced unchanged on the output. Otherwise, namespace bindings, namespace attributes and element and attribute names are changed as follows:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">Namespace bindings: If the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">from</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is present and its value is not the empty string, then every binding of a prefix (or the default namespace) in the input document whose value is the same as the value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">from</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">replaced in the output with a binding to the value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">to</span></tt><span class="deltaxml-old" style="background:#FF5555"> option, provided it is present and not the empty string;</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">otherwise (the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">to</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is not specified or has an empty string as its value) absent from the output.</span></p></li></ul></div><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">from</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is absent, or its value is the empty string, then no bindings are changed or removed.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Elements and attributes: If the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">from</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is present and its value is not the empty string, for every element and attribute, as appropriate, in the input whose namespace name is the same as the value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">from</span></tt><span class="deltaxml-old" style="background:#FF5555"> option, in the output its namespace name is</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">replaced with the value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">to</span></tt><span class="deltaxml-old" style="background:#FF5555"> option, provided it is present and not the empty string;</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">otherwise (the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">to</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is not specified or has an empty string as its value) changed to have no value.</span></p></li></ul></div><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">from</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is absent, or its value is the empty string, then for every element and attribute, as appropriate, whose namespace name has no value, in the output its namespace name is set to the value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">to</span></tt><span class="deltaxml-old" style="background:#FF5555"> option.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Namespace attributes: If the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">from</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is present and its value is not the empty string, for every namespace attribute in the input whose value is the same as the value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">from</span></tt><span class="deltaxml-old" style="background:#FF5555"> option, in the output</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">the namespace attribute's value is replaced with the value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">to</span></tt><span class="deltaxml-old" style="background:#FF5555"> option, provided it is present and not the empty string;</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">otherwise (the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">to</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is not specified or has an empty string as its value) the namespace attribute is absent.</span></p></li></ul></div></li></ul></div><div class="admonition"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">apply-to</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is primarily intended to make it possible to avoid renaming attributes when the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">from</span></tt><span class="deltaxml-old" style="background:#FF5555"> option specifies no namespace, since many attributes are in no namespace.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Care should be taken when specifying no namespace with the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">to</span></tt><span class="deltaxml-old" style="background:#FF5555"> option. Prefixed names in content, for example QNames and XPath expressions, may end up with no appropriate namespace binding.</span></p></div></div><div class="section"><h5><a name="c.pack" id="c.pack"></a><span class="deltaxml-old" style="background:#FF5555">7.1.17 p:pack</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:pack</span></tt><span class="deltaxml-old" style="background:#FF5555"> step merges two document sequences in a pair-wise fashion.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:pack</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">alternate</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrapper</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrapper-prefix</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">NCName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrapper-namespace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                          </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">wrapper</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">QName</span></tt><span class="deltaxml-old" style="background:#FF5555">. If the lexical value does not contain a colon, then the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">wrapper-namespace</span></tt><span class="deltaxml-old" style="background:#FF5555"> may be used to specify the namespace of the wrapper. In that case, the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">wrapper-prefix</span></tt><span class="deltaxml-old" style="background:#FF5555"> may be specified to suggest a prefix for the wrapper element. </span><a name="err.inline.D0034.4"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0034"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0034</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to specify a new namespace or prefix if the lexical value of the specified name contains a colon.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The step takes each pair of documents, in order, one from the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port and one from the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">alternate</span></tt><span class="deltaxml-old" style="background:#FF5555"> port, wraps them with a new element node whose QName is the value specified in the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">wrapper</span></tt><span class="deltaxml-old" style="background:#FF5555"> option, and writes that element to the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555"> port as a document.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the step reaches the end of one input sequence before the other, then it simply wraps each of the remaining documents in the longer sequence.</span></p><div class="admonition"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">In the common case, where the document element of a document in the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555"> sequence has two element children, any comments, processing instructions, or white space text nodes that occur between them may have come from either of the input documents; this step does not attempt to distinguish which one.</span></p></div></div><div class="section"><h5><a name="c.parameters" id="c.parameters"></a><span class="deltaxml-old" style="background:#FF5555">7.1.18 p:parameters</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:parameters</span></tt><span class="deltaxml-old" style="background:#FF5555"> step exposes a set of parameters as a </span><a href="#cv.param-set"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param-set</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> document.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr kind-attr"><span class="deltaxml-old" style="background:#FF5555">kind</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value kind-value"><span class="deltaxml-old" style="background:#FF5555">parameter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">Each parameter passed to the step is converted into a </span><a href="#cv.param"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element. The step resolves duplicate parameters in the normal way (see </span><a href="#parameter-inputs" title="Parameter Inputs"><span class="deltaxml-old" style="background:#FF5555">Section 5.1.2, “Parameter Inputs”</span></a><span class="deltaxml-old" style="background:#FF5555">) so at most one parameter with any given name will appear in the result. The resulting </span><a href="#cv.param"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> elements are wrapped in a </span><a href="#cv.param-set"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param-set</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> and the parameter set document is written to the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555"> port. </span><a name="impl-47"></a><span class="deltaxml-old" style="background:#FF5555">The order in which </span><a href="#cv.param"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> elements occur in the </span><a href="#cv.param-set"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param-set</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">For consistency and user convenience, if any of the parameters have names that are in a namespace, the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">namespace</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute on the </span><a href="#cv.param"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be used. Each </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">name</span></tt><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an NCName.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The base URI of the output document is the URI of the pipeline document that contains the step.</span></p><div class="admonition"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">Since the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">parameters</span></tt><span class="deltaxml-old" style="background:#FF5555"> port is </span><em><span class="deltaxml-old" style="background:#FF5555">not</span></em><span class="deltaxml-old" style="background:#FF5555"> primary, any explicit </span><a href="#p.with-param"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> settings </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> include a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">port</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute, per the last paragraph of </span><a href="#p.with-param" title="p:with-param"><span class="deltaxml-old" style="background:#FF5555">Section 5.7.4, “p:with-param”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p></div></div><div class="section"><h5><a name="c.rename" id="c.rename"></a><span class="deltaxml-old" style="background:#FF5555">7.1.19 p:rename</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:rename</span></tt><span class="deltaxml-old" style="background:#FF5555"> step renames elements, attributes, or processing-instruction targets in a document.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:rename</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">new-name</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                   </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">new-prefix</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                 </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">NCName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">new-namespace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                              </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option must be an XSLTMatchPattern. </span><a name="err.inline.C0023.5"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0023"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0023</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the pattern matches anything other than element, attribute or processing instruction nodes.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">new-name</span></tt><span class="deltaxml-old" style="background:#FF5555"> option must be a </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">QName</span></tt><span class="deltaxml-old" style="background:#FF5555">. If the lexical value does not contain a colon, then the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">new-namespace</span></tt><span class="deltaxml-old" style="background:#FF5555"> may be used to specify the namespace of the new name. In that case, the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">new-prefix</span></tt><span class="deltaxml-old" style="background:#FF5555"> may be specified to suggest a prefix for the new name. </span><a name="err.inline.D0034.5"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0034"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0034</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to specify a new namespace or prefix if the lexical value of the specified name contains a colon. </span></p><p><span class="deltaxml-old" style="background:#FF5555">Each element, attribute, or processing-instruction in the input matched by the match pattern specified in the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is renamed in the output to the name specified by the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">new-name</span></tt><span class="deltaxml-old" style="background:#FF5555"> option.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option matches an attribute and if the element on which it occurs already has an attribute whose expanded name is the same as the expanded name of the specified </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">new-name</span></tt><span class="deltaxml-old" style="background:#FF5555">, then the results is as if the current attribute named “</span><em class="replaceable"><tt class="replaceable"><span class="deltaxml-old" style="background:#FF5555">new-name</span></tt></em><span class="deltaxml-old" style="background:#FF5555">” was deleted before renaming the matched attribute.</span></p><p><span class="deltaxml-old" style="background:#FF5555">With respect to attributes named “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xml:base</span></tt><span class="deltaxml-old" style="background:#FF5555">”, the following semantics apply: renaming an </span><em><span class="deltaxml-old" style="background:#FF5555">from</span></em><span class="deltaxml-old" style="background:#FF5555"> “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xml:base</span></tt><span class="deltaxml-old" style="background:#FF5555">” </span><em><span class="deltaxml-old" style="background:#FF5555">to</span></em><span class="deltaxml-old" style="background:#FF5555"> something else has no effect on the underlying base URI of the element; however, if an attribute is renamed </span><em><span class="deltaxml-old" style="background:#FF5555">from</span></em><span class="deltaxml-old" style="background:#FF5555"> something else </span><em><span class="deltaxml-old" style="background:#FF5555">to</span></em><span class="deltaxml-old" style="background:#FF5555"> “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xml:base</span></tt><span class="deltaxml-old" style="background:#FF5555">”, the base URI of the element </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> also be amended accordingly.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the pattern matches processing instructions, then it is the processing instruction target that is renamed. </span><a name="err.inline.C0013"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0013"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0013</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the pattern matches a processing instruction and the new name has a non-null namespace. </span></p></div><div class="section"><h5><a name="c.replace" id="c.replace"></a><span class="deltaxml-old" style="background:#FF5555">7.1.20 p:replace</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:replace</span></tt><span class="deltaxml-old" style="background:#FF5555"> step replaces matching nodes in its primary input with the document element of the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">replacement</span></tt><span class="deltaxml-old" style="background:#FF5555"> port's document.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:replace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">replacement</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an XSLTMatchPattern. </span><a name="err.inline.C0023.6"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0023"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0023</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if that pattern matches anything other than element, text, processing-instruction, or comment nodes. Multiple matches are allowed, in which case multiple copies of the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">replacement</span></tt><span class="deltaxml-old" style="background:#FF5555"> document will occur.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Every node in the primary input matching the specified pattern is replaced in the output is replaced by the document element of the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">replacement</span></tt><span class="deltaxml-old" style="background:#FF5555"> document. Only non-nested matches are replaced. That is, once a node is replaced, its descendants cannot be matched.</span></p></div><div class="section"><h5><a name="c.set-attributes" id="c.set-attributes"></a><span class="deltaxml-old" style="background:#FF5555">7.1.21 p:set-attributes</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:set-attributes</span></tt><span class="deltaxml-old" style="background:#FF5555"> step sets attributes on matching elements.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:set-attributes</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">attributes</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an XSLTMatchPattern. </span><a name="err.inline.C0023.7"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0023"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0023</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if that pattern matches anything other than element nodes.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Each attribute on the document element of the document that appears on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">attributes</span></tt><span class="deltaxml-old" style="background:#FF5555"> port is copied to each element that matches the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If an attribute with the same name as one of the attributes to be copied already exists, the value specified on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">attribute</span></tt><span class="deltaxml-old" style="background:#FF5555"> port's document is used. The result port of this step produces a copy of the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port's document with the matching elements' attributes modified.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The matching elements are specified by the match pattern in the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option. All matching elements are processed. If no elements match, the step will not change any elements.</span></p><p><span class="deltaxml-old" style="background:#FF5555">This step must not copy namespace declarations. If the attributes copied from the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">attributes</span></tt><span class="deltaxml-old" style="background:#FF5555"> use namespaces, prefixes, or prefixes bound to different namespaces, the document produced on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555"> output port will require </span><a href="#namespace-fixup"><span class="deltaxml-old" style="background:#FF5555">namespace fixup</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If an attribute named </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">xml:base</span></tt><span class="deltaxml-old" style="background:#FF5555"> is added or changed, the base URI of the element </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> also be amended accordingly.</span></p></div><div class="section"><h5><a name="c.sink" id="c.sink"></a><span class="deltaxml-old" style="background:#FF5555">7.1.22 p:sink</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:sink</span></tt><span class="deltaxml-old" style="background:#FF5555"> step accepts a sequence of documents and discards them. It has no output.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:sink</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p></div><div class="section"><h5><a name="c.split-sequence" id="c.split-sequence"></a><span class="deltaxml-old" style="background:#FF5555">7.1.23 p:split-sequence</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:split-sequence</span></tt><span class="deltaxml-old" style="background:#FF5555"> step accepts a sequence of documents and divides it into two sequences.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:split-sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">matched</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">not-matched</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">initial-only</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">              </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">test</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">test</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an XPathExpression.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The XPath expression in the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">test</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is applied to each document in the input sequence. If the effective boolean value of the expression is true, the document is copied to the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">matched</span></tt><span class="deltaxml-old" style="background:#FF5555"> port; otherwise it is copied to the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">not-matched</span></tt><span class="deltaxml-old" style="background:#FF5555"> port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">initial-only</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is true, then when the first document that does not satisfy the test expression is encountered, it </span><em><span class="deltaxml-old" style="background:#FF5555">and all the documents that follow it</span></em><span class="deltaxml-old" style="background:#FF5555"> are written to the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">not-matched</span></tt><span class="deltaxml-old" style="background:#FF5555"> port. In other words, it only writes the initial series of matched documents (which may be empty) to the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">matched</span></tt><span class="deltaxml-old" style="background:#FF5555"> port. All other documents are written to the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">not-matched</span></tt><span class="deltaxml-old" style="background:#FF5555"> port, irrespective of whether or not they match.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><a href="#xpath-context"><span class="deltaxml-old" style="background:#FF5555">XPath context</span></a><span class="deltaxml-old" style="background:#FF5555"> for the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">test</span></tt><span class="deltaxml-old" style="background:#FF5555"> option changes over time. For each document that appears on the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port, the expression is evaluated with that document as the context document. The context position (</span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">position()</span></tt><span class="deltaxml-old" style="background:#FF5555">) is the position of that document within the sequence and the context size (</span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">last()</span></tt><span class="deltaxml-old" style="background:#FF5555">) is the total number of documents in the sequence.</span></p><div class="admonition"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">In principle, this component cannot stream because it must buffer all of the input sequence in order to find the context size. In practice, if the test expression does not use the </span><tt class="function"><span class="deltaxml-old" style="background:#FF5555">last()</span></tt><span class="deltaxml-old" style="background:#FF5555"> function, the implementation can stream and ignore the context size.</span></p></div><p><span class="deltaxml-old" style="background:#FF5555">If the implementation supports passing PSVI annotations between steps, the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:split-sequence</span></tt><span class="deltaxml-old" style="background:#FF5555"> step </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> preserve any annotations that appear in the input.</span></p></div><div class="section"><h5><a name="c.store" id="c.store"></a><span class="deltaxml-old" style="background:#FF5555">7.1.24 p:store</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:store</span></tt><span class="deltaxml-old" style="background:#FF5555"> step stores a serialized version of its input to a URI. This step outputs a reference to the location of the stored document.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:store</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">href</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">byte-order-mark</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                            </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">cdata-section-elements</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">''</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">ListOfQNames</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">doctype-public</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">doctype-system</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">encoding</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                   </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">escape-uri-attributes</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">include-content-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">indent</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">media-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                 </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">method</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'xml'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">normalization-form</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'none'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">NormalizationForm</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">omit-xml-declaration</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">standalone</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'omit'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                 </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">"true" | "false" | "omit"</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">undeclare-prefixes</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">version</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'1.0'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                     </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">href</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></tt><span class="deltaxml-old" style="background:#FF5555">. If it is relative, it is made absolute against the base URI of the element on which it is specified (</span><a href="#p.with-option"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:store</span></tt><span class="deltaxml-old" style="background:#FF5555"> in the case of a </span><a href="#option-shortcut"><span class="deltaxml-old" style="background:#FF5555">syntactic shortcut</span></a><span class="deltaxml-old" style="background:#FF5555"> value).</span></p><p><span class="deltaxml-old" style="background:#FF5555">The step attempts to store the XML document to the specified URI. </span><a name="err.inline.C0050"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0050"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0050</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the URI scheme is not supported or the step cannot store to the specified location.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The output of this step is a document containing a single </span><a href="#cv.result"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:result</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element whose content is the absolute URI of the document stored by the step.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The standard serialization options are provided to control the serialization of the XML content when it is stored. These options are as specified in </span><a href="#serialization-options" title="Serialization Options"><span class="deltaxml-old" style="background:#FF5555">Section 7.3, “Serialization Options”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p></div><div class="section"><h5><a name="c.string-replace" id="c.string-replace"></a><span class="deltaxml-old" style="background:#FF5555">7.1.25 p:string-replace</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:string-replace</span></tt><span class="deltaxml-old" style="background:#FF5555"> step matches nodes in the document provided on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port and replaces them with the string result of evaluating an XPath expression.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:string-replace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">replace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an XSLTMatchPattern.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">replace</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an XPathExpression.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The matched nodes are specified with the match pattern in the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option. For each matching node, the XPath expression provided by the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">replace</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is evaluated with the matching node as the XPath context node. The string value of the result is used in the output. Nodes that do not match are copied without change.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the expression given in the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option matches an </span><em><span class="deltaxml-old" style="background:#FF5555">attribute</span></em><span class="deltaxml-old" style="background:#FF5555">, the string value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">replace</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression is used as the new value of the attribute in the output. If the attribute is named “</span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">xml:base</span></tt><span class="deltaxml-old" style="background:#FF5555">”, the base URI of the element </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> also be amended accordingly.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the expression matches any other kind of node, the entire node (and </span><em><span class="deltaxml-old" style="background:#FF5555">not</span></em><span class="deltaxml-old" style="background:#FF5555"> just its contents) is replaced by the string value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">replace</span></tt><span class="deltaxml-old" style="background:#FF5555"> expression.</span></p></div><div class="section"><h5><a name="c.unescape-markup" id="c.unescape-markup"></a><span class="deltaxml-old" style="background:#FF5555">7.1.26 p:unescape-markup</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:unescape-markup</span></tt><span class="deltaxml-old" style="background:#FF5555"> step takes the string value of the document element and parses the content as if it was a Unicode character stream containing serialized XML. The output consists of the same document element with children that result from the parse. This is the reverse of the </span><a href="#c.escape-markup"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:escape-markup</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> step.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:unescape-markup</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">namespace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                  </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">content-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'application/xml'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">encoding</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                   </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">charset</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">namespace</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></tt><span class="deltaxml-old" style="background:#FF5555">. It </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> be absolute, but will not be resolved.</span></p><p><span class="deltaxml-old" style="background:#FF5555">When the string value is parsed, the original document element is preserved so that the result will be well-formed XML even if the content consists of multiple, sibling elements.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">namespace</span></tt><span class="deltaxml-old" style="background:#FF5555"> option specifies a default namespace. Elements that are in no namespace in the unescaped content will be placed into this namespace unless there is an in-scope namespace declaration that specifies a different namespace (or explicitly undeclares the default namespace).</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">content-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> be used to specify an alternate content type for the string value. An implementation </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> use a different parser to produce XML content depending on the specified content-type. For example, an implementation might provide an HTML to XHTML parser (e.g. [</span><a href="#tidy"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">HTML Tidy</span></span></a><span class="deltaxml-old" style="background:#FF5555">] or [</span><a href="#tagsoup"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">TagSoup</span></span></a><span class="deltaxml-old" style="background:#FF5555">]) for the content type '</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">text/html</span></tt><span class="deltaxml-old" style="background:#FF5555">'.</span></p><p><span class="deltaxml-old" style="background:#FF5555">All implementations </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> support the content type </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">application/xml</span></tt><span class="deltaxml-old" style="background:#FF5555">, and must use a standard XML parser for it. </span><a name="err.inline.C0051"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0051"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0051</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the content-type specified is not supported by the implementation. </span><a name="impl-48"></a><span class="deltaxml-old" style="background:#FF5555">Behavior of </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:unescape-markup</span></tt><span class="deltaxml-old" style="background:#FF5555"> for </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">content-type</span></tt><span class="deltaxml-old" style="background:#FF5555">s other than </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">application/xml</span></tt><span class="deltaxml-old" style="background:#FF5555"> is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">encoding</span></tt><span class="deltaxml-old" style="background:#FF5555"> option specifies how the data is encoded. All implementations </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> support the </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">base64</span></tt><span class="deltaxml-old" style="background:#FF5555"> encoding (and the absence of an encoding option, which implies that the content is plain Unicode text). </span><a name="err.inline.C0052.1"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0052"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0052</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the encoding specified is not supported by the implementation.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If an </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">encoding</span></tt><span class="deltaxml-old" style="background:#FF5555"> is specified, a </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">charset</span></tt><span class="deltaxml-old" style="background:#FF5555"> may also be specified. The character set may be specified as a parameter on the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">content-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> or via the separate </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">charset</span></tt><span class="deltaxml-old" style="background:#FF5555"> option. If it is specified in both places, the value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">charset</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be used.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the specified </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">encoding</span></tt><span class="deltaxml-old" style="background:#FF5555"> is </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">base64</span></tt><span class="deltaxml-old" style="background:#FF5555">, then the character set </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be specified. </span><a name="err.inline.C0010"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0010"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0010</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if an encoding of </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">base64</span></tt><span class="deltaxml-old" style="background:#FF5555"> is specified and the character set is not specified or if the specified character set is not supported by the implementation. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The octet-stream that results from decoding the text </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be interpreted using the character encoding named by the value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">charset</span></tt><span class="deltaxml-old" style="background:#FF5555"> option to produce a sequence of Unicode characters to parse.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If no </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">encoding</span></tt><span class="deltaxml-old" style="background:#FF5555"> is specified, the character set is ignored, irrespective of where it was specified.</span></p><p><span class="deltaxml-old" style="background:#FF5555">For example, with the 'namespace' option set to the XHTML namespace, the following input:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;description&gt; &amp;lt;p&gt;This is a chunk.&amp;lt;/p&gt; &amp;lt;p&gt;This is a another chunk.&amp;lt;/p&gt; &lt;/description&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">would produce:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;description&gt; &lt;p xmlns="http://www.w3.org/1999/xhtml"&gt;This is a chunk.&lt;/p&gt; &lt;p xmlns="http://www.w3.org/1999/xhtml"&gt;This is a another chunk.&lt;/p&gt; &lt;/description&gt; </span></pre></div></div><div class="section"><h5><a name="c.unwrap" id="c.unwrap"></a><span class="deltaxml-old" style="background:#FF5555">7.1.27 p:unwrap</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:unwrap</span></tt><span class="deltaxml-old" style="background:#FF5555"> step replaces matched elements with their children.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:unwrap</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an XSLTMatchPattern. </span><a name="err.inline.C0023.8"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0023"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0023</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if that pattern matches anything other than element nodes.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Every element in the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> document that matches the specified </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> pattern is replaced by its children, effectively “unwrapping” the children from their parent. Non-element nodes and unmatched elements are passed through unchanged.</span></p><div class="admonition"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">The matching applies to the entire document, not just the “top-most” matches. A pattern of the form </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">h:div</span></tt><span class="deltaxml-old" style="background:#FF5555"> will replace </span><em><span class="deltaxml-old" style="background:#FF5555">all</span></em><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">h:div</span></tt><span class="deltaxml-old" style="background:#FF5555"> elements, not just the top-most ones.</span></p></div><p><span class="deltaxml-old" style="background:#FF5555">This step produces a single document; if the document element is unwrapped, the result might not be well-formed XML.</span></p></div><div class="section"><h5><a name="c.wrap" id="c.wrap"></a><span class="deltaxml-old" style="background:#FF5555">7.1.28 p:wrap</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:wrap</span></tt><span class="deltaxml-old" style="background:#FF5555"> step wraps matching nodes in the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> document with a new parent element.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:wrap</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrapper</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrapper-prefix</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">NCName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrapper-namespace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                          </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">group-adjacent</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">wrapper</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">QName</span></tt><span class="deltaxml-old" style="background:#FF5555">. If the lexical value does not contain a colon, then the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">wrapper-namespace</span></tt><span class="deltaxml-old" style="background:#FF5555"> may be used to specify the namespace of the wrapper. In that case, the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">wrapper-prefix</span></tt><span class="deltaxml-old" style="background:#FF5555"> may be specified to suggest a prefix for the wrapper element. </span><a name="err.inline.D0034.6"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0034"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0034</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to specify a new namespace or prefix if the lexical value of the specified name contains a colon.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an XSLTMatchPattern. </span><a name="err.inline.C0023.9"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0023"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0023</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the pattern matches anything other than document, element, text, processing instruction, and comment nodes. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">group-adjacent</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an XPathExpression.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the node matched is the document node (</span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">match="/"</span></tt><span class="deltaxml-old" style="background:#FF5555">), the result is a new document where the document element is a new element node whose QName is the value specified in the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">wrapper</span></tt><span class="deltaxml-old" style="background:#FF5555"> option. That new element contains copies of all of the children of the original document node.</span></p><p><span class="deltaxml-old" style="background:#FF5555">When the match pattern does not match the document node, every node that matches the specified </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> pattern is replaced with a new element node whose QName is the value specified in the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">wrapper</span></tt><span class="deltaxml-old" style="background:#FF5555"> option. The content of that new element is a copy of the original, matching node. The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:wrap</span></tt><span class="deltaxml-old" style="background:#FF5555"> step performs a "deep" wrapping, the children of the matching node and their descendants are processed and wrappers are added to all matching nodes. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">group-adjacent</span></tt><span class="deltaxml-old" style="background:#FF5555"> option can be used to group adjacent matching nodes in a single wrapper element. The specified XPath expression is evaluated for each matching node with that node as the XPath context node. Whenever two or more adjacent matching nodes have the same “group adjacent” value, they are wrapped together in a single wrapper element.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Two matching nodes are considered adjacent if and only if they are siblings and either there are no nodes between them or all intervening, non-matching nodes are whitespace text, comment, or processing instruction nodes.</span></p></div><div class="section"><h5><a name="c.wrap-sequence" id="c.wrap-sequence"></a><span class="deltaxml-old" style="background:#FF5555">7.1.29 p:wrap-sequence</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:wrap-sequence</span></tt><span class="deltaxml-old" style="background:#FF5555"> step accepts a sequence of documents and produces either a single document or a new sequence of documents.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:wrap-sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrapper</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrapper-prefix</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">NCName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrapper-namespace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                          </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">group-adjacent</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">wrapper</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">QName</span></tt><span class="deltaxml-old" style="background:#FF5555">. If the lexical value does not contain a colon, then the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">wrapper-namespace</span></tt><span class="deltaxml-old" style="background:#FF5555"> may be used to specify the namespace of the wrapper. In that case, the </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">wrapper-prefix</span></tt><span class="deltaxml-old" style="background:#FF5555"> may be specified to suggest a prefix for the wrapper element. </span><a name="err.inline.D0034.7"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0034"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0034</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to specify a new namespace or prefix if the lexical value of the specified name contains a colon.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">group-adjacent</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an XPathExpression.</span></p><p><span class="deltaxml-old" style="background:#FF5555">In its simplest form, </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:wrap-sequence</span></tt><span class="deltaxml-old" style="background:#FF5555"> takes a sequence of documents and produces a single, new document by placing each document in the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> sequence inside a new document element as sequential siblings. The name of the document element is the value specified in the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">wrapper</span></tt><span class="deltaxml-old" style="background:#FF5555"> option.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">group-adjacent</span></tt><span class="deltaxml-old" style="background:#FF5555"> option can be used to group adjacent documents. The </span><a href="#xpath-context"><span class="deltaxml-old" style="background:#FF5555">XPath context</span></a><span class="deltaxml-old" style="background:#FF5555"> for the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">group-adjacent</span></tt><span class="deltaxml-old" style="background:#FF5555"> option changes over time. For each document that appears on the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port, the expression is evaluated with that document as the context document. The context position (</span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">position()</span></tt><span class="deltaxml-old" style="background:#FF5555">) is the position of that document within the sequence and the context size (</span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">last()</span></tt><span class="deltaxml-old" style="background:#FF5555">) is the total number of documents in the sequence. Whenever two or more sequentially adjacent documents have the same “group adjacent” value, they are wrapped together in a single wrapper element. </span></p></div><div class="section"><h5><a name="c.xinclude" id="c.xinclude"></a><span class="deltaxml-old" style="background:#FF5555">7.1.30 p:xinclude</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xinclude</span></tt><span class="deltaxml-old" style="background:#FF5555"> step applies [</span><a href="#xinclude"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XInclude</span></span></a><span class="deltaxml-old" style="background:#FF5555">] processing to the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> document.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:xinclude</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">fixup-xml-base</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">            </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">fixup-xml-lang</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">            </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">fixup-xml-base</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a boolean. If it is true, base URI fixup will be performed as per [</span><a href="#xinclude"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XInclude</span></span></a><span class="deltaxml-old" style="background:#FF5555">].</span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">fixup-xml-lang</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a boolean. If it is true, language fixup will be performed as per [</span><a href="#xinclude"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XInclude</span></span></a><span class="deltaxml-old" style="background:#FF5555">].</span></p><p><span class="deltaxml-old" style="background:#FF5555">The included documents are located with the base URI of the input document and are not provided as input to the step.</span></p><p><a name="err.inline.C0029"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0029"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0029</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if an XInclude error occurs during processing. </span></p></div><div class="section"><h5><a name="c.xslt" id="c.xslt"></a><span class="deltaxml-old" style="background:#FF5555">7.1.31 p:xslt</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xslt</span></tt><span class="deltaxml-old" style="background:#FF5555"> step applies an [</span><a href="#xslt10"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XSLT 1.0</span></span></a><span class="deltaxml-old" style="background:#FF5555">] or [</span><a href="#xslt20"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XSLT 2.0</span></span></a><span class="deltaxml-old" style="background:#FF5555">] stylesheet to a document.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:xslt</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">stylesheet</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr kind-attr"><span class="deltaxml-old" style="background:#FF5555">kind</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value kind-value"><span class="deltaxml-old" style="background:#FF5555">parameter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">secondary</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">initial-mode</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                               </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">template-name</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                              </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">output-base-uri</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                            </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">version</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">If present, the value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">initial-mode</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">QName</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If present, the value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">template-name</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">QName</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If present, the value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">output-base-uri</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></tt><span class="deltaxml-old" style="background:#FF5555">. If it is relative, it is made absolute against the base URI of the element on which it is specified (</span><a href="#p.with-option"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xslt</span></tt><span class="deltaxml-old" style="background:#FF5555"> in the case of a </span><a href="#option-shortcut"><span class="deltaxml-old" style="background:#FF5555">syntactic shortcut</span></a><span class="deltaxml-old" style="background:#FF5555"> value).</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the step specifies a </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">version</span></tt><span class="deltaxml-old" style="background:#FF5555">, then that version of XSLT </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be used to process the transformation. </span><a name="err.inline.C0038"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0038"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0038</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the specified version of XSLT is not available. If the step does not specify a version, the implementation may use any version it has available and may use any means to determine what version to use, including, but not limited to, examining the version of the stylesheet.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The XSLT stylesheet provided on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">stylesheet</span></tt><span class="deltaxml-old" style="background:#FF5555"> port is applied to the document on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port. Any parameters passed on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">parameters</span></tt><span class="deltaxml-old" style="background:#FF5555"> port are used to define top-level stylesheet parameters. The primary result document of the transformation appears on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555"> port. All other result documents appear on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">secondary</span></tt><span class="deltaxml-old" style="background:#FF5555"> port. If XSLT 1.0 is used, an empty sequence of documents </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> appear on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">secondary</span></tt><span class="deltaxml-old" style="background:#FF5555"> port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If a sequence of documents is provided on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port, the first document is used as the primary input document. The whole sequence is also the default collection. If no documents are provided on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port, the primary input document is undefined and the default collection is empty. </span><a name="err.inline.C0039"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0039"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0039</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if a sequence of documents (including an empty sequence) is provided to an XSLT 1.0 step. </span></p><p><span class="deltaxml-old" style="background:#FF5555">A dynamic error occurs if the XSLT processor signals a fatal error. This includes the case where the transformation terminates due to a </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">xsl:message</span></tt><span class="deltaxml-old" style="background:#FF5555"> instruction with a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">terminate</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute value of “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">yes</span></tt><span class="deltaxml-old" style="background:#FF5555">”. </span><a name="impl-49"></a><span class="deltaxml-old" style="background:#FF5555">How XSLT message termination errors are reported to the XProc processor is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The invocation of the transformation is controlled by the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">initial-mode</span></tt><span class="deltaxml-old" style="background:#FF5555"> and </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">template-name</span></tt><span class="deltaxml-old" style="background:#FF5555"> options that set the initial mode and/or named template in the XSLT transformation where processing begins. </span><a name="err.inline.C0056"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0056"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0056</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the specified initial mode or named template cannot be applied to the specified stylesheet. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">output-base-uri</span></tt><span class="deltaxml-old" style="background:#FF5555"> option sets the context's output base URI per the XSLT 2.0 specification, otherwise the base URI of the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555"> document is the base URI of the first document in the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port's sequence. If the value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">output-base-uri</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is not absolute, it will be resolved using the base URI of its </span><a href="#p.option"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:option</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element. An XSLT 1.0 step </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> use the value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">output-base-uri</span></tt><span class="deltaxml-old" style="background:#FF5555"> as the base URI of its output, if the option is specified.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If XSLT 2.0 is used, the outputs of this step </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> include PSVI annotations.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The static and initial dynamic contexts of the XSLT processor are the contexts defined in </span><a href="#step-xpath-context-20" title="Step XPath Context"><span class="deltaxml-old" style="background:#FF5555">Section 2.6.2, “Step XPath Context”</span></a><span class="deltaxml-old" style="background:#FF5555"> with the following adjustments.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The dynamic context is augmented as follows:</span></p><div class="variablelist"><dl><dt><span class="deltaxml-old" style="background:#FF5555">Context item</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The first document that appears on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Variable values</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Any parameters passed on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">parameters</span></tt><span class="deltaxml-old" style="background:#FF5555"> port are available as variable bindings to the XSLT processor.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Function implementations</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The function implementations provided by the XSLT processor.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Default collection</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The sequence of documents provided on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port. </span></p></dd></dl></div></div></div><div class="section"><h4><a name="std-optional" id="std-optional"></a><span class="deltaxml-old" style="background:#FF5555">7.2 Optional Steps</span></h4><p><span class="deltaxml-old" style="background:#FF5555">The following steps are optional. If they are supported by a processor, they must conform to the semantics outlined here, but a conformant processor is not required to support all (or any) of these steps.</span></p><div class="section"><h5><a name="c.exec" id="c.exec"></a><span class="deltaxml-old" style="background:#FF5555">7.2.1 p:exec</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:exec</span></tt><span class="deltaxml-old" style="background:#FF5555"> step runs an external command passing the input that arrives on its </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port as standard input, reading </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555"> from standard output, and </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">errors</span></tt><span class="deltaxml-old" style="background:#FF5555"> from standard error.</span></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:exec</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">errors</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">exit-status</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">command</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">args</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">''</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                           </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">cwd</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                        </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">source-is-xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">              </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">result-is-xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">              </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrap-result-lines</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">errors-is-xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrap-error-lines</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">          </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">path-separator</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">failure-threshold</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                          </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">integer</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">arg-separator</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">' '</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                 </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">byte-order-mark</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                            </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">cdata-section-elements</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">''</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">ListOfQNames</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">doctype-public</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">doctype-system</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">encoding</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                   </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">escape-uri-attributes</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">include-content-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">indent</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">media-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                 </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">method</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'xml'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">normalization-form</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'none'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">NormalizationForm</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">omit-xml-declaration</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">standalone</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'omit'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                 </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">"true" | "false" | "omit"</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">undeclare-prefixes</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">version</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'1.0'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                     </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The values of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">command</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">args</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">cwd</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">path-separator</span></tt><span class="deltaxml-old" style="background:#FF5555">, and </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">arg-separator</span></tt><span class="deltaxml-old" style="background:#FF5555"> options </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be strings.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The values of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">source-is-xml</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">result-is-xml</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">errors-is-xml</span></tt><span class="deltaxml-old" style="background:#FF5555">, and </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">fix-slashes</span></tt><span class="deltaxml-old" style="background:#FF5555"> options </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be boolean.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:exec</span></tt><span class="deltaxml-old" style="background:#FF5555"> step executes the command passed on </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">command</span></tt><span class="deltaxml-old" style="background:#FF5555"> with the arguments passed on </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">args</span></tt><span class="deltaxml-old" style="background:#FF5555">. The processor does not interpolate the values of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">command</span></tt><span class="deltaxml-old" style="background:#FF5555"> or </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">args</span></tt><span class="deltaxml-old" style="background:#FF5555"> (for example, expanding references to environment variables). </span><a name="err.inline.C0033"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0033"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0033</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the command cannot be run. </span></p><p><span class="deltaxml-old" style="background:#FF5555">If </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">cwd</span></tt><span class="deltaxml-old" style="background:#FF5555"> is specified, then the current working directory is changed to the value of that option before execution begins. </span><a name="err.inline.C0034"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0034"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0034</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the current working directory cannot be changed to the value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">cwd</span></tt><span class="deltaxml-old" style="background:#FF5555"> option. </span><a name="impl-50"></a><span class="deltaxml-old" style="background:#FF5555">If </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">cwd</span></tt><span class="deltaxml-old" style="background:#FF5555"> is not specified, the current working directory is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">path-separator</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is specified, every occurrence of the character identified as the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">path-separator</span></tt><span class="deltaxml-old" style="background:#FF5555"> character that occurs in the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">command</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">args</span></tt><span class="deltaxml-old" style="background:#FF5555">, or </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">cwd</span></tt><span class="deltaxml-old" style="background:#FF5555"> will be replaced by the platform-specific path separator character. </span><a name="err.inline.C0063"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0063"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0063</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">path-separator</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is specified and is not exactly one character long. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">args</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is a string. In order to support passing more than one argument to a command, the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">args</span></tt><span class="deltaxml-old" style="background:#FF5555"> string is broken into a sequence of values. The </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">arg-separator</span></tt><span class="deltaxml-old" style="background:#FF5555"> option specifies the character that is used to separate values; by default it is a single space </span><a name="err.inline.C0066"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0066"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0066</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">arg-separator</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is specified and is not exactly one character long. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The following examples of </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:exec</span></tt><span class="deltaxml-old" style="background:#FF5555"> are equivalent. The first uses the default </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">arg-separator</span></tt><span class="deltaxml-old" style="background:#FF5555">:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:exec command="someCommand" args="arg1 arg2 arg3"/&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">The second specifies an alternate separator:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:exec command="someCommand" args="arg1,arg2,arg3" arg-separator=","/&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">If one of the arguments contains a space (e.g., a filename that contains a space), then you must specify an alternate separator.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port is declared to accept a sequence so that it can be empty. If no document appears on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port, then the command receives nothing on standard input. If a document does arrive on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port, it will be passed to the command as its standard input. </span><a name="err.inline.D0006.1"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.D0006"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0006</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if more than one document appears on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:exec</span></tt><span class="deltaxml-old" style="background:#FF5555"> step. If </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">source-is-xml</span></tt><span class="deltaxml-old" style="background:#FF5555"> is true, the serialization options are used to convert the input into serialized XML which is passed to the command, otherwise the XPath string-value of the document is passed.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The standard output of the command is read and returned on </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555">; the standard error output is read and returned on </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">errors</span></tt><span class="deltaxml-old" style="background:#FF5555">. In order to assure that the result will be an XML document, each of the results will be wrapped in a </span><a href="#cv.result"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:result</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">result-is-xml</span></tt><span class="deltaxml-old" style="background:#FF5555"> is true, the standard output of the program is assumed to be XML and will be parsed as a single document. If it is false, the output is assumed </span><em><span class="deltaxml-old" style="background:#FF5555">not</span></em><span class="deltaxml-old" style="background:#FF5555"> to be XML and will be returned as escaped text.</span></p><p id="cv.line"><span class="deltaxml-old" style="background:#FF5555">If </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">wrap-result-lines</span></tt><span class="deltaxml-old" style="background:#FF5555"> is true, a </span><a href="#cv.line"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:line</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element will be wrapped around each line of output.</span></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:line&gt;</span><span class="deltaxml-old" style="background:#FF5555">    </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&lt;/c:line&gt;</span></code></p><p><a name="err.inline.C0035"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0035"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0035</span></code></a><span class="deltaxml-old" style="background:#FF5555">) to specify both </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">result-is-xml</span></tt><span class="deltaxml-old" style="background:#FF5555"> and </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">wrap-result-lines</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The same rules apply to the standard error output of the program, with the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">errors-is-xml</span></tt><span class="deltaxml-old" style="background:#FF5555"> and </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">wrap-error-lines</span></tt><span class="deltaxml-old" style="background:#FF5555"> options, respectively.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If either of the results are XML, they </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be parsed with namespaces enabled and validation turned off, just like </span><a href="#p.document"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:document</span></tt></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">exit-status</span></tt><span class="deltaxml-old" style="background:#FF5555"> port always returns a single </span><a href="#cv.result"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:result</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element which contains the system exit status that the process returned. </span><a name="impl-51"></a><span class="deltaxml-old" style="background:#FF5555">The specific exit status values returned by a process invoked with </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:exec</span></tt><span class="deltaxml-old" style="background:#FF5555"> are </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If a </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">failure-threshold</span></tt><span class="deltaxml-old" style="background:#FF5555"> value is supplied, and the exit status is greater than that threshold, then the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:exec</span></tt><span class="deltaxml-old" style="background:#FF5555"> step </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> fail. </span><a name="err.inline.C0064"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0064"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0064</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the exit code from the command is greater than the specified </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">failure-threshold</span></tt><span class="deltaxml-old" style="background:#FF5555"> value. This failure, like any step failure, can be captured with a </span><a href="#p.try"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></tt></a><span class="deltaxml-old" style="background:#FF5555">.</span></p></div><div class="section"><h5><a name="c.hash" id="c.hash"></a><span class="deltaxml-old" style="background:#FF5555">7.2.2 p:hash</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:hash</span></tt><span class="deltaxml-old" style="background:#FF5555"> step generates a hash, or digital “fingerprint”, for some value and injects it into the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> document.</span></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:hash</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr kind-attr"><span class="deltaxml-old" style="background:#FF5555">kind</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value kind-value"><span class="deltaxml-old" style="background:#FF5555">parameter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">value</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">algorithm</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                  </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">version</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">algorithm</span></tt><span class="deltaxml-old" style="background:#FF5555"> option must be a QName. If it does not have a prefix, then it must be one of the following values: “crc”, “md”, or “sha”.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">version</span></tt><span class="deltaxml-old" style="background:#FF5555"> is not specified, the default version is algorithm-defined. For “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">crc</span></tt><span class="deltaxml-old" style="background:#FF5555">” it is 32, for “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">md</span></tt><span class="deltaxml-old" style="background:#FF5555">” it is 5, for “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">sha</span></tt><span class="deltaxml-old" style="background:#FF5555">” it is 1.</span></p><p><span class="deltaxml-old" style="background:#FF5555">A hash is constructed from the string specified in the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">value</span></tt><span class="deltaxml-old" style="background:#FF5555"> option using the specified algorithm and version. Implementations </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> support [</span><a href="#bib.crc"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">CRC32</span></span></a><span class="deltaxml-old" style="background:#FF5555">], [</span><a href="#rfc1321"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">MD5</span></span></a><span class="deltaxml-old" style="background:#FF5555">], and [</span><a href="#bib.sha"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">SHA1</span></span></a><span class="deltaxml-old" style="background:#FF5555">] hashes. </span><a name="impl-52"></a><span class="deltaxml-old" style="background:#FF5555">It is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555"> what other algorithms are supported. The resulting hash </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> be returned as a string of hexadecimal characters. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option must be an XSLTMatchPattern.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The hash of the specified value is computed using the algorithm and parameters specified. </span><a name="err.inline.C0036"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0036"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0036</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the requested hash algorithm is not one that the processor understands or if the value or parameters are not appropriate for that algorithm.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The matched nodes are specified with the match pattern in the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option. For each matching node, the string value of the computed hash is used in the output (if more than one node matches, the </span><em><span class="deltaxml-old" style="background:#FF5555">same</span></em><span class="deltaxml-old" style="background:#FF5555"> hash value is used in each match). Nodes that do not match are copied without change.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the expression given in the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option matches an </span><em><span class="deltaxml-old" style="background:#FF5555">attribute</span></em><span class="deltaxml-old" style="background:#FF5555">, the hash is used as the new value of the attribute in the output. If the attribute is named “</span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">xml:base</span></tt><span class="deltaxml-old" style="background:#FF5555">”, the base URI of the element </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> also be amended accordingly.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the expression matches any other kind of node, the entire node (and </span><em><span class="deltaxml-old" style="background:#FF5555">not</span></em><span class="deltaxml-old" style="background:#FF5555"> just its contents) is replaced by the hash.</span></p></div><div class="section"><h5><a name="c.uuid" id="c.uuid"></a><span class="deltaxml-old" style="background:#FF5555">7.2.3 p:uuid</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:uuid</span></tt><span class="deltaxml-old" style="background:#FF5555"> step generates a [</span><a href="#bib.uuid"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">UUID</span></span></a><span class="deltaxml-old" style="background:#FF5555">] and injects it into the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> document.</span></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:uuid</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">version</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">integer</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option must be an XSLTMatchPattern. The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">version</span></tt><span class="deltaxml-old" style="background:#FF5555"> option must be an integer.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">version</span></tt><span class="deltaxml-old" style="background:#FF5555"> is specified, that version of UUID must be computed. </span><a name="err.inline.C0060"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0060"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0060</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the processor does not support the specified </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">version</span></tt><span class="deltaxml-old" style="background:#FF5555"> of the UUID algorithm. </span><a name="impl-53"></a><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">version</span></tt><span class="deltaxml-old" style="background:#FF5555"> is not specified, the version of UUID computed is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Implementations </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> support version 4 UUIDs. </span><a name="impl-54"></a><span class="deltaxml-old" style="background:#FF5555">Support for other versions of UUID, and the mechanism by which the necessary inputs are made available for computing other versions, is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The matched nodes are specified with the match pattern in the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option. For each matching node, the generated UUID is used in the output (if more than one node matches, the </span><em><span class="deltaxml-old" style="background:#FF5555">same</span></em><span class="deltaxml-old" style="background:#FF5555"> UUID is used in each match). Nodes that do not match are copied without change.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the expression given in the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option matches an </span><em><span class="deltaxml-old" style="background:#FF5555">attribute</span></em><span class="deltaxml-old" style="background:#FF5555">, the UUID is used as the new value of the attribute in the output. If the attribute is named “</span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">xml:base</span></tt><span class="deltaxml-old" style="background:#FF5555">”, the base URI of the element </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> also be amended accordingly.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the expression matches any other kind of node, the entire node (and </span><em><span class="deltaxml-old" style="background:#FF5555">not</span></em><span class="deltaxml-old" style="background:#FF5555"> just its contents) is replaced by the UUID.</span></p></div><div class="section"><h5><a name="c.validate-with-relax-ng" id="c.validate-with-relax-ng"></a><span class="deltaxml-old" style="background:#FF5555">7.2.4 p:validate-with-relax-ng</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-relax-ng</span></tt><span class="deltaxml-old" style="background:#FF5555"> step applies [</span><a href="#iso19757-2"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RELAX NG</span></span></a><span class="deltaxml-old" style="background:#FF5555">] validation to the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> document.</span></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-relax-ng</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">schema</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">dtd-attribute-values</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">dtd-id-idref-warnings</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">               </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The values of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">dtd-attribute-values</span></tt><span class="deltaxml-old" style="background:#FF5555"> and </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">dtd-id-idref-warnings</span></tt><span class="deltaxml-old" style="background:#FF5555"> options </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be booleans.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the root element of the schema is </span><a href="#p.data"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:data</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or has a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">c:content-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute that specifies a text content type or a media type that the implementation recognizes, then the step </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> treat the text node descendants of the element as a [</span><a href="#relaxng-compact-syntax"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RELAX NG Compact Syntax</span></span></a><span class="deltaxml-old" style="background:#FF5555">] document for validation.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">dtd-attribute-values</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555">, then the attribute value defaulting conventions of [</span><a href="#relaxng-dtd-compat"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RELAX NG DTD Compatibility</span></span></a><span class="deltaxml-old" style="background:#FF5555">] are also applied.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">dtd-id-idref-warnings</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555">, then the validator </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> treat a schema that is incompatible with the ID/IDREF/IDREFs feature of [</span><a href="#relaxng-dtd-compat"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RELAX NG DTD Compatibility</span></span></a><span class="deltaxml-old" style="background:#FF5555">] as if the document was invalid. </span></p><p><a name="err.inline.C0053"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0053"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0053</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555"> and the input document is not valid.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The output from this step is a copy of the input, possibly augmented by application of the [</span><a href="#relaxng-dtd-compat"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RELAX NG DTD Compatibility</span></span></a><span class="deltaxml-old" style="background:#FF5555">]. The output of this step </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> include PSVI annotations.</span></p><p><a name="impl-55"></a><span class="deltaxml-old" style="background:#FF5555">Support for [</span><a href="#relaxng-dtd-compat"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RELAX NG DTD Compatibility</span></span></a><span class="deltaxml-old" style="background:#FF5555">] is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></div><div class="section"><h5><a name="c.validate-with-schematron" id="c.validate-with-schematron"></a><span class="deltaxml-old" style="background:#FF5555">7.2.5 p:validate-with-schematron</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-schematron</span></tt><span class="deltaxml-old" style="background:#FF5555"> step applies [</span><a href="#iso19757-3"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Schematron</span></span></a><span class="deltaxml-old" style="background:#FF5555">] processing to the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> document.</span></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-schematron</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr kind-attr"><span class="deltaxml-old" style="background:#FF5555">kind</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value kind-value"><span class="deltaxml-old" style="background:#FF5555">parameter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">schema</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">report</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">phase</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'#ALL'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">               </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><a name="err.inline.C0054"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0054"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0054</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555"> and any Schematron assertions fail.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">phase</span></tt><span class="deltaxml-old" style="background:#FF5555"> option identifies the Schematron validation phase with which validation begins.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">parameters</span></tt><span class="deltaxml-old" style="background:#FF5555"> port provides name/value pairs which correspond to Schematron external variables.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555"> output from this step is a copy of the input.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Schematron assertions and reports, if any, </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> appear on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">report</span></tt><span class="deltaxml-old" style="background:#FF5555"> port. The output </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> be in </span><em class="citetitle"><span class="deltaxml-old" style="background:#FF5555">Schematron Validation Report Language</span></em><span class="deltaxml-old" style="background:#FF5555"> (SVRL).</span></p><p><span class="deltaxml-old" style="background:#FF5555">The output of this step </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> include PSVI annotations.</span></p></div><div class="section"><h5><a name="c.validate-with-xml-schema" id="c.validate-with-xml-schema"></a><span class="deltaxml-old" style="background:#FF5555">7.2.6 p:validate-with-xml-schema</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-xml-schema</span></tt><span class="deltaxml-old" style="background:#FF5555"> step applies [</span><a href="#xmlschema-1"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">W3C XML Schema: Part 1</span></span></a><span class="deltaxml-old" style="background:#FF5555">] validity assessment to the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> input.</span></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-xml-schema</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">schema</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">use-location-hints</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">        </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">try-namespaces</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">            </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">               </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">mode</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'strict'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                     </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">"strict" | "lax"</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The values of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">use-location-hints</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">try-namespaces</span></tt><span class="deltaxml-old" style="background:#FF5555">, and </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></tt><span class="deltaxml-old" style="background:#FF5555"> options </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be boolean.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">mode</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an NMTOKEN whose value is either “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">strict</span></tt><span class="deltaxml-old" style="background:#FF5555">” or “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">lax</span></tt><span class="deltaxml-old" style="background:#FF5555">”.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Validation is performed against the set of schemas represented by the documents on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">schema</span></tt><span class="deltaxml-old" style="background:#FF5555"> port. These schemas must be used in preference to any schema locations provided by schema location hints encountered during schema validation, that is, schema locations supplied for </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">xs:import</span></tt><span class="deltaxml-old" style="background:#FF5555"> or </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">xsi:schema-location</span></tt><span class="deltaxml-old" style="background:#FF5555">, or determined by schema-processor-defined namespace-based strategies, for the namespaces covered by the documents available on the schemas port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">xs:include</span></tt><span class="deltaxml-old" style="background:#FF5555"> elements occur within the supplied schema documents, they are treated like any other </span><a href="#external-docs"><span class="deltaxml-old" style="background:#FF5555">external documents</span></a><span class="deltaxml-old" style="background:#FF5555">. </span><a name="impl-56"></a><span class="deltaxml-old" style="background:#FF5555">It is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555"> if the documents supplied on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">schemas</span></tt><span class="deltaxml-old" style="background:#FF5555"> port are considered when resolving </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">xs:include</span></tt><span class="deltaxml-old" style="background:#FF5555"> elements in the schema documents provided. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">use-location-hints</span></tt><span class="deltaxml-old" style="background:#FF5555"> and </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">try-namespaces</span></tt><span class="deltaxml-old" style="background:#FF5555"> options allow the pipeline author to control how the schema processor should attempt to locate schema documents necessary but not provided on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">schema</span></tt><span class="deltaxml-old" style="background:#FF5555"> port. Any schema documents provided on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">schema</span></tt><span class="deltaxml-old" style="background:#FF5555"> port </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be used in preference to schema documents located by other means.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">use-location-hints</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555">”, the processor </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> make use of schema location hints to locate schema documents. If the option is “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">false</span></tt><span class="deltaxml-old" style="background:#FF5555">”, the processor </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> ignore any such hints.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">try-namespaces</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555">”, the processor </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> attempt to dereference the namespace URI to locate schema documents. If the option is “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">false</span></tt><span class="deltaxml-old" style="background:#FF5555">”, the processor </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should not</span></span><span class="deltaxml-old" style="background:#FF5555"> dereference namespace URIs.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">mode</span></tt><span class="deltaxml-old" style="background:#FF5555"> option allow the pipeline author to control how schema validation begins. The “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">strict</span></tt><span class="deltaxml-old" style="background:#FF5555">” mode means that the document element must be declared and schema-valid, otherwise it will be treated as invalid. The “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">lax</span></tt><span class="deltaxml-old" style="background:#FF5555">” mode means that the absence of a declaration for the document element does not itself count as an unsuccessful outcome of validation.</span></p><p><a name="err.inline.C0053.1"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0053"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0053</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555"> and the input document is not valid. If the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">false</span></tt><span class="deltaxml-old" style="background:#FF5555">, it is not an error for the document to be invalid. In this case, if the implementation does not support the PSVI, </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-xml-schema</span></tt><span class="deltaxml-old" style="background:#FF5555"> is essentially just an “identity” step, but if the implementation </span><em><span class="deltaxml-old" style="background:#FF5555">does</span></em><span class="deltaxml-old" style="background:#FF5555"> support the PSVI, then the resulting document will have additional type information (at least for the subtrees that are valid).</span></p><p><span class="deltaxml-old" style="background:#FF5555">When XML Schema validation assessment is performed, the processor is invoked in the mode specified by the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">mode</span></tt><span class="deltaxml-old" style="background:#FF5555"> option. </span><a name="err.inline.C0055"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0055"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0055</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the implementation does not support the specified mode. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555"> of the assessment is a document with the Post-Schema-Validation-Infoset (PSVI) ([</span><a href="#xmlschema-1"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">W3C XML Schema: Part 1</span></span></a><span class="deltaxml-old" style="background:#FF5555">]) annotations, if the pipeline implementation supports such annotations. If not, the input document is reproduced with any defaulting of attributes and elements performed as specified by the XML Schema recommendation.</span></p></div><div class="section"><h5><a name="c.www-form-urldecode" id="c.www-form-urldecode"></a><span class="deltaxml-old" style="background:#FF5555">7.2.7 p:www-form-urldecode</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:www-form-urldecode</span></tt><span class="deltaxml-old" style="background:#FF5555"> step decodes a </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">x-www-form-urlencoded</span></tt><span class="deltaxml-old" style="background:#FF5555"> string into a set of parameters.</span></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:www-form-urldecode</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">value</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">value</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is interpreted as a string of parameter values encoded using the </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">x-www-form-urlencoded</span></tt><span class="deltaxml-old" style="background:#FF5555"> algorithm. It turns each such encoded name/value pair into a parameter. The entire set of parameters is written (as a </span><a href="#cv.param-set"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param-set</span></tt></a><span class="deltaxml-old" style="background:#FF5555">) on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></tt><span class="deltaxml-old" style="background:#FF5555"> output port.</span></p><p><a name="err.inline.C0037"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0037"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0037</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">value</span></tt><span class="deltaxml-old" style="background:#FF5555"> provided is not a properly </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">x-www-form-urlencoded</span></tt><span class="deltaxml-old" style="background:#FF5555"> value. </span><a name="err.inline.C0061"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0061"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0061</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the name of any encoded parameter name is not a valid </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">xs:NCName</span></tt><span class="deltaxml-old" style="background:#FF5555">. In other words, this step can only decode simple name/value pairs where the names do not contain colons or any characters that cannot be used in XML names. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The order of the </span><a href="#cv.param"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> elements in the result is the same as the order of the encoded parameters, reading from left to right.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If any parameter name occurs more than once in the encoded string, the resulting parameter set will contain a </span><a href="#cv.param"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:param</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> for each instance. However, only one of these will actually be used if the parameter set is passed to another step on its </span><em class="glossterm"><a href="#dt-parameter-input-port"><span class="deltaxml-old" style="background:#FF5555">parameter input port</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></div><div class="section"><h5><a name="c.www-form-urlencode" id="c.www-form-urlencode"></a><span class="deltaxml-old" style="background:#FF5555">7.2.8 p:www-form-urlencode</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:www-form-urlencode</span></tt><span class="deltaxml-old" style="background:#FF5555"> step encodes a set of parameter values as a </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">x-www-form-urlencoded</span></tt><span class="deltaxml-old" style="background:#FF5555"> string and injects it into the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> document.</span></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:www-form-urlencode</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr kind-attr"><span class="deltaxml-old" style="background:#FF5555">kind</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value kind-value"><span class="deltaxml-old" style="background:#FF5555">parameter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option must be an XSLTMatchPattern.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The set of parameters is encoded as a single </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">x-www-form-urlencoded</span></tt><span class="deltaxml-old" style="background:#FF5555"> string of name/value pairs. When parameters are encoded into name/value pairs, </span><em><span class="deltaxml-old" style="background:#FF5555">only</span></em><span class="deltaxml-old" style="background:#FF5555"> the local name of each parameter is used. The namespace name is ignored and no prefix or colon appears in the name. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The parameters are encoded in document order. That is, the first parameter appears first in the resulting string, the second parameter second, etc. reading from left to right.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The matched nodes are specified with the match pattern in the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option. For each matching node, the encoded string is used in the output. Nodes that do not match are copied without change.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the expression given in the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">match</span></tt><span class="deltaxml-old" style="background:#FF5555"> option matches an </span><em><span class="deltaxml-old" style="background:#FF5555">attribute</span></em><span class="deltaxml-old" style="background:#FF5555">, the encoded string is used as the new value of the attribute in the output. If the expression matches any other kind of node, the entire node (and </span><em><span class="deltaxml-old" style="background:#FF5555">not</span></em><span class="deltaxml-old" style="background:#FF5555"> just its contents) is replaced by the encoded string.</span></p></div><div class="section"><h5><a name="c.xquery" id="c.xquery"></a><span class="deltaxml-old" style="background:#FF5555">7.2.9 p:xquery</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xquery</span></tt><span class="deltaxml-old" style="background:#FF5555"> step applies an [</span><a href="#xquery10"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XQuery 1.0</span></span></a><span class="deltaxml-old" style="background:#FF5555">] query to the sequence of documents provided on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port.</span></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:xquery</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">query</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr kind-attr"><span class="deltaxml-old" style="background:#FF5555">kind</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value kind-value"><span class="deltaxml-old" style="background:#FF5555">parameter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">If a sequence of documents is provided on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port, the first document is used as the initial context item. The whole sequence is also the default collection. If no documents are provided on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port, the initial context item is undefined and the default collection is empty.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">query</span></tt><span class="deltaxml-old" style="background:#FF5555"> port must receive a single document:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">If the document root element is </span><a href="#cv.query"><tt class="tag-element" id="cv.query"><span class="deltaxml-old" style="background:#FF5555">c:query</span></tt></a><span class="deltaxml-old" style="background:#FF5555">, the text descendants of this element are considered the query.</span></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:query&gt;</span><span class="deltaxml-old" style="background:#FF5555">    </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&lt;/c:query&gt;</span></code></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">If the document root element is in the XQueryX namespace, the document is treated as an XQueryX-encoded query. </span><a name="impl-57"></a><span class="deltaxml-old" style="background:#FF5555">Support for XQueryX is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">If the document root element is </span><a href="#p.data"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:data</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> and either does not have a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">content-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute or has a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">content-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute that specifies a text content type or a media type that the implementation recognizes, then the text descendants of this element are considered the query.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">If the document root element is not </span><a href="#p.data"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:data</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> but has a </span><tt class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">c:content-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> attribute that specifies a text content type or a media type that the implementation recognizes, then the text descendants of this element are considered the query.</span></p></li><li><p><a name="impl-58"></a><span class="deltaxml-old" style="background:#FF5555">Otherwise, the interpretation of the query is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p></li></ul></div><p><span class="deltaxml-old" style="background:#FF5555">The result of the </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xquery</span></tt><span class="deltaxml-old" style="background:#FF5555"> step must be a sequence of documents. </span><a name="err.inline.C0057"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0057"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0057</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the sequence that results from evaluating the XQuery contains items other than documents and elements. Any elements that appear in the result sequence will be treated as documents with the element as their document element.</span></p><p><span class="deltaxml-old" style="background:#FF5555">For example:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555"> &lt;c:query&gt; declare namespace atom="http://www.w3.org/2005/Atom"; /atom:feed/atom:entry &lt;/c:query&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">The output of this step </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> include PSVI annotations.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The static context of the XQuery processor is augmented in the following way:</span></p><div class="variablelist"><dl><dt><span class="deltaxml-old" style="background:#FF5555">Statically known default collection type</span></dt><dd><p><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">document()*</span></tt></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Statically known namespaces:</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Unchanged from the implementation defaults. No namespace declarations in the XProc pipeline are automatically exposed in the static context. </span></p></dd></dl></div><p><span class="deltaxml-old" style="background:#FF5555">The dynamic context of the XQuery processor is augmented in the following way:</span></p><div class="variablelist"><dl><dt><span class="deltaxml-old" style="background:#FF5555">Context item</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The first document that appears on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Context position</span></dt><dd><p><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">1</span></tt></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Context size</span></dt><dd><p><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">1</span></tt></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Variable values</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Any parameters passed on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">parameters</span></tt><span class="deltaxml-old" style="background:#FF5555"> port augment any implementation-defined variable bindings known to the XQuery processor. The parameter values are passed to the XQuery processor as values of type </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">xs:untypedAtomic</span></tt><span class="deltaxml-old" style="background:#FF5555">. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Function implementations</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The function implementations provided by the XQuery processor.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Current dateTime</span></dt><dd><p><a name="impl-59"></a><span class="deltaxml-old" style="background:#FF5555">The point in time returned as the current dateTime is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Implicit timezone</span></dt><dd><p><a name="impl-60"></a><span class="deltaxml-old" style="background:#FF5555">The implicit timezone is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Available documents</span></dt><dd><p><a name="impl-61"></a><span class="deltaxml-old" style="background:#FF5555">The set of available documents (those that may be retrieved with a URI) is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Available collections</span></dt><dd><p><a name="impl-62"></a><span class="deltaxml-old" style="background:#FF5555">The set of available collections is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Default collection</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The sequence of documents provided on the </span><tt class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></tt><span class="deltaxml-old" style="background:#FF5555"> port. </span></p></dd></dl></div><div class="section"><h6><a name="example-xquery" id="example-xquery"></a><span class="deltaxml-old" style="background:#FF5555">7.2.9.1 Example</span></h6><p><span class="deltaxml-old" style="background:#FF5555">The following pipeline applies XInclude processing and schema validation before using XQuery:</span></p><div class="example-wrapper" id="ex.c.xquery"><div class="title"><span class="deltaxml-old" style="background:#FF5555">Example 11. A Sample Pipeline Document</span></div><div class="example"><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:pipeline xmlns:p="http://www.w3.org/ns/xproc" version="1.0"&gt; &lt;p:xinclude/&gt; &lt;p:validate-with-xml-schema name="validate"&gt; &lt;p:input port="schema"&gt; &lt;p:document href="http://example.com/path/to/schema.xsd"/&gt; &lt;/p:input&gt; &lt;/p:validate-with-xml-schema&gt; &lt;p:xquery&gt; &lt;p:input port="query"&gt; &lt;p:data href="countp.xq" /&gt; &lt;/p:input&gt; &lt;/p:xquery&gt; &lt;/p:pipeline&gt; </span></pre></div></div></div><p><span class="deltaxml-old" style="background:#FF5555">Where </span><tt class="filename"><span class="deltaxml-old" style="background:#FF5555">countp.xq</span></tt><span class="deltaxml-old" style="background:#FF5555"> might contain:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;count&gt;{count(.//p)}&lt;/count&gt; </span></pre></div></div></div><div class="section"><h5><a name="c.xsl-formatter" id="c.xsl-formatter"></a><span class="deltaxml-old" style="background:#FF5555">7.2.10 p:xsl-formatter</span></h5><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xsl-formatter</span></tt><span class="deltaxml-old" style="background:#FF5555"> step receives an [</span><a href="#xsl11"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XSL 1.1</span></span></a><span class="deltaxml-old" style="background:#FF5555">] document and renders the content. The result of rendering is stored to the URI provided via the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">href</span></tt><span class="deltaxml-old" style="background:#FF5555"> option. A reference to that result is produced on the output port.</span></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:xsl-formatter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr kind-attr"><span class="deltaxml-old" style="background:#FF5555">kind</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value kind-value"><span class="deltaxml-old" style="background:#FF5555">parameter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">href</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">content-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                               </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">href</span></tt><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></tt><span class="deltaxml-old" style="background:#FF5555">. If it is relative, it is made absolute against the base URI of the element on which it is specified (</span><a href="#p.with-option"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> or </span><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xsl-formatter</span></tt><span class="deltaxml-old" style="background:#FF5555"> in the case of a </span><a href="#option-shortcut"><span class="deltaxml-old" style="background:#FF5555">syntactic shortcut</span></a><span class="deltaxml-old" style="background:#FF5555"> value).</span></p><p><span class="deltaxml-old" style="background:#FF5555">The content-type of the output is controlled by the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">content-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> option. This option specifies a media type as defined by [</span><a href="#media-types"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">IANA Media Types</span></span></a><span class="deltaxml-old" style="background:#FF5555">]. The option may include media type parameters as well (e.g. "application/someformat; charset=UTF-8"). </span><a name="impl-63"></a><span class="deltaxml-old" style="background:#FF5555">The use of media type parameters on the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">content-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><a name="impl-64"></a><span class="deltaxml-old" style="background:#FF5555">If the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">content-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> option is not specified, the output type is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">. The default </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> be PDF.</span></p><p><a name="impl-65"></a><span class="deltaxml-old" style="background:#FF5555">A formatter may take any number of optional rendering parameters via the step's parameters; such parameters are defined by the XSL implementation used and are </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The output of this step is a document containing a single </span><a href="#cv.result"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:result</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element whose content is the absolute URI of the document stored by the step.</span></p></div></div><div class="section"><h4><a name="serialization-options" id="serialization-options"></a><span class="deltaxml-old" style="background:#FF5555">7.3 Serialization Options</span></h4><p><span class="deltaxml-old" style="background:#FF5555">Several steps in this step library require serialization options to control the serialization of XML. These options are used to control serialization as in the [</span><a href="#xml-serialization"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Serialization</span></span></a><span class="deltaxml-old" style="background:#FF5555">] specification.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The following options may be present on steps that perform serialization:</span></p><div class="variablelist"><dl><dt><tt class="option"><span class="deltaxml-old" style="background:#FF5555">byte-order-mark</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The value of this option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a boolean. If it's not specified, the default varies by encoding: for UTF-16 it's true, for all others, it's false.</span></p></dd><dt><tt class="option"><span class="deltaxml-old" style="background:#FF5555">cdata-section-elements</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The value of this option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a list of </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">QName</span></tt><span class="deltaxml-old" style="background:#FF5555">s. They are interpreted as elements name.</span></p></dd><dt><tt class="option"><span class="deltaxml-old" style="background:#FF5555">doctype-public</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The value of this option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a string. The public identifier of the doctype.</span></p></dd><dt><tt class="option"><span class="deltaxml-old" style="background:#FF5555">doctype-system</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The value of this option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></tt><span class="deltaxml-old" style="background:#FF5555">. The system identifier of the doctype. It need not be absolute, and is not resolved.</span></p></dd><dt><tt class="option"><span class="deltaxml-old" style="background:#FF5555">encoding</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">A character set name. </span><a name="impl-66"></a><span class="deltaxml-old" style="background:#FF5555">If no </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">encoding</span></tt><span class="deltaxml-old" style="background:#FF5555"> is specified, the encoding used is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">. If the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">method</span></tt><span class="deltaxml-old" style="background:#FF5555"> is “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xml</span></tt><span class="deltaxml-old" style="background:#FF5555">” or “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xhtml</span></tt><span class="deltaxml-old" style="background:#FF5555">”, the implementation defined encoding </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be either UTF-8 or UTF-16.</span></p></dd><dt><tt class="option"><span class="deltaxml-old" style="background:#FF5555">escape-uri-attributes</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The value of this option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a boolean. It is ignored unless the specified method is “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xhtml</span></tt><span class="deltaxml-old" style="background:#FF5555">” or “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">html</span></tt><span class="deltaxml-old" style="background:#FF5555">”.</span></p></dd><dt><tt class="option"><span class="deltaxml-old" style="background:#FF5555">include-content-type</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The value of this option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a boolean. It is ignored unless the specified method is “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xhtml</span></tt><span class="deltaxml-old" style="background:#FF5555">” or “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">html</span></tt><span class="deltaxml-old" style="background:#FF5555">”.</span></p></dd><dt><tt class="option"><span class="deltaxml-old" style="background:#FF5555">indent</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The value of this option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a boolean.</span></p></dd><dt><tt class="option"><span class="deltaxml-old" style="background:#FF5555">media-type</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The value of this option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a string. It specifies the media type (MIME content type). If not specified, the default varies according to the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">method</span></tt><span class="deltaxml-old" style="background:#FF5555">:</span></p><div class="variablelist"><dl><dt><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xml</span></tt></dt><dd><p><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">application/xml</span></tt></p></dd><dt><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">html</span></tt></dt><dd><p><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">text/html</span></tt></p></dd><dt><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xhtml</span></tt></dt><dd><p><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">application/xhtml+xml</span></tt></p></dd><dt><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">text</span></tt></dt><dd><p><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">text/plain</span></tt></p></dd></dl></div><p><a name="impl-67"></a><span class="deltaxml-old" style="background:#FF5555">For methods other than </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xml</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">html</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">xhtml</span></tt><span class="deltaxml-old" style="background:#FF5555">, and </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">text</span></tt><span class="deltaxml-old" style="background:#FF5555">; the </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">media-type</span></tt><span class="deltaxml-old" style="background:#FF5555"> is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p></dd><dt><tt class="option"><span class="deltaxml-old" style="background:#FF5555">method</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The value of this option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">QName</span></tt><span class="deltaxml-old" style="background:#FF5555">. It specifies the serialization method.</span></p></dd><dt><tt class="option"><span class="deltaxml-old" style="background:#FF5555">normalization-form</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The value of this option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an NMTOKEN, one of the enumerated values </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">NFC</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">NFD</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">NFKC</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">NFKD</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">fully-normalized</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">none</span></tt><span class="deltaxml-old" style="background:#FF5555"> or an implementation-defined value.</span></p></dd><dt><tt class="option"><span class="deltaxml-old" style="background:#FF5555">omit-xml-declaration</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The value of this option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a boolean.</span></p></dd><dt><tt class="option"><span class="deltaxml-old" style="background:#FF5555">standalone</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The value of this option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an NMTOKEN, one of the enumerated values </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">true</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">false</span></tt><span class="deltaxml-old" style="background:#FF5555">, or </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">omit</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p></dd><dt><tt class="option"><span class="deltaxml-old" style="background:#FF5555">undeclare-prefixes</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The value of this option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a boolean.</span></p></dd><dt><tt class="option"><span class="deltaxml-old" style="background:#FF5555">version</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The value of this option </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a string.</span></p></dd></dl></div><p><span class="deltaxml-old" style="background:#FF5555">In order to be consistent with the rest of this specification, boolean values for the serialization parameters must use one of the XML Schema lexical forms for boolean: "true", "false", "1", or "0". This is different from the [</span><a href="#xml-serialization"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Serialization</span></span></a><span class="deltaxml-old" style="background:#FF5555">] specification which uses “yes” and “no”. No change in semantics is implied by this different spelling.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="option"><span class="deltaxml-old" style="background:#FF5555">method</span></tt><span class="deltaxml-old" style="background:#FF5555"> option controls the serialization method used by this component with standard values of 'html', 'xml', 'xhtml', and 'text' but only the 'xml' value is required to be supported. The interpretation of the remaining options is as specified in [</span><a href="#xml-serialization"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Serialization</span></span></a><span class="deltaxml-old" style="background:#FF5555">].</span></p><p><a name="impl-68"></a><span class="deltaxml-old" style="background:#FF5555">Implementations may support other method values but their results are </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p><p><span class="deltaxml-old" style="background:#FF5555">A minimally conforming implementation must support the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">xml</span></tt><span class="deltaxml-old" style="background:#FF5555"> output method with the following option values:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">version</span></tt><span class="deltaxml-old" style="background:#FF5555"> must support the value </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">1.0</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">encoding</span></tt><span class="deltaxml-old" style="background:#FF5555"> must support the values </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">UTF-8</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">omit-xml-declaration</span></tt><span class="deltaxml-old" style="background:#FF5555"> must be supported. If the value is not specified or has the value </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">no</span></tt><span class="deltaxml-old" style="background:#FF5555">, an XML declaration must be produced.</span></p></li></ul></div><p><span class="deltaxml-old" style="background:#FF5555">All other option values may be ignored for the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">xml</span></tt><span class="deltaxml-old" style="background:#FF5555"> output method.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If a processor chooses to implement an option for serialization, it must conform to the semantics defined in the [</span><a href="#xml-serialization"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Serialization</span></span></a><span class="deltaxml-old" style="background:#FF5555">] specification.</span></p><div class="admonition"><div class="admon-title"><span class="deltaxml-old" style="background:#FF5555">Note</span></div><p><span class="deltaxml-old" style="background:#FF5555">The use-character-maps parameter in [</span><a href="#xml-serialization"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Serialization</span></span></a><span class="deltaxml-old" style="background:#FF5555">] specification has not been provided in the standard serialization options provided by this specification.</span></p></div></div><h2 id="TableOfContents"><span class="deltaxml-new" style="background:#90EE90">Table of Contents</span></h2><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">1 </span><a href="#introduction"><span class="deltaxml-new" style="background:#90EE90">Introduction</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">2 </span><a href="#pipeline-concepts"><span class="deltaxml-new" style="background:#90EE90">Pipeline Concepts</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">2.1 </span><a href="#step-concept"><span class="deltaxml-new" style="background:#90EE90">Steps</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">2.1.1 </span><a href="#step-names"><span class="deltaxml-new" style="background:#90EE90">Step names</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">2.2 </span><a href="#input-output"><span class="deltaxml-new" style="background:#90EE90">Inputs and Outputs</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">2.2.1 </span><a href="#external-docs"><span class="deltaxml-new" style="background:#90EE90">External Documents</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">2.2.2 </span><a href="#binary"><span class="deltaxml-new" style="background:#90EE90">Non-XML Documents</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">2.3 </span><a href="#primary-input-output"><span class="deltaxml-new" style="background:#90EE90">Primary Inputs and Outputs</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">2.4 </span><a href="#connections"><span class="deltaxml-new" style="background:#90EE90">Connections</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">2.4.1 </span><a href="#namespace-fixup"><span class="deltaxml-new" style="background:#90EE90">Namespace Fixup on Outputs</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">2.5 </span><a href="#environment"><span class="deltaxml-new" style="background:#90EE90">Environment</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">2.6 </span><a href="#xpath-context"><span class="deltaxml-new" style="background:#90EE90">XPaths in XProc</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">2.6.1 </span><a href="#xproc-xpath-context-20"><span class="deltaxml-new" style="background:#90EE90">Processor XPath Context</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">2.6.2 </span><a href="#step-xpath-context-20"><span class="deltaxml-new" style="background:#90EE90">Step XPath Context</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">2.7 </span><a href="#xpath-extension-functions"><span class="deltaxml-new" style="background:#90EE90">XPath Extension Functions</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">2.7.1 </span><a href="#f.system-property"><span class="deltaxml-new" style="background:#90EE90">System Properties</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">2.7.2 </span><a href="#f.step-available"><span class="deltaxml-new" style="background:#90EE90">Step Available</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">2.7.3 </span><a href="#f.value-available"><span class="deltaxml-new" style="background:#90EE90">Value Available</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">2.7.4 </span><a href="#f.iteration-position"><span class="deltaxml-new" style="background:#90EE90">Iteration Position</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">2.7.5 </span><a href="#f.iteration-size"><span class="deltaxml-new" style="background:#90EE90">Iteration Size</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">2.7.6 </span><a href="#f.version-available"><span class="deltaxml-new" style="background:#90EE90">Version Available</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">2.7.7 </span><a href="#f.xpath-version-available"><span class="deltaxml-new" style="background:#90EE90">XPath Version Available</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">2.7.8 </span><a href="#other-xpath-extension-functions"><span class="deltaxml-new" style="background:#90EE90">Other XPath Extension Functions</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">2.8 </span><a href="#psvi-support"><span class="deltaxml-new" style="background:#90EE90">PSVIs in XProc</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">2.9 </span><a href="#variables"><span class="deltaxml-new" style="background:#90EE90">Variables</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">2.10 </span><a href="#options"><span class="deltaxml-new" style="background:#90EE90">Options</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">2.11 </span><a href="#parameters"><span class="deltaxml-new" style="background:#90EE90">Parameters</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">2.12 </span><a href="#security-considerations"><span class="deltaxml-new" style="background:#90EE90">Security Considerations</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">2.13 </span><a href="#versioning-considerations"><span class="deltaxml-new" style="background:#90EE90">Versioning Considerations</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">2.13.1 </span><a href="#vers-backcomp"><span class="deltaxml-new" style="background:#90EE90">Backwards-compatible Mode</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">2.13.2 </span><a href="#vers-forwcomp"><span class="deltaxml-new" style="background:#90EE90">Forwards-compatible Mode</span></a></span></dt></dl></dd></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">3 </span><a href="#syntax"><span class="deltaxml-new" style="background:#90EE90">Syntax Overview</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">3.1 </span><a href="#namespaces"><span class="deltaxml-new" style="background:#90EE90">XProc Namespaces</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">3.2 </span><a href="#scoping"><span class="deltaxml-new" style="background:#90EE90">Scoping of Names</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">3.3 </span><a href="#xml-base-attribute"><span class="deltaxml-new" style="background:#90EE90">Base URIs and xml:base</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">3.4 </span><a href="#xml-id-attribute"><span class="deltaxml-new" style="background:#90EE90">Unique identifiers</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">3.5 </span><a href="#syntax-docs-ports"><span class="deltaxml-new" style="background:#90EE90">Associating Documents with Ports</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">3.6 </span><a href="#documentation"><span class="deltaxml-new" style="background:#90EE90">Documentation</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">3.7 </span><a href="#annotations"><span class="deltaxml-new" style="background:#90EE90">Processor annotations</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">3.8 </span><a href="#extension-attributes"><span class="deltaxml-new" style="background:#90EE90">Extension attributes</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">3.9 </span><a href="#use-when"><span class="deltaxml-new" style="background:#90EE90">Conditional Element Exclusion</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">3.10 </span><a href="#syntax-summaries"><span class="deltaxml-new" style="background:#90EE90">Syntax Summaries</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">3.11 </span><a href="#common-errors"><span class="deltaxml-new" style="background:#90EE90">Common errors</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">4 </span><a href="#steps"><span class="deltaxml-new" style="background:#90EE90">Steps</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">4.1 </span><a href="#p.pipeline"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">4.1.1 </span><a href="#example-pipeline"><span class="deltaxml-new" style="background:#90EE90">Example</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">4.2 </span><a href="#p.for-each"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">4.2.1 </span><a href="#for-each-xpath-context"><span class="deltaxml-new" style="background:#90EE90">XPath Context</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">4.2.2 </span><a href="#example-for-each"><span class="deltaxml-new" style="background:#90EE90">Example</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">4.3 </span><a href="#p.viewport"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">4.3.1 </span><a href="#viewport-xpath-context"><span class="deltaxml-new" style="background:#90EE90">XPath Context</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">4.3.2 </span><a href="#example-viewport"><span class="deltaxml-new" style="background:#90EE90">Example</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">4.4 </span><a href="#p.choose"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">4.4.1 </span><a href="#p.xpath-context"><span class="deltaxml-new" style="background:#90EE90">p:xpath-context</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">4.4.2 </span><a href="#p.when"><span class="deltaxml-new" style="background:#90EE90">p:when</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">4.4.3 </span><a href="#p.otherwise"><span class="deltaxml-new" style="background:#90EE90">p:otherwise</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">4.4.4 </span><a href="#example-choose"><span class="deltaxml-new" style="background:#90EE90">Example</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">4.5 </span><a href="#p.group"><span class="deltaxml-new" style="background:#90EE90">p:group</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">4.5.1 </span><a href="#example-group"><span class="deltaxml-new" style="background:#90EE90">Example</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">4.6 </span><a href="#p.try"><span class="deltaxml-new" style="background:#90EE90">p:try</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">4.6.1 </span><a href="#err-vocab"><span class="deltaxml-new" style="background:#90EE90">The Error Vocabulary</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">4.6.2 </span><a href="#example-try"><span class="deltaxml-new" style="background:#90EE90">Example</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">4.7 </span><a href="#p.atomic"><span class="deltaxml-new" style="background:#90EE90">Atomic Steps</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">4.8 </span><a href="#p.extension"><span class="deltaxml-new" style="background:#90EE90">Extension Steps</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">4.8.1 </span><a href="#option-shortcut"><span class="deltaxml-new" style="background:#90EE90">Syntactic Shortcut for Option Values</span></a></span></dt></dl></dd></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">5 </span><a href="#other-elements"><span class="deltaxml-new" style="background:#90EE90">Other pipeline elements</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">5.1 </span><a href="#p.input"><span class="deltaxml-new" style="background:#90EE90">p:input</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">5.1.1 </span><a href="#document-inputs"><span class="deltaxml-new" style="background:#90EE90">Document Inputs</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">5.1.2 </span><a href="#parameter-inputs"><span class="deltaxml-new" style="background:#90EE90">Parameter Inputs</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">5.2 </span><a href="#p.iteration-source"><span class="deltaxml-new" style="background:#90EE90">p:iteration-source</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">5.3 </span><a href="#p.viewport-source"><span class="deltaxml-new" style="background:#90EE90">p:viewport-source</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">5.4 </span><a href="#p.output"><span class="deltaxml-new" style="background:#90EE90">p:output</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">5.5 </span><a href="#p.log"><span class="deltaxml-new" style="background:#90EE90">p:log</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">5.6 </span><a href="#p.serialization"><span class="deltaxml-new" style="background:#90EE90">p:serialization</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">5.7 </span><a href="#variables-options-parameters"><span class="deltaxml-new" style="background:#90EE90">Variables, Options, and Parameters</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">5.7.1 </span><a href="#p.variable"><span class="deltaxml-new" style="background:#90EE90">p:variable</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">5.7.2 </span><a href="#p.option"><span class="deltaxml-new" style="background:#90EE90">p:option</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">5.7.3 </span><a href="#p.with-option"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">5.7.4 </span><a href="#p.with-param"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">5.7.5 </span><a href="#opt-param-bindings"><span class="deltaxml-new" style="background:#90EE90">Namespaces on variables, options, and parameters</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">5.8 </span><a href="#p.declare-step"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">5.8.1 </span><a href="#declare-atomic-steps"><span class="deltaxml-new" style="background:#90EE90">Declaring atomic steps</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">5.8.2 </span><a href="#declare-pipelines"><span class="deltaxml-new" style="background:#90EE90">Declaring pipelines</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">5.9 </span><a href="#p.library"><span class="deltaxml-new" style="background:#90EE90">p:library</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">5.10 </span><a href="#p.import"><span class="deltaxml-new" style="background:#90EE90">p:import</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">5.11 </span><a href="#p.pipe"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">5.12 </span><a href="#p.inline"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">5.13 </span><a href="#p.document"><span class="deltaxml-new" style="background:#90EE90">p:document</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">5.14 </span><a href="#p.data"><span class="deltaxml-new" style="background:#90EE90">p:data</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">5.15 </span><a href="#p.empty"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">5.16 </span><a href="#p.documentation"><span class="deltaxml-new" style="background:#90EE90">p:documentation</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">5.17 </span><a href="#p.pipeinfo"><span class="deltaxml-new" style="background:#90EE90">p:pipeinfo</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">6 </span><a href="#errors"><span class="deltaxml-new" style="background:#90EE90">Errors</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">6.1 </span><a href="#static-errors"><span class="deltaxml-new" style="background:#90EE90">Static Errors</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">6.2 </span><a href="#dynamic-errors"><span class="deltaxml-new" style="background:#90EE90">Dynamic Errors</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">6.3 </span><a href="#step-errors"><span class="deltaxml-new" style="background:#90EE90">Step Errors</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">7 </span><a href="#std-components"><span class="deltaxml-new" style="background:#90EE90">Standard Step Library</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1 </span><a href="#std-required"><span class="deltaxml-new" style="background:#90EE90">Required Steps</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.1 </span><a href="#c.add-attribute"><span class="deltaxml-new" style="background:#90EE90">p:add-attribute</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.2 </span><a href="#c.add-xml-base"><span class="deltaxml-new" style="background:#90EE90">p:add-xml-base</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.3 </span><a href="#c.compare"><span class="deltaxml-new" style="background:#90EE90">p:compare</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.4 </span><a href="#c.count"><span class="deltaxml-new" style="background:#90EE90">p:count</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.5 </span><a href="#c.delete"><span class="deltaxml-new" style="background:#90EE90">p:delete</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.6 </span><a href="#c.directory-list"><span class="deltaxml-new" style="background:#90EE90">p:directory-list</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.7 </span><a href="#c.error"><span class="deltaxml-new" style="background:#90EE90">p:error</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.8 </span><a href="#c.escape-markup"><span class="deltaxml-new" style="background:#90EE90">p:escape-markup</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.9 </span><a href="#c.filter"><span class="deltaxml-new" style="background:#90EE90">p:filter</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.10 </span><a href="#c.http-request"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.11 </span><a href="#c.identity"><span class="deltaxml-new" style="background:#90EE90">p:identity</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.12 </span><a href="#c.insert"><span class="deltaxml-new" style="background:#90EE90">p:insert</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.13 </span><a href="#c.label-elements"><span class="deltaxml-new" style="background:#90EE90">p:label-elements</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.14 </span><a href="#c.load"><span class="deltaxml-new" style="background:#90EE90">p:load</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.15 </span><a href="#c.make-absolute-uris"><span class="deltaxml-new" style="background:#90EE90">p:make-absolute-uris</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.16 </span><a href="#c.namespace-rename"><span class="deltaxml-new" style="background:#90EE90">p:namespace-rename</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.17 </span><a href="#c.pack"><span class="deltaxml-new" style="background:#90EE90">p:pack</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.18 </span><a href="#c.parameters"><span class="deltaxml-new" style="background:#90EE90">p:parameters</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.19 </span><a href="#c.rename"><span class="deltaxml-new" style="background:#90EE90">p:rename</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.20 </span><a href="#c.replace"><span class="deltaxml-new" style="background:#90EE90">p:replace</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.21 </span><a href="#c.set-attributes"><span class="deltaxml-new" style="background:#90EE90">p:set-attributes</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.22 </span><a href="#c.sink"><span class="deltaxml-new" style="background:#90EE90">p:sink</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.23 </span><a href="#c.split-sequence"><span class="deltaxml-new" style="background:#90EE90">p:split-sequence</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.24 </span><a href="#c.store"><span class="deltaxml-new" style="background:#90EE90">p:store</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.25 </span><a href="#c.string-replace"><span class="deltaxml-new" style="background:#90EE90">p:string-replace</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.26 </span><a href="#c.unescape-markup"><span class="deltaxml-new" style="background:#90EE90">p:unescape-markup</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.27 </span><a href="#c.unwrap"><span class="deltaxml-new" style="background:#90EE90">p:unwrap</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.28 </span><a href="#c.wrap"><span class="deltaxml-new" style="background:#90EE90">p:wrap</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.29 </span><a href="#c.wrap-sequence"><span class="deltaxml-new" style="background:#90EE90">p:wrap-sequence</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.30 </span><a href="#c.xinclude"><span class="deltaxml-new" style="background:#90EE90">p:xinclude</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.1.31 </span><a href="#c.xslt"><span class="deltaxml-new" style="background:#90EE90">p:xslt</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">7.2 </span><a href="#std-optional"><span class="deltaxml-new" style="background:#90EE90">Optional Steps</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">7.2.1 </span><a href="#c.exec"><span class="deltaxml-new" style="background:#90EE90">p:exec</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.2.2 </span><a href="#c.hash"><span class="deltaxml-new" style="background:#90EE90">p:hash</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.2.3 </span><a href="#c.uuid"><span class="deltaxml-new" style="background:#90EE90">p:uuid</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.2.4 </span><a href="#c.validate-with-relax-ng"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-relax-ng</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.2.5 </span><a href="#c.validate-with-schematron"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-schematron</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.2.6 </span><a href="#c.validate-with-xml-schema"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-xml-schema</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.2.7 </span><a href="#c.www-form-urldecode"><span class="deltaxml-new" style="background:#90EE90">p:www-form-urldecode</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.2.8 </span><a href="#c.www-form-urlencode"><span class="deltaxml-new" style="background:#90EE90">p:www-form-urlencode</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.2.9 </span><a href="#c.xquery"><span class="deltaxml-new" style="background:#90EE90">p:xquery</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">7.2.10 </span><a href="#c.xsl-formatter"><span class="deltaxml-new" style="background:#90EE90">p:xsl-formatter</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">7.3 </span><a href="#serialization-options"><span class="deltaxml-new" style="background:#90EE90">Serialization Options</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">A </span><a href="#conformance"><span class="deltaxml-new" style="background:#90EE90">Conformance</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">1 </span><a href="#implementation-defined"><span class="deltaxml-new" style="background:#90EE90">Implementation-defined features</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">2 </span><a href="#implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">Implementation-dependent features</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">3 </span><a href="#infoset-conformance"><span class="deltaxml-new" style="background:#90EE90">Infoset Conformance</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">B </span><a href="#references"><span class="deltaxml-new" style="background:#90EE90">References</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">1 </span><a href="#normative-references"><span class="deltaxml-new" style="background:#90EE90">Normative References</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">2 </span><a href="#informative-references"><span class="deltaxml-new" style="background:#90EE90">Informative References</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">C </span><a href="#glossary"><span class="deltaxml-new" style="background:#90EE90">Glossary</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">D </span><a href="#language-summary"><span class="deltaxml-new" style="background:#90EE90">Pipeline Language Summary</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">E </span><a href="#errors-list"><span class="deltaxml-new" style="background:#90EE90">List of Error Codes</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">1 </span><a href="#app.static-errors"><span class="deltaxml-new" style="background:#90EE90">Static Errors</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">2 </span><a href="#app.dynamic-errors"><span class="deltaxml-new" style="background:#90EE90">Dynamic Errors</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">3 </span><a href="#app.step-errors"><span class="deltaxml-new" style="background:#90EE90">Step Errors</span></a></span></dt></dl></dd><dt><span><span class="deltaxml-new" style="background:#90EE90">F </span><a href="#namespace-fixup-guidance"><span class="deltaxml-new" style="background:#90EE90">Guidance on Namespace Fixup (Non-Normative)</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">G </span><a href="#handling-imports"><span class="deltaxml-new" style="background:#90EE90">Handling Circular and Re-entrant Library Imports (Non-Normative)</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">H </span><a href="#parallelism"><span class="deltaxml-new" style="background:#90EE90">Sequential steps, parallelism, and side-effects</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">I </span><a href="#xproc-media-type"><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">application/xproc+xml</span></code><span class="deltaxml-new" style="background:#90EE90"> media type</span></a></span></dt><dd><dl class="toc"><dt><span><span class="deltaxml-new" style="background:#90EE90">1 </span><a href="#media-type-registration"><span class="deltaxml-new" style="background:#90EE90">Registration of MIME media type application/xproc+xml</span></a></span></dt><dt><span><span class="deltaxml-new" style="background:#90EE90">2 </span><a href="#fragid"><span class="deltaxml-new" style="background:#90EE90">Fragment Identifiers</span></a></span></dt></dl></dd></dl></div><div class="appendix"><h2><a name="conformance" id="conformance"></a><span class="deltaxml-old" style="background:#FF5555">A Conformance</span></h2><p><span class="deltaxml-old" style="background:#FF5555">Conformant processors </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> implement all of the features described in this specification except those that are explicitly identified as optional.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Some aspects of processor behavior are not completely specified; those features are either </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></a></em><span class="deltaxml-old" style="background:#FF5555"> or </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="termdef" id="dt-implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">[Definition: An </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></em><span class="deltaxml-old" style="background:#FF5555"> feature is one where the implementation has discretion in how it is performed. Implementations are not required to document or explain how </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></a></em><span class="deltaxml-old" style="background:#FF5555"> features are performed.]</span></span></p><p><span class="termdef" id="dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">[Definition: An </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></em><span class="deltaxml-old" style="background:#FF5555"> feature is one where the implementation has discretion in how it is performed. Conformant implementations </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> document how </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555"> features are performed.]</span></span></p><div class="section"><h3><a name="implementation-defined" id="implementation-defined"></a><span class="deltaxml-old" style="background:#FF5555">A.1 Implementation-defined features</span></h3><p><span class="deltaxml-old" style="background:#FF5555">The following features are implementation-defined:</span></p><ol class="features"><li><span class="deltaxml-old" style="background:#FF5555">It is implementation-defined what additional step types, if any, are provided. See </span><a href="#step-concept" title="Steps"><span class="deltaxml-old" style="background:#FF5555">Section 2.1, “Steps”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">How inputs are connected to XML documents outside the pipeline is implementation-defined. See </span><a href="#input-output" title="Inputs and Outputs"><span class="deltaxml-old" style="background:#FF5555">Section 2.2, “Inputs and Outputs”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">How pipeline outputs are connected to XML documents outside the pipeline is implementation-defined. See </span><a href="#input-output" title="Inputs and Outputs"><span class="deltaxml-old" style="background:#FF5555">Section 2.2, “Inputs and Outputs”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">In Version 1.0 of XProc, how (or if) implementers provide local resolution mechanisms and how (or if) they provide access to intermediate results by URI is implementation-defined. See </span><a href="#external-docs" title="External Documents"><span class="deltaxml-old" style="background:#FF5555">Section 2.2.1, “External Documents”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">Except for cases which are specifically called out in , the extent to which namespace fixup, and other checks for outputs which cannot be serialized, are performed on intermediate outputs is implementation-defined. See </span><a href="#namespace-fixup" title="Namespace Fixup on Outputs"><span class="deltaxml-old" style="background:#FF5555">Section 2.4.1, “Namespace Fixup on Outputs”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The version of Unicode supported is implementation-defined, but it is recommended that the most recent version of Unicode be used. See </span><a href="#xproc-xpath-context-20" title="Processor XPath Context"><span class="deltaxml-old" style="background:#FF5555">Section 2.6.1, “Processor XPath Context”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The point in time returned as the current dateTime is implementation-defined. See </span><a href="#xproc-xpath-context-20" title="Processor XPath Context"><span class="deltaxml-old" style="background:#FF5555">Section 2.6.1, “Processor XPath Context”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The implicit timezone is implementation-defined. See </span><a href="#xproc-xpath-context-20" title="Processor XPath Context"><span class="deltaxml-old" style="background:#FF5555">Section 2.6.1, “Processor XPath Context”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The implicit timezone is implementation-defined. See </span><a href="#step-xpath-context-20" title="Step XPath Context"><span class="deltaxml-old" style="background:#FF5555">Section 2.6.2, “Step XPath Context”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The exact format of the language string is implementation-defined but should be consistent with the xml:lang attribute. See </span><a href="#f.system-property" title="System Properties"><span class="deltaxml-old" style="background:#FF5555">Section 2.7.1, “System Properties”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">It is implementation-defined if the processor supports any other XPath extension functions. See </span><a href="#other-xpath-extension-functions" title="Other XPath Extension Functions"><span class="deltaxml-old" style="background:#FF5555">Section 2.7.8, “Other XPath Extension Functions”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">Whether or not the pipeline processor supports passing PSVI annotations between steps is implementation-defined. See </span><a href="#psvi-support" title="PSVIs in XProc"><span class="deltaxml-old" style="background:#FF5555">Section 2.8, “PSVIs in XProc”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The exact PSVI properties that are preserved when documents are passed between steps is implementation-defined. See </span><a href="#psvi-support" title="PSVIs in XProc"><span class="deltaxml-old" style="background:#FF5555">Section 2.8, “PSVIs in XProc”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">It is implementation-defined what PSVI properties, if any, are produced by extension steps. See </span><a href="#psvi-support" title="PSVIs in XProc"><span class="deltaxml-old" style="background:#FF5555">Section 2.8, “PSVIs in XProc”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">How outside values are specified for pipeline options on the pipeline initially invoked by the processor is implementation-defined. See </span><a href="#options" title="Options"><span class="deltaxml-old" style="background:#FF5555">Section 2.10, “Options”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">How outside values are specified for pipeline parameters on the pipeline initially invoked by the processor is implementation-defined. See </span><a href="#parameters" title="Parameters"><span class="deltaxml-old" style="background:#FF5555">Section 2.11, “Parameters”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">Support for pipeline documents written in XML 1.1 and pipeline inputs and outputs that use XML 1.1 is implementation-defined. See </span><a href="#syntax" title="Syntax Overview"><span class="deltaxml-old" style="background:#FF5555">Section 3, “Syntax Overview”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The semantics of p:pipeinfo elements are implementation-defined. See </span><a href="#annotations" title="Processor annotations"><span class="deltaxml-old" style="background:#FF5555">Section 3.7, “Processor annotations”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The set of URI schemes actually supported is implementation-defined. See </span><a href="#common-errors" title="Common errors"><span class="deltaxml-old" style="background:#FF5555">Section 3.11, “Common errors”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The presence of other compound steps is implementation-defined; XProc provides no standard mechanism for defining them or describing what they can contain. See </span><a href="#p.extension" title="Extension Steps"><span class="deltaxml-old" style="background:#FF5555">Section 4.8, “Extension Steps”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">If the href attribute is not specified, the location of the log file or files is implementation-defined. See </span><a href="#p.log" title="p:log"><span class="deltaxml-old" style="background:#FF5555">Section 5.5, “p:log”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">How each document or sequence of documents is represented in a p:log is implementation-defined. See </span><a href="#p.log" title="p:log"><span class="deltaxml-old" style="background:#FF5555">Section 5.5, “p:log”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The default value of any serialization options not specified on a particular p:serialization element is implementation-defined. See </span><a href="#p.serialization" title="p:serialization"><span class="deltaxml-old" style="background:#FF5555">Section 5.6, “p:serialization”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">When a declared step is evaluated directly by the XProc processor (as opposed to occurring as an atomic step in some container), how the input and output ports are connected to documents is implementation-defined. See </span><a href="#p.declare-step" title="p:declare-step"><span class="deltaxml-old" style="background:#FF5555">Section 5.8, “p:declare-step”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The subpipeline may include declarations of additional steps (e.g., other pipelines or other step types that are provided by a particular implementation or in some implementation-defined way) and import other pipelines. See </span><a href="#declare-pipelines" title="Declaring pipelines"><span class="deltaxml-old" style="background:#FF5555">Section 5.8.2, “Declaring pipelines”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">Conformant processors must support directory paths whose scheme is file. It is implementation-defined what other schemes are supported by p:directory-list, and what the interpretation of 'directory', 'file' and 'contents' is for those schemes. See </span><a href="#c.directory-list" title="p:directory-list"><span class="deltaxml-old" style="background:#FF5555">Section 7.1.6, “p:directory-list”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">Any file or directory determined to be special by the p:directory-list step may be output using a c:other element but the criteria for marking a file as special are implementation-defined. See </span><a href="#c.directory-list" title="p:directory-list"><span class="deltaxml-old" style="background:#FF5555">Section 7.1.6, “p:directory-list”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">Any attributes other than name on c:file, c:directory, or c:other are implementation-defined. See </span><a href="#c.directory-list" title="p:directory-list"><span class="deltaxml-old" style="background:#FF5555">Section 7.1.6, “p:directory-list”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The interpretation of auth-method values on c:request other than “Basic” or “Digest” is implementation-defined. See </span><a href="#cv.request" title="Specifying a request"><span class="deltaxml-old" style="background:#FF5555">Section 7.1.10.1, “Specifying a request”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">An implementation may support encodings other than base64 but these encodings and their names are implementation-defined. See </span><a href="#c.request_body" title="Request Entity body conversion"><span class="deltaxml-old" style="background:#FF5555">Section 7.1.10.2, “Request Entity body conversion”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">Pipeline authors that need to preserve cookies across several p:http-request calls in the same pipeline or across multiple invocations of the same or different pipelines will have to rely on implementation-defined mechanisms. See </span><a href="#cookies" title="Cookies"><span class="deltaxml-old" style="background:#FF5555">Section 7.1.10.3.2, “Cookies”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">Behavior of p:unescape-markup for content-types other than application/xml is implementation-defined. See </span><a href="#c.unescape-markup" title="p:unescape-markup"><span class="deltaxml-old" style="background:#FF5555">Section 7.1.26, “p:unescape-markup”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">If cwd is not specified, the current working directory is implementation-defined. See </span><a href="#c.exec" title="p:exec"><span class="deltaxml-old" style="background:#FF5555">Section 7.2.1, “p:exec”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">It is implementation-defined what other algorithms are supported. See </span><a href="#c.hash" title="p:hash"><span class="deltaxml-old" style="background:#FF5555">Section 7.2.2, “p:hash”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">If the version is not specified, the version of UUID computed is implementation-defined. See </span><a href="#c.uuid" title="p:uuid"><span class="deltaxml-old" style="background:#FF5555">Section 7.2.3, “p:uuid”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">Support for other versions of UUID, and the mechanism by which the necessary inputs are made available for computing other versions, is implementation-defined. See </span><a href="#c.uuid" title="p:uuid"><span class="deltaxml-old" style="background:#FF5555">Section 7.2.3, “p:uuid”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">It is implementation-defined if the documents supplied on the schemas port are considered when resolving xs:include elements in the schema documents provided. See </span><a href="#c.validate-with-xml-schema" title="p:validate-with-xml-schema"><span class="deltaxml-old" style="background:#FF5555">Section 7.2.6, “p:validate-with-xml-schema”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">Support for XQueryX is implementation-defined. See </span><a href="#c.xquery" title="p:xquery"><span class="deltaxml-old" style="background:#FF5555">Section 7.2.9, “p:xquery”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">Otherwise, the interpretation of the query is implementation-defined. See </span><a href="#c.xquery" title="p:xquery"><span class="deltaxml-old" style="background:#FF5555">Section 7.2.9, “p:xquery”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The point in time returned as the current dateTime is implementation-defined. See </span><a href="#c.xquery" title="p:xquery"><span class="deltaxml-old" style="background:#FF5555">Section 7.2.9, “p:xquery”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The implicit timezone is implementation-defined. See </span><a href="#c.xquery" title="p:xquery"><span class="deltaxml-old" style="background:#FF5555">Section 7.2.9, “p:xquery”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The use of media type parameters on the content-type option is implementation-defined. See </span><a href="#c.xsl-formatter" title="p:xsl-formatter"><span class="deltaxml-old" style="background:#FF5555">Section 7.2.10, “p:xsl-formatter”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">If the content-type option is not specified, the output type is implementation-defined. See </span><a href="#c.xsl-formatter" title="p:xsl-formatter"><span class="deltaxml-old" style="background:#FF5555">Section 7.2.10, “p:xsl-formatter”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">A formatter may take any number of optional rendering parameters via the step's parameters; such parameters are defined by the XSL implementation used and are implementation-defined. See </span><a href="#c.xsl-formatter" title="p:xsl-formatter"><span class="deltaxml-old" style="background:#FF5555">Section 7.2.10, “p:xsl-formatter”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">Implementations may support other method values but their results are implementation-defined. See </span><a href="#serialization-options" title="Serialization Options"><span class="deltaxml-old" style="background:#FF5555">Section 7.3, “Serialization Options”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">It is implementation-defined whether additional information items and properties, particularly those made available in the PSVI, are preserved between steps. See </span><a href="#infoset-conformance" title="Infoset Conformance"><span class="deltaxml-old" style="background:#FF5555">Section A.3, “Infoset Conformance”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li></ol></div><div class="section"><h3><a name="implementation-dependent" id="implementation-dependent"></a><span class="deltaxml-old" style="background:#FF5555">A.2 Implementation-dependent features</span></h3><p><span class="deltaxml-old" style="background:#FF5555">The following features are implementation-dependent:</span></p><ol class="features"><li><span class="deltaxml-old" style="background:#FF5555">The evaluation order of steps not connected to one another is implementation-dependent See </span><a href="#pipeline-concepts" title="Pipeline Concepts"><span class="deltaxml-old" style="background:#FF5555">Section 2, “Pipeline Concepts”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">Outside of a try/catch, the disposition of error messages is implementation-dependent See </span><a href="#input-output" title="Inputs and Outputs"><span class="deltaxml-old" style="background:#FF5555">Section 2.2, “Inputs and Outputs”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">Resolving a URI locally may involve resolvers of various sorts and possibly appeal to implementation-dependent mechanisms such as catalog files. See </span><a href="#external-docs" title="External Documents"><span class="deltaxml-old" style="background:#FF5555">Section 2.2.1, “External Documents”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">Whether (and when and how) or not the intermediate results that pass between steps are ever written to a filesystem is implementation-dependent. See </span><a href="#external-docs" title="External Documents"><span class="deltaxml-old" style="background:#FF5555">Section 2.2.1, “External Documents”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The set of available documents (those that may be retrieved with a URI) is implementation-dependent. See </span><a href="#xproc-xpath-context-20" title="Processor XPath Context"><span class="deltaxml-old" style="background:#FF5555">Section 2.6.1, “Processor XPath Context”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The set of available collections is implementation-dependent. See </span><a href="#xproc-xpath-context-20" title="Processor XPath Context"><span class="deltaxml-old" style="background:#FF5555">Section 2.6.1, “Processor XPath Context”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The set of available documents (those that may be retrieved with a URI) is implementation-dependent. See </span><a href="#step-xpath-context-20" title="Step XPath Context"><span class="deltaxml-old" style="background:#FF5555">Section 2.6.2, “Step XPath Context”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">Which steps are forbidden, what privileges are needed to access resources, and under what circumstances these security constraints apply is implementation-dependent. See </span><a href="#security-considerations" title="Security Considerations"><span class="deltaxml-old" style="background:#FF5555">Section 2.12, “Security Considerations”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The value of the p:episode system property in a use-when expression is implementation-dependent. See </span><a href="#use-when" title="Conditional Element Exclusion"><span class="deltaxml-old" style="background:#FF5555">Section 3.9, “Conditional Element Exclusion”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The results of testing for steps not in the XProc namespace in a use-when expression are implementation-dependent. See </span><a href="#use-when" title="Conditional Element Exclusion"><span class="deltaxml-old" style="background:#FF5555">Section 3.9, “Conditional Element Exclusion”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The ability of a step to read the p:log output of some former step is implementation-dependent. See </span><a href="#p.log" title="p:log"><span class="deltaxml-old" style="background:#FF5555">Section 5.5, “p:log”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">Implementations may use extension attributes to provide implementation-dependent information about a declared step. See </span><a href="#declare-atomic-steps" title="Declaring atomic steps"><span class="deltaxml-old" style="background:#FF5555">Section 5.8.1, “Declaring atomic steps”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">If no content type was specified or is associated with the resource, the inferred content type is implementation-dependent. See </span><a href="#p.data" title="p:data"><span class="deltaxml-old" style="background:#FF5555">Section 5.14, “p:data”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The interpretation of a multipart message inside another multipart message is implementation-dependent. See </span><a href="#c.response_body" title="Converting Response Entity Bodies"><span class="deltaxml-old" style="background:#FF5555">Section 7.1.10.4, “Converting Response Entity Bodies”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">If the IRI reference specified by the base-uri option on p:make-absolute-uris is not valid, or if it is absent and the input document has no base URI, the results are implementation-dependent. See </span><a href="#c.make-absolute-uris" title="p:make-absolute-uris"><span class="deltaxml-old" style="background:#FF5555">Section 7.1.15, “p:make-absolute-uris”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The order in which c:param elements occur in the c:param-set is implementation-dependent. See </span><a href="#c.parameters" title="p:parameters"><span class="deltaxml-old" style="background:#FF5555">Section 7.1.18, “p:parameters”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">How XSLT message termination errors are reported to the XProc processor is implementation-dependent. See </span><a href="#c.xslt" title="p:xslt"><span class="deltaxml-old" style="background:#FF5555">Section 7.1.31, “p:xslt”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The specific exit status values returned by a process invoked with p:exec are implementation-dependent. See </span><a href="#c.exec" title="p:exec"><span class="deltaxml-old" style="background:#FF5555">Section 7.2.1, “p:exec”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The set of available documents (those that may be retrieved with a URI) is implementation-dependent. See </span><a href="#c.xquery" title="p:xquery"><span class="deltaxml-old" style="background:#FF5555">Section 7.2.9, “p:xquery”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li><span class="deltaxml-old" style="background:#FF5555">The set of available collections is implementation-dependent. See </span><a href="#c.xquery" title="p:xquery"><span class="deltaxml-old" style="background:#FF5555">Section 7.2.9, “p:xquery”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li></ol></div><div class="section"><h3><a name="infoset-conformance" id="infoset-conformance"></a><span class="deltaxml-old" style="background:#FF5555">A.3 Infoset Conformance</span></h3><p><span class="deltaxml-old" style="background:#FF5555">This specification conforms to the XML Information Set [</span><a href="#xml-infoset-rec"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Infoset</span></span></a><span class="deltaxml-old" style="background:#FF5555">]. The information corresponding to the following information items and properties must be available to the processor for the documents that flow through the pipeline.</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">The </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">Document Information Item</span></tt><span class="deltaxml-old" style="background:#FF5555"> with </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[base URI]</span></tt><span class="deltaxml-old" style="background:#FF5555"> and </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[children]</span></tt><span class="deltaxml-old" style="background:#FF5555"> properties.</span></p></li><li><p><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">Element Information Items</span></tt><span class="deltaxml-old" style="background:#FF5555"> with </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[base URI]</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[children]</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[attributes]</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[in-scope namespaces]</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[prefix]</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[local name]</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[namespace name]</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[parent]</span></tt><span class="deltaxml-old" style="background:#FF5555"> properties.</span></p></li><li><p><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">Attribute Information Items</span></tt><span class="deltaxml-old" style="background:#FF5555"> with </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[namespace name]</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[prefix]</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[local name]</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[normalized value]</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[attribute type]</span></tt><span class="deltaxml-old" style="background:#FF5555">, and </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[owner element]</span></tt><span class="deltaxml-old" style="background:#FF5555"> properties.</span></p></li><li><p><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">Character Information Items</span></tt><span class="deltaxml-old" style="background:#FF5555"> with </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[character code]</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[parent]</span></tt><span class="deltaxml-old" style="background:#FF5555">, and, optionally, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[element content whitespace]</span></tt><span class="deltaxml-old" style="background:#FF5555"> properties.</span></p></li><li><p><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">Processing Instruction Information Items</span></tt><span class="deltaxml-old" style="background:#FF5555"> with </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[base URI]</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[target]</span></tt><span class="deltaxml-old" style="background:#FF5555">, </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[content]</span></tt><span class="deltaxml-old" style="background:#FF5555"> and </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[parent]</span></tt><span class="deltaxml-old" style="background:#FF5555"> properties.</span></p></li><li><p><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">Comment Information Items</span></tt><span class="deltaxml-old" style="background:#FF5555"> with </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[content]</span></tt><span class="deltaxml-old" style="background:#FF5555"> and </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[parent]</span></tt><span class="deltaxml-old" style="background:#FF5555"> properties.</span></p></li><li><p><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">Namespace Information Items</span></tt><span class="deltaxml-old" style="background:#FF5555"> with </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[prefix]</span></tt><span class="deltaxml-old" style="background:#FF5555"> and </span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">[namespace name]</span></tt><span class="deltaxml-old" style="background:#FF5555"> properties.</span></p></li></ul></div><p><a name="impl-69"></a><span class="deltaxml-old" style="background:#FF5555">It is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555"> whether additional information items and properties, particularly those made available in the PSVI, are preserved between steps.</span></p></div></div><div class="appendix"><h2><a name="references" id="references"></a><span class="deltaxml-old" style="background:#FF5555">B References</span></h2><div class="section"><h3><a name="normative-references" id="normative-references"></a><span class="deltaxml-old" style="background:#FF5555">B.1 Normative References</span></h3><div class="bibliolist"><div class="bibliomixed" id="use-cases"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XProc V2.0 Requirements</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.w3.org/TR/xproc-v2-req/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">XProc V2.0 Requirements</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Alex Milowski, James Fuller, and Norman Walsh editors. W3C Working Draft 5 November 2013. </span></p></div><div class="bibliomixed" id="xml-infoset-rec"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Infoset</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.w3.org/TR/xml-infoset/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">XML Information Set (Second Edition)</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. John Cowan, Richard Tobin, editors. W3C Working Group Note 04 February 2004. </span></p></div><div class="bibliomixed" id="xml10"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XML 1.0</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.w3.org/TR/REC-xml/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">Extensible Markup Language (XML) 1.0 (Fifth Edition)</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Tim Bray, Jean Paoli, C. M. Sperberg-McQueen, et. al. editors. W3C Recommendation 26 November 2008.</span></p></div><div class="bibliomixed" id="xmlns10"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Namespaces 1.0</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.w3.org/TR/REC-xml-names/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">Namespaces in XML 1.0 (Third Edition)</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Tim Bray, Dave Hollander, Andrew Layman, et. al., editors. W3C Recommendation 8 December 2009.</span></p></div><div class="bibliomixed" id="xml11"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XML 1.1</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.w3.org/TR/xml11/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">Extensible Markup Language (XML) 1.1 (Second Edition)</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Tim Bray, Jean Paoli, C. M. Sperberg-McQueen, et. al. editors. W3C Recommendation 16 August 2006.</span></p></div><div class="bibliomixed" id="xmlns11"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Namespaces 1.1</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.w3.org/TR/xml-names11/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">Namespaces in XML 1.1 (Second Edition)</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Tim Bray, Dave Hollander, Andrew Layman, et. al., editors. W3C Recommendation 16 August 2006.</span></p></div><div class="bibliomixed" id="xslt10"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XSLT 1.0</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.w3.org/TR/xslt"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">XSL Transformations (XSLT) Version 1.0</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. James Clark, editor. W3C Recommendation. 16 November 1999.</span></p></div><div class="bibliomixed" id="xpath2"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XPath 2.0</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.w3.org/TR/xpath20/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">XML Path Language (XPath) 2.0</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Anders Berglund, Scott Boag, Don Chamberlin, et. al., editors. W3C Recommendation. 23 January 2007.</span></p></div><div class="bibliomixed" id="xpath-datamodel"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XQuery 1.0 and XPath 2.0 Data Model (XDM)</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.w3.org/TR/xpath-datamodel/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">XQuery 1.0 and XPath 2.0 Data Model (XDM)</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Mary Fernández, Ashok Malhotra, Jonathan Marsh, </span><em class="foreignphrase"><span class="deltaxml-old" style="background:#FF5555">et. al.</span></em><span class="deltaxml-old" style="background:#FF5555">, editors. W3C Recommendation. 23 January 2007.</span></p></div><div class="bibliomixed" id="xpath-functions"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XPath 2.0 Functions and Operators</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.w3.org/TR/xpath-functions/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">XQuery 1.0 and XPath 2.0 Functions and Operators</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Ashok Malhotra, Jim Melton, and Norman Walsh, editors. W3C Recommendation. 23 January 2007.</span></p></div><div class="bibliomixed" id="xslt20"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XSLT 2.0</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.w3.org/TR/xslt20/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">XSL Transformations (XSLT) Version 2.0</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Michael Kay, editor. W3C Recommendation. 23 January 2007.</span></p></div><div class="bibliomixed" id="xsl11"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XSL 1.1</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.w3.org/TR/xsl/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">Extensible Stylesheet Language (XSL) Version 1.1</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Anders Berglund, editor. W3C Recommendation. 5 December 2006.</span></p></div><div class="bibliomixed" id="xquery10"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XQuery 1.0</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.w3.org/TR/xquery/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">XQuery 1.0: An XML Query Language</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Scott Boag, Don Chamberlin, Mary Fernández, et. al., editors. W3C Recommendation. 23 January 2007.</span></p></div><div class="bibliomixed" id="iso19757-2"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RELAX NG</span></span><span class="deltaxml-old" style="background:#FF5555">] ISO/IEC JTC 1/SC 34. </span><a href="http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=52348"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">ISO/IEC 19757-2:2008(E) Document Schema Definition Language (DSDL) -- Part 2: Regular-grammar-based validation -- RELAX NG</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555"> 2008. </span></p></div><div class="bibliomixed" id="relaxng-compact-syntax"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RELAX NG Compact Syntax</span></span><span class="deltaxml-old" style="background:#FF5555">] ISO/IEC JTC 1/SC 34. </span><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">ISO/IEC 19757-2:2003/Amd 1:2006 Document Schema Definition Languages (DSDL) — Part 2: Grammar-based validation — RELAX NG AMENDMENT 1 Compact Syntax</span></cite></span><span class="deltaxml-old" style="background:#FF5555"> 2006. </span></p></div><div class="bibliomixed" id="relaxng-dtd-compat"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RELAX NG DTD Compatibility</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">RELAX NG DTD Compatibility</span></cite></span><span class="deltaxml-old" style="background:#FF5555">. OASIS Committee Specification. 3 December 2001. </span></p></div><div class="bibliomixed" id="iso19757-3"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Schematron</span></span><span class="deltaxml-old" style="background:#FF5555">] ISO/IEC JTC 1/SC 34. </span><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">ISO/IEC 19757-3:2006(E) Document Schema Definition Languages (DSDL) — Part 3: Rule-based validation — Schematron</span></cite></span><span class="deltaxml-old" style="background:#FF5555"> 2006. </span></p></div><div class="bibliomixed" id="xmlschema-1"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">W3C XML Schema: Part 1</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.w3.org/TR/xmlschema-1/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">XML Schema Part 1: Structures Second Edition</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Henry S. Thompson, David Beech, Murray Maloney, et. al., editors. World Wide Web Consortium, 28 October 2004. </span></p></div><div class="bibliomixed" id="xmlschema-2"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">W3C XML Schema: Part 2</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.w3.org/TR/xmlschema-2/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">XML Schema Part 2: Datatypes Second Edition</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Paul V. Biron and Ashok Malhotra, editors. World Wide Web Consortium, 28 October 2004. </span></p></div><div class="bibliomixed" id="xml-id"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">xml:id</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.w3.org/TR/xml-id/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">xml:id Version 1.0</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Jonathan Marsh, Daniel Veillard, and Norman Walsh, editors. W3C Recommendation. 9 September 2005.</span></p></div><div class="bibliomixed" id="xinclude"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XInclude</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.w3.org/TR/xinclude/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">XML Inclusions (XInclude) Version 1.0 (Second Edition)</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Jonathan Marsh, David Orchard, and Daniel Veillard, editors. W3C Recommendation. 15 November 2006.</span></p></div><div class="bibliomixed" id="xml-base"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XML Base</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.w3.org/TR/xmlbase/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">XML Base (Second Edition)</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Jonathan Marsh and Richard Tobin, editors. W3C Recommendation. 28 January 2009.</span></p></div><div class="bibliomixed" id="xptr-framework"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XPointer Framework</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.w3.org/TR/xptr-framework/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">XPointer Framework</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Paul Grosso, Eve Maler, Jonathan Marsh, et. al., editors. W3C Recommendation. 25 March 2003.</span></p></div><div class="bibliomixed" id="xptr-element"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XPointer element() Scheme</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.w3.org/TR/xptr-element/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">XPointer element() Scheme</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Paul Grosso, Eve Maler, Jonathan Marsh, et. al., editors. W3C Recommendation. 25 March 2003.</span></p></div><div class="bibliomixed" id="xml-serialization"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Serialization</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.w3.org/TR/xslt-xquery-serialization/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">XSLT 2.0 and XQuery 1.0 Serialization</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Scott Boag, Michael Kay, Joanne Tong, Norman Walsh, and Henry Zongaro, editors. W3C Recommendation. 23 January 2007.</span></p></div><div class="bibliomixed" id="rfc1321"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">MD5</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.ietf.org/rfc/rfc1321.txt"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">RFC 1321: The MD5 Message-Digest Algorithm</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. R. Rivest. Network Working Group, IETF, April 1992.</span></p></div><div class="bibliomixed" id="rfc1521"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RFC 1521</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.ietf.org/rfc/rfc1521.txt"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">RFC 1521: MIME (Multipurpose Internet Mail Extensions) Part One: Mechanisms for Specifying and Describing the Format of Internet Message Bodies</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. N. Borenstein, N. Freed, editors. Internet Engineering Task Force. September, 1993.</span></p></div><div class="bibliomixed" id="rfc2119"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RFC 2119</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.ietf.org/rfc/rfc2119.txt"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">Key words for use in RFCs to Indicate Requirement Levels</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. S. Bradner. Network Working Group, IETF, Mar 1997. </span></p></div><div class="bibliomixed" id="rfc2396"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RFC 2396</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.ietf.org/rfc/rfc2396.txt"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">Uniform Resource Identifiers (URI): Generic Syntax</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. T. Berners-Lee, R. Fielding, and L. Masinter. Network Working Group, IETF, Aug 1998. </span></p></div><div class="bibliomixed" id="rfc2616"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RFC 2616</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.ietf.org/rfc/rfc2616.txt"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">RFC 2616: Hypertext Transfer Protocol — HTTP/1.1</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. R. Fielding, J. Gettys, J. Mogul, et. al., editors. Internet Engineering Task Force. June, 1999.</span></p></div><div class="bibliomixed" id="rfc2617"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RFC 2617</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.ietf.org/rfc/rfc2617.txt"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">RFC 2617: HTTP Authentication: Basic and Digest Access Authentication</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. J. Franks, P. Hallam-Baker, J. Hostetler, S. Lawrence, P. Leach, A. Luotonen, L. Stewart. June, 1999 .</span></p></div><div class="bibliomixed" id="rfc3023"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RFC 3023</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.ietf.org/rfc/rfc3023.txt"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">RFC 3023: XML Media Types</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. M. Murata, S. St. Laurent, and D. Kohn, editors. Internet Engineering Task Force. January, 2001.</span></p></div><div class="bibliomixed" id="rfc3548"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RFC 3548</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.ietf.org/rfc/rfc3548.txt"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">RFC 3548: The Base16, Base32, and Base64 Data Encodings</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. S. Josefsson, Editor. Internet Engineering Task Force. July, 2003.</span></p></div><div class="bibliomixed" id="rfc3986"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RFC 3986</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.ietf.org/rfc/rfc3986.txt"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">RFC 3986: Uniform Resource Identifier (URI): General Syntax</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. T. Berners-Lee, R. Fielding, and L. Masinter, editors. Internet Engineering Task Force. January, 2005.</span></p></div><div class="bibliomixed" id="rfc3987"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RFC 3987</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.ietf.org/rfc/rfc3987.txt"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">RFC 3987: Internationalized Resource Identifiers (IRIs)</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. M. Duerst and M. Suignard, editors. Internet Engineering Task Force. January, 2005.</span></p></div><div class="bibliomixed" id="unicodetr17"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Unicode TR#17</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://unicode.org/reports/tr17/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">Unicode Technical Report #17: Character Encoding Model</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Ken Whistler, Mark Davis, and Asmus Freytag, authors. The Unicode Consortium. 11 November 2008.</span></p></div><div class="bibliomixed" id="media-types"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">IANA Media Types</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.iana.org/assignments/media-types/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">IANA MIME Media Types</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Internet Engineering Task Force. </span></p></div><div class="bibliomixed" id="tidy"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">HTML Tidy</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://tidy.sourceforge.net/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">HTML Tidy Library Project</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. SourceForge project. </span></p></div><div class="bibliomixed" id="tagsoup"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">TagSoup</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://ccil.org/~cowan/XML/tagsoup/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">TagSoup - Just Keep On Truckin'</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. John Cowan. </span></p></div><div class="bibliomixed" id="bib.uuid"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">UUID</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.itu.int/ITU-T/studygroups/com17/oid.html"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">ITU X.667: Information technology - Open Systems Interconnection - Procedures for the operation of OSI Registration Authorities: Generation and registration of Universally Unique Identifiers (UUIDs) and their use as ASN.1 Object Identifier components</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. 2004.</span></p></div><div class="bibliomixed" id="bib.sha"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">SHA1</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.itl.nist.gov/fipspubs/fip180-1.htm"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">Federal Information Processing Standards Publication 180-1: Secure Hash Standard</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. 1995.</span></p></div></div></div><div class="section"><h3><a name="informative-references" id="informative-references"></a><span class="deltaxml-old" style="background:#FF5555">B.2 Informative References</span></h3><div class="bibliolist"><div class="bibliomixed" id="rfc4122"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RFC 4122</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="http://www.ietf.org/rfc/rfc4122.txt"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">RFC 4122: A Universally Unique IDentifier (UUID) URN Namespace</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. P. Leach and M. Mealling, editors. Internet Engineering Task Force. July, 2005.</span></p></div><div class="bibliomixed" id="bib.crc"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">CRC32</span></span><span class="deltaxml-old" style="background:#FF5555">] “32-Bit Cyclic Redundancy Codes for Internet Applications”, </span><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">The International Conference on Dependable Systems and Networks: 459</span></cite></span><span class="deltaxml-old" style="background:#FF5555">. </span><span class="biblioid"><span class="deltaxml-old" style="background:#FF5555">10.1109/DSN.2002.1028931</span></span><span class="deltaxml-old" style="background:#FF5555">. P. Koopman. June 2002. </span></p></div></div></div></div><div class="appendix"><h2><a name="glossary" id="glossary"></a><span class="deltaxml-old" style="background:#FF5555">C Glossary</span></h2><div class="glosslist"><dl><dt><em class="glossterm"><a href="#dt-Namespaces-in-XML"><span class="deltaxml-old" style="background:#FF5555">Namespaces in XML</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Unless otherwise noted, the term </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">Namespaces in XML</span></em><span class="deltaxml-old" style="background:#FF5555"> refers equally to [</span><a href="#xmlns10"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Namespaces 1.0</span></span></a><span class="deltaxml-old" style="background:#FF5555">] and [</span><a href="#xmlns11"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Namespaces 1.1</span></span></a><span class="deltaxml-old" style="background:#FF5555">].</span></p></dd><dt><em class="glossterm"><a href="#dt-XML"><span class="deltaxml-old" style="background:#FF5555">XML</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">XProc is intended to work equally well with [</span><a href="#xml10"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XML 1.0</span></span></a><span class="deltaxml-old" style="background:#FF5555">] and [</span><a href="#xml11"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XML 1.1</span></span></a><span class="deltaxml-old" style="background:#FF5555">]. Unless otherwise noted, the term “</span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">XML</span></em><span class="deltaxml-old" style="background:#FF5555">” refers equally to both versions.</span></p></dd><dt><em class="glossterm"><a href="#dt-ancestors"><span class="deltaxml-old" style="background:#FF5555">ancestors</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">ancestors</span></em><span class="deltaxml-old" style="background:#FF5555"> of a step, if it has any, are its </span><em class="glossterm"><a href="#dt-container"><span class="deltaxml-old" style="background:#FF5555">container</span></a></em><span class="deltaxml-old" style="background:#FF5555"> and the ancestors of its container.</span></p></dd><dt><em class="glossterm"><a href="#dt-atomic-step"><span class="deltaxml-old" style="background:#FF5555">atomic step</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">An </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">atomic step</span></em><span class="deltaxml-old" style="background:#FF5555"> is a step that performs a unit of XML processing, such as XInclude or transformation, and has no internal </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p></dd><dt><em class="glossterm"><a href="#dt-bag-merger"><span class="deltaxml-old" style="background:#FF5555">bag-merger</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">bag-merger</span></em><span class="deltaxml-old" style="background:#FF5555"> of two or more bags (where a bag is an unordered list or, equivalently, something like a set except that it may contain duplicates) is a bag constructed by starting with an empty bag and adding each member of each of the input bags in turn to it. It follows that the cardinality of the result is the sum of the cardinality of all the input bags.</span></p></dd><dt><em class="glossterm"><a href="#dt-by-source"><span class="deltaxml-old" style="background:#FF5555">by source</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">A document is specified </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">by source</span></em><span class="deltaxml-old" style="background:#FF5555"> if it references a specific port on another step.</span></p></dd><dt><em class="glossterm"><a href="#dt-by-URI"><span class="deltaxml-old" style="background:#FF5555">by URI</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">A document is specified </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">by URI</span></em><span class="deltaxml-old" style="background:#FF5555"> if it is referenced with a URI.</span></p></dd><dt><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-old" style="background:#FF5555">compound step</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">A </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">compound step</span></em><span class="deltaxml-old" style="background:#FF5555"> is a step that contains a </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></dd><dt><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-old" style="background:#FF5555">connection</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">A </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">connection</span></em><span class="deltaxml-old" style="background:#FF5555"> associates an input or output port with some data source.</span></p></dd><dt><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-old" style="background:#FF5555">contained steps</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The steps that occur directly within, or within non-step wrappers directly within, a step are called that step's </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">contained steps</span></em><span class="deltaxml-old" style="background:#FF5555">. In other words, “container” and “contained steps” are inverse relationships.</span></p></dd><dt><em class="glossterm"><a href="#dt-container"><span class="deltaxml-old" style="background:#FF5555">container</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">A compound step or multi-container step is a </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">container</span></em><span class="deltaxml-old" style="background:#FF5555"> for the steps directly within it or within non-step wrappers directly within it.</span></p></dd><dt><em class="glossterm"><a href="#dt-declared-inputs"><span class="deltaxml-old" style="background:#FF5555">declared inputs</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The input ports declared on a step are its </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">declared inputs</span></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></dd><dt><em class="glossterm"><a href="#dt-declared-options"><span class="deltaxml-old" style="background:#FF5555">declared options</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The options declared on a step are its </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">declared options</span></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></dd><dt><em class="glossterm"><a href="#dt-declared-outputs"><span class="deltaxml-old" style="background:#FF5555">declared outputs</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The output ports declared on a step are its </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">declared outputs</span></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></dd><dt><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-old" style="background:#FF5555">default readable port</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">default readable port</span></em><span class="deltaxml-old" style="background:#FF5555">, which may be undefined, is a specific step name/port name pair from the set of readable ports.</span></p></dd><dt><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">A </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></em><span class="deltaxml-old" style="background:#FF5555"> is one which occurs while a pipeline is being evaluated.</span></p></dd><dt><em class="glossterm"><a href="#dt-empty-environment"><span class="deltaxml-old" style="background:#FF5555">empty environment</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">empty environment</span></em><span class="deltaxml-old" style="background:#FF5555"> contains no readable ports, an undefined default readable port and no in-scope bindings.</span></p></dd><dt><em class="glossterm"><a href="#dt-empty-sequence"><span class="deltaxml-old" style="background:#FF5555">empty sequence</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">An </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">empty sequence</span></em><span class="deltaxml-old" style="background:#FF5555"> of documents is specified with the </span><a href="#p.empty"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element.</span></p></dd><dt><em class="glossterm"><a href="#dt-environment"><span class="deltaxml-old" style="background:#FF5555">environment</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">environment</span></em><span class="deltaxml-old" style="background:#FF5555"> is a context-dependent collection of information available within subpipelines.</span></p></dd><dt><em class="glossterm"><a href="#dt-extension-attribute"><span class="deltaxml-old" style="background:#FF5555">extension attribute</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">An element from the XProc namespace </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> have any attribute not from the XProc namespace, provided that the expanded-QName of the attribute has a non-null namespace URI. Such an attribute is called an </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">extension attribute</span></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></dd><dt><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-old" style="background:#FF5555">in-scope bindings</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">in-scope bindings</span></em><span class="deltaxml-old" style="background:#FF5555"> are a set of name-value pairs, based on </span><em class="glossterm"><a href="#dt-option"><span class="deltaxml-old" style="background:#FF5555">option</span></a></em><span class="deltaxml-old" style="background:#FF5555"> and </span><em class="glossterm"><a href="#dt-variable"><span class="deltaxml-old" style="background:#FF5555">variable</span></a></em><span class="deltaxml-old" style="background:#FF5555"> bindings.</span></p></dd><dt><em class="glossterm"><a href="#dt-inherited-environment"><span class="deltaxml-old" style="background:#FF5555">inherited environment</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">inherited environment</span></em><span class="deltaxml-old" style="background:#FF5555"> of a </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-old" style="background:#FF5555">contained step</span></a></em><span class="deltaxml-old" style="background:#FF5555"> is an environment that is the same as the environment of its </span><em class="glossterm"><a href="#dt-container"><span class="deltaxml-old" style="background:#FF5555">container</span></a></em><span class="deltaxml-old" style="background:#FF5555"> with the </span><a href="#dt-standard-modifications"><span class="deltaxml-old" style="background:#FF5555">standard modifications</span></a><span class="deltaxml-old" style="background:#FF5555">. </span></p></dd><dt><em class="glossterm"><a href="#dt-inline-document"><span class="deltaxml-old" style="background:#FF5555">inline document</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">An </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">inline document</span></em><span class="deltaxml-old" style="background:#FF5555"> is specified directly in the body of the element to which it connects.</span></p></dd><dt><em class="glossterm"><a href="#dt-last-step"><span class="deltaxml-old" style="background:#FF5555">last step</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">last step</span></em><span class="deltaxml-old" style="background:#FF5555"> in a subpipeline is its last step in document order.</span></p></dd><dt><em class="glossterm"><a href="#dt-matches"><span class="deltaxml-old" style="background:#FF5555">matches</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">A step </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">matches</span></em><span class="deltaxml-old" style="background:#FF5555"> its signature if and only if it specifies an input for each declared input, it specifies no inputs that are not declared, it specifies an option for each option that is declared to be required, and it specifies no options that are not declared.</span></p></dd><dt><em class="glossterm"><a href="#dt-multi-container-step"><span class="deltaxml-old" style="background:#FF5555">multi-container step</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">A </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">multi-container step</span></em><span class="deltaxml-old" style="background:#FF5555"> is a step that contains several alternate </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipelines</span></a></em><span class="deltaxml-old" style="background:#FF5555">. </span></p></dd><dt><em class="glossterm"><a href="#dt-namespace-fixup"><span class="deltaxml-old" style="background:#FF5555">namespace fixup</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">To produce a serializable </span><em class="glossterm"><a href="#dt-XML"><span class="deltaxml-old" style="background:#FF5555">XML</span></a></em><span class="deltaxml-old" style="background:#FF5555"> document, the XProc processor must sometimes add additional namespace nodes, perhaps even renaming prefixes, to satisfy the constraints of </span><em class="glossterm"><a href="#dt-Namespaces-in-XML"><span class="deltaxml-old" style="background:#FF5555">Namespaces in XML</span></a></em><span class="deltaxml-old" style="background:#FF5555">. This process is referred to as </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">namespace fixup</span></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></dd><dt><em class="glossterm"><a href="#dt-option"><span class="deltaxml-old" style="background:#FF5555">option</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">An </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">option</span></em><span class="deltaxml-old" style="background:#FF5555"> is a name/value pair where the name is an </span><a href="http://www.w3.org/TR/REC-xml-names/#dt-expname"><span class="deltaxml-old" style="background:#FF5555">expanded name</span></a><span class="deltaxml-old" style="background:#FF5555"> and the value </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a string or </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">xs:untypedAtomic</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p></dd><dt><em class="glossterm"><a href="#dt-parameter"><span class="deltaxml-old" style="background:#FF5555">parameter</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">A </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">parameter</span></em><span class="deltaxml-old" style="background:#FF5555"> is a name/value pair where the name is an </span><a href="http://www.w3.org/TR/REC-xml-names/#dt-expname"><span class="deltaxml-old" style="background:#FF5555">expanded name</span></a><span class="deltaxml-old" style="background:#FF5555"> and the value </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a string or </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">xs:untypedAtomic</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p></dd><dt><em class="glossterm"><a href="#dt-parameter-input-port"><span class="deltaxml-old" style="background:#FF5555">parameter input port</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">A </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">parameter input port</span></em><span class="deltaxml-old" style="background:#FF5555"> is a distinguished kind of input port which accepts (only) dynamically constructed parameter name/value pairs.</span></p></dd><dt><em class="glossterm"><a href="#dt-pipeline"><span class="deltaxml-old" style="background:#FF5555">pipeline</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">A </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">pipeline</span></em><span class="deltaxml-old" style="background:#FF5555"> is a set of connected steps, with outputs of one step flowing into inputs of another.</span></p></dd><dt><em class="glossterm"><a href="#dt-primary-parameter-input-port"><span class="deltaxml-old" style="background:#FF5555">primary parameter input port</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">If a step has a parameter input port which is explicitly marked “</span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">primary='true'</span></tt><span class="deltaxml-old" style="background:#FF5555">”, or if it has exactly one parameter input port and that port is </span><em><span class="deltaxml-old" style="background:#FF5555">not</span></em><span class="deltaxml-old" style="background:#FF5555"> explicitly marked “</span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">primary='false'</span></tt><span class="deltaxml-old" style="background:#FF5555">”, then that parameter input port is the </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">primary parameter input port</span></em><span class="deltaxml-old" style="background:#FF5555"> of the step.</span></p></dd><dt><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-old" style="background:#FF5555">primary input port</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">If a step has a document input port which is explicitly marked “</span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">primary='true'</span></tt><span class="deltaxml-old" style="background:#FF5555">”, or if it has exactly one document input port and that port is </span><em><span class="deltaxml-old" style="background:#FF5555">not</span></em><span class="deltaxml-old" style="background:#FF5555"> explicitly marked “</span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">primary='false'</span></tt><span class="deltaxml-old" style="background:#FF5555">”, then that input port is the </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">primary input port</span></em><span class="deltaxml-old" style="background:#FF5555"> of the step.</span></p></dd><dt><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-old" style="background:#FF5555">primary output port</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">If a step has a document output port which is explicitly marked “</span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">primary='true'</span></tt><span class="deltaxml-old" style="background:#FF5555">”, or if it has exactly one document output port and that port is </span><em><span class="deltaxml-old" style="background:#FF5555">not</span></em><span class="deltaxml-old" style="background:#FF5555"> explicitly marked “</span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">primary='false'</span></tt><span class="deltaxml-old" style="background:#FF5555">”, then that output port is the </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">primary output port</span></em><span class="deltaxml-old" style="background:#FF5555"> of the step.</span></p></dd><dt><em class="glossterm"><a href="#dt-readable-ports"><span class="deltaxml-old" style="background:#FF5555">readable ports</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">readable ports</span></em><span class="deltaxml-old" style="background:#FF5555"> are a set of step name/port name pairs.</span></p></dd><dt><em class="glossterm"><a href="#dt-signature"><span class="deltaxml-old" style="background:#FF5555">signature</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">signature</span></em><span class="deltaxml-old" style="background:#FF5555"> of a step is the set of inputs, outputs, and options that it is declared to accept.</span></p></dd><dt><em class="glossterm"><a href="#dt-specified-options"><span class="deltaxml-old" style="background:#FF5555">specified options</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The options on a step which have specified values, either because a </span><a href="#p.with-option"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> element specifies a value or because the declaration included a default value, are its </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">specified options</span></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></dd><dt><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">A </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">static error</span></em><span class="deltaxml-old" style="background:#FF5555"> is one which can be detected before pipeline evaluation is even attempted.</span></p></dd><dt><em class="glossterm"><a href="#dt-step"><span class="deltaxml-old" style="background:#FF5555">step</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">A </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">step</span></em><span class="deltaxml-old" style="background:#FF5555"> is the basic computational unit of a pipeline.</span></p></dd><dt><em class="glossterm"><a href="#dt-step-type-exports"><span class="deltaxml-old" style="background:#FF5555">step type exports</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">step type exports</span></em><span class="deltaxml-old" style="background:#FF5555"> of an XProc element, against the background of a set of URIs of resources already visited (call this set </span><em><span class="deltaxml-old" style="background:#FF5555">Visited</span></em><span class="deltaxml-old" style="background:#FF5555">), are defined by cases.</span></p></dd><dt><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Sibling steps (and the connections between them) form a </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></em><span class="deltaxml-old" style="background:#FF5555">.</span></p></dd><dt><em class="glossterm"><a href="#dt-variable"><span class="deltaxml-old" style="background:#FF5555">variable</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">A </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">variable</span></em><span class="deltaxml-old" style="background:#FF5555"> is a name/value pair where the name is an </span><a href="http://www.w3.org/TR/REC-xml-names/#dt-expname"><span class="deltaxml-old" style="background:#FF5555">expanded name</span></a><span class="deltaxml-old" style="background:#FF5555"> and the value </span><span class="rfc2119"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be a string or </span><tt class="type"><span class="deltaxml-old" style="background:#FF5555">xs:untypedAtomic</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p></dd><dt><em class="glossterm"><a href="#dt-visible"><span class="deltaxml-old" style="background:#FF5555">visible</span></a></em></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">If two names are in the same scope, we say that they are </span><em class="firstterm"><span class="deltaxml-old" style="background:#FF5555">visible</span></em><span class="deltaxml-old" style="background:#FF5555"> to each other. </span></p></dd></dl></div></div><div class="appendix"><h2><a name="language-summary" id="language-summary"></a><span class="deltaxml-old" style="background:#FF5555">D Pipeline Language Summary</span></h2><p><span class="deltaxml-old" style="background:#FF5555">This appendix summarizes the XProc pipeline language. Machine readable descriptions of this language are available in </span><a href="schemas/xproc.rng"><span class="deltaxml-old" style="background:#FF5555">RELAX NG</span></a><span class="deltaxml-old" style="background:#FF5555"> (and the RELAX NG </span><a href="schemas/xproc.rnc"><span class="deltaxml-old" style="background:#FF5555">compact syntax</span></a><span class="deltaxml-old" style="background:#FF5555">), </span><a href="schemas/xproc.xsd"><span class="deltaxml-old" style="background:#FF5555">W3C XML Schema</span></a><span class="deltaxml-old" style="background:#FF5555">, and </span><a href="schemas/xproc.dtd"><span class="deltaxml-old" style="background:#FF5555">DTD</span></a><span class="deltaxml-old" style="background:#FF5555"> syntaxes.</span></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:pipeline</span><span class="deltaxml-old" style="background:#FF5555">  name? = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  type? = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  psvi-required? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  xpath-version? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  exclude-inline-prefixes? = </span><var><span class="deltaxml-old" style="background:#FF5555">prefix list</span></var><span class="deltaxml-old" style="background:#FF5555">  version? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.input"><span class="deltaxml-old" style="background:#FF5555">p:input</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.output"><span class="deltaxml-old" style="background:#FF5555">p:output</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.option"><span class="deltaxml-old" style="background:#FF5555">p:option</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.log"><span class="deltaxml-old" style="background:#FF5555">p:log</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.serialization"><span class="deltaxml-old" style="background:#FF5555">p:serialization</span></a><span class="deltaxml-old" style="background:#FF5555">)*,</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.declare-step"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.pipeline"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.import"><span class="deltaxml-old" style="background:#FF5555">p:import</span></a><span class="deltaxml-old" style="background:#FF5555">)*,</span><span class="deltaxml-old" style="background:#FF5555">    </span><var><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></var><span class="deltaxml-old" style="background:#FF5555">&lt;/p:pipeline&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:for-each</span><span class="deltaxml-old" style="background:#FF5555">  name? = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    ((</span><a href="#p.iteration-source"><span class="deltaxml-old" style="background:#FF5555">p:iteration-source</span></a><span class="deltaxml-old" style="background:#FF5555">? &amp; </span><span class="deltaxml-old" style="background:#FF5555">      (</span><a href="#p.output"><span class="deltaxml-old" style="background:#FF5555">p:output</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.log"><span class="deltaxml-old" style="background:#FF5555">p:log</span></a><span class="deltaxml-old" style="background:#FF5555">)*),</span><span class="deltaxml-old" style="background:#FF5555">     </span><var><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></var><span class="deltaxml-old" style="background:#FF5555">)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:for-each&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:viewport</span><span class="deltaxml-old" style="background:#FF5555">  name? = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">match</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    ((</span><a href="#p.viewport-source"><span class="deltaxml-old" style="background:#FF5555">p:viewport-source</span></a><span class="deltaxml-old" style="background:#FF5555">? &amp; </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.output"><span class="deltaxml-old" style="background:#FF5555">p:output</span></a><span class="deltaxml-old" style="background:#FF5555">? &amp; </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.log"><span class="deltaxml-old" style="background:#FF5555">p:log</span></a><span class="deltaxml-old" style="background:#FF5555">?),</span><span class="deltaxml-old" style="background:#FF5555">     </span><var><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></var><span class="deltaxml-old" style="background:#FF5555">)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:viewport&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:choose</span><span class="deltaxml-old" style="background:#FF5555">  name? = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.xpath-context"><span class="deltaxml-old" style="background:#FF5555">p:xpath-context</span></a><span class="deltaxml-old" style="background:#FF5555">?,</span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.variable"><span class="deltaxml-old" style="background:#FF5555">p:variable</span></a><span class="deltaxml-old" style="background:#FF5555">*,</span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.when"><span class="deltaxml-old" style="background:#FF5555">p:when</span></a><span class="deltaxml-old" style="background:#FF5555">*,</span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.otherwise"><span class="deltaxml-old" style="background:#FF5555">p:otherwise</span></a><span class="deltaxml-old" style="background:#FF5555">?)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:choose&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:xpath-context&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.empty"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.pipe"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.document"><span class="deltaxml-old" style="background:#FF5555">p:document</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.inline"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.data"><span class="deltaxml-old" style="background:#FF5555">p:data</span></a><span class="deltaxml-old" style="background:#FF5555">)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:xpath-context&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:when</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">test</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.xpath-context"><span class="deltaxml-old" style="background:#FF5555">p:xpath-context</span></a><span class="deltaxml-old" style="background:#FF5555">?,</span><span class="deltaxml-old" style="background:#FF5555">     (</span><a href="#p.output"><span class="deltaxml-old" style="background:#FF5555">p:output</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.log"><span class="deltaxml-old" style="background:#FF5555">p:log</span></a><span class="deltaxml-old" style="background:#FF5555">)*,</span><span class="deltaxml-old" style="background:#FF5555">     </span><var><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></var><span class="deltaxml-old" style="background:#FF5555">)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:when&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:otherwise&gt;</span><span class="deltaxml-old" style="background:#FF5555">    ((</span><a href="#p.output"><span class="deltaxml-old" style="background:#FF5555">p:output</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.log"><span class="deltaxml-old" style="background:#FF5555">p:log</span></a><span class="deltaxml-old" style="background:#FF5555">)*,</span><span class="deltaxml-old" style="background:#FF5555">     </span><var><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></var><span class="deltaxml-old" style="background:#FF5555">)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:otherwise&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:group</span><span class="deltaxml-old" style="background:#FF5555">  name? = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    ((</span><a href="#p.output"><span class="deltaxml-old" style="background:#FF5555">p:output</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.log"><span class="deltaxml-old" style="background:#FF5555">p:log</span></a><span class="deltaxml-old" style="background:#FF5555">)*,</span><span class="deltaxml-old" style="background:#FF5555">     </span><var><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></var><span class="deltaxml-old" style="background:#FF5555">)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:group&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:try</span><span class="deltaxml-old" style="background:#FF5555">  name? = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.variable"><span class="deltaxml-old" style="background:#FF5555">p:variable</span></a><span class="deltaxml-old" style="background:#FF5555">*,</span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.group"><span class="deltaxml-old" style="background:#FF5555">p:group</span></a><span class="deltaxml-old" style="background:#FF5555">,</span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.catch"><span class="deltaxml-old" style="background:#FF5555">p:catch</span></a><span class="deltaxml-old" style="background:#FF5555">)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:try&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:catch</span><span class="deltaxml-old" style="background:#FF5555">  name? = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    ((</span><a href="#p.output"><span class="deltaxml-old" style="background:#FF5555">p:output</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.log"><span class="deltaxml-old" style="background:#FF5555">p:log</span></a><span class="deltaxml-old" style="background:#FF5555">)*,</span><span class="deltaxml-old" style="background:#FF5555">     </span><var><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></var><span class="deltaxml-old" style="background:#FF5555">)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:catch&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;</span><var><span class="deltaxml-old" style="background:#FF5555">p:atomic-step</span></var><span class="deltaxml-old" style="background:#FF5555">  name? = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.input"><span class="deltaxml-old" style="background:#FF5555">p:input</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.with-option"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.with-param"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.log"><span class="deltaxml-old" style="background:#FF5555">p:log</span></a><span class="deltaxml-old" style="background:#FF5555">)*</span><span class="deltaxml-old" style="background:#FF5555">&lt;/</span><var><span class="deltaxml-old" style="background:#FF5555">p:atomic-step</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;</span><var><span class="deltaxml-old" style="background:#FF5555">pfx:atomic-step</span></var><span class="deltaxml-old" style="background:#FF5555">  name? = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.input"><span class="deltaxml-old" style="background:#FF5555">p:input</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.with-option"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.with-param"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.log"><span class="deltaxml-old" style="background:#FF5555">p:log</span></a><span class="deltaxml-old" style="background:#FF5555">)*</span><span class="deltaxml-old" style="background:#FF5555">&lt;/</span><var><span class="deltaxml-old" style="background:#FF5555">pfx:atomic-step</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">port</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  sequence? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  primary? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  kind? = "document"</span><span class="deltaxml-old" style="background:#FF5555">  select? = </span><var><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.empty"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      (</span><a href="#p.document"><span class="deltaxml-old" style="background:#FF5555">p:document</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.inline"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.data"><span class="deltaxml-old" style="background:#FF5555">p:data</span></a><span class="deltaxml-old" style="background:#FF5555">)+)?</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:input&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">port</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  select? = </span><var><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.empty"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      (</span><a href="#p.pipe"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.document"><span class="deltaxml-old" style="background:#FF5555">p:document</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.inline"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.data"><span class="deltaxml-old" style="background:#FF5555">p:data</span></a><span class="deltaxml-old" style="background:#FF5555">)+)?</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:input&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">port</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  sequence? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  primary? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">kind</span></strong><span class="deltaxml-old" style="background:#FF5555"> = "parameter"&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.empty"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      (</span><a href="#p.document"><span class="deltaxml-old" style="background:#FF5555">p:document</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.inline"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a><span class="deltaxml-old" style="background:#FF5555">)+)?</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:input&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:iteration-source</span><span class="deltaxml-old" style="background:#FF5555">  select? = </span><var><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.empty"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      (</span><a href="#p.pipe"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.document"><span class="deltaxml-old" style="background:#FF5555">p:document</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.inline"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.data"><span class="deltaxml-old" style="background:#FF5555">p:data</span></a><span class="deltaxml-old" style="background:#FF5555">)+)?</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:iteration-source&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:viewport-source&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.pipe"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.document"><span class="deltaxml-old" style="background:#FF5555">p:document</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.inline"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.data"><span class="deltaxml-old" style="background:#FF5555">p:data</span></a><span class="deltaxml-old" style="background:#FF5555">)?</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:viewport-source&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">port</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  sequence? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  primary? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">port</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  sequence? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  primary? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.empty"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      (</span><a href="#p.pipe"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.document"><span class="deltaxml-old" style="background:#FF5555">p:document</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.inline"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">       </span><a href="#p.data"><span class="deltaxml-old" style="background:#FF5555">p:data</span></a><span class="deltaxml-old" style="background:#FF5555">)+)?</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:output&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:log</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">port</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  href? = </span><var><span class="deltaxml-old" style="background:#FF5555">anyURI</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:serialization</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">port</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  byte-order-mark? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  cdata-section-elements? = </span><var><span class="deltaxml-old" style="background:#FF5555">NMTOKENS</span></var><span class="deltaxml-old" style="background:#FF5555">  doctype-public? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  doctype-system? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  encoding? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  escape-uri-attributes? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  include-content-type? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  indent? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  media-type? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  method? = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  normalization-form? = </span><var><span class="deltaxml-old" style="background:#FF5555">NFC|NFD|NFKC|NFKD|fully-normalized|none|xs:NMTOKEN</span></var><span class="deltaxml-old" style="background:#FF5555">  omit-xml-declaration? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  standalone? = </span><var><span class="deltaxml-old" style="background:#FF5555">true|false|omit</span></var><span class="deltaxml-old" style="background:#FF5555">  undeclare-prefixes? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  version? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:variable</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">name</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">select</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    ((</span><a href="#p.empty"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.pipe"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.document"><span class="deltaxml-old" style="background:#FF5555">p:document</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.inline"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.data"><span class="deltaxml-old" style="background:#FF5555">p:data</span></a><span class="deltaxml-old" style="background:#FF5555">)? &amp; </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.namespaces"><span class="deltaxml-old" style="background:#FF5555">p:namespaces</span></a><span class="deltaxml-old" style="background:#FF5555">*)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:variable&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">name</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  required? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">name</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  required? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">select</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:with-option</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">name</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">select</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    ((</span><a href="#p.empty"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.pipe"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.document"><span class="deltaxml-old" style="background:#FF5555">p:document</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.inline"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.data"><span class="deltaxml-old" style="background:#FF5555">p:data</span></a><span class="deltaxml-old" style="background:#FF5555">)? &amp; </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.namespaces"><span class="deltaxml-old" style="background:#FF5555">p:namespaces</span></a><span class="deltaxml-old" style="background:#FF5555">*)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:with-option&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:with-param</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">name</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">select</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></var><span class="deltaxml-old" style="background:#FF5555">  port? = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    ((</span><a href="#p.empty"><span class="deltaxml-old" style="background:#FF5555">p:empty</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.pipe"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.document"><span class="deltaxml-old" style="background:#FF5555">p:document</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.inline"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.data"><span class="deltaxml-old" style="background:#FF5555">p:data</span></a><span class="deltaxml-old" style="background:#FF5555">)? &amp; </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.namespaces"><span class="deltaxml-old" style="background:#FF5555">p:namespaces</span></a><span class="deltaxml-old" style="background:#FF5555">*)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:with-param&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:namespaces</span><span class="deltaxml-old" style="background:#FF5555">  binding? = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  element? = </span><var><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></var><span class="deltaxml-old" style="background:#FF5555">  except-prefixes? = </span><var><span class="deltaxml-old" style="background:#FF5555">prefix list</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span><span class="deltaxml-old" style="background:#FF5555">  name? = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  type? = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  psvi-required? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  xpath-version? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  exclude-inline-prefixes? = </span><var><span class="deltaxml-old" style="background:#FF5555">prefix list</span></var><span class="deltaxml-old" style="background:#FF5555">  version? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.input"><span class="deltaxml-old" style="background:#FF5555">p:input</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.output"><span class="deltaxml-old" style="background:#FF5555">p:output</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.option"><span class="deltaxml-old" style="background:#FF5555">p:option</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.log"><span class="deltaxml-old" style="background:#FF5555">p:log</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.serialization"><span class="deltaxml-old" style="background:#FF5555">p:serialization</span></a><span class="deltaxml-old" style="background:#FF5555">)*,</span><span class="deltaxml-old" style="background:#FF5555">    ((</span><a href="#p.declare-step"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.pipeline"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#p.import"><span class="deltaxml-old" style="background:#FF5555">p:import</span></a><span class="deltaxml-old" style="background:#FF5555">)*,</span><span class="deltaxml-old" style="background:#FF5555">     </span><var><span class="deltaxml-old" style="background:#FF5555">subpipeline</span></var><span class="deltaxml-old" style="background:#FF5555">)?</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:library</span><span class="deltaxml-old" style="background:#FF5555">  psvi-required? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  xpath-version? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  exclude-inline-prefixes? = </span><var><span class="deltaxml-old" style="background:#FF5555">prefix list</span></var><span class="deltaxml-old" style="background:#FF5555">  version? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#p.import"><span class="deltaxml-old" style="background:#FF5555">p:import</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.declare-step"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#p.pipeline"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></a><span class="deltaxml-old" style="background:#FF5555">)*</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:library&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:import</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">href</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">anyURI</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:pipe</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">step</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">port</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:inline</span><span class="deltaxml-old" style="background:#FF5555">  exclude-inline-prefixes? = </span><var><span class="deltaxml-old" style="background:#FF5555">prefix list</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    </span><var><span class="deltaxml-old" style="background:#FF5555">anyElement</span></var><span class="deltaxml-old" style="background:#FF5555">&lt;/p:inline&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:document</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">href</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">anyURI</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:data</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">href</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">anyURI</span></var><span class="deltaxml-old" style="background:#FF5555">  wrapper? = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  wrapper-prefix? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  wrapper-namespace? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  content-type? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:empty /&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:documentation&gt;</span><span class="deltaxml-old" style="background:#FF5555">    </span><var><span class="deltaxml-old" style="background:#FF5555">any-well-formed-content</span></var><span class="deltaxml-old" style="background:#FF5555">*</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:documentation&gt;</span></code></p><p class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:pipeinfo&gt;</span><span class="deltaxml-old" style="background:#FF5555">    </span><var><span class="deltaxml-old" style="background:#FF5555">any-well-formed-content</span></var><span class="deltaxml-old" style="background:#FF5555">*</span><span class="deltaxml-old" style="background:#FF5555">&lt;/p:pipeinfo&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The core steps are also summarized here.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:add-attribute</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">attribute-name</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">attribute-prefix</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                           </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">NCName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">attribute-namespace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                        </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">attribute-value</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">            </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:add-xml-base</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">all</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">relative</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                   </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:compare</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">alternate</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">fail-if-not-equal</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:count</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">limit</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">0</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                           </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">integer</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:delete</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:directory-list</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">path</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">include-filter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">RegularExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">exclude-filter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">RegularExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:error</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">code</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">code-prefix</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">NCName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">code-namespace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:escape-markup</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">cdata-section-elements</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">''</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">ListOfQNames</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">doctype-public</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">doctype-system</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">escape-uri-attributes</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">include-content-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">indent</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">media-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                 </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">method</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'xml'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">omit-xml-declaration</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">standalone</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'omit'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                 </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">"true" | "false" | "omit"</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">undeclare-prefixes</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">version</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'1.0'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                     </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:filter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                     </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">byte-order-mark</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                            </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">cdata-section-elements</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">''</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">ListOfQNames</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">doctype-public</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">doctype-system</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">encoding</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                   </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">escape-uri-attributes</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">include-content-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">indent</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">media-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                 </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">method</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'xml'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">normalization-form</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'none'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">NormalizationForm</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">omit-xml-declaration</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">standalone</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'omit'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                 </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">"true" | "false" | "omit"</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">undeclare-prefixes</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">version</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'1.0'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                     </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:identity</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:insert</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">insertion</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'/*'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                        </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">position</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                   </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">"first-child" | "last-child" | "before" | "after"</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:label-elements</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">attribute</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'xml:id'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">attribute-prefix</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                           </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">NCName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">attribute-namespace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                        </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">label</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'concat("_",$p:index)'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'*'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">replace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:load</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">href</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">dtd-validate</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">              </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:make-absolute-uris</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">base-uri</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                   </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:namespace-rename</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">from</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">to</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">apply-to</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'all'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">"all" | "elements" | "attributes"</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:pack</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">alternate</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrapper</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrapper-prefix</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">NCName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrapper-namespace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                          </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr kind-attr"><span class="deltaxml-old" style="background:#FF5555">kind</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value kind-value"><span class="deltaxml-old" style="background:#FF5555">parameter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:rename</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">new-name</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                   </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">new-prefix</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                 </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">NCName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">new-namespace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                              </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:replace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">replacement</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:set-attributes</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">attributes</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:sink</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:split-sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">matched</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">not-matched</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">initial-only</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">              </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">test</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:store</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">href</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">byte-order-mark</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                            </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">cdata-section-elements</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">''</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">ListOfQNames</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">doctype-public</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">doctype-system</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">encoding</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                   </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">escape-uri-attributes</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">include-content-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">indent</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">media-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                 </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">method</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'xml'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">normalization-form</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'none'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">NormalizationForm</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">omit-xml-declaration</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">standalone</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'omit'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                 </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">"true" | "false" | "omit"</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">undeclare-prefixes</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">version</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'1.0'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                     </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:string-replace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">replace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:unescape-markup</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">namespace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                  </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">content-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'application/xml'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">encoding</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                   </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">charset</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:unwrap</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:wrap</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrapper</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrapper-prefix</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">NCName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrapper-namespace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                          </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">group-adjacent</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:wrap-sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrapper</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrapper-prefix</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">NCName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrapper-namespace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                          </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">group-adjacent</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:xinclude</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">fixup-xml-base</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">            </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">fixup-xml-lang</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">            </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:xslt</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">stylesheet</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr kind-attr"><span class="deltaxml-old" style="background:#FF5555">kind</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value kind-value"><span class="deltaxml-old" style="background:#FF5555">parameter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">secondary</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">initial-mode</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                               </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">template-name</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                              </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">output-base-uri</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                            </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">version</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">As are the optional steps.</span></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:exec</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">errors</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">exit-status</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">command</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">args</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">''</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                           </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">cwd</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                        </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">source-is-xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">              </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">result-is-xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">              </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrap-result-lines</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">errors-is-xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrap-error-lines</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">          </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">path-separator</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">failure-threshold</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                          </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">integer</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">arg-separator</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">' '</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                 </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">byte-order-mark</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                            </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">cdata-section-elements</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">''</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">ListOfQNames</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">doctype-public</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">doctype-system</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">encoding</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                   </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">escape-uri-attributes</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">include-content-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">indent</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">media-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                 </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">method</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'xml'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">normalization-form</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'none'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">NormalizationForm</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">omit-xml-declaration</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">standalone</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'omit'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                 </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">"true" | "false" | "omit"</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">undeclare-prefixes</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">version</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'1.0'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                     </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:hash</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr kind-attr"><span class="deltaxml-old" style="background:#FF5555">kind</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value kind-value"><span class="deltaxml-old" style="background:#FF5555">parameter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">value</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">algorithm</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                  </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">QName</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">version</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:uuid</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">version</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                                    </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">integer</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-relax-ng</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">schema</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">dtd-attribute-values</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">dtd-id-idref-warnings</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">               </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-schematron</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr kind-attr"><span class="deltaxml-old" style="background:#FF5555">kind</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value kind-value"><span class="deltaxml-old" style="background:#FF5555">parameter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">schema</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">report</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">phase</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'#ALL'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">               </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-xml-schema</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">schema</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">use-location-hints</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">        </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">try-namespaces</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'false'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">            </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'true'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">               </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">boolean</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">mode</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'strict'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                     </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">"strict" | "lax"</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:www-form-urldecode</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">value</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:www-form-urlencode</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr kind-attr"><span class="deltaxml-old" style="background:#FF5555">kind</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value kind-value"><span class="deltaxml-old" style="background:#FF5555">parameter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:xquery</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">query</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr kind-attr"><span class="deltaxml-old" style="background:#FF5555">kind</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value kind-value"><span class="deltaxml-old" style="background:#FF5555">parameter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:xsl-formatter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr kind-attr"><span class="deltaxml-old" style="background:#FF5555">kind</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value kind-value"><span class="deltaxml-old" style="background:#FF5555">parameter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">href</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">anyURI</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">content-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                               </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">And the step vocabulary elements.</span></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:param</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">name</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">QName</span></var><span class="deltaxml-old" style="background:#FF5555">  namespace? = </span><var><span class="deltaxml-old" style="background:#FF5555">anyURI</span></var><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">value</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:param-set&gt;</span><span class="deltaxml-old" style="background:#FF5555">    </span><a href="#cv.param"><span class="deltaxml-old" style="background:#FF5555">c:param</span></a><span class="deltaxml-old" style="background:#FF5555">*</span><span class="deltaxml-old" style="background:#FF5555">&lt;/c:param-set&gt;</span></code></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:data</span><span class="deltaxml-old" style="background:#FF5555">  content-type? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  charset? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  encoding? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&lt;/c:data&gt;</span></code></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:result&gt;</span><span class="deltaxml-old" style="background:#FF5555">    </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&lt;/c:result&gt;</span></code></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:directory</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">name</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#cv.file"><span class="deltaxml-old" style="background:#FF5555">c:file</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#cv.directory"><span class="deltaxml-old" style="background:#FF5555">c:directory</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">     </span><a href="#cv.other"><span class="deltaxml-old" style="background:#FF5555">c:other</span></a><span class="deltaxml-old" style="background:#FF5555">)*</span><span class="deltaxml-old" style="background:#FF5555">&lt;/c:directory&gt;</span></code></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:file</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">name</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:other</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">name</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:request</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">method</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">NCName</span></var><span class="deltaxml-old" style="background:#FF5555">  href? = </span><var><span class="deltaxml-old" style="background:#FF5555">anyURI</span></var><span class="deltaxml-old" style="background:#FF5555">  detailed? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  status-only? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  username? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  password? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  auth-method? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  send-authorization? = </span><var><span class="deltaxml-old" style="background:#FF5555">boolean</span></var><span class="deltaxml-old" style="background:#FF5555">  override-content-type? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#cv.header"><span class="deltaxml-old" style="background:#FF5555">c:header</span></a><span class="deltaxml-old" style="background:#FF5555">*,</span><span class="deltaxml-old" style="background:#FF5555">     (</span><a href="#cv.multipart"><span class="deltaxml-old" style="background:#FF5555">c:multipart</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#cv.body"><span class="deltaxml-old" style="background:#FF5555">c:body</span></a><span class="deltaxml-old" style="background:#FF5555">)?)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/c:request&gt;</span></code></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:header</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">name</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">value</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555"> /&gt;</span></code></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:multipart</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">content-type</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">boundary</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    </span><a href="#cv.body"><span class="deltaxml-old" style="background:#FF5555">c:body</span></a><span class="deltaxml-old" style="background:#FF5555">+</span><span class="deltaxml-old" style="background:#FF5555">&lt;/c:multipart&gt;</span></code></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:body</span><span class="deltaxml-old" style="background:#FF5555">  </span><strong><span class="deltaxml-old" style="background:#FF5555">content-type</span></strong><span class="deltaxml-old" style="background:#FF5555"> = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  encoding? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  id? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  description? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">  disposition? = </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    </span><var><span class="deltaxml-old" style="background:#FF5555">anyElement</span></var><span class="deltaxml-old" style="background:#FF5555">*</span><span class="deltaxml-old" style="background:#FF5555">&lt;/c:body&gt;</span></code></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:response</span><span class="deltaxml-old" style="background:#FF5555">  status? = </span><var><span class="deltaxml-old" style="background:#FF5555">integer</span></var><span class="deltaxml-old" style="background:#FF5555">&gt;</span><span class="deltaxml-old" style="background:#FF5555">    (</span><a href="#cv.header"><span class="deltaxml-old" style="background:#FF5555">c:header</span></a><span class="deltaxml-old" style="background:#FF5555">*,</span><span class="deltaxml-old" style="background:#FF5555">     (</span><a href="#cv.multipart"><span class="deltaxml-old" style="background:#FF5555">c:multipart</span></a><span class="deltaxml-old" style="background:#FF5555"> | </span><span class="deltaxml-old" style="background:#FF5555">      </span><a href="#cv.body"><span class="deltaxml-old" style="background:#FF5555">c:body</span></a><span class="deltaxml-old" style="background:#FF5555">)?)</span><span class="deltaxml-old" style="background:#FF5555">&lt;/c:response&gt;</span></code></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:line&gt;</span><span class="deltaxml-old" style="background:#FF5555">    </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&lt;/c:line&gt;</span></code></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-old" style="background:#FF5555">&lt;c:query&gt;</span><span class="deltaxml-old" style="background:#FF5555">    </span><var><span class="deltaxml-old" style="background:#FF5555">string</span></var><span class="deltaxml-old" style="background:#FF5555">&lt;/c:query&gt;</span></code></p></div><div class="appendix"><h2><a name="errors-list" id="errors-list"></a><span class="deltaxml-old" style="background:#FF5555">E List of Error Codes</span></h2><p><span class="deltaxml-old" style="background:#FF5555">The following error codes are defined by this specification.</span></p><div class="section"><h3><a name="app.static-errors" id="app.static-errors"></a><span class="deltaxml-old" style="background:#FF5555">E.1 Static Errors</span></h3><p><span class="deltaxml-old" style="background:#FF5555">The following </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static errors</span></a></em><span class="deltaxml-old" style="background:#FF5555"> are defined:</span></p><div id="static-error-summary"><h5><span class="deltaxml-old" style="background:#FF5555">Static Errors</span></h5><dl class="errs"><dt><a name="err.S0001"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0001</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if there are any loops in the connections between steps: no step can be connected to itself nor can there be any sequence of connections through other steps that leads back to itself.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0001"><span class="deltaxml-old" style="background:#FF5555">Connections</span></a></p></dd><dt><a name="err.S0002"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0002</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">All steps in the same scope must have unique names: it is a static error if two steps with the same name appear in the same scope.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0002"><span class="deltaxml-old" style="background:#FF5555">Scoping of Names</span></a></p></dd><dt><a name="err.S0003"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0003</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if any declared input is not connected.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0003"><span class="deltaxml-old" style="background:#FF5555">Inputs and Outputs</span></a></p></dd><dt><a name="err.S0004"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0004</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if an option or variable declaration duplicates the name of any other option or variable in the same environment.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0004"><span class="deltaxml-old" style="background:#FF5555">Scoping of Names</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.S0004.1"><span class="deltaxml-old" style="background:#FF5555">p:option</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.S0004.2"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></a></p></dd><dt><a name="err.S0005"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0005</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if the primary output port of any step is not connected.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0005"><span class="deltaxml-old" style="background:#FF5555">Inputs and Outputs</span></a></p></dd><dt><a name="err.S0006"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0006</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if the primary output port has no explicit connection and the last step in the subpipeline does not have a primary output port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0006"><span class="deltaxml-old" style="background:#FF5555">p:for-each</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.S0006.1"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.S0006.2"><span class="deltaxml-old" style="background:#FF5555">Declaring pipelines</span></a></p></dd><dt><a name="err.S0007"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0007</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if two subpipelines in a p:choose declare different outputs.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0007"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></a></p></dd><dt><a name="err.S0008"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0008</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if any element in the XProc namespace has attributes not defined by this specification unless they are extension attributes.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0008"><span class="deltaxml-old" style="background:#FF5555">Common errors</span></a></p></dd><dt><a name="err.S0009"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0009</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if the p:group and p:catch subpipelines declare different outputs.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0009"><span class="deltaxml-old" style="background:#FF5555">p:try</span></a></p></dd><dt><a name="err.S0010"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0010</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if a pipeline contains a step whose specified inputs, outputs, and options do not match the signature for steps of that type.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0010"><span class="deltaxml-old" style="background:#FF5555">Extension Steps</span></a></p></dd><dt><a name="err.S0011"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0011</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error to identify two ports with the same name on the same step.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0011"><span class="deltaxml-old" style="background:#FF5555">Document Inputs</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.S0011.1"><span class="deltaxml-old" style="background:#FF5555">Parameter Inputs</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.S0011.2"><span class="deltaxml-old" style="background:#FF5555">p:output</span></a></p></dd><dt><a name="err.S0014"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0014</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error to identify more than one output port as primary.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0014"><span class="deltaxml-old" style="background:#FF5555">p:output</span></a></p></dd><dt><a name="err.S0015"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0015</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if a compound step has no contained steps.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0015"><span class="deltaxml-old" style="background:#FF5555">Common errors</span></a></p></dd><dt><a name="err.S0017"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0017</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error to specify that an option is both required and has a default value.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0017"><span class="deltaxml-old" style="background:#FF5555">p:option</span></a></p></dd><dt><a name="err.S0018"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0018</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">If an option is required, it is a static error to invoke the step without specifying a value for that option.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0018"><span class="deltaxml-old" style="background:#FF5555">p:option</span></a></p></dd><dt><a name="err.S0019"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0019</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">it is a static error for a variable's document connection to refer to the output port of any step in the surrounding container's contained steps</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0019"><span class="deltaxml-old" style="background:#FF5555">p:variable</span></a></p></dd><dt><a name="err.S0020"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0020</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if the binding attribute on p:namespaces is specified and its value is not the name of an in-scope binding.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0020"><span class="deltaxml-old" style="background:#FF5555">Namespaces on variables, options, and parameters</span></a></p></dd><dt><a name="err.S0022"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0022</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">In all cases except the p:output of a compound step, it is a static error if the port identified by a p:pipe is not in the readable ports of the step that contains the p:pipe.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0022"><span class="deltaxml-old" style="background:#FF5555">p:pipe</span></a></p></dd><dt><a name="err.S0024"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0024</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if the content of the p:inline element does not consist of exactly one element, optionally preceded and/or followed by any number of processing instructions, comments or whitespace characters.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0024"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a></p></dd><dt><a name="err.S0025"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0025</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if the expanded-QName value of the type attribute is in no namespace or in the XProc namespace.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0025"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></a></p></dd><dt><a name="err.S0026"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0026</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if the port specified on the p:log is not the name of an output port on the step in which it appears or if more than one p:log element is applied to the same port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0026"><span class="deltaxml-old" style="background:#FF5555">p:log</span></a></p></dd><dt><a name="err.S0027"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0027</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if an option is specified with both the shortcut form and the long form.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0027"><span class="deltaxml-old" style="background:#FF5555">Syntactic Shortcut for Option Values</span></a></p></dd><dt><a name="err.S0028"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0028</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error to declare an option or variable in the XProc namespace.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0028"><span class="deltaxml-old" style="background:#FF5555">p:variable</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.S0028.1"><span class="deltaxml-old" style="background:#FF5555">p:option</span></a></p></dd><dt><a name="err.S0029"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0029</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error to specify a connection for a p:output inside a p:declare-step for an atomic step.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0029"><span class="deltaxml-old" style="background:#FF5555">p:output</span></a></p></dd><dt><a name="err.S0030"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0030</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error to specify that more than one input port is the primary.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0030"><span class="deltaxml-old" style="background:#FF5555">Document Inputs</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.S0030.1"><span class="deltaxml-old" style="background:#FF5555">Parameter Inputs</span></a></p></dd><dt><a name="err.S0031"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0031</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error to use an option on an atomic step that is not declared on steps of that type.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0031"><span class="deltaxml-old" style="background:#FF5555">Syntactic Shortcut for Option Values</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.S0031.1"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></a></p></dd><dt><a name="err.S0032"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0032</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if no connection is provided and the default readable port is undefined.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0032"><span class="deltaxml-old" style="background:#FF5555">Document Inputs</span></a></p></dd><dt><a name="err.S0033"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0033</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error to specify any kind of input other than “document” or “parameter”.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0033"><span class="deltaxml-old" style="background:#FF5555">Parameter Inputs</span></a></p></dd><dt><a name="err.S0034"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0034</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if the specified port is not a parameter input port or if no port is specified and the step does not have a primary parameter input port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0034"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></a></p></dd><dt><a name="err.S0035"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0035</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if the declaration of a parameter input port contains a connection; parameter input port declarations must be empty.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0035"><span class="deltaxml-old" style="background:#FF5555">Parameter Inputs</span></a></p></dd><dt><a name="err.S0036"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0036</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">All the step types in a pipeline or library must have unique names: it is a static error if any step type name is built-in and/or declared or defined more than once in the same scope.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0036"><span class="deltaxml-old" style="background:#FF5555">Scoping of Names</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.S0036.1"><span class="deltaxml-old" style="background:#FF5555">Handling Circular and Re-entrant Library Imports (Non-Normative)</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.S0036.2"><span class="deltaxml-old" style="background:#FF5555">Handling Circular and Re-entrant Library Imports (Non-Normative)</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.S0036.3"><span class="deltaxml-old" style="background:#FF5555">Handling Circular and Re-entrant Library Imports (Non-Normative)</span></a></p></dd><dt><a name="err.S0037"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0037</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if any step directly contains text nodes that do not consist entirely of whitespace.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0037"><span class="deltaxml-old" style="background:#FF5555">Common errors</span></a></p></dd><dt><a name="err.S0038"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0038</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if any required attribute is not provided.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0038"><span class="deltaxml-old" style="background:#FF5555">Common errors</span></a></p></dd><dt><a name="err.S0039"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0039</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if the port specified on the p:serialization is not the name of an output port on the pipeline in which it appears or if more than one p:serialization element is applied to the same port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0039"><span class="deltaxml-old" style="background:#FF5555">p:serialization</span></a></p></dd><dt><a name="err.S0040"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0040</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error to specify any value other than true.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0040"><span class="deltaxml-old" style="background:#FF5555">Parameter Inputs</span></a></p></dd><dt><a name="err.S0041"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0041</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error to specify both binding and element on the same p:namespaces element.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0041"><span class="deltaxml-old" style="background:#FF5555">Namespaces on variables, options, and parameters</span></a></p></dd><dt><a name="err.S0042"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0042</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error to attempt to provide a connection for an input port on the declaration of an atomic step.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0042"><span class="deltaxml-old" style="background:#FF5555">Document Inputs</span></a></p></dd><dt><a name="err.S0044"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0044</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if any element in the XProc namespace or any step has element children other than those specified for it by this specification. In particular, the presence of atomic steps for which there is no visible declaration may raise this error. </span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0044"><span class="deltaxml-old" style="background:#FF5555">Common errors</span></a></p></dd><dt><a name="err.S0048"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0048</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error to use a declared step as a compound step.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0048"><span class="deltaxml-old" style="background:#FF5555">Extension Steps</span></a></p></dd><dt><a name="err.S0051"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0051</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if the except-prefixes attribute on p:namespaces does not contain a list of tokens or if any of those tokens is not a prefix bound to a namespace in the in-scope namespaces of the p:namespaces element.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0051"><span class="deltaxml-old" style="background:#FF5555">Namespaces on variables, options, and parameters</span></a></p></dd><dt><a name="err.S0052"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0052</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if the URI of a p:import cannot be retrieved or if, once retrieved, it does not point to a p:library, p:declare-step, or p:pipeline.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0052"><span class="deltaxml-old" style="background:#FF5555">p:import</span></a></p></dd><dt><a name="err.S0053"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0053</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error to import a single pipeline if that pipeline does not have a type.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0053"><span class="deltaxml-old" style="background:#FF5555">p:import</span></a></p></dd><dt><a name="err.S0055"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0055</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if a primary parameter input port is unconnected and the pipeline that contains the step has no primary parameter input port unless at least one explicit p:with-param is provided for that port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0055"><span class="deltaxml-old" style="background:#FF5555">Parameter Inputs</span></a></p></dd><dt><a name="err.S0057"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0057</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if the exclude-inline-prefixes attribute does not contain a list of tokens or if any of those tokens (except #all or #default) is not a prefix bound to a namespace in the in-scope namespaces of the element on which it occurs.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0057"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a></p></dd><dt><a name="err.S0058"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0058</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if the value #default is used within the exclude-inline-prefixes attribute and there is no default namespace in scope.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0058"><span class="deltaxml-old" style="background:#FF5555">p:inline</span></a></p></dd><dt><a name="err.S0059"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0059</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if the pipeline element is not p:pipeline, p:declare-step, or p:library.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0059"><span class="deltaxml-old" style="background:#FF5555">Common errors</span></a></p></dd><dt><a name="err.S0060"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0060</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if the processor encounters an explicit request for a previous version of the language and it is unable to process the pipeline using those semantics.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0060"><span class="deltaxml-old" style="background:#FF5555">Backwards-compatible Mode</span></a></p></dd><dt><a name="err.S0061"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0061</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if a use-when expression refers to the context or attempts to refer to any documents or collections.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0061"><span class="deltaxml-old" style="background:#FF5555">Conditional Element Exclusion</span></a></p></dd><dt><a name="err.S0062"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0062</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if a required version attribute is not present.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0062"><span class="deltaxml-old" style="background:#FF5555">Versioning Considerations</span></a></p></dd><dt><a name="err.S0063"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0063</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a static error if the value of the version attribute is not a xs:decimal.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.S0063"><span class="deltaxml-old" style="background:#FF5555">Versioning Considerations</span></a></p></dd></dl></div></div><div class="section"><h3><a name="app.dynamic-errors" id="app.dynamic-errors"></a><span class="deltaxml-old" style="background:#FF5555">E.2 Dynamic Errors</span></h3><p><span class="deltaxml-old" style="background:#FF5555">The following </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic errors</span></a></em><span class="deltaxml-old" style="background:#FF5555"> are defined:</span></p><div id="dynamic-error-summary"><h5><span class="deltaxml-old" style="background:#FF5555">Dynamic Errors</span></h5><dl class="errs"><dt><a name="err.D0001"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0001</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if a non-XML resource is produced on a step output or arrives on a step input.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0001"><span class="deltaxml-old" style="background:#FF5555">Inputs and Outputs</span></a></p></dd><dt><a name="err.D0003"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0003</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the viewport source does not provide exactly one document. </span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0003"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.D0003.1"><span class="deltaxml-old" style="background:#FF5555">p:viewport-source</span></a></p></dd><dt><a name="err.D0004"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0004</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if no subpipeline is selected by the p:choose and no default is provided.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0004"><span class="deltaxml-old" style="background:#FF5555">p:choose</span></a></p></dd><dt><a name="err.D0005"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0005</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if more than one document appears on the connection for the xpath-context.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0005"><span class="deltaxml-old" style="background:#FF5555">p:xpath-context</span></a></p></dd><dt><a name="err.D0006"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0006</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">If sequence is not specified, or has the value false, then it is a dynamic error unless exactly one document appears on the declared port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0006"><span class="deltaxml-old" style="background:#FF5555">Document Inputs</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.D0006.1"><span class="deltaxml-old" style="background:#FF5555">p:exec</span></a></p></dd><dt><a name="err.D0007"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0007</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">If sequence is not specified on p:output, or has the value false, then it is a dynamic error if the step does not produce exactly one document on the declared port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0007"><span class="deltaxml-old" style="background:#FF5555">p:output</span></a></p></dd><dt><a name="err.D0008"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0008</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if a document sequence appears where a document to be used as the context node is expected.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0008"><span class="deltaxml-old" style="background:#FF5555">Processor XPath Context</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.D0008.1"><span class="deltaxml-old" style="background:#FF5555">p:variable</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.D0008.2"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.D0008.3"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></a></p></dd><dt><a name="err.D0009"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0009</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the element attribute on p:namespaces is specified and it does not identify a single element node.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0009"><span class="deltaxml-old" style="background:#FF5555">Namespaces on variables, options, and parameters</span></a></p></dd><dt><a name="err.D0010"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0010</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the match expression on p:viewport does not match an element or document.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0010"><span class="deltaxml-old" style="background:#FF5555">p:viewport</span></a></p></dd><dt><a name="err.D0011"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0011</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the resource referenced by a p:document element does not exist, cannot be accessed, or is not a well-formed XML document.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0011"><span class="deltaxml-old" style="background:#FF5555">p:document</span></a></p></dd><dt><a name="err.D0012"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0012</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if any attempt is made to dereference a URI where the scheme of the URI reference is not supported.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0012"><span class="deltaxml-old" style="background:#FF5555">Common errors</span></a></p></dd><dt><a name="err.D0013"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0013</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the specified namespace bindings are inconsistent; that is, if the same prefix is bound to two different namespace names.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0013"><span class="deltaxml-old" style="background:#FF5555">Namespaces on variables, options, and parameters</span></a></p></dd><dt><a name="err.D0014"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0014</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error for any unqualified attribute names other than “name”, “namespace”, or “value” to appear on a c:param element.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0014"><span class="deltaxml-old" style="background:#FF5555">The c:param element</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.D0014.1"><span class="deltaxml-old" style="background:#FF5555">The c:param-set element</span></a></p></dd><dt><a name="err.D0015"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0015</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the specified QName cannot be resolved with the in-scope namespace declarations.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0015"><span class="deltaxml-old" style="background:#FF5555">System Properties</span></a></p></dd><dt><a name="err.D0016"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0016</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the select expression on a p:input returns atomic values or anything other than element or document nodes (or an empty sequence).</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0016"><span class="deltaxml-old" style="background:#FF5555">Document Inputs</span></a></p></dd><dt><a name="err.D0017"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0017</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the running pipeline attempts to invoke a step which the processor does not know how to perform.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0017"><span class="deltaxml-old" style="background:#FF5555">Extension Steps</span></a></p></dd><dt><a name="err.D0018"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0018</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the parameter list contains any elements other than c:param.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0018"><span class="deltaxml-old" style="background:#FF5555">The c:param-set element</span></a></p></dd><dt><a name="err.D0019"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0019</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if any option value does not satisfy the type required for that option.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0019"><span class="deltaxml-old" style="background:#FF5555">Common errors</span></a></p></dd><dt><a name="err.D0020"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0020</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the combination of serialization options specified or defaulted is not allowed.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0020"><span class="deltaxml-old" style="background:#FF5555">p:serialization</span></a></p></dd><dt><a name="err.D0021"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0021</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error for a pipeline to attempt to access a resource for which it has insufficient privileges or perform a step which is forbidden.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0021"><span class="deltaxml-old" style="background:#FF5555">Security Considerations</span></a></p></dd><dt><a name="err.D0022"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0022</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if a processor that does not support PSVI annotations attempts to invoke a step which asserts that they are required.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0022"><span class="deltaxml-old" style="background:#FF5555">PSVIs in XProc</span></a></p></dd><dt><a name="err.D0025"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0025</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the namespace attribute is specified, the name contains a colon, and the specified namespace is not the same as the in-scope namespace binding for the specified prefix.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0025"><span class="deltaxml-old" style="background:#FF5555">The c:param element</span></a></p></dd><dt><a name="err.D0026"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0026</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the select expression makes reference to the context node, size, or position when the context item is undefined.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0026"><span class="deltaxml-old" style="background:#FF5555">p:variable</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.D0026.1"><span class="deltaxml-old" style="background:#FF5555">p:option</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.D0026.2"><span class="deltaxml-old" style="background:#FF5555">p:with-option</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.D0026.3"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></a></p></dd><dt><a name="err.D0028"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0028</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if any attribute value does not satisfy the type required for that attribute.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0028"><span class="deltaxml-old" style="background:#FF5555">Common errors</span></a></p></dd><dt><a name="err.D0029"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0029</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the document referenced by a p:data element does not exist, cannot be accessed, or cannot be encoded as specified.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0029"><span class="deltaxml-old" style="background:#FF5555">p:data</span></a></p></dd><dt><a name="err.D0030"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0030</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if a step is unable or incapable of performing its function.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0030"><span class="deltaxml-old" style="background:#FF5555">Common errors</span></a></p></dd><dt><a name="err.D0031"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0031</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error to use the XProc namespace in the name of a parameter.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0031"><span class="deltaxml-old" style="background:#FF5555">p:with-param</span></a></p></dd><dt><a name="err.D0033"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0033</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the name specified is not the name of an in-scope option or variable.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0033"><span class="deltaxml-old" style="background:#FF5555">Value Available</span></a></p></dd><dt><a name="err.D0034"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XD0034</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error to specify a new namespace or prefix if the lexical value of the specified name contains a colon (or if no wrapper is explicitly specified).</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.D0034"><span class="deltaxml-old" style="background:#FF5555">p:data</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.D0034.1"><span class="deltaxml-old" style="background:#FF5555">p:add-attribute</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.D0034.2"><span class="deltaxml-old" style="background:#FF5555">p:error</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.D0034.3"><span class="deltaxml-old" style="background:#FF5555">p:label-elements</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.D0034.4"><span class="deltaxml-old" style="background:#FF5555">p:pack</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.D0034.5"><span class="deltaxml-old" style="background:#FF5555">p:rename</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.D0034.6"><span class="deltaxml-old" style="background:#FF5555">p:wrap</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.D0034.7"><span class="deltaxml-old" style="background:#FF5555">p:wrap-sequence</span></a></p></dd></dl></div></div><div class="section"><h3><a name="app.step-errors" id="app.step-errors"></a><span class="deltaxml-old" style="background:#FF5555">E.3 Step Errors</span></h3><p><span class="deltaxml-old" style="background:#FF5555">The following </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic errors</span></a></em><span class="deltaxml-old" style="background:#FF5555"> can be raised by steps in this specification:</span></p><div id="step-error-summary"><h5><span class="deltaxml-old" style="background:#FF5555">Step Errors</span></h5><dl class="errs"><dt><a name="err.C0002"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0002</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the value starts with the string “--”.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0002"><span class="deltaxml-old" style="background:#FF5555">Request Entity body conversion</span></a></p></dd><dt><a name="err.C0003"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0003</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if a username or password is specified without specifying an auth-method, if the requested auth-method isn't supported, or the authentication challenge contains an authentication method that isn't supported.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0003"><span class="deltaxml-old" style="background:#FF5555">Specifying a request</span></a></p></dd><dt><a name="err.C0004"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0004</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the status-only attribute has the value true and the detailed attribute does not have the value true.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0004"><span class="deltaxml-old" style="background:#FF5555">Specifying a request</span></a></p></dd><dt><a name="err.C0005"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0005</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the request contains a c:body or c:multipart but the method does not allow for an entity body being sent with the request.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0005"><span class="deltaxml-old" style="background:#FF5555">Specifying a request</span></a></p></dd><dt><a name="err.C0006"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0006</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the method is not specified on a c:request. </span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0006"><span class="deltaxml-old" style="background:#FF5555">Specifying a request</span></a></p></dd><dt><a name="err.C0010"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0010</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if an encoding of base64 is specified and the character set is not specified or if the specified character set is not supported by the implementation.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0010"><span class="deltaxml-old" style="background:#FF5555">p:unescape-markup</span></a></p></dd><dt><a name="err.C0012"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0012</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the contents of the directory path are not available to the step due to access restrictions in the environment in which the pipeline is run.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0012"><span class="deltaxml-old" style="background:#FF5555">p:directory-list</span></a></p></dd><dt><a name="err.C0013"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0013</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the pattern matches a processing instruction and the new name has a non-null namespace.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0013"><span class="deltaxml-old" style="background:#FF5555">p:rename</span></a></p></dd><dt><a name="err.C0014"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0014</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the XML namespace (http://www.w3.org/XML/1998/namespace) or the XMLNS namespace (http://www.w3.org/2000/xmlns/) is the value of either the from option or the to option.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0014"><span class="deltaxml-old" style="background:#FF5555">p:namespace-rename</span></a></p></dd><dt><a name="err.C0017"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0017</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the absolute path does not identify a directory.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0017"><span class="deltaxml-old" style="background:#FF5555">p:directory-list</span></a></p></dd><dt><a name="err.C0019"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0019</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the documents are not equal, and the value of the fail-if-not-equal option is true.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0019"><span class="deltaxml-old" style="background:#FF5555">p:compare</span></a></p></dd><dt><a name="err.C0020"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0020</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the the user specifies a value or values that are inconsistent with each other or with the requirements of the step or protocol.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0020"><span class="deltaxml-old" style="background:#FF5555">Specifying a request</span></a></p></dd><dt><a name="err.C0022"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0022</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">it is a dynamic error if the content of the c:body element does not consist of exactly one element, optionally preceded and/or followed by any number of processing instructions, comments or whitespace characters</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0022"><span class="deltaxml-old" style="background:#FF5555">Request Entity body conversion</span></a></p></dd><dt><a name="err.C0023"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0023</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if a select expression or match pattern returns a node type that is not allowed by the step.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0023"><span class="deltaxml-old" style="background:#FF5555">Common errors</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.C0023.1"><span class="deltaxml-old" style="background:#FF5555">p:add-attribute</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.C0023.2"><span class="deltaxml-old" style="background:#FF5555">p:insert</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.C0023.3"><span class="deltaxml-old" style="background:#FF5555">p:label-elements</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.C0023.4"><span class="deltaxml-old" style="background:#FF5555">p:make-absolute-uris</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.C0023.5"><span class="deltaxml-old" style="background:#FF5555">p:rename</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.C0023.6"><span class="deltaxml-old" style="background:#FF5555">p:replace</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.C0023.7"><span class="deltaxml-old" style="background:#FF5555">p:set-attributes</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.C0023.8"><span class="deltaxml-old" style="background:#FF5555">p:unwrap</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.C0023.9"><span class="deltaxml-old" style="background:#FF5555">p:wrap</span></a></p></dd><dt><a name="err.C0025"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0025</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the match pattern matches anything other than an element node and the value of the position option is “first-child” or “last-child”.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0025"><span class="deltaxml-old" style="background:#FF5555">p:insert</span></a></p></dd><dt><a name="err.C0027"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0027</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the document is not valid or the step doesn't support DTD validation.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0027"><span class="deltaxml-old" style="background:#FF5555">p:load</span></a></p></dd><dt><a name="err.C0028"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0028</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">it is a dynamic error if the content of the c:body element does not consist entirely of characters</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0028"><span class="deltaxml-old" style="background:#FF5555">Request Entity body conversion</span></a></p></dd><dt><a name="err.C0029"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0029</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if an XInclude error occurs during processing.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0029"><span class="deltaxml-old" style="background:#FF5555">p:xinclude</span></a></p></dd><dt><a name="err.C0030"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0030</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the override-content-type value cannot be used (e.g. text/plain to override image/png).</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0030"><span class="deltaxml-old" style="background:#FF5555">Managing the response</span></a></p></dd><dt><a name="err.C0033"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0033</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the command cannot be run.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0033"><span class="deltaxml-old" style="background:#FF5555">p:exec</span></a></p></dd><dt><a name="err.C0034"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0034</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the current working directory cannot be changed to the value of the cwd option.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0034"><span class="deltaxml-old" style="background:#FF5555">p:exec</span></a></p></dd><dt><a name="err.C0035"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0035</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error to specify both result-is-xml and wrap-result-lines.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0035"><span class="deltaxml-old" style="background:#FF5555">p:exec</span></a></p></dd><dt><a name="err.C0036"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0036</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the requested hash algorithm is not one that the processor understands or if the value or parameters are not appropriate for that algorithm.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0036"><span class="deltaxml-old" style="background:#FF5555">p:hash</span></a></p></dd><dt><a name="err.C0037"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0037</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the value provided is not a properly x-www-form-urlencoded value.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0037"><span class="deltaxml-old" style="background:#FF5555">p:www-form-urldecode</span></a></p></dd><dt><a name="err.C0038"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0038</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the specified version of XSLT is not available.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0038"><span class="deltaxml-old" style="background:#FF5555">p:xslt</span></a></p></dd><dt><a name="err.C0039"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0039</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if a sequence of documents (including an empty sequence) is provided to an XSLT 1.0 step.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0039"><span class="deltaxml-old" style="background:#FF5555">p:xslt</span></a></p></dd><dt><a name="err.C0040"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0040</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the document element of the document that arrives on the source port is not c:request.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0040"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></a></p></dd><dt><a name="err.C0050"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0050</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the URI scheme is not supported or the step cannot store to the specified location.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0050"><span class="deltaxml-old" style="background:#FF5555">p:store</span></a></p></dd><dt><a name="err.C0051"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0051</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the content-type specified is not supported by the implementation.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0051"><span class="deltaxml-old" style="background:#FF5555">p:unescape-markup</span></a></p></dd><dt><a name="err.C0052"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0052</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the encoding specified is not supported by the implementation.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0052"><span class="deltaxml-old" style="background:#FF5555">Request Entity body conversion</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.C0052.1"><span class="deltaxml-old" style="background:#FF5555">p:unescape-markup</span></a></p></dd><dt><a name="err.C0053"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0053</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the assert-valid option is true and the input document is not valid.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0053"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-relax-ng</span></a><span class="deltaxml-old" style="background:#FF5555">, </span><a href="#err.inline.C0053.1"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-xml-schema</span></a></p></dd><dt><a name="err.C0054"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0054</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the assert-valid option is true and any Schematron assertions fail.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0054"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-schematron</span></a></p></dd><dt><a name="err.C0055"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0055</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the implementation does not support the specified mode.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0055"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-xml-schema</span></a></p></dd><dt><a name="err.C0056"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0056</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the specified initial mode or named template cannot be applied to the specified stylesheet.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0056"><span class="deltaxml-old" style="background:#FF5555">p:xslt</span></a></p></dd><dt><a name="err.C0057"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0057</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the sequence that results from evaluating the XQuery contains items other than documents and elements.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0057"><span class="deltaxml-old" style="background:#FF5555">p:xquery</span></a></p></dd><dt><a name="err.C0058"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0058</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the all and relative options are both true.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0058"><span class="deltaxml-old" style="background:#FF5555">p:add-xml-base</span></a></p></dd><dt><a name="err.C0059"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0059</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the QName value in the attribute-name option uses the prefix “xmlns” or any other prefix that resolves to the namespace name “http://www.w3.org/2000/xmlns/”. </span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0059"><span class="deltaxml-old" style="background:#FF5555">p:add-attribute</span></a></p></dd><dt><a name="err.C0060"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0060</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the processor does not support the specified version of the UUID algorithm.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0060"><span class="deltaxml-old" style="background:#FF5555">p:uuid</span></a></p></dd><dt><a name="err.C0061"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0061</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the name of any encoded parameter name is not a valid xs:NCName.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0061"><span class="deltaxml-old" style="background:#FF5555">p:www-form-urldecode</span></a></p></dd><dt><a name="err.C0062"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0062</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the match option matches a namespace node.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0062"><span class="deltaxml-old" style="background:#FF5555">p:delete</span></a></p></dd><dt><a name="err.C0063"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0063</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the path-separator option is specified and is not exactly one character long.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0063"><span class="deltaxml-old" style="background:#FF5555">p:exec</span></a></p></dd><dt><a name="err.C0064"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0064</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the exit code from the command is greater than the specified failure-threshold value.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0064"><span class="deltaxml-old" style="background:#FF5555">p:exec</span></a></p></dd><dt><a name="err.C0066"></a><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0066</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the arg-separator option is specified and is not exactly one character long.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0066"><span class="deltaxml-old" style="background:#FF5555">p:exec</span></a></p></dd></dl></div></div></div><div class="appendix"><h2><a name="namespace-fixup-guidance" id="namespace-fixup-guidance"></a><span class="deltaxml-old" style="background:#FF5555">F Guidance on Namespace Fixup (Non-Normative)</span></h2><p><span class="deltaxml-old" style="background:#FF5555">An XProc processor may find it necessary to add missing namespace declarations to ensure that a document can be serialized. While this process is implementation defined, the purpose of this appendix is to provide guidance as to what an implementation might do to either prevent such situations or fix them as before serialization.</span></p><p><span class="deltaxml-old" style="background:#FF5555">When a namespace binding is generated, the prefix associated with the QName of the element or attribute in question should be used. From an Infoset perspective, this is accomplished by setting the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">[prefix]</span></tt><span class="deltaxml-old" style="background:#FF5555"> on the element or attribute. Then when an implementation needs to add a namespace binding, it can reuse that prefix if possible. If reusing the prefix is not possible, the implementation must generate a new prefix that is unique to the in-scope namespace of the element or owner element of the attribute.</span></p><p><span class="deltaxml-old" style="background:#FF5555">An implementation can avoid namespace fixup by making sure that the standard step library does not output documents that require fixup. The following list contains suggestions as to how to accomplish this within the steps:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-old" style="background:#FF5555">Any step that outputs an element in the step vocabulary namespace </span><tt class="uri"><span class="deltaxml-old" style="background:#FF5555">http://www.w3.org/ns/xproc-step</span></tt><span class="deltaxml-old" style="background:#FF5555"> must ensure that namespace is declared. An implementation should generate a namespace binding using the prefix “</span><tt class="literal"><span class="deltaxml-old" style="background:#FF5555">c</span></tt><span class="deltaxml-old" style="background:#FF5555">”.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">When attributes are added by </span><a href="#c.add-attribute"><span class="deltaxml-old" style="background:#FF5555">p:add-attribute</span></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#c.set-attributes"><span class="deltaxml-old" style="background:#FF5555">p:set-attributes</span></a><span class="deltaxml-old" style="background:#FF5555">, the step must ensure the namespace of the attributes added are declared. If the prefix used by the QName is not in the in-scope namespaces of the element on which the attribute was added, the step must add a namespace declaration of the prefix to the in-scope namespaces. If the prefix is amongst the in-scope namespace and is not bound to the same namespace name, a new prefix and namespace binding must be added. When a new prefix is generated, the prefix associated with the attribute should be changed to reflect that generated prefix value. </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">When an element is renamed by </span><a href="#c.rename"><span class="deltaxml-old" style="background:#FF5555">p:rename</span></a><span class="deltaxml-old" style="background:#FF5555">, the step must ensure the namespace of the element is declared. If the prefix used by the QName is not in the in-scope namespaces of the element being renamed, the step must add a namespace declaration of the prefix to the in-scope namespaces. If the prefix is amongst the in-scope namespace and is not bound to the same namespace name, a new prefix and namespace binding must be added. When a new prefix is generated, the prefix associated with the element should be changed to reflect that generated prefix value. </span></p><p><span class="deltaxml-old" style="background:#FF5555">If the element does not have a namespace name and there is a default namespace, the default namespace must be undeclared. For each of the child elements, the original default namespace declaration must be preserved by adding a default namespace declaration unless the child element has a different default namespace.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">When an attribute is renamed by </span><a href="#c.rename"><span class="deltaxml-old" style="background:#FF5555">p:rename</span></a><span class="deltaxml-old" style="background:#FF5555">, the step must ensure the namespace of the renamed attribute is declared. If the prefix used by the QName is not in the in-scope namespaces of the element on which the attribute was added, the step must add a namespace declaration of the prefix to the in-scope namespaces. If the prefix is amongst the in-scope namespace and is not bound to the same namespace name, a new prefix and namespace binding must be added. When a new prefix is generated, the prefix associated with the attribute should be changed to reflect that generated prefix value. </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">When an element wraps content via </span><a href="#c.wrap"><span class="deltaxml-old" style="background:#FF5555">p:wrap</span></a><span class="deltaxml-old" style="background:#FF5555">, there may be in-scope namespaces coming from ancestor elements of the new wrapper element. The step must ensure the namespace of the element is declared properly. By default, the wrapper element will inherit the in-scope namespaces of the parent element if one exists. As such, there may be a existing namespace declaration or default namespace.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the prefix used by the QName is not in the in-scope namespaces of the wrapper element, the step must add a namespace declaration of the prefix to the in-scope namespaces. If the prefix is amongst the in-scope namespace and is not bound to the same namespace name, a new prefix and namespace binding must be added. When a new prefix is generated, the prefix associated with the wrapper element should be changed to reflect that generated prefix value. </span></p><p><span class="deltaxml-old" style="background:#FF5555">If the element does not have a namespace name and there is a default namespace, the default namespace must be undeclared. For each of the child elements, the original default namespace declaration must be preserved by adding a default namespace declaration unless the child element has a different default namespace.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">When the wrapper element is added for </span><a href="#c.wrap-sequence"><span class="deltaxml-old" style="background:#FF5555">p:wrap-sequence</span></a><span class="deltaxml-old" style="background:#FF5555"> or </span><a href="#c.pack"><span class="deltaxml-old" style="background:#FF5555">p:pack</span></a><span class="deltaxml-old" style="background:#FF5555">, the prefix used by the QName must be added to the in-scope namespaces.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">When a element is removed via </span><a href="#c.unwrap"><span class="deltaxml-old" style="background:#FF5555">p:unwrap</span></a><span class="deltaxml-old" style="background:#FF5555">, an in-scope namespaces that are declared on the element must be copied to any child element except when the child element declares the same prefix or declares a new default namespace.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">In the output from </span><a href="#c.xslt"><span class="deltaxml-old" style="background:#FF5555">p:xslt</span></a><span class="deltaxml-old" style="background:#FF5555">, if an element was generated from the xsl:element or an attribute from xsl:attribute, the step must guarantee that an namespace declaration exists for the namespace name used. Depending on the XSLT implementation, the namespace declaration for the namespace name of the element or attribute may not be declared. It may also be the case that the original prefix is available. If the original prefix is available, the step should attempt to re-use that prefix. Otherwise, it must generate a prefix for a namespace binding and change the prefix associated the element or attribute.</span></p></li></ol></div></div><div class="appendix"><h2><a name="handling-imports" id="handling-imports"></a><span class="deltaxml-old" style="background:#FF5555">G Handling Circular and Re-entrant Library Imports (Non-Normative)</span></h2><p><span class="deltaxml-old" style="background:#FF5555">When handling imports, an implementation needs to be able to detect the following situations, and distinguish them from cases where multiple import chains produce genuinely conflicting step definitions:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-old" style="background:#FF5555">Circular imports: A imports B, B imports A.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Re-entrant imports: A imports B and C, B imports D, C imports D.</span></p></li></ol></div><p><span class="deltaxml-old" style="background:#FF5555">One way to achieve this is as follows:</span></p><p><span class="termdef" id="dt-step-type-exports"><span class="deltaxml-old" style="background:#FF5555">[Definition: The </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">step type exports</span></em><span class="deltaxml-old" style="background:#FF5555"> of an XProc element, against the background of a set of URIs of resources already visited (call this set </span><em><span class="deltaxml-old" style="background:#FF5555">Visited</span></em><span class="deltaxml-old" style="background:#FF5555">), are defined by cases.]</span></span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><a href="#dt-step-type-exports"><span class="deltaxml-old" style="background:#FF5555">step type exports</span></a><span class="deltaxml-old" style="background:#FF5555"> of an XProc element are as follows:</span></p><div class="variablelist"><dl><dt><span class="deltaxml-old" style="background:#FF5555">p:pipeline, p:declare-step</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">A singleton bag containing the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">type</span></tt><span class="deltaxml-old" style="background:#FF5555"> of the element</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">p:library</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The </span><em class="glossterm"><a href="#dt-bag-merger"><span class="deltaxml-old" style="background:#FF5555">bag-merger</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of the </span><em class="glossterm"><a href="#dt-step-type-exports"><span class="deltaxml-old" style="background:#FF5555">step type exports</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of all the element's children</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">p:import</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Let </span><em><span class="deltaxml-old" style="background:#FF5555">RU</span></em><span class="deltaxml-old" style="background:#FF5555"> be the actual resolved URI of the resource identified by the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">href</span></tt><span class="deltaxml-old" style="background:#FF5555"> of the element. If </span><em><span class="deltaxml-old" style="background:#FF5555">RU</span></em><span class="deltaxml-old" style="background:#FF5555"> is a member of </span><em><span class="deltaxml-old" style="background:#FF5555">Visited</span></em><span class="deltaxml-old" style="background:#FF5555">, then an empty bag, otherwise update </span><em><span class="deltaxml-old" style="background:#FF5555">Visited</span></em><span class="deltaxml-old" style="background:#FF5555"> by adding </span><em><span class="deltaxml-old" style="background:#FF5555">RU</span></em><span class="deltaxml-old" style="background:#FF5555"> to it, and return the </span><em class="glossterm"><a href="#dt-step-type-exports"><span class="deltaxml-old" style="background:#FF5555">step type exports</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of the document element of the retrieved representation</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">all other elements</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">An empty bag</span></p></dd></dl></div><p><span class="deltaxml-old" style="background:#FF5555">The changes to </span><em><span class="deltaxml-old" style="background:#FF5555">Visited</span></em><span class="deltaxml-old" style="background:#FF5555"> mandated by the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:import</span></tt><span class="deltaxml-old" style="background:#FF5555"> case above are persistent, not scoped. That is, not only the recursive processing of the imported resource but also subsequent processing of siblings and ancestors must be against the background of the updated value. In practice this means either using a side-effected global variable, or not only passing </span><em><span class="deltaxml-old" style="background:#FF5555">Visited</span></em><span class="deltaxml-old" style="background:#FF5555"> as an argument to any recursive or iterative processing, but also </span><em><span class="deltaxml-old" style="background:#FF5555">returning</span></em><span class="deltaxml-old" style="background:#FF5555"> its updated value for subsequent use, along with the bag of step types.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Given a pipeline library document with actual resolved URI </span><em><span class="deltaxml-old" style="background:#FF5555">DU</span></em><span class="deltaxml-old" style="background:#FF5555">, </span><a name="err.inline.S0036.1"></a><span class="deltaxml-old" style="background:#FF5555">it is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0036"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0036</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><em class="glossterm"><a href="#dt-step-type-exports"><span class="deltaxml-old" style="background:#FF5555">step type exports</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of the document element of the retrieved representation, against the background of a singleton set containing </span><em><span class="deltaxml-old" style="background:#FF5555">DU</span></em><span class="deltaxml-old" style="background:#FF5555"> as the initial </span><em><span class="deltaxml-old" style="background:#FF5555">Visited</span></em><span class="deltaxml-old" style="background:#FF5555"> set, contains any duplicates.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Given a top-level pipeline document with actual resolved URI </span><em><span class="deltaxml-old" style="background:#FF5555">DU</span></em><span class="deltaxml-old" style="background:#FF5555">, </span><a name="err.inline.S0036.2"></a><span class="deltaxml-old" style="background:#FF5555">it is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0036"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0036</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><em class="glossterm"><a href="#dt-bag-merger"><span class="deltaxml-old" style="background:#FF5555">bag-merger</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of the </span><em class="glossterm"><a href="#dt-step-type-exports"><span class="deltaxml-old" style="background:#FF5555">step type exports</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of the document element of the retrieved representation with the </span><em class="glossterm"><a href="#dt-step-type-exports"><span class="deltaxml-old" style="background:#FF5555">step type exports</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of its children, against the background of a singleton set containing </span><em><span class="deltaxml-old" style="background:#FF5555">DU</span></em><span class="deltaxml-old" style="background:#FF5555"> as the initial </span><em><span class="deltaxml-old" style="background:#FF5555">Visited</span></em><span class="deltaxml-old" style="background:#FF5555"> set, contains any duplicates.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Given a non-top-level </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt><span class="deltaxml-old" style="background:#FF5555"> or </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt><span class="deltaxml-old" style="background:#FF5555"> element, </span><a name="err.inline.S0036.3"></a><span class="deltaxml-old" style="background:#FF5555">it is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-old" style="background:#FF5555">static error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.S0036"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XS0036</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><em class="glossterm"><a href="#dt-bag-merger"><span class="deltaxml-old" style="background:#FF5555">bag-merger</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of the </span><em class="glossterm"><a href="#dt-step-type-exports"><span class="deltaxml-old" style="background:#FF5555">step type exports</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of its parent with the </span><em class="glossterm"><a href="#dt-step-type-exports"><span class="deltaxml-old" style="background:#FF5555">step type exports</span></a></em><span class="deltaxml-old" style="background:#FF5555"> of its children, against the background of a copy of the </span><em><span class="deltaxml-old" style="background:#FF5555">Visited</span></em><span class="deltaxml-old" style="background:#FF5555"> set of its parent as the initial </span><em><span class="deltaxml-old" style="background:#FF5555">Visited</span></em><span class="deltaxml-old" style="background:#FF5555"> set, contains any duplicates.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The phrase "a copy of the </span><em><span class="deltaxml-old" style="background:#FF5555">Visited</span></em><span class="deltaxml-old" style="background:#FF5555"> set" in the preceding paragraph is meant to indicate that checking of non-top-level </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></tt><span class="deltaxml-old" style="background:#FF5555"> or </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></tt><span class="deltaxml-old" style="background:#FF5555"> elements does </span><em><span class="deltaxml-old" style="background:#FF5555">not</span></em><span class="deltaxml-old" style="background:#FF5555"> have a persistent impact on the checking of its parent. The contrast is that whereas changes to </span><em><span class="deltaxml-old" style="background:#FF5555">Visited</span></em><span class="deltaxml-old" style="background:#FF5555"> pass both up </span><em><span class="deltaxml-old" style="background:#FF5555">and</span></em><span class="deltaxml-old" style="background:#FF5555"> down through </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">p:import</span></tt><span class="deltaxml-old" style="background:#FF5555">, they pass only </span><em><span class="deltaxml-old" style="background:#FF5555">down</span></em><span class="deltaxml-old" style="background:#FF5555"> through </span><em><span class="deltaxml-old" style="background:#FF5555">p:pipeline</span></em><span class="deltaxml-old" style="background:#FF5555"> and </span><em><span class="deltaxml-old" style="background:#FF5555">p:declare-step</span></em><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="termdef" id="dt-bag-merger"><span class="deltaxml-old" style="background:#FF5555">[Definition: The </span><em class="glossterm"><span class="deltaxml-old" style="background:#FF5555">bag-merger</span></em><span class="deltaxml-old" style="background:#FF5555"> of two or more bags (where a bag is an unordered list or, equivalently, something like a set except that it may contain duplicates) is a bag constructed by starting with an empty bag and adding each member of each of the input bags in turn to it. It follows that the cardinality of the result is the sum of the cardinality of all the input bags.]</span></span></p></div><div class="appendix"><h2><a name="parallelism" id="parallelism"></a><span class="deltaxml-old" style="background:#FF5555">H Sequential steps, parallelism, and side-effects</span></h2><p><span class="deltaxml-old" style="background:#FF5555">XProc imposes as few constraints on the order in which steps must be evaluated as possible and almost no constraints on parallel execution.</span></p><p><span class="deltaxml-old" style="background:#FF5555">In the simple, and we believe overwhelmingly common case, inputs flow into the pipeline, through the pipeline from one step to the next, and results are produced at the end. The order of the steps is constrained by the input/output connections between them. Implementations are free to execute them in a purely sequential fashion or in parallel, as they see fit. The results are the same in either case.</span></p><p><span class="deltaxml-old" style="background:#FF5555">This is not true for pipelines which rely on side effects, such as the state of the filesystem or the state of the web. Consider the following pipeline:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:pipeline xmlns:p="http://www.w3.org/ns/xproc" version="1.0" name="main"&gt; &lt;p:xslt name="generate-stylesheet"&gt; &lt;p:input port="source"&gt; &lt;p:document href="someURI"/&gt; &lt;/p:input&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="someOtherURI"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;p:store name="save-xslt" href="gen-style.xsl"/&gt; &lt;p:xslt name="style"&gt; &lt;p:input port="source"&gt; &lt;p:pipe step="main" port="source"/&gt; &lt;/p:input&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="gen-style.xsl"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;/p:pipeline&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">There's no guarantee that “style” step will execute after the “save-xslt” step. In this case, the solution is straightforward. Even if you need the saved stylesheet, you don't need to rely on it in your pipeline:</span></p><div class="programlisting"><pre><span class="deltaxml-old" style="background:#FF5555">&lt;p:pipeline xmlns:p="http://www.w3.org/ns/xproc" version="1.0" name="main"&gt; &lt;p:xslt name="generate-stylesheet"&gt; &lt;p:input port="source"&gt; &lt;p:document href="someURI"/&gt; &lt;/p:input&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="someOtherURI"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;p:store name="save-xslt" href="gen-style.xsl"/&gt; &lt;p:xslt name="style"&gt; &lt;p:input port="source"&gt; &lt;p:pipe step="main" port="source"/&gt; &lt;/p:input&gt; &lt;p:input port="stylesheet"&gt; &lt;p:pipe step="generate-stylesheet" port="result"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;/p:pipeline&gt; </span></pre></div><p><span class="deltaxml-old" style="background:#FF5555">Now the result is independent of the implementation strategy.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Implementations are free to invent additional control structures using </span><a href="#p.pipeinfo"><tt class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:pipeinfo</span></tt></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#extension-attributes"><span class="deltaxml-old" style="background:#FF5555">extension attributes</span></a><span class="deltaxml-old" style="background:#FF5555"> to provide greater control over parallelism in their implementations.</span></p></div><div class="appendix"><h2><a name="xproc-media-type" id="xproc-media-type"></a><span class="deltaxml-old" style="background:#FF5555">I The </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">application/xproc+xml</span></tt><span class="deltaxml-old" style="background:#FF5555"> media type</span></h2><p><span class="deltaxml-old" style="background:#FF5555">This appendix registers a new MIME media type, “</span><span class="quote"><tt class="code"><span class="deltaxml-old" style="background:#FF5555">application/xproc+xml</span></tt></span><span class="deltaxml-old" style="background:#FF5555">”.</span></p><div class="section"><h3><a name="media-type-registration" id="media-type-registration"></a><span class="deltaxml-old" style="background:#FF5555">I.1 Registration of MIME media type application/xproc+xml</span></h3><div class="variablelist"><dl><dt><span class="deltaxml-old" style="background:#FF5555">MIME media type name:</span></dt><dd><p><tt class="code"><span class="deltaxml-old" style="background:#FF5555">application</span></tt></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">MIME subtype name:</span></dt><dd><p><tt class="code"><span class="deltaxml-old" style="background:#FF5555">xproc+xml</span></tt></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Required parameters:</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">None. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Optional parameters:</span></dt><dd><div class="variablelist"><dl><dt><tt class="code"><span class="deltaxml-old" style="background:#FF5555">charset</span></tt></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">This parameter has identical semantics to the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">charset</span></tt><span class="deltaxml-old" style="background:#FF5555"> parameter of the </span><tt class="code"><span class="deltaxml-old" style="background:#FF5555">application/xml</span></tt><span class="deltaxml-old" style="background:#FF5555"> media type as specified in [</span><a href="#rfc3023"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RFC 3023</span></span></a><span class="deltaxml-old" style="background:#FF5555">] or its successors. </span></p></dd></dl></div></dd><dt><span class="deltaxml-old" style="background:#FF5555">Encoding considerations:</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">By virtue of XProc content being XML, it has the same considerations when sent as “</span><span class="quote"><tt class="code"><span class="deltaxml-old" style="background:#FF5555">application/xproc+xml</span></tt></span><span class="deltaxml-old" style="background:#FF5555">” as does XML. See [</span><a href="#rfc3023"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RFC 3023</span></span></a><span class="deltaxml-old" style="background:#FF5555">], Section 3.2. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Security considerations:</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Several XProc elements may refer to arbitrary URIs. In this case, the security issues of [</span><a href="#rfc2396"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RFC 2396</span></span></a><span class="deltaxml-old" style="background:#FF5555">], section 7, should be considered.</span></p><p><span class="deltaxml-old" style="background:#FF5555">In addition, because of the extensibility features of XProc, it is possible that “application/xproc+xml” may describe content that has security implications beyond those described here. However, only in the case where the processor recognizes and processes the additional content, or where further processing of that content is dispatched to other processors, would security issues potentially arise. And in that case, they would fall outside the domain of this registration document.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Interoperability considerations:</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">This specification describes processing semantics that dictate behavior that must be followed when dealing with, among other things, unrecognized elements.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Because XProc is extensible, conformant "application/xproc+xml" processors can expect that content received is well-formed XML, but it cannot be guaranteed that the content is valid XProc or that the processor will recognize all of the elements and attributes in the document.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Published specification:</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">This media type registration is for XProc documents as described by this specification which is located at </span><a href="http://www.w3.org/TR/xproc"><span class="deltaxml-old" style="background:#FF5555">http://www.w3.org/TR/xproc</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Applications which use this media type:</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">There is no experimental, vendor specific, or personal tree predecessor to “</span><span class="quote"><tt class="code"><span class="deltaxml-old" style="background:#FF5555">application/xproc+xml</span></tt></span><span class="deltaxml-old" style="background:#FF5555">”, reflecting the fact that no applications currently recognize it. This new type is being registered in order to allow for the deployment of XProc on the World Wide Web, as a first class XML application. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Additional information:</span></dt><dd><div class="variablelist"><dl><dt><span class="deltaxml-old" style="background:#FF5555">Magic number(s):</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">There is no single initial octet sequence that is always present in XProc documents. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">File extension(s):</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">XProc documents are most often identified with the extension “</span><span class="quote"><tt class="filename"><span class="deltaxml-old" style="background:#FF5555">.xpl</span></tt></span><span class="deltaxml-old" style="background:#FF5555">”. </span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Macintosh File Type Code(s):</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">TEXT</span></p></dd></dl></div></dd><dt><span class="deltaxml-old" style="background:#FF5555">Person &amp; email address to contact for further information:</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Norman Walsh, </span><tt class="email"><span class="deltaxml-old" style="background:#FF5555">&lt;</span><a href="mailto:Norman.Walsh@MarkLogic.com"><span class="deltaxml-old" style="background:#FF5555">Norman.Walsh@MarkLogic.com</span></a><span class="deltaxml-old" style="background:#FF5555">&gt;</span></tt><span class="deltaxml-old" style="background:#FF5555">.</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Intended usage:</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">COMMON</span></p></dd><dt><span class="deltaxml-old" style="background:#FF5555">Author/Change controller:</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The XProc specification is a work product of the World Wide Web Consortium's XML Processing Model Working Group. The W3C has change control over these specifications.</span></p></dd></dl></div></div><div class="section"><h3><a name="fragid" id="fragid"></a><span class="deltaxml-old" style="background:#FF5555">I.2 Fragment Identifiers</span></h3><p><span class="deltaxml-old" style="background:#FF5555">For documents labeled as “</span><span class="quote"><tt class="code"><span class="deltaxml-old" style="background:#FF5555">application/xproc+xml</span></tt></span><span class="deltaxml-old" style="background:#FF5555">”, the fragment identifier notation is exactly that for “</span><span class="quote"><tt class="code"><span class="deltaxml-old" style="background:#FF5555">application/xml</span></tt></span><span class="deltaxml-old" style="background:#FF5555">”, as specified in [</span><a href="#rfc3023"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RFC 3023</span></span></a><span class="deltaxml-old" style="background:#FF5555">] or its successors.</span></p></div></div><section id="introduction" class="section"><div class="section-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">1 Introduction</span></h2></div><p><span class="deltaxml-new" style="background:#90EE90">An XML Pipeline specifies a sequence of operations to be performed on a collection of XML input documents. Pipelines take zero or more XML documents as their input and produce zero or more XML documents as their output.</span></p><p><span class="deltaxml-new" style="background:#90EE90">A </span><em class="glossterm"><a href="#dt-pipeline"><span class="deltaxml-new" style="background:#90EE90">pipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90"> consists of steps. Like pipelines, steps take zero or more XML documents as their inputs and produce zero or more XML documents as their outputs. The inputs of a step come from the web, from the pipeline document, from the inputs to the pipeline itself, or from the outputs of other steps in the pipeline. The outputs from a step are consumed by other steps, are outputs of the pipeline as a whole, or are discarded.</span></p><p><span class="deltaxml-new" style="background:#90EE90">There are three kinds of steps: atomic steps, compound steps, and multi-container steps. Atomic steps carry out single operations and have no substructure as far as the pipeline is concerned. Compound steps and multi-container steps control the execution of other steps, which they include in the form of one or more subpipelines.</span></p><p><span class="deltaxml-new" style="background:#90EE90">This specification defines a standard library, </span><a href="#std-components" title="Standard Step Library"><span class="deltaxml-new" style="background:#90EE90">Section 7, “Standard Step Library”</span></a><span class="deltaxml-new" style="background:#90EE90">, of steps. Pipeline implementations </span><span class="rfc2119" id="introduction.5.2"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> support additional types of steps as well. </span></p><p><a href="#fig-xival" title="A simple, linear XInclude/Validate pipeline"><span class="deltaxml-new" style="background:#90EE90">Figure 1, “A simple, linear XInclude/Validate pipeline”</span></a><span class="deltaxml-new" style="background:#90EE90"> is a graphical representation of a simple pipeline that performs XInclude processing and validation on a document.</span></p><figure id="fig-xival" class="figure-wrapper"><div class="figure"><div id="fig-xival.2" title="A simple, linear XInclude/Validate pipeline" class="mediaobject"><span class="deltaxml-new-img"><img style="border: 2px solid green" src="file:/home/travis/build/ndw/specification/langspec/graphics/sch-xinclude-validate-pipeline.png" alt="A simple, linear XInclude/Validate pipeline" /></span></div></div><div class="title"><span class="deltaxml-new" style="background:#90EE90">Figure 1. A simple, linear XInclude/Validate pipeline</span></div></figure><p><span class="deltaxml-new" style="background:#90EE90">This is a pipeline that consists of two atomic steps, XInclude and Validate with XML Schema. The pipeline itself has two inputs, “source” (a source document) and “schemas” (a sequence of W3C XML Schemas). The XInclude step reads the pipeline input “source” and produces a result document. The Validate with XML Schema step reads the pipeline input “schemas” and the result of the XInclude step and produces its own result document. The result of the validation, “result”, is the result of the pipeline. (For consistency across the step vocabulary, the standard input is usually named “source” and the standard output is usually named “result”.) </span></p><p><span class="deltaxml-new" style="background:#90EE90">The pipeline document determines how the steps are connected together inside the pipeline, that is, how the output of one step becomes the input of another.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The pipeline document for this pipeline is shown in </span><a href="#ex1" title="A simple, linear XInclude/Validate pipeline"><span class="deltaxml-new" style="background:#90EE90">Example 1, “A simple, linear XInclude/Validate pipeline”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><figure id="ex1" class="example-wrapper"><div class="title"><span class="deltaxml-new" style="background:#90EE90">Example 1. A simple, linear XInclude/Validate pipeline</span></div><div class="example"><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" name="xinclude-and-validate" version="1.0"&gt; &lt;p:input port="source" primary="true"/&gt; &lt;p:input port="schemas" sequence="true"/&gt; &lt;p:output port="result"&gt; &lt;p:pipe step="validated" port="result"/&gt; &lt;/p:output&gt; &lt;p:xinclude name="included"&gt; &lt;p:input port="source"&gt; &lt;p:pipe step="xinclude-and-validate" port="source"/&gt; &lt;/p:input&gt; &lt;/p:xinclude&gt; &lt;p:validate-with-xml-schema name="validated"&gt; &lt;p:input port="source"&gt; &lt;p:pipe step="included" port="result"/&gt; &lt;/p:input&gt; &lt;p:input port="schema"&gt; &lt;p:pipe step="xinclude-and-validate" port="schemas"/&gt; &lt;/p:input&gt; &lt;/p:validate-with-xml-schema&gt; &lt;/p:declare-step&gt;</span></code></pre></div></figure><p><span class="deltaxml-new" style="background:#90EE90">The example in </span><a href="#ex1" title="A simple, linear XInclude/Validate pipeline"><span class="deltaxml-new" style="background:#90EE90">Example 1, “A simple, linear XInclude/Validate pipeline”</span></a><span class="deltaxml-new" style="background:#90EE90"> is very verbose. It makes all of the connections seen in the figure explicit. In practice, pipelines do not have to be this verbose. XProc supports defaults for many common cases:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">If you use </span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90"> instead of </span><a href="#p.declare-step"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code></a><span class="deltaxml-new" style="background:#90EE90">, the “</span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90">” input port and “</span><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90">” output port are implicitly declared for you.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Where inputs and outputs are connected between sequential sibling steps, they do not have to be made explicit.</span></p></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">The same pipeline, using XProc defaults, is shown in </span><a href="#ex1-abbr" title="A simple, linear XInclude/Validate pipeline (simplified)"><span class="deltaxml-new" style="background:#90EE90">Example 2, “A simple, linear XInclude/Validate pipeline (simplified)”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><figure id="ex1-abbr" class="example-wrapper"><div class="title"><span class="deltaxml-new" style="background:#90EE90">Example 2. A simple, linear XInclude/Validate pipeline (simplified)</span></div><div class="example"><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:pipeline xmlns:p="http://www.w3.org/ns/xproc" name="xinclude-and-validate" version="1.0"&gt; &lt;p:input port="schemas" sequence="true"/&gt; &lt;p:xinclude/&gt; &lt;p:validate-with-xml-schema&gt; &lt;p:input port="schema"&gt; &lt;p:pipe step="xinclude-and-validate" port="schemas"/&gt; &lt;/p:input&gt; &lt;/p:validate-with-xml-schema&gt; &lt;/p:pipeline&gt;</span></code></pre></div></figure><p><a href="#fig-style-proc" title="A validate and transform pipeline"><span class="deltaxml-new" style="background:#90EE90">Figure 2, “A validate and transform pipeline”</span></a><span class="deltaxml-new" style="background:#90EE90"> is a more complex example: it performs schema validation with an appropriate schema and then styles the validated document.</span></p><figure id="fig-style-proc" class="figure-wrapper"><div class="figure"><div id="fig-style-proc.2" title="A validate and transform pipeline" class="mediaobject"><span class="deltaxml-new-img"><img style="border: 2px solid green" src="file:/home/travis/build/ndw/specification/langspec/graphics/sch-transform.png" alt="A validate and transform pipeline" /></span></div></div><div class="title"><span class="deltaxml-new" style="background:#90EE90">Figure 2. A validate and transform pipeline</span></div></figure><p><span class="deltaxml-new" style="background:#90EE90">The heart of this example is the conditional. The “choose” step evaluates an XPath expression over a test document. Based on the result of that expression, one or another branch is run. In this example, each branch consists of a single validate step.</span></p><figure id="ex2" class="example-wrapper"><div class="title"><span class="deltaxml-new" style="background:#90EE90">Example 3. A validate and transform pipeline</span></div><div class="example"><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:pipeline xmlns:p="http://www.w3.org/ns/xproc" version="1.0"&gt; &lt;p:choose&gt; &lt;p:when test="/*[@version &amp;lt; 2.0]"&gt; &lt;p:validate-with-xml-schema&gt; &lt;p:input port="schema"&gt; &lt;p:document href="v1schema.xsd"/&gt; &lt;/p:input&gt; &lt;/p:validate-with-xml-schema&gt; &lt;/p:when&gt; &lt;p:otherwise&gt; &lt;p:validate-with-xml-schema&gt; &lt;p:input port="schema"&gt; &lt;p:document href="v2schema.xsd"/&gt; &lt;/p:input&gt; &lt;/p:validate-with-xml-schema&gt; &lt;/p:otherwise&gt; &lt;/p:choose&gt; &lt;p:xslt&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="stylesheet.xsl"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;/p:pipeline&gt;</span></code></pre></div></figure><p><span class="deltaxml-new" style="background:#90EE90">This example, like the preceding, relies on XProc defaults for simplicity. It is always valid to write the fully explicit form if you prefer.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The media type for pipeline documents is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">application/xml</span></code><span class="deltaxml-new" style="background:#90EE90">. Often, pipeline documents are identified by the extension </span><code class="filename"><span class="deltaxml-new" style="background:#90EE90">.xpl</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">In this specification the words </span><span class="rfc2119" id="introduction.22.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90">, </span><span class="rfc2119" id="introduction.22.2"><span class="deltaxml-new" style="background:#90EE90">must not</span></span><span class="deltaxml-new" style="background:#90EE90">, </span><span class="rfc2119" id="introduction.22.3"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90">, </span><span class="rfc2119" id="introduction.22.4"><span class="deltaxml-new" style="background:#90EE90">should not</span></span><span class="deltaxml-new" style="background:#90EE90">, </span><span class="rfc2119" id="introduction.22.5"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> and </span><span class="rfc2119" id="introduction.22.6"><span class="deltaxml-new" style="background:#90EE90">recommended</span></span><span class="deltaxml-new" style="background:#90EE90"> are to be interpreted as described in [</span><a href="#rfc2119"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 2119</span></span></a><span class="deltaxml-new" style="background:#90EE90">].</span></p></section><section id="pipeline-concepts" class="section"><div class="section-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">2 Pipeline Concepts</span></h2></div><p><span id="dt-pipeline" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: A </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">pipeline</span></em><span class="deltaxml-new" style="background:#90EE90"> is a set of connected steps, with outputs of one step flowing into inputs of another.]</span></span><span class="deltaxml-new" style="background:#90EE90"> A pipeline is itself a </span><em class="glossterm"><a href="#dt-step"><span class="deltaxml-new" style="background:#90EE90">step</span></a></em><span class="deltaxml-new" style="background:#90EE90"> and must satisfy the constraints on steps. Connections between steps occur where the input of one step is connected to the output of another. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The result of evaluating a pipeline (or </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90">) is the result of evaluating the steps that it contains, in an order consistent with the connections between them. A pipeline must behave as if it evaluated each step each time it is encountered. Unless otherwise indicated, implementations </span><span class="rfc2119" id="pipeline-concepts.3.2"><span class="deltaxml-new" style="background:#90EE90">must not</span></span><span class="deltaxml-new" style="background:#90EE90"> assume that steps are functional (that is, that their outputs depend only on their </span><a href="#input-output"><span class="deltaxml-new" style="background:#90EE90">inputs</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><em class="glossterm"><a href="#dt-option"><span class="deltaxml-new" style="background:#90EE90">options</span></a></em><span class="deltaxml-new" style="background:#90EE90">, and </span><em class="glossterm"><a href="#dt-parameter"><span class="deltaxml-new" style="background:#90EE90">parameters</span></a></em><span class="deltaxml-new" style="background:#90EE90">) or side-effect free.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The pattern of connections between steps will not always completely determine their order of evaluation. </span><a name="impl-1"></a><span class="deltaxml-new" style="background:#90EE90">The evaluation order of steps not connected to one another is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p><section id="step-concept" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">2.1 Steps</span></h3></div><p><span id="dt-step" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: A </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">step</span></em><span class="deltaxml-new" style="background:#90EE90"> is the basic computational unit of a pipeline.]</span></span><span class="deltaxml-new" style="background:#90EE90"> A typical step has zero or more inputs, from which it receives XML documents to process, zero or more outputs, to which it sends XML document results, and can have options and/or parameters.</span></p><p><span class="deltaxml-new" style="background:#90EE90">There are three kinds of steps: </span><em class="glossterm"><a href="#dt-atomic-step"><span class="deltaxml-new" style="background:#90EE90">atomic</span></a></em><span class="deltaxml-new" style="background:#90EE90">, </span><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-new" style="background:#90EE90">compound</span></a></em><span class="deltaxml-new" style="background:#90EE90">, and </span><em class="glossterm"><a href="#dt-multi-container-step"><span class="deltaxml-new" style="background:#90EE90">multi-container</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span id="dt-atomic-step" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: An </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">atomic step</span></em><span class="deltaxml-new" style="background:#90EE90"> is a step that performs a unit of XML processing, such as XInclude or transformation, and has no internal </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90">. ]</span></span><span class="deltaxml-new" style="background:#90EE90"> Atomic steps carry out fundamental XML operations and can perform arbitrary amounts of computation, but they are indivisible. An XSLT step, for example, performs XSLT processing; a Validate with XML Schema step validates one input with respect to some set of XML Schemas, etc.</span></p><p><span class="deltaxml-new" style="background:#90EE90">There are many </span><em><span class="deltaxml-new" style="background:#90EE90">types</span></em><span class="deltaxml-new" style="background:#90EE90"> of atomic steps. The standard library of atomic steps is described in </span><a href="#std-components" title="Standard Step Library"><span class="deltaxml-new" style="background:#90EE90">Section 7, “Standard Step Library”</span></a><span class="deltaxml-new" style="background:#90EE90">, but implementations </span><span class="rfc2119" id="step-concept.5.3"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> provide others as well. </span><a name="impl-2"></a><span class="deltaxml-new" style="background:#90EE90">It is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90"> what additional step types, if any, are provided. Each use, or instance, of an atomic step invokes the processing defined by that type of step. A pipeline may contain instances of many types of steps and many instances of the same type of step.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Compound steps, on the other hand, control and organize the flow of documents through a pipeline, reconstructing familiar programming language functionality such as conditionals, iterators and exception handling. They contain other steps, whose evaluation they control.</span></p><p><span id="dt-compound-step" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: A </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">compound step</span></em><span class="deltaxml-new" style="background:#90EE90"> is a step that contains a </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90">.]</span></span><span class="deltaxml-new" style="background:#90EE90"> That is, a compound step differs from an atomic step in that its semantics are at least partially determined by the steps that it contains.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Finally, there are two “multi-container steps”: </span><a href="#p.choose"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#p.try"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code></a><span class="deltaxml-new" style="background:#90EE90">. </span><span id="dt-multi-container-step" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: A </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">multi-container step</span></em><span class="deltaxml-new" style="background:#90EE90"> is a step that contains several alternate </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipelines</span></a></em><span class="deltaxml-new" style="background:#90EE90">. ]</span></span><span class="deltaxml-new" style="background:#90EE90"> Each subpipeline is identified by a non-step wrapper element: </span><a href="#p.when"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:when</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#p.otherwise"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:otherwise</span></code></a><span class="deltaxml-new" style="background:#90EE90"> in the case of </span><a href="#p.choose"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#p.group"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:group</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#p.catch"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:catch</span></code></a><span class="deltaxml-new" style="background:#90EE90"> in the case of </span><a href="#p.try"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code></a><span class="deltaxml-new" style="background:#90EE90">. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The output of a multi-container step is the output of exactly one of its subpipelines. In this sense, a multi-container step functions like a </span><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-new" style="background:#90EE90">compound step</span></a></em><span class="deltaxml-new" style="background:#90EE90">. However, evaluating a multi-container step may involve evaluating, or partially evaluating, more than one of its subpipelines. It's possible for steps in a partially evaluated pipeline to have side effects that are visible outside the processor, even if the final output of the multi-container step is the result of some other subpipeline. For example, a web server might record that some interaction was performed, or a file on the local file system might have been modified.</span></p><p><span id="dt-container" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: A compound step or multi-container step is a </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">container</span></em><span class="deltaxml-new" style="background:#90EE90"> for the steps directly within it or within non-step wrappers directly within it.]</span></span><span id="dt-contained-steps" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: The steps that occur directly within, or within non-step wrappers directly within, a step are called that step's </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">contained steps</span></em><span class="deltaxml-new" style="background:#90EE90">. In other words, “container” and “contained steps” are inverse relationships.]</span></span><span id="dt-ancestors" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: The </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">ancestors</span></em><span class="deltaxml-new" style="background:#90EE90"> of a step, if it has any, are its </span><em class="glossterm"><a href="#dt-container"><span class="deltaxml-new" style="background:#90EE90">container</span></a></em><span class="deltaxml-new" style="background:#90EE90"> and the ancestors of its container.]</span></span></p><p><span id="dt-subpipeline" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: Sibling steps (and the connections between them) form a </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></em><span class="deltaxml-new" style="background:#90EE90">.]</span></span><span id="dt-last-step" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: The </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">last step</span></em><span class="deltaxml-new" style="background:#90EE90"> in a subpipeline is its last step in document order.]</span></span></p><p id="p.subpipeline" class="element-syntax element-syntax-language-construct hanging-indent"><code class="code"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></code><span class="deltaxml-new" style="background:#90EE90"> = </span><a href="#p.variable"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:variable</span></code></a><span class="deltaxml-new" style="background:#90EE90">*, (</span><a href="#p.for-each"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code></a><span class="deltaxml-new" style="background:#90EE90">|</span><a href="#p.viewport"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code></a><span class="deltaxml-new" style="background:#90EE90">|</span><a href="#p.choose"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code></a><span class="deltaxml-new" style="background:#90EE90">|</span><a href="#p.group"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:group</span></code></a><span class="deltaxml-new" style="background:#90EE90">|</span><a href="#p.try"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code></a><span class="deltaxml-new" style="background:#90EE90">|</span><code class="code"><a href="#p.atomic"><span class="deltaxml-new" style="background:#90EE90">p:</span><em class="replaceable"><code><span class="deltaxml-new" style="background:#90EE90">standard-step</span></code></em></a></code><span class="deltaxml-new" style="background:#90EE90">|</span><code class="code"><a href="#p.atomic"><em class="replaceable"><code><span class="deltaxml-new" style="background:#90EE90">pfx:user-pipeline</span></code></em></a></code><span class="deltaxml-new" style="background:#90EE90">)+ </span></p><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">User-defined pipelines (identified with </span><code class="code"><em class="replaceable"><code><span class="deltaxml-new" style="background:#90EE90">pfx:user-pipeline</span></code></em></code><span class="deltaxml-new" style="background:#90EE90"> in the preceding syntax summary) are atomic. A pipeline </span><em><span class="deltaxml-new" style="background:#90EE90">declaration</span></em><span class="deltaxml-new" style="background:#90EE90"> may contain a subpipeline, but the invocation of that pipeline is atomic and does not contain a subpipeline.</span></p></div><p><span class="deltaxml-new" style="background:#90EE90">Steps have “ports” into which inputs and outputs are connected. Each step has a number of input ports and a number of output ports; a step can have zero input ports and/or zero output ports. (All steps have an implicit output port for reporting errors that </span><span class="rfc2119" id="step-concept.14.1"><span class="deltaxml-new" style="background:#90EE90">must not</span></span><span class="deltaxml-new" style="background:#90EE90"> be declared.) The names of all ports on each step must be unique on that step (you can't have two input ports named “source”, nor can you have an input port named “schema” and an output port named “schema”). </span></p><p><span class="deltaxml-new" style="background:#90EE90">A Step may have zero or more </span><a href="#options"><span class="deltaxml-new" style="background:#90EE90">options</span></a><span class="deltaxml-new" style="background:#90EE90">, all with unique names.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Steps may have parameter input ports, on which </span><a href="#parameters"><span class="deltaxml-new" style="background:#90EE90">parameters</span></a><span class="deltaxml-new" style="background:#90EE90"> can be passed. A step can have zero, one, or many parameter input ports, and each parameter input port can have zero or more parameters passed on it. If more than one parameter with the same name is passed to any given parameter input port, only the last value specified will be available to the step; the names of the parameters passed to the step are unique on each port. Parameters with the same name can be passed to different ports, the uniqueness constraint on names only applies to the parameters passed on each individual port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">All of the different instances of steps (atomic or compound) in a pipeline can be distinguished from one another by name. If the pipeline author does not provide a name for a step, a default name is </span><a href="#step-names"><span class="deltaxml-new" style="background:#90EE90">manufactured automatically</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><section id="step-names" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">2.1.1 Step names</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">name</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute on any step can be used to give it a name. The name must be unique within its scope, see </span><a href="#scoping" title="Scoping of Names"><span class="deltaxml-new" style="background:#90EE90">Section 3.2, “Scoping of Names”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the pipeline author does not provide an explicit name, the processor manufactures a default name. All default names are of the form “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">!1</span></code><em class="replaceable"><code><span class="deltaxml-new" style="background:#90EE90">.m</span></code></em><em class="replaceable"><code><span class="deltaxml-new" style="background:#90EE90">.n</span></code></em><span class="deltaxml-new" style="background:#90EE90">…” where “</span><em class="replaceable"><code><span class="deltaxml-new" style="background:#90EE90">m</span></code></em><span class="deltaxml-new" style="background:#90EE90">” is the position (in the sense of counting sibling elements) of the step's highest ancestor element within the pipeline document or library which contains it, “</span><em class="replaceable"><code><span class="deltaxml-new" style="background:#90EE90">n</span></code></em><span class="deltaxml-new" style="background:#90EE90">” is the position of the next-highest ancestor, and so on, including both steps and non-step wrappers. For example, consider the pipeline in </span><a href="#ex2" title="A validate and transform pipeline"><span class="deltaxml-new" style="background:#90EE90">Example 3, “A validate and transform pipeline”</span></a><span class="deltaxml-new" style="background:#90EE90">. The </span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step has no name, so it gets the default name “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">!1</span></code><span class="deltaxml-new" style="background:#90EE90">”; the </span><a href="#p.choose"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code></a><span class="deltaxml-new" style="background:#90EE90"> gets the name “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">!1.1</span></code><span class="deltaxml-new" style="background:#90EE90">”; the first </span><a href="#p.when"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:when</span></code></a><span class="deltaxml-new" style="background:#90EE90"> gets the name “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">!1.1.1</span></code><span class="deltaxml-new" style="background:#90EE90">”; the </span><a href="#p.otherwise"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:otherwise</span></code></a><span class="deltaxml-new" style="background:#90EE90"> gets the name “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">!1.1.2</span></code><span class="deltaxml-new" style="background:#90EE90">”, etc. If the </span><a href="#p.choose"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code></a><span class="deltaxml-new" style="background:#90EE90"> had a name, it would not have received a default name, but it would still have been counted and its first </span><a href="#p.when"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:when</span></code></a><span class="deltaxml-new" style="background:#90EE90"> would still have been “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">!1.1.1</span></code><span class="deltaxml-new" style="background:#90EE90">”.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Providing every step in the pipeline with an interoperable name has several benefits:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-new" style="background:#90EE90">It allows implementers to refer to all steps in an interoperable fashion, for example, in error messages.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Pragmatically, we say that </span><em class="glossterm"><a href="#dt-readable-ports"><span class="deltaxml-new" style="background:#90EE90">readable ports</span></a></em><span class="deltaxml-new" style="background:#90EE90"> are identified by a step name/port name pair. By manufacturing names for otherwise anonymous steps, we include implicit connections without changing our model.</span></p></li></ol></div><p><span class="deltaxml-new" style="background:#90EE90">In a valid pipeline that runs successfully to completion, the manufactured names aren't visible (except perhaps in debugging or logging output).</span></p><div id="def-name-ncname" class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">The format for defaulted names does not conform to the requirements of an </span><a href="http://www.w3.org/TR/xml-names/#NT-NCName"><span class="deltaxml-new" style="background:#90EE90">NCName</span></a><span class="deltaxml-new" style="background:#90EE90">. This is an explicit design decision; it prevents pipelines from using the defaulted names on </span><a href="#p.pipe"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements. If an explicit connection is required, the pipeline author must provide an explicit name for the step.</span></p></div></section></section><section id="input-output" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">2.2 Inputs and Outputs</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">Although some steps can read and write non-XML resources, what flows </span><em><span class="deltaxml-new" style="background:#90EE90">between</span></em><span class="deltaxml-new" style="background:#90EE90"> steps through input ports and output ports are exclusively XML documents or sequences of XML documents.</span></p><p><span class="deltaxml-new" style="background:#90EE90">For the purposes of this specification, an XML document is an [</span><a href="#xml-infoset-rec"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Infoset</span></span></a><span class="deltaxml-new" style="background:#90EE90">]. Implementations are free to transmit Infosets as sequences of characters, sequences of events, object models, or any other representation that preserves the necessary Infoset properties (see </span><a href="#infoset-conformance" title="Infoset Conformance"><span class="deltaxml-new" style="background:#90EE90">Section 3, “Infoset Conformance”</span></a><span class="deltaxml-new" style="background:#90EE90">).</span></p><p><span class="deltaxml-new" style="background:#90EE90">Most steps in this specification manipulate XML documents, or portions of XML documents. In these cases, we speak of changing elements, attributes, or nodes without prejudice to the actual representation used by an implementation.</span></p><p><span class="deltaxml-new" style="background:#90EE90">An implementation </span><span class="rfc2119" id="input-output.5.1"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> make it possible for a step to produce non-XML output (through channels other than a named output port)—for example, writing a PDF document to a URI—but that output cannot flow through the pipeline. Similarly, one can imagine a step that takes no pipeline inputs, reads a non-XML file from a URI, and produces an XML output. But the non-XML data cannot arrive on an input port to a step.</span></p><p><a name="err.inline.D0001"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0001"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0001</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if a non-XML resource is produced on a step output or arrives on a step input.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The common case is that each step has one or more inputs and one or more outputs. </span><a href="#fig-atomic-step" title="An atomic step"><span class="deltaxml-new" style="background:#90EE90">Figure 3, “An atomic step”</span></a><span class="deltaxml-new" style="background:#90EE90"> illustrates symbolically an </span><em class="glossterm"><a href="#dt-atomic-step"><span class="deltaxml-new" style="background:#90EE90">atomic step</span></a></em><span class="deltaxml-new" style="background:#90EE90"> with two inputs and one output.</span></p><figure id="fig-atomic-step" class="figure-wrapper"><div class="figure"><div id="fig-atomic-step.2" title="An atomic step with two inputs and one output" class="mediaobject"><span class="deltaxml-new-img"><img style="border: 2px solid green" src="file:/home/travis/build/ndw/specification/langspec/graphics/atomic-step.png" alt="An atomic step with two inputs and one output" /></span></div></div><div class="title"><span class="deltaxml-new" style="background:#90EE90">Figure 3. An atomic step</span></div></figure><p><span class="deltaxml-new" style="background:#90EE90">All atomic steps are defined by a </span><a href="#p.declare-step"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code></a><span class="deltaxml-new" style="background:#90EE90">. The declaration of an atomic step type defines the input ports, output ports, and options of all steps of that type. For example, every </span><a href="#c.validate-with-xml-schema"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-xml-schema</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step has two inputs, named “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90">” and “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">schema</span></code><span class="deltaxml-new" style="background:#90EE90">”, one output named “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90">”, and the same set of options. </span></p><p><span class="deltaxml-new" style="background:#90EE90">Like atomic steps, top level, user-defined pipelines also have declarations. The situation is slightly more complicated for the other compound steps because they don't have separate declarations; each instance of the compound step serves as its own declaration. On these compound steps, the number and names of the outputs can be different on each instance of the step.</span></p><p><a href="#fig-compound-step" title="A compound step"><span class="deltaxml-new" style="background:#90EE90">Figure 4, “A compound step”</span></a><span class="deltaxml-new" style="background:#90EE90"> illustrates symbolically a compound step with one subpipeline and one output. As you can see from the diagram, the output from the compound step comes from one of the outputs of the subpipeline within the step.</span></p><figure id="fig-compound-step" class="figure-wrapper"><div class="figure"><div id="fig-compound-step.2" title="A compound step with two inputs and one output" class="mediaobject"><span class="deltaxml-new-img"><img style="border: 2px solid green" src="file:/home/travis/build/ndw/specification/langspec/graphics/compound-step.png" alt="A compound step with two inputs and one output" /></span></div></div><div class="title"><span class="deltaxml-new" style="background:#90EE90">Figure 4. A compound step</span></div></figure><p><span id="dt-declared-inputs" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: The input ports declared on a step are its </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">declared inputs</span></em><span class="deltaxml-new" style="background:#90EE90">.]</span></span><span id="dt-declared-outputs" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: The output ports declared on a step are its </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">declared outputs</span></em><span class="deltaxml-new" style="background:#90EE90">.]</span></span><span class="deltaxml-new" style="background:#90EE90"> When a step is used in a pipeline, it is connected to other steps through its inputs and outputs. </span></p><p><span class="deltaxml-new" style="background:#90EE90">When a step is used, all of the </span><em class="glossterm"><a href="#dt-declared-inputs"><span class="deltaxml-new" style="background:#90EE90">declared inputs</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of the step </span><span class="rfc2119" id="input-output.14.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be connected. Each input can be connected to:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">The output port of some other step.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">A fixed, inline document or sequence of documents.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">A document read from a URI.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">One of the inputs declared on one of its </span><em class="glossterm"><a href="#dt-ancestors"><span class="deltaxml-new" style="background:#90EE90">ancestors</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">A special port provided by an ancestor compound step, for example, “</span><code class="port"><span class="deltaxml-new" style="background:#90EE90">current</span></code><span class="deltaxml-new" style="background:#90EE90">” in a </span><a href="#p.for-each"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#p.viewport"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code></a><span class="deltaxml-new" style="background:#90EE90">. </span></p></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">When an input accepts a sequence of documents, the documents can come from any combination of these locations.</span></p><p><a name="err.inline.S0003"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0003"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0003</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if any declared input is not connected.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><em class="glossterm"><a href="#dt-declared-outputs"><span class="deltaxml-new" style="background:#90EE90">declared outputs</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of a step may be connected to:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">The input port of some other step (including </span><a href="#p.iteration-source"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:iteration-source</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#p.viewport-source"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport-source</span></code></a><span class="deltaxml-new" style="background:#90EE90">).</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">The </span><a href="#p.xpath-context"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xpath-context</span></code></a><span class="deltaxml-new" style="background:#90EE90"> of a </span><a href="#p.choose"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#p.when"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:when</span></code></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">An option assigned with </span><a href="#p.with-option"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or a parameter assigned with </span><a href="#p.with-param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></code></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">One of the outputs declared on its container. </span></p></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-new" style="background:#90EE90">primary output port</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of a step </span><span class="rfc2119" id="input-output.20.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be connected. </span><a name="err.inline.S0005"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0005"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0005</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the primary output port of any step is not connected. Other outputs can remain unconnected. Any documents produced on an unconnected output port are discarded.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Primary input and primary output ports may be implicitly connected if no explicit connection is given, see </span><a href="#primary-input-output" title="Primary Inputs and Outputs"><span class="deltaxml-new" style="background:#90EE90">Section 2.3, “Primary Inputs and Outputs”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Output ports on compound steps have a dual nature: from the perspective of the compound step's siblings, its outputs are just ordinary outputs and must be connected as described above. From the perspective of the subpipeline inside the compound step, they are inputs into which something may be connected.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Within a compound step, the </span><em class="glossterm"><a href="#dt-declared-outputs"><span class="deltaxml-new" style="background:#90EE90">declared outputs</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of the step can be connected to:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">The output port of some </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-new" style="background:#90EE90">contained step</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">A fixed, inline document or sequence of documents.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">A document read from a URI.</span></p></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">If a (non-primary) output port of a compound step is left unconnected, it produces an empty sequence of documents from the perspective of its siblings.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Each input and output on a step is declared to accept or produce either a single document or a sequence of documents. It </span><em><span class="deltaxml-new" style="background:#90EE90">is not</span></em><span class="deltaxml-new" style="background:#90EE90"> an error to connect a port that is declared to produce a sequence of documents to a port that is declared to accept only a single document. It is, however, an error if the former step actually produces more than one document at run time.</span></p><p><span class="deltaxml-new" style="background:#90EE90">It is also not an error to connect a port that is declared to produce a single document to a port that is declared to accept a sequence. A single document is the same as a sequence of one document.</span></p><p><span class="deltaxml-new" style="background:#90EE90">An output port may have more than one connection: it may be connected to more than one input port, more than one of its container's output ports, or both. At runtime this will result in distinct copies of the output. </span></p><p><span id="dt-signature" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: The </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">signature</span></em><span class="deltaxml-new" style="background:#90EE90"> of a step is the set of inputs, outputs, and options that it is declared to accept.]</span></span><span class="deltaxml-new" style="background:#90EE90"> The declaration for a step provides a fixed signature which all its instances share.</span></p><p><span id="dt-matches" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: A step </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">matches</span></em><span class="deltaxml-new" style="background:#90EE90"> its signature if and only if it specifies an input for each declared input, it specifies no inputs that are not declared, it specifies an option for each option that is declared to be required, and it specifies no options that are not declared.]</span></span><span class="deltaxml-new" style="background:#90EE90"> In other words, every input and required option </span><span class="rfc2119" id="input-output.30.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be specified and only inputs and options that are declared </span><span class="rfc2119" id="input-output.30.3"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> be specified. Options that aren't required do not have to be specified.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Steps </span><span class="rfc2119" id="input-output.31.1"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> also produce error, warning, and informative messages. These messages are captured and provided on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">error</span></code><span class="deltaxml-new" style="background:#90EE90"> port inside of a </span><a href="#p.catch"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:catch</span></code></a><span class="deltaxml-new" style="background:#90EE90">. </span><a name="impl-3"></a><span class="deltaxml-new" style="background:#90EE90">Outside of a </span><a href="#p.try"><span class="deltaxml-new" style="background:#90EE90">try/catch</span></a><span class="deltaxml-new" style="background:#90EE90">, the disposition of error messages is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p><p><a name="impl-4"></a><span class="deltaxml-new" style="background:#90EE90">How inputs are connected to XML documents outside the pipeline is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">. In order to be consistent with the XPath data model, all general and external parsed entities in such documents </span><span class="rfc2119" id="input-output.32.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be fully expanded; they </span><span class="rfc2119" id="input-output.32.3"><span class="deltaxml-new" style="background:#90EE90">must not</span></span><span class="deltaxml-new" style="background:#90EE90"> contain any representation of [</span><a href="#xml-infoset-rec"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Infoset</span></span></a><span class="deltaxml-new" style="background:#90EE90">] </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[unexpanded entity reference information items]</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><a name="impl-5"></a><span class="deltaxml-new" style="background:#90EE90">How pipeline outputs are connected to XML documents outside the pipeline is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><section id="external-docs" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">2.2.1 External Documents</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">It's common for some of the documents used in processing a pipeline to be read from URIs. Sometimes this occurs directly, for example with a </span><a href="#p.document"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:document</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element. Sometimes it occurs indirectly, for example if an implementation allows the URI of a pipeline input to be specified on the command line or if an </span><a href="#c.xslt"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xslt</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step encounters an </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">xsl:import</span></code><span class="deltaxml-new" style="background:#90EE90"> in the stylesheet that it is processing. It's also common for some of the documents produced in processing a pipeline to be written to locations which have, or at least could have, a URI. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The process of dereferencing a URI to retrieve a document is often more interesting than it seems at first. On the web, it may involve caches, proxies, and various forms of indirection. </span><a name="impl-6"></a><span class="deltaxml-new" style="background:#90EE90">Resolving a URI locally may involve resolvers of various sorts and possibly appeal to </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></em><span class="deltaxml-new" style="background:#90EE90"> mechanisms such as catalog files.</span></p><p><span class="deltaxml-new" style="background:#90EE90">In XProc, the situation is made even more interesting by the fact that many intermediate results produced by steps in the pipeline have base URIs. </span><a name="impl-7"></a><span class="deltaxml-new" style="background:#90EE90">Whether (and when and how) or not the intermediate results that pass between steps are ever written to a filesystem is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><a name="impl-8"></a><span class="deltaxml-new" style="background:#90EE90">In Version 1.0 of XProc, how (or if) implementers provide local resolution mechanisms and how (or if) they provide access to intermediate results by URI is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p><p><span class="deltaxml-new" style="background:#90EE90">Version 1.0 of XProc does not require implementations to guarantee that multiple attempts to dereference the same URI always produce consistent results.</span></p><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">On the one hand, this is a somewhat unsatisfying state of affairs because it leaves room for interoperability problems. On the other, it is not expected to cause such problems very often in practice. </span></p><p><span class="deltaxml-new" style="background:#90EE90">If these problems arise in practice, implementers are encouraged to use the existing extension mechanisms to give users the control needed to circumvent them. Should such mechanisms become widespread, a standard mechanism could be added in some future version of the language.</span></p></div></section><section id="binary" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">2.2.2 Non-XML Documents</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">XProc is designed to allow pipeline authors to specify how an XML document, or sequence of XML documents, flows through a series of steps. For the most part, non-XML documents are considered out-of-scope.</span></p><p><span class="deltaxml-new" style="background:#90EE90">However, to be useful, XProc pipelines must interact with the real world where non-XML documents (HTML documents, raster images, non-XML encodings of data, etc.) are a fact of life.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Accordingly, some pipelines may need to access non-XML documents and some non-XML documents may “leak” into pipelines. XProc provides a limited set of tools for processing these documents. In particular, XProc offers the ability to turn some “almost-XML” documents into XML and to allow some non-XML documents to flow quietly through the pipeline.</span></p><p><span class="deltaxml-new" style="background:#90EE90">It </span><em><span class="deltaxml-new" style="background:#90EE90">is not</span></em><span class="deltaxml-new" style="background:#90EE90"> a goal of XProc that it should be a general-purpose pipeline language for manipulating arbitrary, non-XML resources.</span></p><p><span class="deltaxml-new" style="background:#90EE90">There are two standard ways that a non-XML document may enter a pipeline: directly through </span><a href="#p.data"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:data</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or as the result of performing an </span><a href="#c.http-request"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step. Loading non-XML data with a computed URI requires the </span><a href="#c.http-request"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step. Implementors are encouraged to support the </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">file:</span></code><span class="deltaxml-new" style="background:#90EE90"> URI scheme so that users can load local data from computed URIs.</span></p><p><span class="deltaxml-new" style="background:#90EE90">In either case, non-XML documents are converted into text or are base64-encoded, depending on their content type and character encoding. The result is an XML document that consists of a document element containing either escaped text or base64-encoded text. This document can be processed like any other XML document.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><a href="#c.unescape-markup"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:unescape-markup</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step can be used to (attempt to) convert a non-XML document into XML. Well-formed XML that just happens to be represented with escaped markup can always be recovered. For other media types, the ability to construct XML and the precise mechanisms used to make the markup well-formed are </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">XProc provides no standard means to save encoded data in its unencoded binary form. Implementors may provide extension methods to allow the </span><a href="#c.store"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:store</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step to save the binary data. For example, an implementation might provide a </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">ext:binary</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization method that decoded base64 encoded data before saving it:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:store method="ext:binary" href="my.png"&gt; &lt;p:input port="source"&gt; &lt;p:inline&gt; &lt;c:data content-type="image/png"&gt;BASE64ENCODEDDATA&lt;/c:data&gt; &lt;/p:inline&gt; &lt;/p:input&gt; &lt;/p:store&gt;</span></code></pre></section></section><section id="primary-input-output" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">2.3 Primary Inputs and Outputs</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">As a convenience for pipeline authors, each step may have one input port designated as the primary input port and one output port designated as the primary output port.</span></p><p><span id="dt-primary-input-port" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: If a step has a document input port which is explicitly marked “</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">primary='true'</span></code><span class="deltaxml-new" style="background:#90EE90">”, or if it has exactly one document input port and that port is </span><em><span class="deltaxml-new" style="background:#90EE90">not</span></em><span class="deltaxml-new" style="background:#90EE90"> explicitly marked “</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">primary='false'</span></code><span class="deltaxml-new" style="background:#90EE90">”, then that input port is the </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">primary input port</span></em><span class="deltaxml-new" style="background:#90EE90"> of the step.]</span></span><span class="deltaxml-new" style="background:#90EE90"> If a step has a single input port and that port is explicitly marked “</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">primary='false'</span></code><span class="deltaxml-new" style="background:#90EE90">”, or if a step has more than one input port and none is explicitly marked as the primary, then the primary input port of that step is undefined. A step can have at most one primary input port.</span></p><p><span id="dt-primary-output-port" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: If a step has a document output port which is explicitly marked “</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">primary='true'</span></code><span class="deltaxml-new" style="background:#90EE90">”, or if it has exactly one document output port and that port is </span><em><span class="deltaxml-new" style="background:#90EE90">not</span></em><span class="deltaxml-new" style="background:#90EE90"> explicitly marked “</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">primary='false'</span></code><span class="deltaxml-new" style="background:#90EE90">”, then that output port is the </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">primary output port</span></em><span class="deltaxml-new" style="background:#90EE90"> of the step.]</span></span><span class="deltaxml-new" style="background:#90EE90"> If a step has a single output port and that port is explicitly marked “</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">primary='false'</span></code><span class="deltaxml-new" style="background:#90EE90">”, or if a step has more than one output port and none is explicitly marked as the primary, then the primary output port of that step is undefined. A step can have at most one primary output port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The special significance of primary input and output ports is that they are connected automatically by the processor if no explicit connection is given. Generally speaking, if two steps appear sequentially in a subpipeline, then the primary output of the first step will automatically be connected to the primary input of the second.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Additionally, if a compound step has no declared outputs and the </span><em class="glossterm"><a href="#dt-last-step"><span class="deltaxml-new" style="background:#90EE90">last step</span></a></em><span class="deltaxml-new" style="background:#90EE90"> in its subpipeline has an unconnected primary output, then an implicit primary output port will be added to the compound step (and consequently the last step's primary output will be connected to it). This implicit output port has no name. It inherits the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><span class="deltaxml-new" style="background:#90EE90"> property of the port connected to it. This rule does not apply to </span><a href="#p.declare-step"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code></a><span class="deltaxml-new" style="background:#90EE90">; step declarations must provide explicit names for all of their outputs.</span></p></section><section id="connections" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">2.4 Connections</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">Steps are connected together by their input ports and output ports. </span><a name="err.inline.S0001"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0001"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0001</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if there are any loops in the connections between steps: no step can be connected to itself nor can there be any sequence of connections through other steps that leads back to itself.</span></p><section id="namespace-fixup" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">2.4.1 Namespace Fixup on Outputs</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">XProc processors are expected, and sometimes required, to perform </span><em class="glossterm"><a href="#dt-namespace-fixup"><span class="deltaxml-new" style="background:#90EE90">namespace fixup</span></a></em><span class="deltaxml-new" style="background:#90EE90">. Unless the semantics of a step explicitly says otherwise:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">The in-scope namespaces associated with a node (even those that are inherited from namespace bindings that appear among its ancestors in the document in which it appears initially) are assumed to travel with that node.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Changes to one part of a tree (wrapping or unwrapping a node or renaming an element, for example) do not change the in-scope namespaces associated with the descendants of the node so changed.</span></p></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">As a result, some steps can produce XML documents which have no direct serialization (because they include nodes with conflicting or missing namespace declarations, for example). </span><span id="dt-namespace-fixup" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: To produce a serializable </span><em class="glossterm"><a href="#dt-XML"><span class="deltaxml-new" style="background:#90EE90">XML</span></a></em><span class="deltaxml-new" style="background:#90EE90"> document, the XProc processor must sometimes add additional namespace nodes, perhaps even renaming prefixes, to satisfy the constraints of </span><em class="glossterm"><a href="#dt-Namespaces-in-XML"><span class="deltaxml-new" style="background:#90EE90">Namespaces in XML</span></a></em><span class="deltaxml-new" style="background:#90EE90">. This process is referred to as </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">namespace fixup</span></em><span class="deltaxml-new" style="background:#90EE90">.]</span></span></p><p><span class="deltaxml-new" style="background:#90EE90">Implementors are encouraged to perform </span><em class="glossterm"><a href="#dt-namespace-fixup"><span class="deltaxml-new" style="background:#90EE90">namespace fixup</span></a></em><span class="deltaxml-new" style="background:#90EE90"> before passing documents between steps, but they are not required to do so. Conversely, an implementation which </span><em><span class="deltaxml-new" style="background:#90EE90">does</span></em><span class="deltaxml-new" style="background:#90EE90"> serialize between steps and therefore must perform such fixups, or reject documents that cannot be serialized, is also conformant.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Except where the semantics of a step explicitly require changes, processors are required to preserve the information in the documents and fragments they manipulate. In particular, the information corresponding to the [</span><a href="#xml-infoset-rec"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Infoset</span></span></a><span class="deltaxml-new" style="background:#90EE90">] properties </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[attributes]</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[base URI]</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[children]</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[local name]</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[namespace name]</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[normalized value]</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[owner]</span></code><span class="deltaxml-new" style="background:#90EE90">, and </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[parent]</span></code><span class="rfc2119" id="namespace-fixup.6.10"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be preserved.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The information corresponding to </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[prefix]</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[in-scope namespaces]</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[namespace attributes]</span></code><span class="deltaxml-new" style="background:#90EE90">, and </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[attribute type]</span></code><span class="rfc2119" id="namespace-fixup.7.5"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> be preserved, with changes to the first three only as required for </span><em class="glossterm"><a href="#dt-namespace-fixup"><span class="deltaxml-new" style="background:#90EE90">namespace fixup</span></a></em><span class="deltaxml-new" style="background:#90EE90">. In particular, processors are encouraged to take account of prefix information in creating new namespace bindings, to minimize negative impact on prefixed names in content.</span></p><p><a name="impl-9"></a><span class="deltaxml-new" style="background:#90EE90">Except for cases which are specifically called out in </span><a href="#std-components" title="Standard Step Library"><span class="deltaxml-new" style="background:#90EE90">Section 7, “Standard Step Library”</span></a><span class="deltaxml-new" style="background:#90EE90">, the extent to which namespace fixup, and other checks for outputs which cannot be serialized, are performed on intermediate outputs is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Whenever an implementation serializes pipeline contents, for example for pipeline outputs, logging, or as part of steps such as </span><a href="#c.store"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:store</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#c.http-request"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></code></a><span class="deltaxml-new" style="background:#90EE90">, it is a </span><a href="#err.D0001"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a><span class="deltaxml-new" style="background:#90EE90"> if that serialization could not be done so as to produce a document which is both well-formed and namespace-well-formed, as specified in </span><em class="glossterm"><a href="#dt-XML"><span class="deltaxml-new" style="background:#90EE90">XML</span></a></em><span class="deltaxml-new" style="background:#90EE90"> and </span><em class="glossterm"><a href="#dt-Namespaces-in-XML"><span class="deltaxml-new" style="background:#90EE90">Namespaces in XML</span></a></em><span class="deltaxml-new" style="background:#90EE90">, regardless of what serialization method, if any, is called for.</span></p></section></section><section id="environment" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">2.5 Environment</span></h3></div><p><span id="dt-environment" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: The </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">environment</span></em><span class="deltaxml-new" style="background:#90EE90"> is a context-dependent collection of information available within subpipelines.]</span></span><span class="deltaxml-new" style="background:#90EE90"> Most of the information in the environment is static and can be computed for each subpipeline before evaluation of the pipeline as a whole begins. The in-scope bindings have to be calculated as the pipeline is being evaluated.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The environment consists of:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-new" style="background:#90EE90">A set of readable ports. </span><span id="dt-readable-ports" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: The </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">readable ports</span></em><span class="deltaxml-new" style="background:#90EE90"> are a set of step name/port name pairs.]</span></span><span class="deltaxml-new" style="background:#90EE90"> Inputs and outputs can only be connected to readable ports.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">A default readable port. </span><span id="dt-default-readable-port" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: The </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">default readable port</span></em><span class="deltaxml-new" style="background:#90EE90">, which may be undefined, is a specific step name/port name pair from the set of readable ports.]</span></span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">A set of in-scope bindings. </span><span id="dt-in-scope-bindings" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: The </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">in-scope bindings</span></em><span class="deltaxml-new" style="background:#90EE90"> are a set of name-value pairs, based on </span><em class="glossterm"><a href="#dt-option"><span class="deltaxml-new" style="background:#90EE90">option</span></a></em><span class="deltaxml-new" style="background:#90EE90"> and </span><em class="glossterm"><a href="#dt-variable"><span class="deltaxml-new" style="background:#90EE90">variable</span></a></em><span class="deltaxml-new" style="background:#90EE90"> bindings.]</span></span></p></li></ol></div><p><span id="dt-empty-environment" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: The </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">empty environment</span></em><span class="deltaxml-new" style="background:#90EE90"> contains no readable ports, an undefined default readable port and no in-scope bindings.]</span></span></p><p><span class="deltaxml-new" style="background:#90EE90">Unless otherwise specified, the environment of a </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-new" style="background:#90EE90">contained step</span></a></em><span class="deltaxml-new" style="background:#90EE90"> is its </span><em class="glossterm"><a href="#dt-inherited-environment"><span class="deltaxml-new" style="background:#90EE90">inherited environment</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span><span id="dt-inherited-environment" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: The </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">inherited environment</span></em><span class="deltaxml-new" style="background:#90EE90"> of a </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-new" style="background:#90EE90">contained step</span></a></em><span class="deltaxml-new" style="background:#90EE90"> is an environment that is the same as the environment of its </span><em class="glossterm"><a href="#dt-container"><span class="deltaxml-new" style="background:#90EE90">container</span></a></em><span class="deltaxml-new" style="background:#90EE90"> with the </span><a href="#dt-standard-modifications"><span class="deltaxml-new" style="background:#90EE90">standard modifications</span></a><span class="deltaxml-new" style="background:#90EE90">. ]</span></span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><span id="dt-standard-modifications"><span class="deltaxml-new" style="background:#90EE90">standard modifications</span></span><span class="deltaxml-new" style="background:#90EE90"> made to an inherited environment are:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-new" style="background:#90EE90">The declared inputs of the container are added to the </span><em class="glossterm"><a href="#dt-readable-ports"><span class="deltaxml-new" style="background:#90EE90">readable ports</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">In other words, contained steps can see the inputs to their container.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">The union of all the declared outputs of all of the step's sibling steps are added to the </span><em class="glossterm"><a href="#dt-readable-ports"><span class="deltaxml-new" style="background:#90EE90">readable ports</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">In other words, sibling steps can see each other's outputs in addition to the outputs visible to their container.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">If there is a preceding sibling step element:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">If that preceding sibling has a </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-new" style="background:#90EE90">primary output port</span></a></em><span class="deltaxml-new" style="background:#90EE90">, then that output port becomes the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-new" style="background:#90EE90">default readable port</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Otherwise, the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-new" style="background:#90EE90">default readable port</span></a></em><span class="deltaxml-new" style="background:#90EE90"> is undefined.</span></p></li></ul></div></li><li><p><span class="deltaxml-new" style="background:#90EE90">If there </span><em><span class="deltaxml-new" style="background:#90EE90">is not</span></em><span class="deltaxml-new" style="background:#90EE90"> a preceding sibling step element: </span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">If the container has a </span><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-new" style="background:#90EE90">primary input port</span></a></em><span class="deltaxml-new" style="background:#90EE90">, the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-new" style="background:#90EE90">default readable port</span></a></em><span class="deltaxml-new" style="background:#90EE90"> is that </span><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-new" style="background:#90EE90">primary input port</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Otherwise, the default readable port is unchanged.</span></p></li></ul></div></li><li><p><span class="deltaxml-new" style="background:#90EE90">The names and values from each </span><a href="#p.variable"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:variable</span></code></a><span class="deltaxml-new" style="background:#90EE90"> present at the beginning of the container are added, in document order, to the </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-new" style="background:#90EE90">in-scope bindings</span></a></em><span class="deltaxml-new" style="background:#90EE90">. A new binding replaces an old binding with the same name. See </span><a href="#p.variable" title="p:variable"><span class="deltaxml-new" style="background:#90EE90">Section 5.7.1, “p:variable”</span></a><span class="deltaxml-new" style="background:#90EE90"> for the specification of variable evaluation.</span></p></li></ol></div><p><span class="deltaxml-new" style="background:#90EE90">A step with no parent inherits the </span><em class="glossterm"><a href="#dt-empty-environment"><span class="deltaxml-new" style="background:#90EE90">empty environment</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p></section><section id="xpath-context" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">2.6 XPaths in XProc</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">XProc uses XPath as an expression language. XPath expressions are evaluated by the XProc processor in several places: on compound steps, to compute the default values of options and the values of variables; on atomic steps, to compute the actual values of options and the values of parameters.</span></p><p><span class="deltaxml-new" style="background:#90EE90">XPath expressions are also passed to some steps. These expressions are evaluated by the implementations of the individual steps.</span></p><p><span class="deltaxml-new" style="background:#90EE90">This distinction can be seen in the following example:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:variable name="home" select="'http://example.com/docs'"/&gt; &lt;p:load name="read-from-home"&gt; &lt;p:with-option name="href" select="concat($home,'/document.xml')"/&gt; &lt;/p:load&gt; &lt;p:split-sequence name="select-chapters" test="@role='chapter'"&gt; &lt;p:input port="source" select="//section"/&gt; &lt;/p:split-sequence&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">The select expression on the variable “</span><code class="varname"><span class="deltaxml-new" style="background:#90EE90">home</span></code><span class="deltaxml-new" style="background:#90EE90">” is evaluated by the XProc processor. The value of the variable is “</span><code class="uri"><span class="deltaxml-new" style="background:#90EE90">http://example.com/docs</span></code><span class="deltaxml-new" style="background:#90EE90">”.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">href</span></code><span class="deltaxml-new" style="background:#90EE90"> option of the </span><a href="#c.load"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:load</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step is evaluated by the XProc processor. The actual </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">href</span></code><span class="deltaxml-new" style="background:#90EE90"> option received by the step is simply the string literal “</span><code class="uri"><span class="deltaxml-new" style="background:#90EE90">http://example.com/docs/document.xml</span></code><span class="deltaxml-new" style="background:#90EE90">”. (The select expression on the </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> input of the </span><a href="#c.split-sequence"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:split-sequence</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step is also evaluated by the XProc processor.) </span></p><p><span class="deltaxml-new" style="background:#90EE90">The XPath expression “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">@role='chapter'</span></code><span class="deltaxml-new" style="background:#90EE90">” is passed literally to the </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">test</span></code><span class="deltaxml-new" style="background:#90EE90"> option on the </span><a href="#c.split-sequence"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:split-sequence</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step. That's because the nature of the </span><a href="#c.split-sequence"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:split-sequence</span></code></a><span class="deltaxml-new" style="background:#90EE90"> is that </span><em><span class="deltaxml-new" style="background:#90EE90">it evaluates</span></em><span class="deltaxml-new" style="background:#90EE90"> the expression. Only some options on some steps expect XPath expressions. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The XProc processor evaluates all of the XPath expressions in </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> attributes on variables, options, parameters, and inputs, in </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> attributes on </span><a href="#p.viewport"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code></a><span class="deltaxml-new" style="background:#90EE90">, and in </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">test</span></code><span class="deltaxml-new" style="background:#90EE90"> attributes on </span><a href="#p.when"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:when</span></code></a><span class="deltaxml-new" style="background:#90EE90"> steps.</span></p><section id="xproc-xpath-context-20" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">2.6.1 Processor XPath Context</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">When the XProc processor evaluates an XPath expression using XPath, unless otherwise indicated by a particular step, it does so with the following static context:</span></p><div class="variablelist"><dl><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">XPath 1.0 compatibility mode</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">False</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Statically known namespaces</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The namespace declarations in-scope for the containing element. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Default element/type namespace</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The null namespace.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Default function namespace</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The [</span><a href="#xpath2"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XPath 2.0</span></span></a><span class="deltaxml-new" style="background:#90EE90">] function namespace. Function names that do not contain a colon always refer to the default function namespace, any in-scope binding for the default namespace </span><em><span class="deltaxml-new" style="background:#90EE90">does not</span></em><span class="deltaxml-new" style="background:#90EE90"> apply. This specification does not provide a mechanism to override the default function namespace.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">In-scope schema definitions</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">A basic XPath 2.0 XProc processor includes the following named type definitions in its in-scope schema definitions:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">All the primitive atomic types defined in [</span><a href="#xmlschema-2"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">W3C XML Schema: Part 2</span></span></a><span class="deltaxml-new" style="background:#90EE90">], with the exception of </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:NOTATION</span></code><span class="deltaxml-new" style="background:#90EE90">. That is: </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:decimal</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:double</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:float</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:date</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:time</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:dateTime</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:duration</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:QName</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:anyURI</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:gDay</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:gMonthDay</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:gMonth</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:gYearMonth</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:gYear</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:base64Binary</span></code><span class="deltaxml-new" style="background:#90EE90">, and </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:hexBinary</span></code><span class="deltaxml-new" style="background:#90EE90">. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">The derived atomic type </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:integer</span></code><span class="deltaxml-new" style="background:#90EE90"> defined in [</span><a href="#xmlschema-2"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">W3C XML Schema: Part 2</span></span></a><span class="deltaxml-new" style="background:#90EE90">]. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">The types </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:anyType</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:anySimpleType</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:yearMonthDuration</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:dayTimeDuration</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:anyAtomicType</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:untyped</span></code><span class="deltaxml-new" style="background:#90EE90">, and </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:untypedAtomic</span></code><span class="deltaxml-new" style="background:#90EE90"> defined in [</span><a href="#xpath-datamodel"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XQuery 1.0 and XPath 2.0 Data Model (XDM)</span></span></a><span class="deltaxml-new" style="background:#90EE90">]. </span></p></li></ul></div></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">In-scope variables</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The union of the in-scope </span><em class="glossterm"><a href="#dt-specified-options"><span class="deltaxml-new" style="background:#90EE90">specified options</span></a></em><span class="deltaxml-new" style="background:#90EE90"> and variables are available as variable bindings to the XPath processor. </span></p><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">An option that has neither a specified value nor a default value will not appear as an in-scope variable. Consequently, an attempt to refer to that variable will raise an error.</span></p></div></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Context item static type</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Document.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Function signatures</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The signatures of the [</span><a href="#xpath-functions"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XPath 2.0 Functions and Operators</span></span></a><span class="deltaxml-new" style="background:#90EE90">] and the </span><a href="#xpath-extension-functions" title="XPath Extension Functions"><span class="deltaxml-new" style="background:#90EE90">Section 2.7, “XPath Extension Functions”</span></a><span class="deltaxml-new" style="background:#90EE90">. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Statically known collations</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Implementation-defined but </span><span class="rfc2119" id="xproc-xpath-context-20.3.9.2.1.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> include the Unicode code point collation. </span><a name="impl-10"></a><span class="deltaxml-new" style="background:#90EE90">The version of Unicode supported is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">, but it is recommended that the most recent version of Unicode be used. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Default collation</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Unicode code point collation.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Base URI</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The base URI of the element on which the expression occurs.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Statically known documents</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">None.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Statically known collections</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">None.</span></p></dd></dl></div><p><span class="deltaxml-new" style="background:#90EE90">And the following dynamic context:</span></p><div class="variablelist"><dl><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">context item</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The document node of a document. The document is either specified with a </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-new" style="background:#90EE90">connection</span></a></em><span class="deltaxml-new" style="background:#90EE90"> or is taken from the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-new" style="background:#90EE90">default readable port</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span><a name="err.inline.D0008"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0008"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0008</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if a document sequence appears where a document to be used as the context node is expected. </span></p><p><span class="deltaxml-new" style="background:#90EE90">If there is no explicit connection and there is no default readable port then the context node is undefined.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">context position and context size</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The context position and context size are both “1”. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Variable values</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The union of the in-scope options and variables are available as variable bindings to the XPath processor. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Function implementations</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The [</span><a href="#xpath-functions"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XPath 2.0 Functions and Operators</span></span></a><span class="deltaxml-new" style="background:#90EE90">] and the </span><a href="#xpath-extension-functions" title="XPath Extension Functions"><span class="deltaxml-new" style="background:#90EE90">Section 2.7, “XPath Extension Functions”</span></a><span class="deltaxml-new" style="background:#90EE90">. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Current dateTime</span></span></dt><dd><p><a name="impl-11"></a><span class="deltaxml-new" style="background:#90EE90">The point in time returned as the current dateTime is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Implicit timezone</span></span></dt><dd><p><a name="impl-12"></a><span class="deltaxml-new" style="background:#90EE90">The implicit timezone is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Available documents</span></span></dt><dd><p><a name="impl-13"></a><span class="deltaxml-new" style="background:#90EE90">The set of available documents (those that may be retrieved with a URI) is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Available collections</span></span></dt><dd><p><a name="impl-14"></a><span class="deltaxml-new" style="background:#90EE90">The set of available collections is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Default collection</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">None. </span></p></dd></dl></div></section><section id="step-xpath-context-20" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">2.6.2 Step XPath Context</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">When a step evaluates an XPath expression using XPath 2.0, unless otherwise indicated by a particular step, it does so with the following static context:</span></p><div class="variablelist"><dl><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">XPath 1.0 compatibility mode</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">False</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Statically known namespaces</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The namespace declarations in-scope for the containing element or made available through </span><a href="#p.namespaces"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:namespaces</span></code></a><span class="deltaxml-new" style="background:#90EE90">. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Default element/type namespace</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The null namespace.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Default function namespace</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The [</span><a href="#xpath2"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XPath 2.0</span></span></a><span class="deltaxml-new" style="background:#90EE90">] function namespace. Function names that do not contain a colon always refer to the default function namespace, any in-scope binding for the default namespace </span><em><span class="deltaxml-new" style="background:#90EE90">does not</span></em><span class="deltaxml-new" style="background:#90EE90"> apply. This specification does not provide a mechanism to override the default function namespace.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">In-scope schema definitions</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The same as the </span><a href="#xproc-xpath-context-20" title="Processor XPath Context"><span class="deltaxml-new" style="background:#90EE90">Section 2.6.1, “Processor XPath Context”</span></a><span class="deltaxml-new" style="background:#90EE90">. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">In-scope variables</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">None, unless otherwise specified by the step. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Context item static type</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Document.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Function signatures</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The signatures of the [</span><a href="#xpath-functions"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XPath 2.0 Functions and Operators</span></span></a><span class="deltaxml-new" style="background:#90EE90">].</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Statically known collations</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Implementation-defined but </span><span class="rfc2119" id="step-xpath-context-20.3.9.2.1.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> include the Unicode code point collation.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Default collation</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Unicode code point collation.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Base URI</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The base URI of the element on which the expression occurs.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Statically known documents</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">None.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Statically known collections</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">None.</span></p></dd></dl></div><p><span class="deltaxml-new" style="background:#90EE90">And the following initial dynamic context:</span></p><div class="variablelist"><dl><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">context item</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The document node of the document that appears on the primary input of the step, unless otherwise specified by the step.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">context position and context size</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The context position and context size are both “1”, unless otherwise specified by the step. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Variable values</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">None, unless otherwise specified by the step. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Function implementations</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The [</span><a href="#xpath-functions"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XPath 2.0 Functions and Operators</span></span></a><span class="deltaxml-new" style="background:#90EE90">]. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Current dateTime</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">An implementation-defined point in time. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Implicit timezone</span></span></dt><dd><p><a name="impl-15"></a><span class="deltaxml-new" style="background:#90EE90">The implicit timezone is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Available documents</span></span></dt><dd><p><a name="impl-16"></a><span class="deltaxml-new" style="background:#90EE90">The set of available documents (those that may be retrieved with a URI) is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Available collections</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">None. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Default collection</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">None. </span></p></dd></dl></div><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">Some steps may also provide for implementation-defined or implementation-dependent amendments to the contexts. Those amendments are in addition to any specified by XProc.</span></p></div></section></section><section id="xpath-extension-functions" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">2.7 XPath Extension Functions</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">The XProc processor </span><span class="rfc2119" id="xpath-extension-functions.2.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> support the additional functions described in this section in XPath expressions evaluated by the processor.</span></p><section id="f.system-property" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">2.7.1 System Properties</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">XPath expressions within a pipeline document can interrogate the processor for information about the current state of the pipeline. Various aspects of the processor are exposed through the </span><a href="#f.system-property"><code class="function"><span class="deltaxml-new" style="background:#90EE90">p:system-property</span></code></a><span class="deltaxml-new" style="background:#90EE90"> function in the pipeline namespace:</span></p><div class="funcsynopsis"><span class="funcname"><span class="deltaxml-new" style="background:#90EE90">p:system-property</span></span><span class="funcparen"><span class="deltaxml-new" style="background:#90EE90">(</span></span><span class="paramname"><span class="deltaxml-new" style="background:#90EE90">$property</span></span><span class="typeas"><span class="deltaxml-new" style="background:#90EE90"> as </span></span><span class="type"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></span><span class="funcparen"><span class="deltaxml-new" style="background:#90EE90">)</span></span><span class="typeas"><span class="deltaxml-new" style="background:#90EE90"> as </span></span><span class="type"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></span></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="varname"><span class="deltaxml-new" style="background:#90EE90">$property</span></code><span class="deltaxml-new" style="background:#90EE90"> string must have the form of a </span><a href="http://www.w3.org/TR/xml-names/#NT-QName"><span class="deltaxml-new" style="background:#90EE90">QName</span></a><span class="deltaxml-new" style="background:#90EE90">; the QName is expanded into a name using the namespace declarations in scope for the expression. </span><a name="err.inline.D0015"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0015"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0015</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the specified QName cannot be resolved with the in-scope namespace declarations. The </span><a href="#f.system-property"><code class="function"><span class="deltaxml-new" style="background:#90EE90">p:system-property</span></code></a><span class="deltaxml-new" style="background:#90EE90"> function returns the string representing the value of the system property identified by the QName. If there is no such property, the empty string </span><span class="rfc2119" id="f.system-property.4.5"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be returned.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Implementations </span><span class="rfc2119" id="f.system-property.5.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> provide the following system properties, which are all in the XProc namespace:</span></p><div class="variablelist"><dl><dt><span class="term"><code class="varname"><span class="deltaxml-new" style="background:#90EE90">p:episode</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Returns a string which </span><span class="rfc2119" id="f.system-property.6.1.2.1.1"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> be unique for each invocation of the pipeline processor. In other words, if a processor is run several times in succession, or if several processors are running simultaneously, each invocation of each processor should get a distinct value from </span><code class="varname"><span class="deltaxml-new" style="background:#90EE90">p:episode</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The unique identifier must be a valid </span><a href="http://www.w3.org/TR/XML#NT-Name"><span class="deltaxml-new" style="background:#90EE90">XML name</span></a><span class="deltaxml-new" style="background:#90EE90">. </span></p></dd><dt><span class="term"><code class="varname"><span class="deltaxml-new" style="background:#90EE90">p:language</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Returns a string which identifies the current language, for example, for message localization purposes. </span><a name="impl-17"></a><span class="deltaxml-new" style="background:#90EE90">The exact format of the language string is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90"> but </span><span class="rfc2119" id="f.system-property.6.2.2.1.1.2"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> be consistent with the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xml:lang</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute.</span></p></dd><dt><span class="term"><code class="varname"><span class="deltaxml-new" style="background:#90EE90">p:product-name</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Returns a string containing the name of the implementation, as defined by the implementer. This should normally remain constant from one release of the product to the next. It should also be constant across platforms in cases where the same source code is used to produce compatible products for multiple execution platforms.</span></p></dd><dt><span class="term"><code class="varname"><span class="deltaxml-new" style="background:#90EE90">p:product-version</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Returns a string identifying the version of the implementation, as defined by the implementer. This should normally vary from one release of the product to the next, and at the discretion of the implementer it may also vary across different execution platforms. </span></p></dd><dt><span class="term"><code class="varname"><span class="deltaxml-new" style="background:#90EE90">p:vendor</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Returns a string which identifies the vendor of the processor.</span></p></dd><dt><span class="term"><code class="varname"><span class="deltaxml-new" style="background:#90EE90">p:vendor-uri</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Returns a URI which identifies the vendor of the processor. Often, this is the URI of the vendor's web site.</span></p></dd><dt><span class="term"><code class="varname"><span class="deltaxml-new" style="background:#90EE90">p:version</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Returns the version(s) of XProc implemented by the processor as a space-separated list. For example, a processor that supports XProc 1.0 would return “1.0”; a processor that supports XProc 1.0 and 2.0 would return “1.0 2.0”; a processor that supports only XProc 2.0 would return “2.0”.</span></p></dd><dt><span class="term"><code class="varname"><span class="deltaxml-new" style="background:#90EE90">p:xpath-version</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Returns the version(s) of XPath implemented by the processor for evaluating XPath expressions on XProc elements. The result is a space-separated list of versions supported. For example, a processor that only supports XPath 2.0 would return “2.0”; a processor that supports XPath 2.0 and XPath 3.0 could return “2.0 3.0”; a processor that supports only XPath 2.0 would return “2.0”.</span></p></dd><dt><span class="term"><code class="varname"><span class="deltaxml-new" style="background:#90EE90">p:psvi-supported</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Returns true if the implementation supports passing PSVI annotations between steps, false otherwise.</span></p></dd></dl></div><p><span class="deltaxml-new" style="background:#90EE90">Implementations may support additional system properties but such properties </span><span class="rfc2119" id="f.system-property.7.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be in a namespace and </span><span class="rfc2119" id="f.system-property.7.2"><span class="deltaxml-new" style="background:#90EE90">must not</span></span><span class="deltaxml-new" style="background:#90EE90"> be in the XProc namespace.</span></p></section><section id="f.step-available" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">2.7.2 Step Available</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><a href="#f.step-available"><code class="function"><span class="deltaxml-new" style="background:#90EE90">p:step-available</span></code></a><span class="deltaxml-new" style="background:#90EE90"> function reports whether or not a particular type of step is understood by the processor.</span></p><div class="funcsynopsis"><span class="funcname"><span class="deltaxml-new" style="background:#90EE90">p:step-available</span></span><span class="funcparen"><span class="deltaxml-new" style="background:#90EE90">(</span></span><span class="paramname"><span class="deltaxml-new" style="background:#90EE90">$step-name</span></span><span class="typeas"><span class="deltaxml-new" style="background:#90EE90"> as </span></span><span class="type"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></span><span class="funcparen"><span class="deltaxml-new" style="background:#90EE90">)</span></span><span class="typeas"><span class="deltaxml-new" style="background:#90EE90"> as </span></span><span class="type"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></span></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="varname"><span class="deltaxml-new" style="background:#90EE90">$step-type</span></code><span class="deltaxml-new" style="background:#90EE90"> string </span><span class="rfc2119" id="f.step-available.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> have the form of a QName; the QName is expanded into a name using the namespace declarations in-scope for the expression. The </span><a href="#f.step-available"><code class="function"><span class="deltaxml-new" style="background:#90EE90">p:step-available</span></code></a><span class="deltaxml-new" style="background:#90EE90"> function returns true if and only if the processor knows how to evaluate steps of the specified type.</span></p></section><section id="f.value-available" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">2.7.3 Value Available</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><a href="#f.value-available"><code class="function"><span class="deltaxml-new" style="background:#90EE90">p:value-available</span></code></a><span class="deltaxml-new" style="background:#90EE90"> function reports whether or not a particular in-scope option has a value.</span></p><div class="funcsynopsis"><span class="funcname"><span class="deltaxml-new" style="background:#90EE90">p:value-available</span></span><span class="funcparen"><span class="deltaxml-new" style="background:#90EE90">(</span></span><span class="paramname"><span class="deltaxml-new" style="background:#90EE90">$option-name</span></span><span class="typeas"><span class="deltaxml-new" style="background:#90EE90"> as </span></span><span class="type"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></span><span class="funcparen"><span class="deltaxml-new" style="background:#90EE90">)</span></span><span class="typeas"><span class="deltaxml-new" style="background:#90EE90"> as </span></span><span class="type"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></span></div><div class="funcsynopsis"><span class="funcname"><span class="deltaxml-new" style="background:#90EE90">p:value-available</span></span><span class="funcparen"><span class="deltaxml-new" style="background:#90EE90">(</span></span><span class="paramname"><span class="deltaxml-new" style="background:#90EE90">$option-name</span></span><span class="typeas"><span class="deltaxml-new" style="background:#90EE90"> as </span></span><span class="type"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></span><span class="funccomma"><span class="deltaxml-new" style="background:#90EE90">, </span></span><span class="paramname"><span class="deltaxml-new" style="background:#90EE90">$fail-if-unknown</span></span><span class="typeas"><span class="deltaxml-new" style="background:#90EE90"> as </span></span><span class="type"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></span><span class="funcparen"><span class="deltaxml-new" style="background:#90EE90">)</span></span><span class="typeas"><span class="deltaxml-new" style="background:#90EE90"> as </span></span><span class="type"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></span></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="varname"><span class="deltaxml-new" style="background:#90EE90">$option-name</span></code><span class="deltaxml-new" style="background:#90EE90"> string </span><span class="rfc2119" id="f.value-available.5.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> have the form of a QName; the QName is expanded into a name using the namespace declarations in-scope for the expression. The </span><a href="#f.value-available"><code class="function"><span class="deltaxml-new" style="background:#90EE90">p:value-available</span></code></a><span class="deltaxml-new" style="background:#90EE90"> function returns true if and only if the name specified is the name of an </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-new" style="background:#90EE90">in-scope binding</span></a></em><span class="deltaxml-new" style="background:#90EE90"> and the binding has a value. </span><a name="err.inline.D0033"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0033"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0033</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the name specified is not the name of an in-scope option or variable.</span></p><p><span class="deltaxml-new" style="background:#90EE90">In the two-argument form, it is not an error to specify a name that is not the name of an in-scope option or variable if </span><code class="varname"><span class="deltaxml-new" style="background:#90EE90">$fail-if-unknown</span></code><span class="deltaxml-new" style="background:#90EE90"> is false; the function simply returns false. The semantics of the two-argument form when </span><code class="varname"><span class="deltaxml-new" style="background:#90EE90">$fail-if-unknown</span></code><span class="deltaxml-new" style="background:#90EE90"> is true are precisely the same as the single argument form.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Consider the following example:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step type="ex:dir-list"&gt; &lt;p:output port="result"/&gt; &lt;p:option name="path"/&gt; &lt;p:choose&gt; &lt;p:when test="p:value-available('path')"&gt; &lt;p:directory-list&gt; &lt;p:with-option name="path" select="$path"/&gt; &lt;/p:directory-list&gt; &lt;/p:when&gt; &lt;p:otherwise&gt; &lt;p:directory-list path="."/&gt; &lt;/p:otherwise&gt; &lt;/p:choose&gt; &lt;/p:declare-step&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">path</span></code><span class="deltaxml-new" style="background:#90EE90"> option is specified in the call to </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">ex:dir-list</span></code><span class="deltaxml-new" style="background:#90EE90">, then the first </span><a href="#p.when"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:when</span></code></a><span class="deltaxml-new" style="background:#90EE90"> clause will be evaluated and the specified value will be used. If the option is not specified, then the </span><a href="#p.otherwise"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:otherwise</span></code></a><span class="deltaxml-new" style="background:#90EE90"> clause will be evaluated and "</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">.</span></code><span class="deltaxml-new" style="background:#90EE90">" will be used instead.</span></p></section><section id="f.iteration-position" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">2.7.4 Iteration Position</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">Both </span><a href="#p.for-each"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#p.viewport"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code></a><span class="deltaxml-new" style="background:#90EE90"> process a sequence of documents. The iteration position is the position of the current document in that sequence: the first document has position 1, the second 2, etc. The </span><a href="#f.iteration-position"><code class="function"><span class="deltaxml-new" style="background:#90EE90">p:iteration-position</span></code></a><span class="deltaxml-new" style="background:#90EE90"> function returns the iteration position of the nearest ancestor </span><a href="#p.for-each"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#p.viewport"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><div class="funcsynopsis"><span class="funcname"><span class="deltaxml-new" style="background:#90EE90">p:iteration-position</span></span><span class="funcparen"><span class="deltaxml-new" style="background:#90EE90">(</span></span><span class="funcparen"><span class="deltaxml-new" style="background:#90EE90">)</span></span><span class="typeas"><span class="deltaxml-new" style="background:#90EE90"> as </span></span><span class="type"><span class="deltaxml-new" style="background:#90EE90">xs:integer</span></span></div><p><span class="deltaxml-new" style="background:#90EE90">If there is no </span><a href="#p.for-each"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#p.viewport"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code></a><span class="deltaxml-new" style="background:#90EE90"> among the ancestors of the element on which the expression involving </span><a href="#f.iteration-position"><code class="function"><span class="deltaxml-new" style="background:#90EE90">p:iteration-position</span></code></a><span class="deltaxml-new" style="background:#90EE90"> occurs, it returns 1.</span></p></section><section id="f.iteration-size" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">2.7.5 Iteration Size</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">Both </span><a href="#p.for-each"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#p.viewport"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code></a><span class="deltaxml-new" style="background:#90EE90"> process a sequence of documents. The iteration size is the total number of documents in that sequence. The </span><a href="#f.iteration-size"><code class="function"><span class="deltaxml-new" style="background:#90EE90">p:iteration-size</span></code></a><span class="deltaxml-new" style="background:#90EE90"> function returns the iteration size of the nearest ancestor </span><a href="#p.for-each"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#p.viewport"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><div class="funcsynopsis"><span class="funcname"><span class="deltaxml-new" style="background:#90EE90">p:iteration-size</span></span><span class="funcparen"><span class="deltaxml-new" style="background:#90EE90">(</span></span><span class="funcparen"><span class="deltaxml-new" style="background:#90EE90">)</span></span><span class="typeas"><span class="deltaxml-new" style="background:#90EE90"> as </span></span><span class="type"><span class="deltaxml-new" style="background:#90EE90">xs:integer</span></span></div><p><span class="deltaxml-new" style="background:#90EE90">If there is no </span><a href="#p.for-each"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#p.viewport"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code></a><span class="deltaxml-new" style="background:#90EE90"> among the ancestors of the element on which the expression involving </span><a href="#f.iteration-size"><code class="function"><span class="deltaxml-new" style="background:#90EE90">p:iteration-size</span></code></a><span class="deltaxml-new" style="background:#90EE90"> occurs, it returns 1.</span></p></section><section id="f.version-available" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">2.7.6 Version Available</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">Returns true if and only if the processor supports the version specified.</span></p><div class="funcsynopsis"><span class="funcname"><span class="deltaxml-new" style="background:#90EE90">p:version-available</span></span><span class="funcparen"><span class="deltaxml-new" style="background:#90EE90">(</span></span><span class="paramname"><span class="deltaxml-new" style="background:#90EE90">$version</span></span><span class="typeas"><span class="deltaxml-new" style="background:#90EE90"> as </span></span><span class="type"><span class="deltaxml-new" style="background:#90EE90">xs:decimal</span></span><span class="funcparen"><span class="deltaxml-new" style="background:#90EE90">)</span></span><span class="typeas"><span class="deltaxml-new" style="background:#90EE90"> as </span></span><span class="type"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></span></div><p><span class="deltaxml-new" style="background:#90EE90">A version 1.0 processor will return </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true()</span></code><span class="deltaxml-new" style="background:#90EE90"> when </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:version-available(1.0)</span></code><span class="deltaxml-new" style="background:#90EE90"> is evaluated.</span></p></section><section id="f.xpath-version-available" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">2.7.7 XPath Version Available</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">Returns true if and only if the processor supports the XPath version specified.</span></p><div class="funcsynopsis"><span class="funcname"><span class="deltaxml-new" style="background:#90EE90">p:xpath-version-available</span></span><span class="funcparen"><span class="deltaxml-new" style="background:#90EE90">(</span></span><span class="paramname"><span class="deltaxml-new" style="background:#90EE90">$version</span></span><span class="typeas"><span class="deltaxml-new" style="background:#90EE90"> as </span></span><span class="type"><span class="deltaxml-new" style="background:#90EE90">xs:decimal</span></span><span class="funcparen"><span class="deltaxml-new" style="background:#90EE90">)</span></span><span class="typeas"><span class="deltaxml-new" style="background:#90EE90"> as </span></span><span class="type"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></span></div><p><span class="deltaxml-new" style="background:#90EE90">A processor that supports XPath 2.0 will return </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true()</span></code><span class="deltaxml-new" style="background:#90EE90"> when </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:xpath-version-available(2.0)</span></code><span class="deltaxml-new" style="background:#90EE90"> is evaluated.</span></p></section><section id="other-xpath-extension-functions" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">2.7.8 Other XPath Extension Functions</span></h4></div><p><a name="impl-18"></a><span class="deltaxml-new" style="background:#90EE90">It is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90"> if the processor supports any other XPath extension functions. Additional extension functions, if any, </span><span class="rfc2119" id="other-xpath-extension-functions.2.2"><span class="deltaxml-new" style="background:#90EE90">must not</span></span><span class="deltaxml-new" style="background:#90EE90"> use any of the XProc namespaces. </span></p></section></section><section id="psvi-support" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">2.8 PSVIs in XProc</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">XML documents flow between steps in an XProc pipeline. </span><a href="#infoset-conformance" title="Infoset Conformance"><span class="deltaxml-new" style="background:#90EE90">Section 3, “Infoset Conformance”</span></a><span class="deltaxml-new" style="background:#90EE90"> identifies the properties of those documents that </span><span class="rfc2119" id="psvi-support.2.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be available. Implementations </span><span class="rfc2119" id="psvi-support.2.3"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> also have the ability to pass PSVI annotations between steps.</span></p><p><a name="impl-19"></a><span class="deltaxml-new" style="background:#90EE90">Whether or not the pipeline processor supports passing PSVI annotations between steps is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span><a name="impl-20"></a><span class="deltaxml-new" style="background:#90EE90">The exact PSVI properties that are preserved when documents are passed between steps is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">A pipeline can use the </span><code class="varname"><span class="deltaxml-new" style="background:#90EE90">p:psvi-supported</span></code><span class="deltaxml-new" style="background:#90EE90"> system property to determine whether or not PSVI properties can be passed between steps.</span></p><p><span class="deltaxml-new" style="background:#90EE90">A pipeline can assert that PSVI support is required with the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">psvi-required</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">On a </span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#p.declare-step"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">psvi-required</span></code><span class="deltaxml-new" style="background:#90EE90"> indicates whether or not the declared step requires PSVI support. </span><a name="err.inline.D0022"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0022"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0022</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if a processor that does not support PSVI annotations attempts to invoke a step which asserts that they are required.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">On a </span><a href="#p.library"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:library</span></code></a><span class="deltaxml-new" style="background:#90EE90">, the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">psvi-required</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute provides a default value for all of its </span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#p.declare-step"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code></a><em><span class="deltaxml-new" style="background:#90EE90">children</span></em><span class="deltaxml-new" style="background:#90EE90"> that do not specify a value themselves.</span></p></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">Many of the steps that an XProc pipeline can use are transformative in nature. The </span><a href="#c.delete"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:delete</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step, for example, can remove elements and attributes; the </span><a href="#c.label-elements"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:label-elements</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step can add attributes; etc. If PSVI annotations were always preserved, the use of such steps could result in documents that were inconsistent with their schema annotations.</span></p><p><span class="deltaxml-new" style="background:#90EE90">In order to avoid these inconsistencies, most steps </span><span class="rfc2119" id="psvi-support.8.1"><span class="deltaxml-new" style="background:#90EE90">must not</span></span><span class="deltaxml-new" style="background:#90EE90"> produce PSVI annotated results even when PSVI passing is supported.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If PSVI passing is supported, the following constraints apply:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-new" style="background:#90EE90">Implementations </span><span class="rfc2119" id="psvi-support.10.1.1.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> faithfully transmit any PSVI properties produced on step outputs to the steps to which they are connected.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">When only a subset of the input is processed by a step (because a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> expression appears on an input port or a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> expression is used to process only part of the input), any PSVI annotations that appear on the selected input </span><span class="rfc2119" id="psvi-support.10.2.1.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be preserved in the resulting documents passed to the step.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Note that ID/IDREF constraints, and any other whole-document constraints, may not be satisfied within the selected portion, irrespective of what its PSVI properties claim.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">If an output of a compound step is connected to an output which includes PSVI properties, those properties </span><span class="rfc2119" id="psvi-support.10.3.1.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be preserved on the output of the compound step, </span><em><span class="deltaxml-new" style="background:#90EE90">except</span></em><span class="deltaxml-new" style="background:#90EE90"> for the output of </span><a href="#p.viewport"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code></a><span class="deltaxml-new" style="background:#90EE90"> which </span><span class="rfc2119" id="psvi-support.10.3.1.4"><span class="deltaxml-new" style="background:#90EE90">must not</span></span><span class="deltaxml-new" style="background:#90EE90"> contain any PSVI properties.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">If an implementation supports XPath 2.0, the data model constructed with which to evaluate XPath expressions and match patterns </span><span class="rfc2119" id="psvi-support.10.4.1.1"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> take advantage of as much PSVI information as possible. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Except as specified above, or in the descriptions of individual steps, implementations </span><span class="rfc2119" id="psvi-support.10.5.1.1"><span class="deltaxml-new" style="background:#90EE90">must not</span></span><span class="deltaxml-new" style="background:#90EE90"> include PSVI properties in the outputs of steps defined by this specification. </span><a name="impl-21"></a><span class="deltaxml-new" style="background:#90EE90">It is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90"> what PSVI properties, if any, are produced by extension steps.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The exceptions in the standard XProc steps are the </span><a href="#c.validate-with-xml-schema"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-xml-schema</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#c.validate-with-relax-ng"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-relax-ng</span></code></a><span class="deltaxml-new" style="background:#90EE90">, and </span><a href="#c.validate-with-schematron"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-schematron</span></code></a><span class="deltaxml-new" style="background:#90EE90"> steps, </span><a href="#c.xslt"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xslt</span></code></a><span class="deltaxml-new" style="background:#90EE90"> (when XSLT 2.0 is used), </span><a href="#c.xquery"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xquery</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#c.identity"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:identity</span></code></a><span class="deltaxml-new" style="background:#90EE90">, and </span><a href="#c.split-sequence"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:split-sequence</span></code></a><span class="deltaxml-new" style="background:#90EE90">. </span></p></li></ol></div><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">A processor that supports passing PSVI properties between steps is always free to do so. Even if </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">psvi-required="false"</span></code><span class="deltaxml-new" style="background:#90EE90"> is explicitly specified, it is not an error for a step to produce a result that includes additional PSVI properties, provide it does not violate the constraints above.</span></p></div></section><section id="variables" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">2.9 Variables</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">Variables are name/value pairs. Pipeline authors can create variables to hold computed values.</span></p><p><span id="dt-variable" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: A </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">variable</span></em><span class="deltaxml-new" style="background:#90EE90"> is a name/value pair where the name is an </span><a href="http://www.w3.org/TR/REC-xml-names/#dt-expname"><span class="deltaxml-new" style="background:#90EE90">expanded name</span></a><span class="deltaxml-new" style="background:#90EE90"> and the value </span><span class="rfc2119" id="dt-variable.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a string or </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">xs:untypedAtomic</span></code><span class="deltaxml-new" style="background:#90EE90">.]</span></span></p><p><span class="deltaxml-new" style="background:#90EE90">Variables and options share the same scope and may shadow each other. </span></p></section><section id="options" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">2.10 Options</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">Some steps accept options. Options are name/value pairs, like variables. Unlike variables, the value of an option can be changed by the caller.</span></p><p><span id="dt-option" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: An </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">option</span></em><span class="deltaxml-new" style="background:#90EE90"> is a name/value pair where the name is an </span><a href="http://www.w3.org/TR/REC-xml-names/#dt-expname"><span class="deltaxml-new" style="background:#90EE90">expanded name</span></a><span class="deltaxml-new" style="background:#90EE90"> and the value </span><span class="rfc2119" id="dt-option.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a string or </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">xs:untypedAtomic</span></code><span class="deltaxml-new" style="background:#90EE90">.]</span></span></p><p><span id="dt-declared-options" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: The options declared on a step are its </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">declared options</span></em><span class="deltaxml-new" style="background:#90EE90">.]</span></span><span class="deltaxml-new" style="background:#90EE90"> Option names are always expressed as literal values, pipelines cannot construct option names dynamically. </span></p><p><span id="dt-specified-options" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: The options on a step which have specified values, either because a </span><a href="#p.with-option"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element specifies a value or because the declaration included a default value, are its </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">specified options</span></em><span class="deltaxml-new" style="background:#90EE90">.]</span></span></p><p><a name="impl-22"></a><span class="deltaxml-new" style="background:#90EE90">How outside values are specified for pipeline options on the pipeline initially invoked by the processor is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">. In other words, the command line options, APIs, or other mechanisms available to specify such options values are outside the scope of this specification.</span></p></section><section id="parameters" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">2.11 Parameters</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">Some steps accept parameters. Parameters are name/value pairs, like variables and options. Unlike variables and options, which have names known in advance to the pipeline, parameters are not declared and their names may be unknown to the pipeline author. Pipelines can dynamically construct sets of parameters. Steps can read dynamically constructed sets on </span><em class="glossterm"><a href="#dt-parameter-input-port"><span class="deltaxml-new" style="background:#90EE90">parameter input ports</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p><p><span id="dt-parameter" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: A </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">parameter</span></em><span class="deltaxml-new" style="background:#90EE90"> is a name/value pair where the name is an </span><a href="http://www.w3.org/TR/REC-xml-names/#dt-expname"><span class="deltaxml-new" style="background:#90EE90">expanded name</span></a><span class="deltaxml-new" style="background:#90EE90"> and the value </span><span class="rfc2119" id="dt-parameter.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a string or </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">xs:untypedAtomic</span></code><span class="deltaxml-new" style="background:#90EE90">.]</span></span></p><p><span id="dt-parameter-input-port" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: A </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">parameter input port</span></em><span class="deltaxml-new" style="background:#90EE90"> is a distinguished kind of input port which accepts (only) dynamically constructed parameter name/value pairs.]</span></span><span class="deltaxml-new" style="background:#90EE90"> See </span><a href="#parameter-inputs" title="Parameter Inputs"><span class="deltaxml-new" style="background:#90EE90">Section 5.1.2, “Parameter Inputs”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Analogous to </span><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-new" style="background:#90EE90">primary input ports</span></a></em><span class="deltaxml-new" style="background:#90EE90">, steps that have parameter inputs may designate at most one parameter input port as a primary parameter input port.</span></p><p><span id="dt-primary-parameter-input-port" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: If a step has a parameter input port which is explicitly marked “</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">primary='true'</span></code><span class="deltaxml-new" style="background:#90EE90">”, or if it has exactly one parameter input port and that port is </span><em><span class="deltaxml-new" style="background:#90EE90">not</span></em><span class="deltaxml-new" style="background:#90EE90"> explicitly marked “</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">primary='false'</span></code><span class="deltaxml-new" style="background:#90EE90">”, then that parameter input port is the </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">primary parameter input port</span></em><span class="deltaxml-new" style="background:#90EE90"> of the step.]</span></span><span class="deltaxml-new" style="background:#90EE90"> If a step has a single parameter input port and that port is explicitly marked “</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">primary='false'</span></code><span class="deltaxml-new" style="background:#90EE90">”, or if a step has more than one parameter input port and none is explicitly marked as the primary, then the primary parameter input port of that step is undefined.</span></p><p><a name="impl-23"></a><span class="deltaxml-new" style="background:#90EE90">How outside values are specified for pipeline parameters on the pipeline initially invoked by the processor is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">. In other words, the command line options, APIs, or other mechanisms available to specify such parameter values are outside the scope of this specification.</span></p></section><section id="security-considerations" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">2.12 Security Considerations</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">An XProc pipeline may attempt to access arbitrary network resources: steps such as </span><a href="#c.load"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:load</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#c.http-request"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></code></a><span class="deltaxml-new" style="background:#90EE90"> can attempt to read from an arbitrary URI; steps such as </span><a href="#c.store"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:store</span></code></a><span class="deltaxml-new" style="background:#90EE90"> can attempt to write to an arbitrary location; </span><a href="#c.exec"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:exec</span></code></a><span class="deltaxml-new" style="background:#90EE90"> can attempt to execute an arbitrary program. Note, also, that some steps, such as </span><a href="#c.xslt"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xslt</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#c.xquery"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xquery</span></code></a><span class="deltaxml-new" style="background:#90EE90">, include extension mechanisms which may attempt to execute arbitrary code. </span></p><p><span class="deltaxml-new" style="background:#90EE90">In some environments, it may be inappropriate to provide the XProc pipeline with access to these resources. In a server environment, for example, it may be impractical to allow pipelines to store data. In environments where the pipeline cannot be trusted, allowing the pipeline to access arbitrary resources or execute arbitrary code may be a security risk.</span></p><p><a name="err.inline.D0021"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0021"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0021</span></code></a><span class="deltaxml-new" style="background:#90EE90">) for a pipeline to attempt to access a resource for which it has insufficient privileges or perform a step which is forbidden. </span><a name="impl-24"></a><span class="deltaxml-new" style="background:#90EE90">Which steps are forbidden, what privileges are needed to access resources, and under what circumstances these security constraints apply is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p><p><span class="deltaxml-new" style="background:#90EE90">Steps in a pipeline may call themselves recursively which could result in pipelines which will never terminate.</span></p><p><span class="deltaxml-new" style="background:#90EE90">A conformant XProc processor may limit the resources available to any or all steps in a pipeline. A conformant implementation may raise dynamic errors, or take any other corrective action, for any security problems that it detects.</span></p></section><section id="versioning-considerations" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">2.13 Versioning Considerations</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A pipeline author </span><span class="rfc2119" id="versioning-considerations.2.1"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> identify the version of XProc for which a particular pipeline was authored by setting the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute. The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute can be specified on </span><a href="#p.declare-step"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90">, or </span><a href="#p.library"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:library</span></code></a><span class="deltaxml-new" style="background:#90EE90">. If specified, the value of the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute </span><span class="rfc2119" id="versioning-considerations.2.8"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">xs:decimal</span></code><span class="deltaxml-new" style="background:#90EE90">. </span><a name="err.inline.S0063"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0063"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0063</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the value of the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is not a </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">xs:decimal</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The version of XProc defined by this specification is “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">1.0</span></code><span class="deltaxml-new" style="background:#90EE90">”.</span></p><p><span class="deltaxml-new" style="background:#90EE90">A pipeline author </span><span class="rfc2119" id="versioning-considerations.4.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> identify the version of XProc on the document element of a pipeline document. </span><a name="err.inline.S0062"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0062"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0062</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if a required </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is not present.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The version identified applies to the element on which the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute appears and all of its descendants, unless or until another version is explicitly identified.</span></p><p><span class="deltaxml-new" style="background:#90EE90">When a processor encounters an explicit version (other than a version which it implements), it proceeds in backwards- or forwards-compatible mode. </span></p><section id="vers-backcomp" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">2.13.1 Backwards-compatible Mode</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">If the processor encounters a request for a previous version of XProc (e.g., if a "2.0" processor encounters an explicit request for the "1.0" language), it </span><span class="rfc2119" id="vers-backcomp.2.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> process the pipeline as if it was a processor for the requested version: it </span><span class="rfc2119" id="vers-backcomp.2.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> enforce the semantics of the requested version, it </span><span class="rfc2119" id="vers-backcomp.2.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> report steps not known in that version as errors, etc. </span><a name="err.inline.S0060"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0060"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0060</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the processor encounters an explicit request for a previous version of the language and it is unable to process the pipeline using those semantics.</span></p></section><section id="vers-forwcomp" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">2.13.2 Forwards-compatible Mode</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">If the processor encounters an explicit version which it does not recognize, it processes the pipeline in forwards-compatible mode. Forwards-compatible mode relaxes several static errors, turning them into dynamic errors so that a pipeline author can write a pipeline which conditionally uses new language features.</span></p><p><span class="deltaxml-new" style="background:#90EE90">In forwards-compatible mode:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-new" style="background:#90EE90">On any element in the XProc namespace, unrecognized attributes (other than extension attributes) are ignored.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">On any step in the XProc namespace, unknown options are ignored. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">If a step in the XProc namespace includes an unknown input port with an explicit connection, the connection is treated normally for the purpose of computing the dependencies in the pipeline but it is otherwise ignored. Unknown input ports </span><span class="rfc2119" id="vers-forwcomp.4.3.1.1"><span class="deltaxml-new" style="background:#90EE90">must not</span></span><span class="deltaxml-new" style="background:#90EE90"> be treated as </span><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-new" style="background:#90EE90">primary input ports</span></a></em><span class="deltaxml-new" style="background:#90EE90">; it will always be an error if they are used but not explicitly connected. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">If a step in the pipeline includes an explicit connection to an unknown output port on a step in the XProc namespace, the connection is treated normally for the purpose of computing the dependencies in the pipeline. An empty sequence of documents </span><span class="rfc2119" id="vers-forwcomp.4.4.1.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> appear on that connection. </span></p></li></ol></div><p><span class="deltaxml-new" style="background:#90EE90">As a consequence of the rules above, future specifications </span><span class="rfc2119" id="vers-forwcomp.5.1"><span class="deltaxml-new" style="background:#90EE90">must not</span></span><span class="deltaxml-new" style="background:#90EE90"> change the semantics of existing step types without changing their names. Although they may add new input and output ports, such changes should be done with care; they </span><span class="rfc2119" id="vers-forwcomp.5.2"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> in some sense be limited to ancillary inputs and outputs and they </span><span class="rfc2119" id="vers-forwcomp.5.3"><span class="deltaxml-new" style="background:#90EE90">must not</span></span><span class="deltaxml-new" style="background:#90EE90"> be </span><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-new" style="background:#90EE90">primary input ports</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p><section id="vers-forwcomp-ex" class="section"><div class="section-titlepage"><h5><span class="deltaxml-new" style="background:#90EE90">2.13.2.1 Examples</span></h5></div><p><span class="deltaxml-new" style="background:#90EE90">In forwards-compatible mode, it is not a static error to encounter the following step:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:string-replace match="div/@class" replace="newclass"&gt; &lt;p:input port="ancillary"&gt; &lt;p:document href="doc.xml"/&gt; &lt;/p:input&gt; &lt;/p:string-replace&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">The processor will simply ignore the “</span><code class="port"><span class="deltaxml-new" style="background:#90EE90">ancillary</span></code><span class="deltaxml-new" style="background:#90EE90">” port. </span></p><p><span class="deltaxml-new" style="background:#90EE90">Suppose that XProc version 2.0 changes the definition of the </span><a href="#c.xslt"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xslt</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step so that it has an additional output port, </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">messages</span></code><span class="deltaxml-new" style="background:#90EE90">. Then consider the following pipeline: </span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:pipeline xmlns:p="http://www.w3.org/ns/xproc" version="2.0"&gt; &lt;p:xslt name="style"&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="style.xsl"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;p:sink/&gt; &lt;p:count&gt; &lt;p:input port="source"&gt; &lt;p:pipe step="style" port="messages"/&gt; &lt;/p:input&gt; &lt;/p:count&gt; &lt;/p:pipeline&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">When run by a "2.0" or later processor, it will count the documents that appear on the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">messages</span></code><span class="deltaxml-new" style="background:#90EE90"> port. When run by a “1.0” processor in forwards-compatible mode, the binding to the “</span><code class="port"><span class="deltaxml-new" style="background:#90EE90">messages</span></code><span class="deltaxml-new" style="background:#90EE90">” port is not a static error. Dynamically, the "1.0" processor will always produce a count of zero, because an empty sequence of documents will always appear on the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">messages</span></code><span class="deltaxml-new" style="background:#90EE90"> port.</span></p></section></section></section></section><section id="syntax" class="section"><div class="section-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">3 Syntax Overview</span></h2></div><p><span class="deltaxml-new" style="background:#90EE90">This section describes the normative XML syntax of XProc. This syntax is sufficient to represent all the aspects of a pipeline, as set out in the preceding sections. </span><span id="dt-XML" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: XProc is intended to work equally well with [</span><a href="#xml10"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XML 1.0</span></span></a><span class="deltaxml-new" style="background:#90EE90">] and [</span><a href="#xml11"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XML 1.1</span></span></a><span class="deltaxml-new" style="background:#90EE90">]. Unless otherwise noted, the term “</span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">XML</span></em><span class="deltaxml-new" style="background:#90EE90">” refers equally to both versions.]</span></span><span id="dt-Namespaces-in-XML" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: Unless otherwise noted, the term </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">Namespaces in XML</span></em><span class="deltaxml-new" style="background:#90EE90"> refers equally to [</span><a href="#xmlns10"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Namespaces 1.0</span></span></a><span class="deltaxml-new" style="background:#90EE90">] and [</span><a href="#xmlns11"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Namespaces 1.1</span></span></a><span class="deltaxml-new" style="background:#90EE90">].]</span></span><a name="impl-25"></a><span class="deltaxml-new" style="background:#90EE90">Support for pipeline documents written in XML 1.1 and pipeline inputs and outputs that use XML 1.1 is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p><p><span class="deltaxml-new" style="background:#90EE90">Elements in a pipeline document represent the pipeline, the steps it contains, the connections between those steps, the steps and connections contained within them, and so on. Each step is represented by an element; a combination of elements and attributes specify how the inputs and outputs of each step are connected and how options and parameters are passed.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Conceptually, we can speak of steps as objects that have inputs and outputs, that are connected together and which may contain additional steps. Syntactically, we need a mechanism for specifying these relationships.</span></p><p><em class="glossterm"><a href="#dt-container"><span class="deltaxml-new" style="background:#90EE90">Containment</span></a></em><span class="deltaxml-new" style="background:#90EE90"> is represented naturally using nesting of XML elements. If a particular element identifies a </span><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-new" style="background:#90EE90">compound step</span></a></em><span class="deltaxml-new" style="background:#90EE90"> then the step elements that are its immediate children form its </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The connections between steps are expressed using names and references to those names.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Six kinds of things are named in XProc:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><span class="deltaxml-new" style="background:#90EE90"> Step types, </span></li><li><span class="deltaxml-new" style="background:#90EE90"> Steps, </span></li><li><span class="deltaxml-new" style="background:#90EE90"> Input ports (both parameter and document), </span></li><li><span class="deltaxml-new" style="background:#90EE90"> Output ports, </span></li><li><span class="deltaxml-new" style="background:#90EE90"> Options and variables, and </span></li><li><span class="deltaxml-new" style="background:#90EE90"> Parameters </span></li></ol></div><section id="namespaces" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">3.1 XProc Namespaces</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">There are three namespaces associated with XProc:</span></p><div class="variablelist"><dl><dt><span class="term"><code class="uri"><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/ns/xproc</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The namespace of the XProc XML vocabulary described by this specification; by convention, the namespace prefix “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">p:</span></code><span class="deltaxml-new" style="background:#90EE90">” is used for this namespace.</span></p></dd><dt><span class="term"><code class="uri"><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/ns/xproc-step</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The namespace used for documents that are inputs to and outputs from several standard and optional steps described in this specification. Some steps, such as </span><a href="#c.http-request"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#c.store"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:store</span></code></a><span class="deltaxml-new" style="background:#90EE90">, have defined input or output vocabularies. We use this namespace for all of those documents. The conventional prefix “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">c:</span></code><span class="deltaxml-new" style="background:#90EE90">” is used for this namespace.</span></p></dd><dt><span class="term"><code class="uri"><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/ns/xproc-error</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The namespace used for errors. The conventional prefix “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">err:</span></code><span class="deltaxml-new" style="background:#90EE90">” is used for this namespace. </span></p></dd></dl></div><p><span class="deltaxml-new" style="background:#90EE90">This specification also makes use of the prefix “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xs:</span></code><span class="deltaxml-new" style="background:#90EE90">” to refer to the [</span><a href="#xmlschema-1"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">W3C XML Schema: Part 1</span></span></a><span class="deltaxml-new" style="background:#90EE90">] namespace </span><code class="uri"><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/2001/XMLSchema</span></code><span class="deltaxml-new" style="background:#90EE90">. </span></p></section><section id="scoping" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">3.2 Scoping of Names</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">Names are used to identify step types, steps, ports, options and variables, and parameters. Step types, options, variables, and parameters are named with QNames. Steps and ports are named with NCNames. The scope of a name is a measure of where it is available in a pipeline. </span><span id="dt-visible" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: If two names are in the same scope, we say that they are </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">visible</span></em><span class="deltaxml-new" style="background:#90EE90"> to each other. ]</span></span></p><p><span class="deltaxml-new" style="background:#90EE90">The scope of the names of the step types is the pipeline in which they are declared, including any declarations imported from libraries via </span><a href="#p.import"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:import</span></code></a><span class="deltaxml-new" style="background:#90EE90">. Nested pipelines inherit the step types in scope for their parent.</span></p><p><span class="deltaxml-new" style="background:#90EE90">In other words, the step types that are in scope in a </span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#p.declare-step"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code></a><span class="deltaxml-new" style="background:#90EE90"> are:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">The standard, built-in types (</span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#p.choose"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code></a><span class="deltaxml-new" style="background:#90EE90">, etc.). </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Any implementation-provided types. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Any step types declared in the pipeline (the </span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#p.declare-step"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code></a><span class="deltaxml-new" style="background:#90EE90"> children of the pipeline element). </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">The types of any </span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90">s or </span><a href="#p.declare-step"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code></a><span class="deltaxml-new" style="background:#90EE90">s that are imported. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Any types that are in the scope of any </span><a href="#p.library"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:library</span></code></a><span class="deltaxml-new" style="background:#90EE90"> that is imported. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Any step types that are in scope for the pipeline's parent </span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#p.declare-step"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code></a><span class="deltaxml-new" style="background:#90EE90">, if it has one. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">The type of the pipeline itself, if it has one. </span></p></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">The step types that are in scope in a </span><a href="#p.library"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:library</span></code></a><span class="deltaxml-new" style="background:#90EE90"> are:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">The standard, built-in types (</span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#p.choose"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code></a><span class="deltaxml-new" style="background:#90EE90">, etc.). </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Any implementation-provided types. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Any step types declared in the library (the </span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#p.declare-step"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code></a><span class="deltaxml-new" style="background:#90EE90"> children of the </span><a href="#p.library"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:library</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element). </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">The types of </span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90">s or </span><a href="#p.declare-step"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code></a><span class="deltaxml-new" style="background:#90EE90">s that are imported into the library. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Any types that are in the scope of any </span><a href="#p.library"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:library</span></code></a><span class="deltaxml-new" style="background:#90EE90"> that is imported. </span></p></li></ul></div><p><a name="err.inline.S0036"></a><span class="deltaxml-new" style="background:#90EE90">All the step types in a pipeline or library </span><span class="rfc2119" id="scoping.8.1.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> have unique names: it is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0036"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0036</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if any step type name is built-in and/or declared or defined more than once in the same scope.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The scope of the names of the steps themselves is determined by the </span><em class="glossterm"><a href="#dt-environment"><span class="deltaxml-new" style="background:#90EE90">environment</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of each step. In general, the name of a step, the names of its sibling steps, the names of any steps that it contains directly, the names of its ancestors, and the names of the siblings of its ancestors are all in a common scope. </span><a name="err.inline.S0002"></a><span class="deltaxml-new" style="background:#90EE90">All steps in the same scope </span><span class="rfc2119" id="scoping.9.2.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> have unique names: it is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0002"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0002</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if two steps with the same name appear in the same scope.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The scope of an input or output port name is the step on which it is defined. The names of all the ports on any step </span><span class="rfc2119" id="scoping.10.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be unique.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Taken together, these uniqueness constraints guarantee that the combination of a step name and a port name uniquely identifies exactly one port on exactly one in-scope step.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The scope of option and variable names is determined by where they are declared. When an option is declared with </span><a href="#p.option"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:option</span></code></a><span class="deltaxml-new" style="background:#90EE90"> (or a variable with </span><a href="#p.variable"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:variable</span></code></a><span class="deltaxml-new" style="background:#90EE90">), unless otherwise specified, its scope consists of the sibling elements that follow its declaration and the descendants of those siblings. </span><a name="err.inline.S0004"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0004"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0004</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if an option or variable declaration duplicates the name of any other option or variable in the same </span><em class="glossterm"><a href="#dt-environment"><span class="deltaxml-new" style="background:#90EE90">environment</span></a></em><span class="deltaxml-new" style="background:#90EE90">. That is, no option or variable may lexically shadow another option or variable with the same name. </span></p><p><span class="deltaxml-new" style="background:#90EE90">Parameter names are not scoped; they are distinct on each step.</span></p></section><section id="xml-base-attribute" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">3.3 Base URIs and xml:base</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">When a relative URI appears in an option value, the base URI against which it </span><span class="rfc2119" id="xml-base-attribute.2.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be made absolute is the base URI of the </span><a href="#p.option"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:option</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element. If an option value is specified using a </span><a href="#option-shortcut"><span class="deltaxml-new" style="background:#90EE90">syntactic shortcut</span></a><span class="deltaxml-new" style="background:#90EE90">, the base URI of the step on which the shortcut attribute appears </span><span class="rfc2119" id="xml-base-attribute.2.4"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be used. In general, whenever a relative URI appears, its base URI is the base URI of the nearest ancestor element.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The pipeline author can control the base URIs of elements within the pipeline document with the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xml:base</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute. The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xml:base</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute </span><span class="rfc2119" id="xml-base-attribute.3.3"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> appear on any element in a pipeline and has the semantics outlined in [</span><a href="#xml-base"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XML Base</span></span></a><span class="deltaxml-new" style="background:#90EE90">].</span></p></section><section id="xml-id-attribute" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">3.4 Unique identifiers</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A pipeline author can provide a globally unique identifier for any element in a pipeline with the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xml:id</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xml:id</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute </span><span class="rfc2119" id="xml-id-attribute.3.2"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> appear on any element in a pipeline and has the semantics outlined in [</span><a href="#xml-id"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">xml:id</span></span></a><span class="deltaxml-new" style="background:#90EE90">].</span></p></section><section id="syntax-docs-ports" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">3.5 Associating Documents with Ports</span></h3></div><p><span id="dt-connection" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: A </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">connection</span></em><span class="deltaxml-new" style="background:#90EE90"> associates an input or output port with some data source.]</span></span><span class="deltaxml-new" style="background:#90EE90"> A document or a sequence of documents can be connected to a port in four ways: </span><em class="glossterm"><a href="#dt-by-source"><span class="deltaxml-new" style="background:#90EE90">by source</span></a></em><span class="deltaxml-new" style="background:#90EE90">, </span><em class="glossterm"><a href="#dt-by-URI"><span class="deltaxml-new" style="background:#90EE90">by URI</span></a></em><span class="deltaxml-new" style="background:#90EE90">, by providing an </span><em class="glossterm"><a href="#dt-inline-document"><span class="deltaxml-new" style="background:#90EE90">inline document</span></a></em><span class="deltaxml-new" style="background:#90EE90">, or by making it </span><em class="glossterm"><a href="#dt-empty-sequence"><span class="deltaxml-new" style="background:#90EE90">explicitly empty</span></a></em><span class="deltaxml-new" style="background:#90EE90">. Each of these mechanisms is allowed on the </span><a href="#p.input"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:input</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#p.output"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:output</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#p.xpath-context"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xpath-context</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#p.iteration-source"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:iteration-source</span></code></a><span class="deltaxml-new" style="background:#90EE90">, and </span><a href="#p.viewport-source"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport-source</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements.</span></p><div class="variablelist"><dl><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Specified by URI</span></span></dt><dd><p><span id="dt-by-URI" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: A document is specified </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">by URI</span></em><span class="deltaxml-new" style="background:#90EE90"> if it is referenced with a URI.]</span></span><span class="deltaxml-new" style="background:#90EE90"> The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">href</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute on the </span><a href="#p.document"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:document</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#p.data"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:data</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element is used to refer to documents by URI.</span></p><p><span class="deltaxml-new" style="background:#90EE90">In this example, the input to the </span><a href="#c.identity"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:identity</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step named “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">otherstep</span></code><span class="deltaxml-new" style="background:#90EE90">” comes from “</span><code class="uri"><span class="deltaxml-new" style="background:#90EE90">http://example.com/input.xml</span></code><span class="deltaxml-new" style="background:#90EE90">”. </span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output port="result"/&gt; &lt;p:identity name="otherstep"&gt; &lt;p:input port="source"&gt; &lt;p:document href="http://example.com/input.xml"/&gt; &lt;/p:input&gt; &lt;/p:identity&gt;</span></code></pre></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Specified by source</span></span></dt><dd><p><span id="dt-by-source" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: A document is specified </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">by source</span></em><span class="deltaxml-new" style="background:#90EE90"> if it references a specific port on another step.]</span></span><span class="deltaxml-new" style="background:#90EE90"> The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">step</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">port</span></code><span class="deltaxml-new" style="background:#90EE90"> attributes on the </span><a href="#p.pipe"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element are used for this purpose. </span></p><p><span class="deltaxml-new" style="background:#90EE90">In this example, the “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90">” input to the </span><a href="#c.xinclude"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xinclude</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step named “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">expand</span></code><span class="deltaxml-new" style="background:#90EE90">” comes from the “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90">” port of the step named “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">otherstep</span></code><span class="deltaxml-new" style="background:#90EE90">”.</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:xinclude name="expand"&gt; &lt;p:input port="source"&gt; &lt;p:pipe step="otherstep" port="result"/&gt; &lt;/p:input&gt; &lt;/p:xinclude&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">See the description of </span><a href="#p.pipe"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></code></a><span class="deltaxml-new" style="background:#90EE90"> for a complete description of the ports that can be connected.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Specified inline</span></span></dt><dd><p><span id="dt-inline-document" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: An </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">inline document</span></em><span class="deltaxml-new" style="background:#90EE90"> is specified directly in the body of the element to which it connects.]</span></span><span class="deltaxml-new" style="background:#90EE90"> The content of the </span><a href="#p.inline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element is used for this purpose. </span></p><p><span class="deltaxml-new" style="background:#90EE90">In this example, the “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">stylesheet</span></code><span class="deltaxml-new" style="background:#90EE90">” input to the XSLT step named “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xform</span></code><span class="deltaxml-new" style="background:#90EE90">” comes from the content of the </span><a href="#p.input"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:input</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element itself.</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:xslt name="xform"&gt; &lt;p:input port="stylesheet"&gt; &lt;p:inline&gt; &lt;xsl:stylesheet version="1.0"&gt; ... &lt;/xsl:stylesheet&gt; &lt;/p:inline&gt; &lt;/p:input&gt; &lt;/p:xslt&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">Inline documents are considered “quoted”. The pipeline processor passes them literally to the port, even if they contain elements from the XProc namespace or other namespaces that would have other semantics outside of the </span><a href="#p.inline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></code></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Specified explicitly empty</span></span></dt><dd><p><span id="dt-empty-sequence" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: An </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">empty sequence</span></em><span class="deltaxml-new" style="background:#90EE90"> of documents is specified with the </span><a href="#p.empty"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element.]</span></span></p><p><span class="deltaxml-new" style="background:#90EE90">In this example, the “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90">” input to the XSLT 2.0 step named “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">generate</span></code><span class="deltaxml-new" style="background:#90EE90">” is explicitly empty:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:xslt name="generate" version="2.0"&gt; &lt;p:input port="source"&gt; &lt;p:empty/&gt; &lt;/p:input&gt; &lt;p:input port="stylesheet"&gt; &lt;p:inline&gt; &lt;xsl:stylesheet version="2.0"&gt; ... &lt;/xsl:stylesheet&gt; &lt;/p:inline&gt; &lt;/p:input&gt; &lt;p:with-option name="template-name" select="'someName'"/&gt; &lt;/p:xslt&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">If you omit the connection on a primary input port, a connection to the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-new" style="background:#90EE90">default readable port</span></a></em><span class="deltaxml-new" style="background:#90EE90"> will be assumed. Making the connection explicitly empty guarantees that the connection will be to an empty sequence of documents.</span></p></dd></dl></div><p><span class="deltaxml-new" style="background:#90EE90">Note that a </span><a href="#p.input"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:input</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#p.output"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:output</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element may contain more than one </span><a href="#p.pipe"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#p.document"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:document</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#p.data"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:data</span></code></a><span class="deltaxml-new" style="background:#90EE90">, or </span><a href="#p.inline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element. If more than one </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-new" style="background:#90EE90">connection</span></a></em><span class="deltaxml-new" style="background:#90EE90"> is provided, then the specified sequence of documents is made available on that port in the same order as the connections.</span></p></section><section id="documentation" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">3.6 Documentation</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">Pipeline authors may add documentation to their pipeline documents with the </span><a href="#p.documentation"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:documentation</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element. Except when it appears as a descendant of </span><a href="#p.inline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></code></a><span class="deltaxml-new" style="background:#90EE90">, the </span><a href="#p.documentation"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:documentation</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element is completely ignored by pipeline processors, it exists simply for documentation purposes. If a </span><a href="#p.documentation"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:documentation</span></code></a><span class="deltaxml-new" style="background:#90EE90"> is provided as a descendant of </span><a href="#p.inline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></code></a><span class="deltaxml-new" style="background:#90EE90">, it has no special semantics, it is treated literally as part of the document to be provided on that port. The </span><a href="#p.documentation"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:documentation</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element has no special semantics when it appears in documents that flow through the pipeline.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Pipeline processors that inspect the contents of </span><a href="#p.documentation"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:documentation</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements and behave differently on the basis of what they find are </span><em><span class="deltaxml-new" style="background:#90EE90">not conformant</span></em><span class="deltaxml-new" style="background:#90EE90">. Processor extensions </span><span class="rfc2119" id="documentation.3.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be specified with </span><a href="#p.pipeinfo"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeinfo</span></code></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></section><section id="annotations" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">3.7 Processor annotations</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">Pipeline authors may add annotations to their pipeline documents with the </span><a href="#p.pipeinfo"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeinfo</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element. </span><a name="impl-26"></a><span class="deltaxml-new" style="background:#90EE90">The semantics of </span><a href="#p.pipeinfo"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeinfo</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements are </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">. Processors </span><span class="rfc2119" id="annotations.2.3"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> specify a way for their annotations to be identified, perhaps with </span><a href="#extension-attributes"><span class="deltaxml-new" style="background:#90EE90">extension attributes</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Where </span><a href="#p.documentation"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:documentation</span></code></a><span class="deltaxml-new" style="background:#90EE90"> is intended for human consumption, </span><a href="#p.pipeinfo"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeinfo</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements are intended for processor consumption. A processor might, for example, use annotations to identify some particular aspect of an implementation, to request additional, perhaps non-standard features, to describe parallelism constraints, etc.</span></p><p><span class="deltaxml-new" style="background:#90EE90">When a </span><a href="#p.pipeinfo"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeinfo</span></code></a><span class="deltaxml-new" style="background:#90EE90"> appears as a descendant of </span><a href="#p.inline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></code></a><span class="deltaxml-new" style="background:#90EE90">, it has no special semantics; in that context it </span><span class="rfc2119" id="annotations.4.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be treated literally as part of the document to be provided on that port. The </span><a href="#p.pipeinfo"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeinfo</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element has no special semantics when it appears in documents that flow through the pipeline. </span></p></section><section id="extension-attributes" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">3.8 Extension attributes</span></h3></div><p><span id="dt-extension-attribute" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: An element from the XProc namespace </span><span class="rfc2119" id="dt-extension-attribute.1"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> have any attribute not from the XProc namespace, provided that the expanded-QName of the attribute has a non-null namespace URI. Such an attribute is called an </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">extension attribute</span></em><span class="deltaxml-new" style="background:#90EE90">.]</span></span></p><p><span class="deltaxml-new" style="background:#90EE90">The presence of an extension attribute must not cause the connections between steps to differ from the connections that would arise in the absence of the attribute. They must not cause the processor to fail to signal an error that would be signaled in the absence of the attribute.</span></p><p><span class="deltaxml-new" style="background:#90EE90">A processor which encounters an extension attribute that it does not implement </span><span class="rfc2119" id="extension-attributes.4.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> behave as if the attribute was not present.</span></p></section><section id="use-when" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">3.9 Conditional Element Exclusion</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">Any element in the XProc namespace may have a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">use-when</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute which </span><span class="rfc2119" id="use-when.2.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> contain an XPath expression that can be evaluated statically. If the attribute is present and the effective boolean value of the expression is false, then the element and all of its descendants are effectively excluded from the pipeline document. If a node is effectively excluded, the processor </span><span class="rfc2119" id="use-when.2.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> behave as if the element was not present in the document.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Elements that are not in the XProc namespace </span><span class="rfc2119" id="use-when.3.1"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> also have a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">use-when</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute, but the attribute must be in the XProc namespace. The semantics of a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">p:use-when</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute on an element not in the XProc namespace are the same as the semantics of a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">use-when</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute on an element in the XProc namespace.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Conditional element exclusion occurs before any static analysis of the pipeline.</span></p><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">The effective exclusion of </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">use-when</span></code><span class="deltaxml-new" style="background:#90EE90"> processing occurs after XML parsing and has no effect on well-formedness or validation errors which will be reported in the usual way. Note also that </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">use-when</span></code><span class="deltaxml-new" style="background:#90EE90"> is not performed when it occurs on the descendant of a </span><a href="#p.inline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element.</span></p></div><p><span class="deltaxml-new" style="background:#90EE90">For the purposes of evaluating a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">use-when</span></code><span class="deltaxml-new" style="background:#90EE90"> expression, the context node, position, and size are all undefined. No </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-new" style="background:#90EE90">in-scope bindings</span></a></em><span class="deltaxml-new" style="background:#90EE90"> are available. There are no readable ports. There are no available documents or available collections. </span></p><p><span class="deltaxml-new" style="background:#90EE90">There are some additional restrictions on the XPath extension functions that are available in a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">use-when</span></code><span class="deltaxml-new" style="background:#90EE90"> expression:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">p:episode</span></code><span class="deltaxml-new" style="background:#90EE90"> system property </span><span class="rfc2119" id="use-when.8.1.1.2"><span class="deltaxml-new" style="background:#90EE90">should not</span></span><span class="deltaxml-new" style="background:#90EE90"> be used. </span><a name="impl-27"></a><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">p:episode</span></code><span class="deltaxml-new" style="background:#90EE90"> system property in a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">use-when</span></code><span class="deltaxml-new" style="background:#90EE90"> expression is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">The </span><a href="#f.step-available"><code class="function"><span class="deltaxml-new" style="background:#90EE90">p:step-available</span></code></a><span class="deltaxml-new" style="background:#90EE90"> function cannot be used to test for the availability of extension steps (because the libraries that declare them may not have been imported). </span><a name="impl-28"></a><span class="deltaxml-new" style="background:#90EE90">The results of testing for steps not in the XProc namespace in a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">use-when</span></code><span class="deltaxml-new" style="background:#90EE90"> expression are </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">The steps available and possibly other aspects of the expression may depend on the version specified for a pipeline, see </span><a href="#versioning-considerations" title="Versioning Considerations"><span class="deltaxml-new" style="background:#90EE90">Section 2.13, “Versioning Considerations”</span></a><span class="deltaxml-new" style="background:#90EE90">. For example, in a “1.0” pipeline, the processor </span><span class="rfc2119" id="use-when.8.3.1.2"><span class="deltaxml-new" style="background:#90EE90">should not</span></span><span class="deltaxml-new" style="background:#90EE90"> report that “2.0” steps are available.</span></p></li></ul></div><p><a name="err.inline.S0061"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0061"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0061</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">use-when</span></code><span class="deltaxml-new" style="background:#90EE90"> expression refers to the context or attempts to refer to any documents or collections. </span></p></section><section id="syntax-summaries" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">3.10 Syntax Summaries</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">The description of each element in the pipeline namespace is accompanied by a syntactic summary that provides a quick overview of the element's syntax:</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-example"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:some-element</span><br /><span class="deltaxml-new" style="background:#90EE90">  some-attribute? = </span><var><span class="deltaxml-new" style="background:#90EE90">some-type</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><var><span class="deltaxml-new" style="background:#90EE90">some</span></var><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><var><span class="deltaxml-new" style="background:#90EE90">elements</span></var><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><var><span class="deltaxml-new" style="background:#90EE90">allowed</span></var><span class="deltaxml-new" style="background:#90EE90">)*,</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><var><span class="deltaxml-new" style="background:#90EE90">other-elements?</span></var><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:some-element&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The content model fragments in these tableaux are presented in a simple, compact notation. In brief:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">A name represent exactly one occurrence of an element with that name.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Parentheses are used for grouping. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Elements or groups separated by a comma (“,”) represent an ordered sequence: a followed by b followed by c: (a,b,c).</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Elements or groups separated by a vertical bar (“|”) represent a choice: a or b or c: (a | b | c).</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Elements or groups separated by an ampersand (“&amp;”) represent an unordered sequence: a and b and c, in any order: (a &amp; b &amp; c).</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">An element or group followed by a question mark (“?”) is optional; it may or may not occur but if it occurs it can occur only once.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">An element or group followed by an asterisk (“*”) is optional and may be repeated; it may or may not occur and if it occurs it can occur any number of times. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">An element or group followed by a plus (“+”) is required and may be repeated; it must occur at least once, and it can occur any number of times. </span></p></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">For clarity of exposition, some attributes and elements are elided from the summaries:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">An </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xml:id</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is allowed on any element. It has the semantics of [</span><a href="#xml-id"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">xml:id</span></span></a><span class="deltaxml-new" style="background:#90EE90">].</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">An </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xml:base</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is allowed on any element. It has the semantics of [</span><a href="#xml-base"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XML Base</span></span></a><span class="deltaxml-new" style="background:#90EE90">].</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">use-when</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is allowed on any element, see </span><a href="#use-when" title="Conditional Element Exclusion"><span class="deltaxml-new" style="background:#90EE90">Section 3.9, “Conditional Element Exclusion”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">The </span><a href="#p.documentation"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:documentation</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#p.pipeinfo"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeinfo</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements are not shown, but they are allowed anywhere.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">The </span><a href="#p.log"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:log</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element is allowed on any step that has a </span><a href="#p.output"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:output</span></code></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Attributes that are </span><a href="#option-shortcut"><span class="deltaxml-new" style="background:#90EE90">syntactic shortcuts for option values</span></a><span class="deltaxml-new" style="background:#90EE90"> are not shown.</span></p></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">The types given for attributes should be understood as follows:</span></p><div class="itemizedlist"><ul><li><p><code class="type"><span class="deltaxml-new" style="background:#90EE90">ID</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">NCName</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">NMTOKEN</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">NMTOKENS</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">integer</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">string</span></code><span class="deltaxml-new" style="background:#90EE90">: As per [</span><a href="#xmlschema-2"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">W3C XML Schema: Part 2</span></span></a><span class="deltaxml-new" style="background:#90EE90">] including whitespace normalization as appropriate.</span></p></li><li><p><code class="type"><span class="deltaxml-new" style="background:#90EE90">QName</span></code><span class="deltaxml-new" style="background:#90EE90">: With whitespace normalization as per [</span><a href="#xmlschema-2"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">W3C XML Schema: Part 2</span></span></a><span class="deltaxml-new" style="background:#90EE90">] and according to the following definition: In the context of XProc, a </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">QName</span></code><span class="deltaxml-new" style="background:#90EE90"> is almost always a QName in the </span><em class="glossterm"><a href="#dt-Namespaces-in-XML"><span class="deltaxml-new" style="background:#90EE90">Namespaces in XML</span></a></em><span class="deltaxml-new" style="background:#90EE90"> sense. Note, however, that </span><a href="#p.option"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:option</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#p.with-param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> values can get their namespace declarations in a non-standard way (with </span><a href="#p.namespaces"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:namespaces</span></code></a><span class="deltaxml-new" style="background:#90EE90">) and QNames that have no prefix are always in no-namespace, irrespective of the default namespace. </span></p></li><li><p><code class="type"><span class="deltaxml-new" style="background:#90EE90">PrefixList</span></code><span class="deltaxml-new" style="background:#90EE90">: As a list with </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[item type]</span></code><code class="type"><span class="deltaxml-new" style="background:#90EE90">NMTOKEN</span></code><span class="deltaxml-new" style="background:#90EE90">, per [</span><a href="#xmlschema-2"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">W3C XML Schema: Part 2</span></span></a><span class="deltaxml-new" style="background:#90EE90">], including whitespace normalization. </span></p></li><li><p><code class="type"><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></code><span class="deltaxml-new" style="background:#90EE90">: As a string per [</span><a href="#xmlschema-2"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">W3C XML Schema: Part 2</span></span></a><span class="deltaxml-new" style="background:#90EE90">], including whitespace normalization, and the further requirement to be a conformant Expression per [</span><a href="#xpath2"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XPath 2.0</span></span></a><span class="deltaxml-new" style="background:#90EE90">] or Match pattern per [</span><a href="#xslt20"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XSLT 2.0</span></span></a><span class="deltaxml-new" style="background:#90EE90">]. </span></p></li></ul></div></section><section id="common-errors" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">3.11 Common errors</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A number of errors apply generally:</span></p><div class="itemizedlist"><ul><li><p><a name="err.inline.S0059"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0059"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0059</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the pipeline element is not </span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#p.declare-step"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code></a><span class="deltaxml-new" style="background:#90EE90">, or </span><a href="#p.library"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:library</span></code></a><span class="deltaxml-new" style="background:#90EE90">. </span></p></li><li><p><a name="err.inline.S0008"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0008"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0008</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if any element in the XProc namespace has attributes not defined by this specification unless they are </span><em class="glossterm"><a href="#dt-extension-attribute"><span class="deltaxml-new" style="background:#90EE90">extension attributes</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p></li><li><p><a name="err.inline.S0038"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0038"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0038</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if any required attribute is not provided. </span></p></li><li><p><a name="err.inline.D0028"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0028"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0028</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if any attribute value does not satisfy the type required for that attribute.</span></p></li><li><p><a name="err.inline.S0044"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0044"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0044</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if any element in the XProc namespace or any step has element children other than those specified for it by this specification. In particular, the presence of atomic steps for which there is no visible declaration may raise this error. </span></p></li><li><p><a name="err.inline.S0037"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0037"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0037</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if any step directly contains text nodes that do not consist entirely of whitespace. </span></p></li><li><p><a name="err.inline.D0019"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0019"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0019</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if any option value does not satisfy the type required for that option. </span></p></li><li><p><a name="err.inline.S0015"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0015"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0015</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if a compound step has no </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-new" style="background:#90EE90">contained steps</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p></li><li><p><a name="err.inline.D0012"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0012"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0012</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if any attempt is made to dereference a URI where the scheme of the URI reference is not supported. Implementations are encouraged to support as many schemes as is practical and, in particular, they </span><span class="rfc2119" id="common-errors.3.9.1.2"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> support both the </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">file:</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">http(s):</span></code><span class="deltaxml-new" style="background:#90EE90"> schemes. </span><a name="impl-29"></a><span class="deltaxml-new" style="background:#90EE90">The set of URI schemes actually supported is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p></li><li><p><a name="err.inline.D0030"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0030"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0030</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if a step is unable or incapable of performing its function. This is a general error code for “step failed” (e.g., if the input isn't of the expected type or if attempting to process the input causes the implementation to abort). Users and implementers who create extension steps are encouraged to use this code for general failures.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">In most steps which use a select expression or match pattern, any kind of node can be identified by the expression or pattern. However, some expressions and patterns on some steps are only applicable to some kinds of nodes (e.g., it doesn't make sense to speak of adding attributes to a comment!). </span></p><p><a name="err.inline.C0023"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0023"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0023</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if a select expression or match pattern returns a node type that is not allowed by the step. </span></p></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">If an XProc processor can determine statically that a dynamic error will </span><em><span class="deltaxml-new" style="background:#90EE90">always</span></em><span class="deltaxml-new" style="background:#90EE90"> occur, it </span><span class="rfc2119" id="common-errors.4.2"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> report that error statically provided that the error </span><em><span class="deltaxml-new" style="background:#90EE90">does not</span></em><span class="deltaxml-new" style="background:#90EE90"> occur among the descendants of a </span><a href="#p.try"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code></a><span class="deltaxml-new" style="background:#90EE90">. Dynamic errors inside a </span><a href="#p.try"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code></a><span class="rfc2119" id="common-errors.4.6"><span class="deltaxml-new" style="background:#90EE90">must not</span></span><span class="deltaxml-new" style="background:#90EE90"> be reported statically. They must be raised dynamically so that </span><a href="#p.catch"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:catch</span></code></a><span class="deltaxml-new" style="background:#90EE90"> processing can be performed on them. </span></p></section></section><section id="steps" class="section"><div class="section-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">4 Steps</span></h2></div><p><span class="deltaxml-new" style="background:#90EE90">This section describes the core steps of XProc.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Several of the steps defined in this specification refer to other, evolving XML technologies (XSLT, XQuery, XSL-FO, etc.). Where this specification identifies a specific version of a technology, implementers </span><span class="rfc2119" id="steps.3.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> implement the specified version or any subsequent edition or version that is backwards compatible. At user option, they may support other, incompatible versions or extensions.</span></p><section id="p.pipeline" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">4.1 p:pipeline</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code><span class="deltaxml-new" style="background:#90EE90"> declares a pipeline that can be evaluated by an XProc processor. It encapsulates the behavior of a </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90">. Its children declare inputs, outputs, and options that the pipeline exposes and identify the steps in its subpipeline. (A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code><span class="deltaxml-new" style="background:#90EE90"> is a simplified form of </span><a href="#p.declare-step"><span class="deltaxml-new" style="background:#90EE90">step declaration</span></a><span class="deltaxml-new" style="background:#90EE90">.) </span></p><p><span class="deltaxml-new" style="background:#90EE90">All </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code><span class="deltaxml-new" style="background:#90EE90"> pipelines have an implicit </span><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-new" style="background:#90EE90">primary input port</span></a></em><span class="deltaxml-new" style="background:#90EE90"> named “</span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90">”, an implicit </span><em class="glossterm"><a href="#dt-primary-parameter-input-port"><span class="deltaxml-new" style="background:#90EE90">primary parameter input port</span></a></em><span class="deltaxml-new" style="background:#90EE90"> named “</span><code class="port"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><span class="deltaxml-new" style="background:#90EE90">”, and an implicit </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-new" style="background:#90EE90">primary output port</span></a></em><span class="deltaxml-new" style="background:#90EE90"> named “</span><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90">”. Any input or output ports that the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code><span class="deltaxml-new" style="background:#90EE90"> declares explicitly are </span><em><span class="deltaxml-new" style="background:#90EE90">in addition</span></em><span class="deltaxml-new" style="background:#90EE90"> to those ports and may not be declared primary.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:pipeline</span><br /><span class="deltaxml-new" style="background:#90EE90">  name? = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  type? = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  psvi-required? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  xpath-version? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  exclude-inline-prefixes? = </span><var><span class="deltaxml-new" style="background:#90EE90">prefix list</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  version? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.input"><span class="deltaxml-new" style="background:#90EE90">p:input</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.output"><span class="deltaxml-new" style="background:#90EE90">p:output</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.option"><span class="deltaxml-new" style="background:#90EE90">p:option</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.log"><span class="deltaxml-new" style="background:#90EE90">p:log</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.serialization"><span class="deltaxml-new" style="background:#90EE90">p:serialization</span></a><span class="deltaxml-new" style="background:#90EE90">)*,</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.declare-step"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.pipeline"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.import"><span class="deltaxml-new" style="background:#90EE90">p:import</span></a><span class="deltaxml-new" style="background:#90EE90">)*,</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><var><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></var><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:pipeline&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">Viewed from the outside, a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code><span class="deltaxml-new" style="background:#90EE90"> is a black box which performs some calculation on its inputs and produces its outputs. From the pipeline author's perspective, the computation performed by the pipeline is described in terms of </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-new" style="background:#90EE90">contained steps</span></a></em><span class="deltaxml-new" style="background:#90EE90"> which read the pipeline's inputs and produce the pipeline's outputs.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute identifies the version of XProc for which this pipeline was authored. If the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code><span class="deltaxml-new" style="background:#90EE90"> has no ancestors in the XProc namespace, then it </span><span class="rfc2119" id="p.pipeline.6.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> have a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute. See </span><a href="#versioning-considerations" title="Versioning Considerations"><span class="deltaxml-new" style="background:#90EE90">Section 2.13, “Versioning Considerations”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If a pipeline does not have a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">type</span></code><span class="deltaxml-new" style="background:#90EE90"> then that pipeline cannot be invoked as a step.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code><span class="deltaxml-new" style="background:#90EE90"> element is just a simplified form of step declaration. A document that reads:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:pipeline </span><em class="replaceable"><code><span class="deltaxml-new" style="background:#90EE90">some-attributes</span></code></em><span class="deltaxml-new" style="background:#90EE90">&gt; </span><em class="replaceable"><code><span class="deltaxml-new" style="background:#90EE90">some-content</span></code></em><span class="deltaxml-new" style="background:#90EE90"> &lt;/p:pipeline&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">can be interpreted as if it read:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step </span><em class="replaceable"><code><span class="deltaxml-new" style="background:#90EE90">some-attributes</span></code></em><span class="deltaxml-new" style="background:#90EE90">&gt; &lt;p:input port='source' primary='true'/&gt; &lt;p:input port='parameters' kind='parameter' primary='true'/&gt; &lt;p:output port='result' primary='true'/&gt; </span><em class="replaceable"><code><span class="deltaxml-new" style="background:#90EE90">some-content</span></code></em><span class="deltaxml-new" style="background:#90EE90"> &lt;/p:declare-step&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">See </span><a href="#p.declare-step"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code></a><span class="deltaxml-new" style="background:#90EE90"> for more details.</span></p><section id="example-pipeline" class="section tocsuppress"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">4.1.1 Example</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">A pipeline might accept a document as input; perform XInclude, validation, and transformation; and produce the transformed document as its output.</span></p><figure id="ex.p.pipeline" class="example-wrapper"><div class="title"><span class="deltaxml-new" style="background:#90EE90">Example 4. A Sample Pipeline Document</span></div><div class="example"><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:pipeline xmlns:p="http://www.w3.org/ns/xproc" version="1.0"&gt; &lt;p:xinclude/&gt; &lt;p:validate-with-xml-schema&gt; &lt;p:input port="schema"&gt; &lt;p:document href="http://example.com/path/to/schema.xsd"/&gt; &lt;/p:input&gt; &lt;/p:validate-with-xml-schema&gt; &lt;p:xslt&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="http://example.com/path/to/stylesheet.xsl"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;/p:pipeline&gt;</span></code></pre></div></figure></section></section><section id="p.for-each" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">4.2 p:for-each</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A for-each is specified by the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code><span class="deltaxml-new" style="background:#90EE90"> element. It is a </span><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-new" style="background:#90EE90">compound step</span></a></em><span class="deltaxml-new" style="background:#90EE90"> that processes a sequence of documents, applying its </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90"> to each document in turn.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:for-each</span><br /><span class="deltaxml-new" style="background:#90EE90">  name? = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    ((</span><a href="#p.iteration-source"><span class="deltaxml-new" style="background:#90EE90">p:iteration-source</span></a><span class="deltaxml-new" style="background:#90EE90">? &amp; </span><br /><span class="deltaxml-new" style="background:#90EE90">      (</span><a href="#p.output"><span class="deltaxml-new" style="background:#90EE90">p:output</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.log"><span class="deltaxml-new" style="background:#90EE90">p:log</span></a><span class="deltaxml-new" style="background:#90EE90">)*),</span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><var><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></var><span class="deltaxml-new" style="background:#90EE90">)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:for-each&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">When a pipeline needs to process a sequence of documents using a subpipeline that only processes a single document, the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code><span class="deltaxml-new" style="background:#90EE90"> construct can be used as a wrapper around that subpipeline. The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code><span class="deltaxml-new" style="background:#90EE90"> will apply that subpipeline to each document in the sequence in turn.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The result of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code><span class="deltaxml-new" style="background:#90EE90"> is a sequence of documents produced by processing each individual document in the input sequence. If the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code><span class="deltaxml-new" style="background:#90EE90"> has one or more output ports, what appears on each of those ports is the sequence of documents that is the concatenation of the sequence produced by each iteration of the loop on the port to which it is connected. If the iteration source for a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code><span class="deltaxml-new" style="background:#90EE90"> is an empty sequence, then the subpipeline is never run and an empty sequence is produced on all of the outputs. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><a href="#p.iteration-source"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:iteration-source</span></code></a><span class="deltaxml-new" style="background:#90EE90"> is an anonymous input: its </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-new" style="background:#90EE90">connection</span></a></em><span class="deltaxml-new" style="background:#90EE90"> provides a sequence of documents to the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code><span class="deltaxml-new" style="background:#90EE90"> step. If no iteration sequence is explicitly provided, then the iteration source is read from the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-new" style="background:#90EE90">default readable port</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The processor provides each document, one at a time, to the </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90"> represented by the children of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code><span class="deltaxml-new" style="background:#90EE90"> on a port named </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">current</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">For each declared output, the processor collects all the documents that are produced for that output from all the iterations, in order, into a sequence. The result of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code><span class="deltaxml-new" style="background:#90EE90"> on that output is that sequence of documents.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The environment inherited by the </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-new" style="background:#90EE90">contained steps</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code><span class="deltaxml-new" style="background:#90EE90"> is the </span><em class="glossterm"><a href="#dt-inherited-environment"><span class="deltaxml-new" style="background:#90EE90">inherited environment</span></a></em><span class="deltaxml-new" style="background:#90EE90"> with these modifications:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">The port named “</span><code class="port"><span class="deltaxml-new" style="background:#90EE90">current</span></code><span class="deltaxml-new" style="background:#90EE90">” on the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code><span class="deltaxml-new" style="background:#90EE90"> is added to the </span><em class="glossterm"><a href="#dt-readable-ports"><span class="deltaxml-new" style="background:#90EE90">readable ports</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">The port named “</span><code class="port"><span class="deltaxml-new" style="background:#90EE90">current</span></code><span class="deltaxml-new" style="background:#90EE90">” on the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code><span class="deltaxml-new" style="background:#90EE90"> is made the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-new" style="background:#90EE90">default readable port</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code><span class="deltaxml-new" style="background:#90EE90"> has a </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-new" style="background:#90EE90">primary output port</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (explicit or </span><a href="#primary-input-output"><span class="deltaxml-new" style="background:#90EE90">supplied by default</span></a><span class="deltaxml-new" style="background:#90EE90">) and that port has no </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-new" style="background:#90EE90">connection</span></a></em><span class="deltaxml-new" style="background:#90EE90">, then it is connected to the </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-new" style="background:#90EE90">primary output port</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of the </span><em class="glossterm"><a href="#dt-last-step"><span class="deltaxml-new" style="background:#90EE90">last step</span></a></em><span class="deltaxml-new" style="background:#90EE90"> in the </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span><a name="err.inline.S0006"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0006"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0006</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the primary output port has no explicit connection and the </span><em class="glossterm"><a href="#dt-last-step"><span class="deltaxml-new" style="background:#90EE90">last step</span></a></em><span class="deltaxml-new" style="background:#90EE90"> in the subpipeline does not have a primary output port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Note that outputs declared for a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code><span class="deltaxml-new" style="background:#90EE90"> serve a dual role. Inside the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code><span class="deltaxml-new" style="background:#90EE90">, they are used to read results from the subpipeline. Outside the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code><span class="deltaxml-new" style="background:#90EE90">, they provide the aggregated results.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute on a </span><a href="#p.output"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:output</span></code></a><span class="deltaxml-new" style="background:#90EE90"> inside a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code><span class="deltaxml-new" style="background:#90EE90"> only applies inside the step. From the outside, all of the outputs produce sequences.</span></p><section id="for-each-xpath-context" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">4.2.1 XPath Context</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">Within a </span><a href="#p.for-each"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code></a><span class="deltaxml-new" style="background:#90EE90">, the </span><a href="#f.iteration-position"><code class="function"><span class="deltaxml-new" style="background:#90EE90">p:iteration-position</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#f.iteration-size"><code class="function"><span class="deltaxml-new" style="background:#90EE90">p:iteration-size</span></code></a><span class="deltaxml-new" style="background:#90EE90"> are taken from the sequence of documents that will be processed by the </span><a href="#p.for-each"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code></a><span class="deltaxml-new" style="background:#90EE90">. The total number of documents is the </span><a href="#f.iteration-size"><code class="function"><span class="deltaxml-new" style="background:#90EE90">p:iteration-size</span></code></a><span class="deltaxml-new" style="background:#90EE90">; the ordinal value of the current document (the document appearing on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">current</span></code><span class="deltaxml-new" style="background:#90EE90"> port) is the </span><a href="#f.iteration-position"><code class="function"><span class="deltaxml-new" style="background:#90EE90">p:iteration-position</span></code></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><div id="impl1" class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note to implementers</span></h3><p><span class="deltaxml-new" style="background:#90EE90">In the case where no XPath expression that must be evaluated by the processor makes any reference to </span><a href="#f.iteration-size"><code class="function"><span class="deltaxml-new" style="background:#90EE90">p:iteration-size</span></code></a><span class="deltaxml-new" style="background:#90EE90">, its value does not actually have to be calculated (and the entire input sequence does not, therefore, need to be buffered so that its size can be calculated before processing begins).</span></p></div></section><section id="example-for-each" class="section tocsuppress"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">4.2.2 Example</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><a href="#p.for-each"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code></a><span class="deltaxml-new" style="background:#90EE90"> might accept a sequence of chapters as its input, process each chapter in turn with XSLT, a step that accepts only a single input document, and produce a sequence of formatted chapters as its output.</span></p><figure id="ex.p.for-each" class="example-wrapper"><div class="title"><span class="deltaxml-new" style="background:#90EE90">Example 5. A Sample For-Each</span></div><div class="example"><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:for-each name="chapters"&gt; &lt;p:iteration-source select="//chapter"/&gt; &lt;p:output port="html-results"&gt; &lt;p:pipe step="make-html" port="result"/&gt; &lt;/p:output&gt; &lt;p:output port="fo-results"&gt; &lt;p:pipe step="make-fo" port="result"/&gt; &lt;/p:output&gt; &lt;p:xslt name="make-html"&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="http://example.com/xsl/html.xsl"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;p:xslt name="make-fo"&gt; &lt;p:input port="source"&gt; &lt;p:pipe step="chapters" port="current"/&gt; &lt;/p:input&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="http://example.com/xsl/fo.xsl"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;/p:for-each&gt;</span></code></pre></div></figure><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">//chapter</span></code><span class="deltaxml-new" style="background:#90EE90"> elements of the document are selected. Each chapter is transformed into HTML and XSL Formatting Objects using an XSLT step. The resulting HTML and FO documents are aggregated together and appear on the </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">html-results</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">fo-results</span></code><span class="deltaxml-new" style="background:#90EE90"> ports, respectively, of the </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">chapters</span></code><span class="deltaxml-new" style="background:#90EE90"> step itself.</span></p></section></section><section id="p.viewport" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">4.3 p:viewport</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A viewport is specified by the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code><span class="deltaxml-new" style="background:#90EE90"> element. It is a </span><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-new" style="background:#90EE90">compound step</span></a></em><span class="deltaxml-new" style="background:#90EE90"> that processes a single document, applying its </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90"> to one or more subtrees of the document. </span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:viewport</span><br /><span class="deltaxml-new" style="background:#90EE90">  name? = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">match</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    ((</span><a href="#p.viewport-source"><span class="deltaxml-new" style="background:#90EE90">p:viewport-source</span></a><span class="deltaxml-new" style="background:#90EE90">? &amp; </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.output"><span class="deltaxml-new" style="background:#90EE90">p:output</span></a><span class="deltaxml-new" style="background:#90EE90">? &amp; </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.log"><span class="deltaxml-new" style="background:#90EE90">p:log</span></a><span class="deltaxml-new" style="background:#90EE90">?),</span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><var><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></var><span class="deltaxml-new" style="background:#90EE90">)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:viewport&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The result of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code><span class="deltaxml-new" style="background:#90EE90"> is a copy of the original document where the selected subtrees have been replaced by the results of applying the subpipeline to them.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><a href="#p.viewport-source"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport-source</span></code></a><span class="deltaxml-new" style="background:#90EE90"> is an anonymous input: its </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-new" style="background:#90EE90">connection</span></a></em><span class="deltaxml-new" style="background:#90EE90"> provides a single document to the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code><span class="deltaxml-new" style="background:#90EE90"> step. If no document is explicitly provided, then the viewport source is read from the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-new" style="background:#90EE90">default readable port</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span><a name="err.inline.D0003"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0003"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0003</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the viewport source does not provide exactly one document. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute specifies an XSLT match pattern. Each matching node in the source document is wrapped in a document node, as necessary, and provided, one at a time, to the viewport's </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90"> on a port named </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">current</span></code><span class="deltaxml-new" style="background:#90EE90">. The base URI of the resulting document that is passed to the subpipeline is the base URI of the matched element or document. </span><a name="err.inline.D0010"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0010"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0010</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> expression on </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code><span class="deltaxml-new" style="background:#90EE90"> does not match an element or document. </span></p><p><span class="deltaxml-new" style="background:#90EE90">After a match is found, the entire subtree rooted at that match is processed as a unit. No further attempts are made to match nodes among the descendants of any matched node.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The environment inherited by the </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-new" style="background:#90EE90">contained steps</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code><span class="deltaxml-new" style="background:#90EE90"> is the </span><em class="glossterm"><a href="#dt-inherited-environment"><span class="deltaxml-new" style="background:#90EE90">inherited environment</span></a></em><span class="deltaxml-new" style="background:#90EE90"> with these modifications:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">The port named “</span><code class="port"><span class="deltaxml-new" style="background:#90EE90">current</span></code><span class="deltaxml-new" style="background:#90EE90">” on the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code><span class="deltaxml-new" style="background:#90EE90"> is added to the </span><em class="glossterm"><a href="#dt-readable-ports"><span class="deltaxml-new" style="background:#90EE90">readable ports</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">The port named “</span><code class="port"><span class="deltaxml-new" style="background:#90EE90">current</span></code><span class="deltaxml-new" style="background:#90EE90">” on the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code><span class="deltaxml-new" style="background:#90EE90"> is made the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-new" style="background:#90EE90">default readable port</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code><span class="deltaxml-new" style="background:#90EE90"> must contain a single, </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-new" style="background:#90EE90">primary output port</span></a></em><span class="deltaxml-new" style="background:#90EE90"> declared explicitly or </span><a href="#primary-input-output"><span class="deltaxml-new" style="background:#90EE90">supplied by default</span></a><span class="deltaxml-new" style="background:#90EE90">. If that port has no </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-new" style="background:#90EE90">connection</span></a></em><span class="deltaxml-new" style="background:#90EE90">, then it is connected to the </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-new" style="background:#90EE90">primary output port</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of the </span><em class="glossterm"><a href="#dt-last-step"><span class="deltaxml-new" style="background:#90EE90">last step</span></a></em><span class="deltaxml-new" style="background:#90EE90"> in the </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span><a name="err.inline.S0006.1"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0006"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0006</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the primary output port is unconnected and the </span><em class="glossterm"><a href="#dt-last-step"><span class="deltaxml-new" style="background:#90EE90">last step</span></a></em><span class="deltaxml-new" style="background:#90EE90"> in the subpipeline does not have a primary output port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">What appears on the output from the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code><span class="deltaxml-new" style="background:#90EE90"> will be a copy of the input document where each matching node is replaced by the result of applying the subpipeline to the subtree rooted at that node. In other words, if the match pattern matches a particular element then that element is wrapped in a document node and provided on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">current</span></code><span class="deltaxml-new" style="background:#90EE90"> port, the subpipeline in the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code><span class="deltaxml-new" style="background:#90EE90"> is evaluated, and the result that appears on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">output</span></code><span class="deltaxml-new" style="background:#90EE90"> port replaces the matched element. </span></p><p><span class="deltaxml-new" style="background:#90EE90">If no documents appear on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">output</span></code><span class="deltaxml-new" style="background:#90EE90"> port, the matched element will effectively be deleted. If exactly one document appears, the contents of that document will replace the matched element. If a sequence of documents appears, then the contents of each document in that sequence (in the order it appears in the sequence) will replace the matched element.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The output of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code><span class="deltaxml-new" style="background:#90EE90"> itself is a single document that appears on a port named “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90">”. Note that the semantics of </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code><span class="deltaxml-new" style="background:#90EE90"> are special. The </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">output</span></code><span class="deltaxml-new" style="background:#90EE90"> port in the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code><span class="deltaxml-new" style="background:#90EE90"> is used only to access the results of the subpipeline. The output of the step itself appears on a port with the fixed name “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90">” that is never explicitly declared.</span></p><section id="viewport-xpath-context" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">4.3.1 XPath Context</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">Within a </span><a href="#p.viewport"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code></a><span class="deltaxml-new" style="background:#90EE90">, the </span><a href="#f.iteration-position"><code class="function"><span class="deltaxml-new" style="background:#90EE90">p:iteration-position</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#f.iteration-size"><code class="function"><span class="deltaxml-new" style="background:#90EE90">p:iteration-size</span></code></a><span class="deltaxml-new" style="background:#90EE90"> are taken from the sequence of documents that will be processed by the </span><a href="#p.viewport"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code></a><span class="deltaxml-new" style="background:#90EE90">. The total number of documents is the </span><a href="#f.iteration-size"><code class="function"><span class="deltaxml-new" style="background:#90EE90">p:iteration-size</span></code></a><span class="deltaxml-new" style="background:#90EE90">; the ordinal value of the current document (the document appearing on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">current</span></code><span class="deltaxml-new" style="background:#90EE90"> port) is the </span><a href="#f.iteration-position"><code class="function"><span class="deltaxml-new" style="background:#90EE90">p:iteration-position</span></code></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><div id="impl2" class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note to implementers</span></h3><p><span class="deltaxml-new" style="background:#90EE90">In the case where no XPath expression that must be evaluated by the processor makes any reference to </span><a href="#f.iteration-size"><code class="function"><span class="deltaxml-new" style="background:#90EE90">p:iteration-size</span></code></a><span class="deltaxml-new" style="background:#90EE90">, its value does not actually have to be calculated (and the entire input sequence does not, therefore, need to be buffered so that its size can be calculated before processing begins).</span></p></div></section><section id="example-viewport" class="section tocsuppress"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">4.3.2 Example</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><a href="#p.viewport"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code></a><span class="deltaxml-new" style="background:#90EE90"> might accept an XHTML document as its input, add an </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">hr</span></code><span class="deltaxml-new" style="background:#90EE90"> element at the beginning of all </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">div</span></code><span class="deltaxml-new" style="background:#90EE90"> elements that have the class value “chapter”, and return an XHTML document that is the same as the original except for that change.</span></p><figure id="ex.p.viewport" class="example-wrapper"><div class="title"><span class="deltaxml-new" style="background:#90EE90">Example 6. A Sample Viewport</span></div><div class="example"><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:viewport match="h:div[@class='chapter']" xmlns:h="http://www.w3.org/1999/xhtml"&gt; &lt;p:insert position="first-child"&gt; &lt;p:input port="insertion"&gt; &lt;p:inline&gt; &lt;hr xmlns="http://www.w3.org/1999/xhtml"/&gt; &lt;/p:inline&gt; &lt;/p:input&gt; &lt;/p:insert&gt; &lt;/p:viewport&gt;</span></code></pre></div></figure><p><span class="deltaxml-new" style="background:#90EE90">The nodes which match </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">h:div[@class='chapter']</span></code><span class="deltaxml-new" style="background:#90EE90"> in the input document are selected. An </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">hr</span></code><span class="deltaxml-new" style="background:#90EE90"> is inserted as the first child of each </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">h:div</span></code><span class="deltaxml-new" style="background:#90EE90"> and the resulting version replaces the original </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">h:div</span></code><span class="deltaxml-new" style="background:#90EE90">. The result of the whole step is a copy of the input document with a horizontal rule as the first child of each selected </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">h:div</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p></section></section><section id="p.choose" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">4.4 p:choose</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A choose is specified by the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code><span class="deltaxml-new" style="background:#90EE90"> element. It is a </span><em class="glossterm"><a href="#dt-multi-container-step"><span class="deltaxml-new" style="background:#90EE90">multi-container step</span></a></em><span class="deltaxml-new" style="background:#90EE90"> that selects exactly one of a list of alternative </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipelines</span></a></em><span class="deltaxml-new" style="background:#90EE90"> based on the evaluation of XPath expressions.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:choose</span><br /><span class="deltaxml-new" style="background:#90EE90">  name? = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.xpath-context"><span class="deltaxml-new" style="background:#90EE90">p:xpath-context</span></a><span class="deltaxml-new" style="background:#90EE90">?,</span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.variable"><span class="deltaxml-new" style="background:#90EE90">p:variable</span></a><span class="deltaxml-new" style="background:#90EE90">*,</span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.when"><span class="deltaxml-new" style="background:#90EE90">p:when</span></a><span class="deltaxml-new" style="background:#90EE90">*,</span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.otherwise"><span class="deltaxml-new" style="background:#90EE90">p:otherwise</span></a><span class="deltaxml-new" style="background:#90EE90">?)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:choose&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code><span class="deltaxml-new" style="background:#90EE90"> has no inputs. It contains an arbitrary number of alternative </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipelines</span></a></em><span class="deltaxml-new" style="background:#90EE90">, exactly one of which will be evaluated.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The list of alternative subpipelines consists of zero or more subpipelines guarded by an XPath expression, followed optionally by a single default subpipeline.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code><span class="deltaxml-new" style="background:#90EE90"> considers each subpipeline in turn and selects the first (and only the first) subpipeline for which the guard expression evaluates to true in its context. If there are no subpipelines for which the expression evaluates to true, the default subpipeline, if it was specified, is selected.</span></p><p><span class="deltaxml-new" style="background:#90EE90">After a </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90"> is selected, it is evaluated as if only it had been present.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The outputs of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code><span class="deltaxml-new" style="background:#90EE90"> are taken from the outputs of the selected </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90">. The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code><span class="deltaxml-new" style="background:#90EE90"> has the same number of outputs as the selected subpipeline with the same names. If the selected subpipeline has a </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-new" style="background:#90EE90">primary output port</span></a></em><span class="deltaxml-new" style="background:#90EE90">, the port with the same name on the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code><span class="deltaxml-new" style="background:#90EE90"> is also a primary output port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">In order to ensure that the output of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code><span class="deltaxml-new" style="background:#90EE90"> is consistent irrespective of the </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90"> chosen, each </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90"> must declare the same number of outputs with the same names. If any of the subpipelines specifies a </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-new" style="background:#90EE90">primary output port</span></a></em><span class="deltaxml-new" style="background:#90EE90">, each subpipeline must specify exactly the same output as primary. </span><a name="err.inline.S0007"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0007"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0007</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if two </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipelines</span></a></em><span class="deltaxml-new" style="background:#90EE90"> in a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code><span class="deltaxml-new" style="background:#90EE90"> declare different outputs.</span></p><p><span class="deltaxml-new" style="background:#90EE90">As a convenience to authors, it is not an error if some subpipelines declare outputs that can produce sequences and some do not. Each output of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code><span class="deltaxml-new" style="background:#90EE90"> is declared to produce a sequence if that output is declared to produce a sequence in any of its subpipelines.</span></p><p><a name="err.inline.D0004"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0004"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0004</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if no </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90"> is selected by the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code><span class="deltaxml-new" style="background:#90EE90"> and no default is provided.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code><span class="deltaxml-new" style="background:#90EE90"> can specify the context node against which the XPath expressions that occur on each branch are evaluated. The context node is specified as a </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-new" style="background:#90EE90">connection</span></a></em><span class="deltaxml-new" style="background:#90EE90"> in the </span><a href="#p.xpath-context"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xpath-context</span></code></a><span class="deltaxml-new" style="background:#90EE90">. If no explicit connection is provided, the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-new" style="background:#90EE90">default readable port</span></a></em><span class="deltaxml-new" style="background:#90EE90"> is used. If the context node is connected to </span><a href="#p.empty"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></code></a><span class="deltaxml-new" style="background:#90EE90">, or is unconnected and the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-new" style="background:#90EE90">default readable port</span></a></em><span class="deltaxml-new" style="background:#90EE90"> is undefined, the context item is undefined.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Each conditional </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90"> is represented by a </span><a href="#p.when"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:when</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element. The default branch is represented by a </span><a href="#p.otherwise"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:otherwise</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element.</span></p><section id="p.xpath-context" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">4.4.1 p:xpath-context</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xpath-context</span></code><span class="deltaxml-new" style="background:#90EE90"> element specifies the context node against which an XPath expression will be evaluated. When it appears in a </span><a href="#p.when"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:when</span></code></a><span class="deltaxml-new" style="background:#90EE90">, it specifies the context for that </span><a href="#p.when"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:when</span></code></a><span class="deltaxml-new" style="background:#90EE90">’s </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">test</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute. When it appears in </span><a href="#p.choose"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code></a><span class="deltaxml-new" style="background:#90EE90">, it specifies the default context for all of the </span><a href="#p.when"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:when</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements in that </span><a href="#p.choose"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:xpath-context&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.empty"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.pipe"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.document"><span class="deltaxml-new" style="background:#90EE90">p:document</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.inline"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.data"><span class="deltaxml-new" style="background:#90EE90">p:data</span></a><span class="deltaxml-new" style="background:#90EE90">)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:xpath-context&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">Only one </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-new" style="background:#90EE90">connection</span></a></em><span class="deltaxml-new" style="background:#90EE90"> is allowed and it works the same way that connections work on a </span><a href="#p.input"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:input</span></code></a><span class="deltaxml-new" style="background:#90EE90">. No </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> expression is allowed. </span><a name="err.inline.D0005"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0005"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0005</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if more than one document appears on the connection for the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">xpath-context</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xpath-context</span></code><span class="deltaxml-new" style="background:#90EE90"> element only provides the context node. The namespace bindings, in-scope variables, and other aspects of the context come from the element on which the XPath expression occurs.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the context node is connected to </span><a href="#p.empty"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></code></a><span class="deltaxml-new" style="background:#90EE90">, or is unconnected and the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-new" style="background:#90EE90">default readable port</span></a></em><span class="deltaxml-new" style="background:#90EE90"> is undefined, the context item is undefined.</span></p></section><section id="p.when" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">4.4.2 p:when</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">A when specifies one subpipeline guarded by a test expression. </span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:when</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">test</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.xpath-context"><span class="deltaxml-new" style="background:#90EE90">p:xpath-context</span></a><span class="deltaxml-new" style="background:#90EE90">?,</span><br /><span class="deltaxml-new" style="background:#90EE90">     (</span><a href="#p.output"><span class="deltaxml-new" style="background:#90EE90">p:output</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.log"><span class="deltaxml-new" style="background:#90EE90">p:log</span></a><span class="deltaxml-new" style="background:#90EE90">)*,</span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><var><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></var><span class="deltaxml-new" style="background:#90EE90">)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:when&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">Each </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:when</span></code><span class="deltaxml-new" style="background:#90EE90"> branch of the </span><a href="#p.choose"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code></a><span class="deltaxml-new" style="background:#90EE90"> has a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">test</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute which </span><span class="rfc2119" id="p.when.4.4"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> contain an XPath expression. That XPath expression's effective boolean value is the guard for the </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90"> contained within that </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:when</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:when</span></code><span class="deltaxml-new" style="background:#90EE90"> can specify a context node against which its </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">test</span></code><span class="deltaxml-new" style="background:#90EE90"> expression is to be evaluated. That context node is specified as a </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-new" style="background:#90EE90">connection</span></a></em><span class="deltaxml-new" style="background:#90EE90"> for the </span><a href="#p.xpath-context"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xpath-context</span></code></a><span class="deltaxml-new" style="background:#90EE90">. If no context is specified on the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:when</span></code><span class="deltaxml-new" style="background:#90EE90">, the context of the </span><a href="#p.choose"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code></a><span class="deltaxml-new" style="background:#90EE90"> is used.</span></p></section><section id="p.otherwise" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">4.4.3 p:otherwise</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">An otherwise specifies the default branch; the subpipeline selected if no test expression on any preceding </span><a href="#p.when"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:when</span></code></a><span class="deltaxml-new" style="background:#90EE90"> evaluates to true.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:otherwise&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    ((</span><a href="#p.output"><span class="deltaxml-new" style="background:#90EE90">p:output</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.log"><span class="deltaxml-new" style="background:#90EE90">p:log</span></a><span class="deltaxml-new" style="background:#90EE90">)*,</span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><var><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></var><span class="deltaxml-new" style="background:#90EE90">)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:otherwise&gt;</span></code></p></section><section id="example-choose" class="section tocsuppress"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">4.4.4 Example</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><a href="#p.choose"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></code></a><span class="deltaxml-new" style="background:#90EE90"> might test the version attribute of the document element and validate with an appropriate schema.</span></p><figure id="ex.p.choose" class="example-wrapper"><div class="title"><span class="deltaxml-new" style="background:#90EE90">Example 7. A Sample Choose</span></div><div class="example"><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:choose name="version"&gt; &lt;p:when test="/*[@version = 2]"&gt; &lt;p:validate-with-xml-schema&gt; &lt;p:input port="schema"&gt; &lt;p:document href="v2schema.xsd"/&gt; &lt;/p:input&gt; &lt;/p:validate-with-xml-schema&gt; &lt;/p:when&gt; &lt;p:when test="/*[@version = 1]"&gt; &lt;p:validate-with-xml-schema&gt; &lt;p:input port="schema"&gt; &lt;p:document href="v1schema.xsd"/&gt; &lt;/p:input&gt; &lt;/p:validate-with-xml-schema&gt; &lt;/p:when&gt; &lt;p:when test="/*[@version]"&gt; &lt;p:identity/&gt; &lt;/p:when&gt; &lt;p:otherwise&gt; &lt;p:error code="NOVERSION"&gt; &lt;p:input port="source"&gt; &lt;p:inline&gt; &lt;message&gt;Required version attribute missing.&lt;/message&gt; &lt;/p:inline&gt; &lt;/p:input&gt; &lt;/p:error&gt; &lt;/p:otherwise&gt; &lt;/p:choose&gt;</span></code></pre></div></figure></section></section><section id="p.group" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">4.5 p:group</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A group is specified by the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:group</span></code><span class="deltaxml-new" style="background:#90EE90"> element. In a </span><a href="#p.try"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code></a><span class="deltaxml-new" style="background:#90EE90">, it is a non-step wrapper, everywhere else, it is a </span><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-new" style="background:#90EE90">compound step</span></a></em><span class="deltaxml-new" style="background:#90EE90">. A group encapsulates the behavior of its </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:group</span><br /><span class="deltaxml-new" style="background:#90EE90">  name? = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    ((</span><a href="#p.output"><span class="deltaxml-new" style="background:#90EE90">p:output</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.log"><span class="deltaxml-new" style="background:#90EE90">p:log</span></a><span class="deltaxml-new" style="background:#90EE90">)*,</span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><var><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></var><span class="deltaxml-new" style="background:#90EE90">)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:group&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:group</span></code><span class="deltaxml-new" style="background:#90EE90"> is a convenience wrapper for a collection of steps. </span></p><section id="example-group" class="section tocsuppress"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">4.5.1 Example</span></h4></div><figure id="ex.p.group" class="example-wrapper"><div class="title"><span class="deltaxml-new" style="background:#90EE90">Example 8. An Example Group</span></div><div class="example"><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:group&gt; &lt;p:variable name="db-key" select="'some-long-string-of-nearly-random-characters'"/&gt; &lt;p:choose&gt; &lt;p:when test="/config/output = 'fo'"&gt; &lt;p:xslt&gt; &lt;p:with-param name="key" select="$db-key"/&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="fo.xsl"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;/p:when&gt; &lt;p:when test="/config/output = 'svg'"&gt; &lt;p:xslt&gt; &lt;p:with-param name="key" select="$db-key"/&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="svg.xsl"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;/p:when&gt; &lt;p:otherwise&gt; &lt;p:xslt&gt; &lt;p:with-param name="key" select="$db-key"/&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="html.xsl"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;/p:otherwise&gt; &lt;/p:choose&gt; &lt;/p:group&gt;</span></code></pre></div></figure></section></section><section id="p.try" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">4.6 p:try</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A try/catch is specified by the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code><span class="deltaxml-new" style="background:#90EE90"> element. It is a </span><em class="glossterm"><a href="#dt-multi-container-step"><span class="deltaxml-new" style="background:#90EE90">multi-container step</span></a></em><span class="deltaxml-new" style="background:#90EE90"> that isolates a </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90">, preventing any dynamic errors that arise within it from being exposed to the rest of the pipeline.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:try</span><br /><span class="deltaxml-new" style="background:#90EE90">  name? = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.variable"><span class="deltaxml-new" style="background:#90EE90">p:variable</span></a><span class="deltaxml-new" style="background:#90EE90">*,</span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.group"><span class="deltaxml-new" style="background:#90EE90">p:group</span></a><span class="deltaxml-new" style="background:#90EE90">,</span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.catch"><span class="deltaxml-new" style="background:#90EE90">p:catch</span></a><span class="deltaxml-new" style="background:#90EE90">)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:try&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><a href="#p.group"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:group</span></code></a><span class="deltaxml-new" style="background:#90EE90"> represents the initial subpipeline and the recovery (or “catch”) pipeline is identified with a </span><a href="#p.catch"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:catch</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code><span class="deltaxml-new" style="background:#90EE90"> step evaluates the initial subpipeline and, if no errors occur, the outputs of that pipeline are the outputs of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code><span class="deltaxml-new" style="background:#90EE90"> step. However, if any errors occur, the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code><span class="deltaxml-new" style="background:#90EE90"> abandons the first subpipeline, discarding any output that it might have generated, and evaluates the recovery subpipeline.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the recovery subpipeline is evaluated, the outputs of the recovery subpipeline are the outputs of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code><span class="deltaxml-new" style="background:#90EE90"> step. If the recovery subpipeline is evaluated and a step within that subpipeline fails, the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code><span class="deltaxml-new" style="background:#90EE90"> fails.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The outputs of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code><span class="deltaxml-new" style="background:#90EE90"> are taken from the outputs of the initial subpipeline or the recovery subpipeline if an error occurred in the initial subpipeline. The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code><span class="deltaxml-new" style="background:#90EE90"> has the same number of outputs as the selected subpipeline with the same names. If the selected subpipeline has a </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-new" style="background:#90EE90">primary output port</span></a></em><span class="deltaxml-new" style="background:#90EE90">, the port with the same name on the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code><span class="deltaxml-new" style="background:#90EE90"> is also a primary output port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">In order to ensure that the output of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code><span class="deltaxml-new" style="background:#90EE90"> is consistent irrespective of whether the initial subpipeline provides its output or the recovery subpipeline does, both subpipelines must declare the same number of outputs with the same names. If either of the subpipelines specifies a </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-new" style="background:#90EE90">primary output port</span></a></em><span class="deltaxml-new" style="background:#90EE90">, both subpipelines must specify exactly the same output as primary. </span><a name="err.inline.S0009"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0009"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0009</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><a href="#p.group"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:group</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#p.catch"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:catch</span></code></a><span class="deltaxml-new" style="background:#90EE90"> subpipelines declare different outputs.</span></p><p><span class="deltaxml-new" style="background:#90EE90">As a convenience to authors, it is not an error if an output port can produce a sequence in the initial subpipeline but not in the recovery subpipeline, or vice versa. Each output of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code><span class="deltaxml-new" style="background:#90EE90"> is declared to produce a sequence if that output is declared to produce a sequence in either of its subpipelines.</span></p><p><span class="deltaxml-new" style="background:#90EE90">A pipeline author can cause an error to occur with the </span><a href="#c.error"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:error</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The recovery subpipeline of a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code><span class="deltaxml-new" style="background:#90EE90"> is identified with a </span><a href="#p.catch"><code id="p.catch" class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:catch</span></code></a><span class="deltaxml-new" style="background:#90EE90">:</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:catch</span><br /><span class="deltaxml-new" style="background:#90EE90">  name? = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    ((</span><a href="#p.output"><span class="deltaxml-new" style="background:#90EE90">p:output</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.log"><span class="deltaxml-new" style="background:#90EE90">p:log</span></a><span class="deltaxml-new" style="background:#90EE90">)*,</span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><var><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></var><span class="deltaxml-new" style="background:#90EE90">)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:catch&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The environment inherited by the </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-new" style="background:#90EE90">contained steps</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of the </span><a href="#p.catch"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:catch</span></code></a><span class="deltaxml-new" style="background:#90EE90"> is the </span><em class="glossterm"><a href="#dt-inherited-environment"><span class="deltaxml-new" style="background:#90EE90">inherited environment</span></a></em><span class="deltaxml-new" style="background:#90EE90"> with this modification:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">The port named “</span><code class="port"><span class="deltaxml-new" style="background:#90EE90">error</span></code><span class="deltaxml-new" style="background:#90EE90">” on the </span><a href="#p.catch"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:catch</span></code></a><span class="deltaxml-new" style="background:#90EE90"> is added to the </span><em class="glossterm"><a href="#dt-readable-ports"><span class="deltaxml-new" style="background:#90EE90">readable ports</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">What appears on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">error</span></code><span class="deltaxml-new" style="background:#90EE90"> output port is an </span><a href="#err-vocab"><span class="deltaxml-new" style="background:#90EE90">error document</span></a><span class="deltaxml-new" style="background:#90EE90">. The error document may contain messages generated by steps that were part of the initial subpipeline. Not all messages that appear are indicative of errors; for example, it is common for all </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">xsl:message</span></code><span class="deltaxml-new" style="background:#90EE90"> output from the XSLT component to appear on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">error</span></code><span class="deltaxml-new" style="background:#90EE90"> output port. It is possible that the component which fails may not produce any messages at all. It is also possible that the failure of one component may cause others to fail so that there may be multiple failure messages in the document.</span></p><section id="err-vocab" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">4.6.1 The Error Vocabulary</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">In general, it is very difficult to predict error behavior. Step failure may be catastrophic (programmer error), or it may be the result of user error, resource failures, etc. Steps may detect more than one error, and the failure of one step may cause other steps to fail as well.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><a href="#p.try"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code></a><span class="deltaxml-new" style="background:#90EE90">/</span><a href="#p.catch"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:catch</span></code></a><span class="deltaxml-new" style="background:#90EE90"> mechanism gives pipeline authors the opportunity to process the errors that caused the </span><a href="#p.try"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code></a><span class="deltaxml-new" style="background:#90EE90"> to fail. In order to facilitate some modicum of interoperability among processors, errors that are reported on the </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">error</span></code><span class="deltaxml-new" style="background:#90EE90"> output port of a </span><a href="#p.catch"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:catch</span></code></a><span class="rfc2119" id="err-vocab.3.6"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> conform to the format described here. </span></p><section id="cv.errors" class="section"><div class="section-titlepage"><h5><span class="deltaxml-new" style="background:#90EE90">4.6.1.1 c:errors</span></h5></div><p><span class="deltaxml-new" style="background:#90EE90">The error vocabulary consists of a root element, </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:errors</span></code><span class="deltaxml-new" style="background:#90EE90"> which contains zero or more </span><a href="#cv.error"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:error</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements.</span></p><p id="R.1" prefix="c" class="element-syntax element-syntax-error-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:errors&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><a href="#cv.error"><span class="deltaxml-new" style="background:#90EE90">c:error</span></a><span class="deltaxml-new" style="background:#90EE90">*</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:errors&gt;</span></code></p></section><section id="cv.error" class="section"><div class="section-titlepage"><h5><span class="deltaxml-new" style="background:#90EE90">4.6.1.2 c:error</span></h5></div><p><span class="deltaxml-new" style="background:#90EE90">Each specific error is represented by an </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:error</span></code><span class="deltaxml-new" style="background:#90EE90"> element:</span></p><p id="R.1" prefix="c" class="element-syntax element-syntax-error-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:error</span><br /><span class="deltaxml-new" style="background:#90EE90">  name? = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  type? = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  code? = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  href? = </span><var><span class="deltaxml-new" style="background:#90EE90">anyURI</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  line? = </span><var><span class="deltaxml-new" style="background:#90EE90">integer</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  column? = </span><var><span class="deltaxml-new" style="background:#90EE90">integer</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  offset? = </span><var><span class="deltaxml-new" style="background:#90EE90">integer</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><var><span class="deltaxml-new" style="background:#90EE90">anyElement</span></var><span class="deltaxml-new" style="background:#90EE90">)*</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:error&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">name</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">type</span></code><span class="deltaxml-new" style="background:#90EE90"> attributes identify the name and type, respectively, of the step which failed.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">code</span></code><span class="deltaxml-new" style="background:#90EE90"> is a QName which identifies the error. For steps which have defined error codes, this is an opportunity for the step to identify the error in a machine-processable fashion. Many steps omit this because they do not include the concept of errors identified by QNames.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the error was caused by a specific document, or by the location of some erroneous construction in a specific document, the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">href</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">line</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">column</span></code><span class="deltaxml-new" style="background:#90EE90">, and </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">offset</span></code><span class="deltaxml-new" style="background:#90EE90"> attributes identify this location. Generally, the error location is identified either with line and column numbers or with an offset from the beginning of the document, but not usually both.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The content of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:error</span></code><span class="deltaxml-new" style="background:#90EE90"> element is any well-formed XML. Specific steps, or specific implementations, may provide more detail about the format of the content of an error message.</span></p></section><section id="error-example" class="section"><div class="section-titlepage"><h5><span class="deltaxml-new" style="background:#90EE90">4.6.1.3 Error Example</span></h5></div><p><span class="deltaxml-new" style="background:#90EE90">Consider the following XSLT stylesheet:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt; &lt;xsl:template match="/"&gt; &lt;xsl:message terminate="yes"&gt; &lt;xsl:text&gt;This stylesheet is &lt;/xsl:text&gt; &lt;emph&gt;pointless&lt;/emph&gt; &lt;xsl:text&gt;.&lt;/xsl:text&gt; &lt;/xsl:message&gt; &lt;/xsl:template&gt; &lt;/xsl:stylesheet&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">If it was used in a step named “xform” in a </span><a href="#p.try"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code></a><span class="deltaxml-new" style="background:#90EE90">, the following error document might be produced:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:errors xmlns:c="http://www.w3.org/ns/xproc-step"&gt; &lt;c:error name="xform" type="p:xslt" href="style.xsl" line="6"&gt;This stylesheet is &lt;emph&gt;pointless&lt;/emph&gt;.&lt;/c:error&gt; &lt;/c:errors&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">It is not an error for steps to generate non-standard error output as long as it is well-formed.</span></p></section></section><section id="example-try" class="section tocsuppress"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">4.6.2 Example</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">A pipeline might attempt to process a document by dispatching it to some web service. If the web service succeeds, then those results are passed to the rest of the pipeline. However, if the web service cannot be contacted or reports an error, the </span><a href="#p.catch"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:catch</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step can provide some sort of default for the rest of the pipeline.</span></p><figure id="ex.p.trycatch" class="example-wrapper"><div class="title"><span class="deltaxml-new" style="background:#90EE90">Example 9. An Example Try/Catch</span></div><div class="example"><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:try&gt; &lt;p:group&gt; &lt;p:http-request&gt; &lt;p:input port="source"&gt; &lt;p:inline&gt; &lt;c:request method="post" href="http://example.com/form-action"&gt; &lt;c:body content-type="application/x-www-form-urlencoded"&gt;name=W3C&amp;amp;spec=XProc&lt;/c:body&gt; &lt;/c:request&gt; &lt;/p:inline&gt; &lt;/p:input&gt; &lt;/p:http-request&gt; &lt;/p:group&gt; &lt;p:catch&gt; &lt;p:identity&gt; &lt;p:input port="source"&gt; &lt;p:inline&gt; &lt;c:error&gt;HTTP Request Failed&lt;/c:error&gt; &lt;/p:inline&gt; &lt;/p:input&gt; &lt;/p:identity&gt; &lt;/p:catch&gt; &lt;/p:try&gt;</span></code></pre></div></figure></section></section><section id="p.atomic" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">4.7 Atomic Steps</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">In addition to the six step types described in the preceding sections, XProc provides a standard library of atomic step types. The full vocabulary of standards steps is described in </span><a href="#std-components" title="Standard Step Library"><span class="deltaxml-new" style="background:#90EE90">Section 7, “Standard Step Library”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">All of the standard, atomic steps are invoked in the same way:</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;</span><var><span class="deltaxml-new" style="background:#90EE90">p:atomic-step</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  name? = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.input"><span class="deltaxml-new" style="background:#90EE90">p:input</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.with-option"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.with-param"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.log"><span class="deltaxml-new" style="background:#90EE90">p:log</span></a><span class="deltaxml-new" style="background:#90EE90">)*</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/</span><var><span class="deltaxml-new" style="background:#90EE90">p:atomic-step</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">Where “</span><em class="replaceable"><code><span class="deltaxml-new" style="background:#90EE90">p:atomic-step</span></code></em><span class="deltaxml-new" style="background:#90EE90">” </span><span class="rfc2119" id="p.atomic.5.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be in the XProc namespace and </span><span class="rfc2119" id="p.atomic.5.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be declared in either the standard library for the XProc version supported by the processor or explicitly imported by the surrounding pipeline (see </span><a href="#versioning-considerations" title="Versioning Considerations"><span class="deltaxml-new" style="background:#90EE90">Section 2.13, “Versioning Considerations”</span></a><span class="deltaxml-new" style="background:#90EE90">). </span></p></section><section id="p.extension" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">4.8 Extension Steps</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">Pipeline authors may also have access to additional steps not defined or described by this specification. Atomic extension steps are invoked just like standard steps:</span></p><p id="R.1" prefix="pfx" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;</span><var><span class="deltaxml-new" style="background:#90EE90">pfx:atomic-step</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  name? = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.input"><span class="deltaxml-new" style="background:#90EE90">p:input</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.with-option"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.with-param"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.log"><span class="deltaxml-new" style="background:#90EE90">p:log</span></a><span class="deltaxml-new" style="background:#90EE90">)*</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/</span><var><span class="deltaxml-new" style="background:#90EE90">pfx:atomic-step</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">Extension steps </span><span class="rfc2119" id="p.extension.4.1"><span class="deltaxml-new" style="background:#90EE90">must not</span></span><span class="deltaxml-new" style="background:#90EE90"> be in the XProc namespace and there </span><span class="rfc2119" id="p.extension.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a </span><em class="glossterm"><a href="#dt-visible"><span class="deltaxml-new" style="background:#90EE90">visible</span></a></em><span class="deltaxml-new" style="background:#90EE90"> step declaration at the point of use (see </span><a href="#scoping" title="Scoping of Names"><span class="deltaxml-new" style="background:#90EE90">Section 3.2, “Scoping of Names”</span></a><span class="deltaxml-new" style="background:#90EE90">).</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the relevant step declaration has no </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90">, then that step invokes the declared atomic step, which the processor must know how to perform. These steps are implementation-defined extensions. </span></p><p><span class="deltaxml-new" style="background:#90EE90">If the relevant step declaration has a </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90">, then that step runs the declared subpipeline. These steps are user- or implementation-defined extensions. Pipelines can refer to themselves (recursion is allowed), to pipelines defined in imported libraries, and to other pipelines in the same library if they are in a library.</span></p><p><a name="err.inline.S0010"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0010"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0010</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if a pipeline contains a step whose specified inputs, outputs, and options do not </span><em class="glossterm"><a href="#dt-matches"><span class="deltaxml-new" style="background:#90EE90">match</span></a></em><span class="deltaxml-new" style="background:#90EE90"> the </span><em class="glossterm"><a href="#dt-signature"><span class="deltaxml-new" style="background:#90EE90">signature</span></a></em><span class="deltaxml-new" style="background:#90EE90"> for steps of that type.</span></p><p><a name="err.inline.D0017"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0017"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0017</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the running pipeline attempts to invoke a step which the processor does not know how to perform.</span></p><p><a name="impl-30"></a><span class="deltaxml-new" style="background:#90EE90">The presence of other </span><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-new" style="background:#90EE90">compound steps</span></a></em><span class="deltaxml-new" style="background:#90EE90"> is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">; XProc provides no standard mechanism for defining them or describing what they can contain. </span><a name="err.inline.S0048"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0048"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0048</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to use a declared step as a </span><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-new" style="background:#90EE90">compound step</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><section id="option-shortcut" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">4.8.1 Syntactic Shortcut for Option Values</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">Namespace qualified attributes on a step are </span><em class="glossterm"><a href="#dt-extension-attribute"><span class="deltaxml-new" style="background:#90EE90">extension attributes</span></a></em><span class="deltaxml-new" style="background:#90EE90">. Attributes, other than </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">name</span></code><span class="deltaxml-new" style="background:#90EE90">, that are not namespace qualified are treated as a syntactic shortcut for specifying the value of an option. In other words, the following two steps are equivalent:</span></p><p><span class="deltaxml-new" style="background:#90EE90">The first step uses the standard </span><a href="#p.with-option"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></code></a><span class="deltaxml-new" style="background:#90EE90"> syntax:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;ex:stepType&gt; &lt;p:with-option name="option-name" select="'some value'"/&gt; &lt;/ex:stepType&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">The second step uses the syntactic shortcut:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;ex:stepType option-name="some value"/&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">Note that there are significant limitations to this shortcut syntax:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-new" style="background:#90EE90">It only applies to option names that are not in a namespace.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">It only applies to option names that are not otherwise used on the step, such as “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">name</span></code><span class="deltaxml-new" style="background:#90EE90">”.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">It can only be used to specify a constant value. Options that are computed at runtime must be written using the longer form.</span></p></li></ol></div><p><a name="err.inline.S0027"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0027"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0027</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if an option is specified with both the shortcut form and the long form. </span><a name="err.inline.S0031"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0031"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0031</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to use an option on an </span><em class="glossterm"><a href="#dt-atomic-step"><span class="deltaxml-new" style="background:#90EE90">atomic step</span></a></em><span class="deltaxml-new" style="background:#90EE90"> that is not declared on steps of that type. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The syntactic shortcuts apply equally to standard atomic steps and extension atomic steps.</span></p></section></section></section><section id="other-elements" class="section"><div class="section-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">5 Other pipeline elements</span></h2></div><section id="p.input" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">5.1 p:input</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:input</span></code><span class="deltaxml-new" style="background:#90EE90"> identifies an input port for a step. In some contexts, </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:input</span></code><span class="deltaxml-new" style="background:#90EE90"> declares that a port with the specified name exists and identifies the properties of that port. In other contexts, it provides a connection for a port declared elsewhere. And in some contexts, it does both. The semantics of </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:input</span></code><span class="deltaxml-new" style="background:#90EE90"> are complicated further by the fact that there are two kinds of inputs, ordinary “document” inputs and “parameter” inputs.</span></p><section id="document-inputs" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">5.1.1 Document Inputs</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The declaration of a document input identifies the name of the port, whether or not the port accepts a sequence, whether or not the port is a </span><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-new" style="background:#90EE90">primary input port</span></a></em><span class="deltaxml-new" style="background:#90EE90">, and may provide a default connection for the port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">An input </span><em><span class="deltaxml-new" style="background:#90EE90">declaration</span></em><span class="deltaxml-new" style="background:#90EE90"> has the following form:</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">port</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  sequence? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  primary? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  kind? = "document"</span><br /><span class="deltaxml-new" style="background:#90EE90">  select? = </span><var><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.empty"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      (</span><a href="#p.document"><span class="deltaxml-new" style="background:#90EE90">p:document</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.inline"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.data"><span class="deltaxml-new" style="background:#90EE90">p:data</span></a><span class="deltaxml-new" style="background:#90EE90">)+)?</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:input&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">port</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute defines the name of the port. </span><a name="err.inline.S0011"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0011"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0011</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to identify two ports with the same name on the same step.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute determines whether or not a sequence of documents is allowed on the port. </span><a name="err.inline.D0006"></a><span class="deltaxml-new" style="background:#90EE90">If </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><span class="deltaxml-new" style="background:#90EE90"> is not specified, or has the value false, then it is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0006"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0006</span></code></a><span class="deltaxml-new" style="background:#90EE90">) unless exactly one document appears on the declared port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is used to identify the </span><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-new" style="background:#90EE90">primary input port</span></a></em><span class="deltaxml-new" style="background:#90EE90">. An input port is a </span><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-new" style="background:#90EE90">primary input port</span></a></em><span class="deltaxml-new" style="background:#90EE90"> if </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><span class="deltaxml-new" style="background:#90EE90"> is specified with the value </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or if the step has only a single input port and </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><span class="deltaxml-new" style="background:#90EE90"> is not specified. </span><a name="err.inline.S0030"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0030"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0030</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to specify that more than one input port is the primary.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">kind</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute distinguishes between the two kinds of inputs: document inputs and parameter inputs. An input port is a document input port if </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">kind</span></code><span class="deltaxml-new" style="background:#90EE90"> is specified with the value “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">document</span></code><span class="deltaxml-new" style="background:#90EE90">” or if </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">kind</span></code><span class="deltaxml-new" style="background:#90EE90"> is not specified.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If a connection is provided in the declaration, then </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> may be used to select a portion of the input identified by the </span><a href="#p.empty"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#p.document"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:document</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#p.data"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:data</span></code></a><span class="deltaxml-new" style="background:#90EE90">, or </span><a href="#p.inline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements in the </span><a href="#p.input"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:input</span></code></a><span class="deltaxml-new" style="background:#90EE90">. This select expression applies </span><em><span class="deltaxml-new" style="background:#90EE90">only</span></em><span class="deltaxml-new" style="background:#90EE90"> if the default connection is used. If an explicit connection is provided by the caller, then the default select expression is ignored.</span></p><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">The </span><a href="#p.pipe"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element is explicitly excluded from a declaration because it would make the default value of an input dependent on the execution of some part of the pipeline. Default values are designed so that they can be computed statically.</span></p></div><p><span class="deltaxml-new" style="background:#90EE90">On a </span><a href="#p.declare-step"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code></a><span class="deltaxml-new" style="background:#90EE90"> for an atomic step, the </span><a href="#p.input"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:input</span></code></a><span class="deltaxml-new" style="background:#90EE90"> simply declares the input port. </span><a name="err.inline.S0042"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0042"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0042</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to attempt to provide a connection for an input port on the declaration of an atomic step.</span></p><p><span class="deltaxml-new" style="background:#90EE90">An input </span><em><span class="deltaxml-new" style="background:#90EE90">connection</span></em><span class="deltaxml-new" style="background:#90EE90"> has the following form:</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">port</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  select? = </span><var><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.empty"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      (</span><a href="#p.pipe"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.document"><span class="deltaxml-new" style="background:#90EE90">p:document</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.inline"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.data"><span class="deltaxml-new" style="background:#90EE90">p:data</span></a><span class="deltaxml-new" style="background:#90EE90">)+)?</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:input&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">If no connection is provided for a </span><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-new" style="background:#90EE90">primary input port</span></a></em><span class="deltaxml-new" style="background:#90EE90">, the input will be connected to the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-new" style="background:#90EE90">default readable port</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span><a name="err.inline.S0032"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0032"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0032</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if no connection is provided and the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-new" style="background:#90EE90">default readable port</span></a></em><span class="deltaxml-new" style="background:#90EE90"> is undefined.</span></p><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> expression </span><span class="rfc2119" id="document-inputs.15.2"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> also be provided with a connection. The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> expression, if specified, applies the specified XPath select expression to the document(s) that are read. Each selected node is wrapped in a document (unless it is a document) and provided to the input port. In other words,</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input port="source"&gt; &lt;p:document href="http://example.org/input.html"/&gt; &lt;/p:input&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">provides a single document, but</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input port="source" select="//html:div" xmlns:html="http://www.w3.org/1999/xhtml"&gt; &lt;p:document href="http://example.org/input.html"/&gt; &lt;/p:input&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">provides a sequence of zero or more documents, one for each </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">html:div</span></code><span class="deltaxml-new" style="background:#90EE90"> in </span><code class="uri"><span class="deltaxml-new" style="background:#90EE90">http://example.org/input.html</span></code><span class="deltaxml-new" style="background:#90EE90">. (Note that in the case of nested </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">html:div</span></code><span class="deltaxml-new" style="background:#90EE90"> elements, this may result in the same content being returned in several documents.)</span></p><p><span class="deltaxml-new" style="background:#90EE90">A select expression can equally be applied to input read from another step. This input:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input port="source" select="//html:div" xmlns:html="http://www.w3.org/1999/xhtml"&gt; &lt;p:pipe step="origin" port="result"/&gt; &lt;/p:input&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">provides a sequence of zero or more documents, one for each </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">html:div</span></code><span class="deltaxml-new" style="background:#90EE90"> in the document (or each of the documents) that is read from the </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> port of the step named </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">origin</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The base URI of the document that results from a select expression is the base URI of the matched element or document. </span><a name="err.inline.D0016"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0016"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0016</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> expression on a </span><a href="#p.input"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:input</span></code></a><span class="deltaxml-new" style="background:#90EE90"> returns atomic values or anything other than element or document nodes (or an empty sequence).</span></p><p><span class="deltaxml-new" style="background:#90EE90">An input declaration may include a default connection. If no connection is provided for an input port which has a default connection, then the input is treated as if the default connection appeared.</span></p><p><span class="deltaxml-new" style="background:#90EE90">A default connection does not satisfy the requirement that a primary input port is automatically connected by the processor, nor is it used when no default readable port is defined. In other words, a </span><a href="#p.declare-step"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or a </span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90"> can define defaults for all of its inputs, whether they are primary or not, but defining a default for a primary input usually has no effect. It's never used by an atomic step since the step, when it's called, will always connect the primary input port to the default readable port (or cause a static error). The only case where it has value is on a </span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90"> when that pipeline is invoked directly by the processor. In that case, the processor </span><span class="rfc2119" id="document-inputs.25.4"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> use the default connection if no external connection is provided for the port.</span></p></section><section id="parameter-inputs" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">5.1.2 Parameter Inputs</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The declaration of a parameter input identifies the name of the port and that the port is a parameter input.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">port</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  sequence? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  primary? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">kind</span></strong><span class="deltaxml-new" style="background:#90EE90"> = "parameter"&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.empty"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      (</span><a href="#p.document"><span class="deltaxml-new" style="background:#90EE90">p:document</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.inline"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a><span class="deltaxml-new" style="background:#90EE90">)+)?</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:input&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">port</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute defines the name of the port. </span><a name="err.inline.S0011.1"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0011"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0011</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to identify two ports with the same name on the same step. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute determines whether or not a sequence of documents is allowed on the port. A sequence of documents is always allowed on a parameter input port. </span><a name="err.inline.S0040"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0040"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0040</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to specify any value other than </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is used to identify the </span><em class="glossterm"><a href="#dt-primary-parameter-input-port"><span class="deltaxml-new" style="background:#90EE90">primary parameter input port</span></a></em><span class="deltaxml-new" style="background:#90EE90">. An input port is a </span><em class="glossterm"><a href="#dt-primary-parameter-input-port"><span class="deltaxml-new" style="background:#90EE90">primary parameter input port</span></a></em><span class="deltaxml-new" style="background:#90EE90"> if it is a </span><em class="glossterm"><a href="#dt-parameter-input-port"><span class="deltaxml-new" style="background:#90EE90">parameter input port</span></a></em><span class="deltaxml-new" style="background:#90EE90"> and </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><span class="deltaxml-new" style="background:#90EE90"> is specified with the value </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or if the step has only a single parameter input port and </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><span class="deltaxml-new" style="background:#90EE90"> is not specified. </span><a name="err.inline.S0030.1"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0030"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0030</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to specify that more than one parameter input port is the primary.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">kind</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute distinguishes between the two kinds of inputs: document inputs and parameter inputs. An input port is a parameter input port only if the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">kind</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is specified with the value “parameter”. </span><a name="err.inline.S0033"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0033"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0033</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to specify any kind of input other than “document” or “parameter”. </span></p><p><span class="deltaxml-new" style="background:#90EE90">A parameter input port is a distinguished kind of input port. It exists only to receive computed parameters; if a step does not have a parameter input port then it cannot receive parameters. A parameter input port must satisfy all the constraints of a normal, document input port.</span></p><p><a name="err.inline.S0035"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0035"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0035</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the declaration of a parameter input port contains a connection; parameter input port declarations must be empty. </span></p><p><span class="deltaxml-new" style="background:#90EE90">When used on a step, parameter input ports are connected just like ordinary document ports. Parameter input ports always accept a sequence of documents. If no explicit connection is provided for a </span><em class="glossterm"><a href="#dt-primary-parameter-input-port"><span class="deltaxml-new" style="background:#90EE90">primary parameter input port</span></a></em><span class="deltaxml-new" style="background:#90EE90">, then the port will be connected to the primary parameter input port of the pipeline which contains the step. If no connection is provided for a parameter input port other than the primary parameter input port, then the port will be connected to an </span><em class="glossterm"><a href="#dt-empty-sequence"><span class="deltaxml-new" style="background:#90EE90">empty sequence</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of documents.</span></p><p><a name="err.inline.S0055"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0055"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0055</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if a primary parameter input port is unconnected and the pipeline that contains the step has no primary parameter input port unless at least one explicit </span><a href="#p.with-param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> is provided for that port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">In other words, it is an error to leave a parameter input port unconnected, but any parameter passed explicitly to that port satisfies the connection requirement.</span></p><p><span class="deltaxml-new" style="background:#90EE90">This is an error:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="1.0"&gt; &lt;p:input port="source"/&gt; &lt;p:output port="result"/&gt; &lt;p:xslt&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="http://example.com/stylesheets/doc.xsl"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;/p:declare-step&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">The parameter input port on the </span><a href="#c.xslt"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xslt</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step has no connection and the pipeline that contains the step has no primary parameter input port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">This is not an error:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="1.0"&gt; &lt;p:input port="source"/&gt; &lt;p:output port="result"/&gt; &lt;p:xslt&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="http://example.com/stylesheets/doc.xsl"/&gt; &lt;/p:input&gt; &lt;p:with-param name="mode" select="'debug'"/&gt; &lt;/p:xslt&gt; &lt;/p:declare-step&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">Explicitly setting the “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">mode</span></code><span class="deltaxml-new" style="background:#90EE90">” parameter satisfies the binding requirement. No other parameters can be passed to the </span><a href="#c.xslt"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xslt</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step.</span></p><p><span class="deltaxml-new" style="background:#90EE90">This, also, is not an error:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:pipeline xmlns:p="http://www.w3.org/ns/xproc" version="1.0"&gt; &lt;p:xslt&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="http://example.com/stylesheets/doc.xsl"/&gt; &lt;/p:input&gt; &lt;p:with-param name="mode" select="'debug'"/&gt; &lt;/p:xslt&gt; &lt;/p:pipeline&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">The parameter input port on the </span><a href="#c.xslt"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xslt</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step is bound to the primary parameter input port of the pipeline. The </span><a href="#c.xslt"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xslt</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step will receive the “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">mode</span></code><span class="deltaxml-new" style="background:#90EE90">” parameter and any other parameters passed to the pipeline.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If a parameter input port on a </span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90"> is not connected, it is treated as if it was connected to an automatically created </span><a href="#c.sink"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:sink</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step. In other words, if a </span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90"> does not contain any steps that have parameter input ports, or if those ports are all explicitly connected elsewhere, the parameter input port is ignored. In this one case, it is not an error for an input port to be unconnected.</span></p><p><span class="deltaxml-new" style="background:#90EE90">A step which accepts a parameter input reads all of the documents presented on that port, using each </span><a href="#cv.param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> (either at the root or inside the </span><a href="#cv.param-set"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param-set</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to establish the value of the named parameter. If the same name appears more than once, the last value specified is used. If the step also has literal </span><a href="#p.with-param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements, they are also considered in document order. In other words, </span><a href="#p.with-param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements that appear before the parameter input may be overridden by the computed parameters; </span><a href="#p.with-param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements that appear after may override the computed values.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If a connection is manufactured for a primary parameter input port, that connection occurs logically last among the other parameters, options, and connections passed to the step. In other words, the parameter values that appear on that port will be used even if other values were specified with </span><a href="#p.with-param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements. Users can change this priority by making the connection explicit and placing any </span><a href="#p.with-param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements that they wish to function as overrides after the connection.</span></p><p><span class="deltaxml-new" style="background:#90EE90">All of the documents that appear on a parameter input must either be </span><a href="#cv.param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> documents or </span><a href="#cv.param-set"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param-set</span></code></a><span class="deltaxml-new" style="background:#90EE90"> documents.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Consider the example in </span><a href="#ex.parameter" title="A Parameter Example"><span class="deltaxml-new" style="background:#90EE90">Example 10, “A Parameter Example”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><figure id="ex.parameter" class="example-wrapper"><div class="title"><span class="deltaxml-new" style="background:#90EE90">Example 10. A Parameter Example</span></div><div class="example"><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:pipeline xmlns:p="http://www.w3.org/ns/xproc" version="1.0" name="main"&gt; &lt;p:xslt&gt; &lt;p:input port="source"&gt; &lt;p:pipe step="main" port="source"/&gt; &lt;/p:input&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="http://example.com/stylesheets/doc.xsl"/&gt; &lt;/p:input&gt; &lt;p:with-param name="output-type" select="'html'"/&gt; &lt;p:input port="parameters"&gt; &lt;p:pipe step="main" port="parameters"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;/p:pipeline&gt;</span></code></pre></div></figure><p><span class="deltaxml-new" style="background:#90EE90">This </span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90"> declares that it accepts parameters. Suppose that (through some </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90"> mechanism) I have passed the parameters “</span><code class="varname"><span class="deltaxml-new" style="background:#90EE90">output-type</span></code><span class="deltaxml-new" style="background:#90EE90">=</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">fo</span></code><span class="deltaxml-new" style="background:#90EE90">” and “</span><code class="varname"><span class="deltaxml-new" style="background:#90EE90">profile</span></code><span class="deltaxml-new" style="background:#90EE90">=</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">unclassified</span></code><span class="deltaxml-new" style="background:#90EE90">” to the pipeline. These parameters are available on the </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><span class="deltaxml-new" style="background:#90EE90"> input port. </span></p><p><span class="deltaxml-new" style="background:#90EE90">When the XSLT step runs, it will read those parameters and combine them with any parameters specified literally on the step. Because the parameter input comes </span><em><span class="deltaxml-new" style="background:#90EE90">after</span></em><span class="deltaxml-new" style="background:#90EE90"> the literal declaration for </span><code class="varname"><span class="deltaxml-new" style="background:#90EE90">output-type</span></code><span class="deltaxml-new" style="background:#90EE90"> on the step, the XSLT stylesheet will see both values that I passed in (“</span><code class="varname"><span class="deltaxml-new" style="background:#90EE90">output-type</span></code><span class="deltaxml-new" style="background:#90EE90">=</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">fo</span></code><span class="deltaxml-new" style="background:#90EE90">” and “</span><code class="varname"><span class="deltaxml-new" style="background:#90EE90">profile</span></code><span class="deltaxml-new" style="background:#90EE90">=</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">unclassified</span></code><span class="deltaxml-new" style="background:#90EE90">”).</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the parameter input came </span><em><span class="deltaxml-new" style="background:#90EE90">before</span></em><span class="deltaxml-new" style="background:#90EE90"> the literal declaration, then the XSLT stylesheet would see “</span><code class="varname"><span class="deltaxml-new" style="background:#90EE90">output-type</span></code><span class="deltaxml-new" style="background:#90EE90">=</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">html</span></code><span class="deltaxml-new" style="background:#90EE90">” and “</span><code class="varname"><span class="deltaxml-new" style="background:#90EE90">profile</span></code><span class="deltaxml-new" style="background:#90EE90">=</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">unclassified</span></code><span class="deltaxml-new" style="background:#90EE90">”.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Most steps don't bother to declare parameter inputs, or provide explicit connections for them, and “the right thing” usually happens.</span></p><section id="cv.param" class="section"><div class="section-titlepage"><h5><span class="deltaxml-new" style="background:#90EE90">5.1.2.1 The c:param element</span></h5></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code><span class="deltaxml-new" style="background:#90EE90"> represents a parameter on a parameter input.</span></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:param</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">name</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  namespace? = </span><var><span class="deltaxml-new" style="background:#90EE90">anyURI</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">value</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">name</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code><span class="deltaxml-new" style="background:#90EE90"> must have the lexical form of a QName.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">namespace</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is specified, then the expanded name of the parameter is constructed from the specified namespace and the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">name</span></code><span class="deltaxml-new" style="background:#90EE90"> value. </span><a name="err.inline.D0025"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0025"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0025</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">namespace</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is specified, the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">name</span></code><span class="deltaxml-new" style="background:#90EE90"> contains a colon, and the specified namespace is not the same as the in-scope namespace binding for the specified prefix. </span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">namespace</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is not specified, and the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">name</span></code><span class="deltaxml-new" style="background:#90EE90"> contains a colon, then the expanded name of the parameter is constructed using the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">name</span></code><span class="deltaxml-new" style="background:#90EE90"> value and the namespace declarations in-scope on the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code><span class="deltaxml-new" style="background:#90EE90"> element.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">namespace</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is not specified, and the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">name</span></code><span class="deltaxml-new" style="background:#90EE90"> does not contain a colon, then the expanded name of the parameter is in no namespace.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Any namespace-qualified attribute names that appear on the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code><span class="deltaxml-new" style="background:#90EE90"> element are ignored. </span><a name="err.inline.D0014"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0014"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0014</span></code></a><span class="deltaxml-new" style="background:#90EE90">) for any unqualified attribute names other than “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">name</span></code><span class="deltaxml-new" style="background:#90EE90">”, “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">namespace</span></code><span class="deltaxml-new" style="background:#90EE90">”, or “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">value</span></code><span class="deltaxml-new" style="background:#90EE90">” to appear on a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code><span class="deltaxml-new" style="background:#90EE90"> element.</span></p></section><section id="cv.param-set" class="section"><div class="section-titlepage"><h5><span class="deltaxml-new" style="background:#90EE90">5.1.2.2 The c:param-set element</span></h5></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param-set</span></code><span class="deltaxml-new" style="background:#90EE90"> represents a set of parameters on a parameter input.</span></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:param-set&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><a href="#cv.param"><span class="deltaxml-new" style="background:#90EE90">c:param</span></a><span class="deltaxml-new" style="background:#90EE90">*</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:param-set&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param-set</span></code><span class="deltaxml-new" style="background:#90EE90"> contains zero or more </span><a href="#cv.param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements. </span><a name="err.inline.D0018"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0018"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0018</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the parameter list contains any elements other than </span><a href="#cv.param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Any namespace-qualified attribute names that appear on the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param-set</span></code><span class="deltaxml-new" style="background:#90EE90"> element are ignored. </span><a name="err.inline.D0014.1"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0014"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0014</span></code></a><span class="deltaxml-new" style="background:#90EE90">) for any unqualified attribute names to appear on a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param-set</span></code><span class="deltaxml-new" style="background:#90EE90"> element.</span></p></section></section></section><section id="p.iteration-source" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">5.2 p:iteration-source</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:iteration-source</span></code><span class="deltaxml-new" style="background:#90EE90"> identifies input to a </span><a href="#p.for-each"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></code></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:iteration-source</span><br /><span class="deltaxml-new" style="background:#90EE90">  select? = </span><var><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.empty"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      (</span><a href="#p.pipe"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.document"><span class="deltaxml-new" style="background:#90EE90">p:document</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.inline"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.data"><span class="deltaxml-new" style="background:#90EE90">p:data</span></a><span class="deltaxml-new" style="background:#90EE90">)+)?</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:iteration-source&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute and </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-new" style="background:#90EE90">connection</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:iteration-source</span></code><span class="deltaxml-new" style="background:#90EE90"> work the same way that they do in a </span><a href="#p.input"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:input</span></code></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></section><section id="p.viewport-source" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">5.3 p:viewport-source</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport-source</span></code><span class="deltaxml-new" style="background:#90EE90"> identifies input to a </span><a href="#p.viewport"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></code></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:viewport-source&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.pipe"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.document"><span class="deltaxml-new" style="background:#90EE90">p:document</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.inline"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.data"><span class="deltaxml-new" style="background:#90EE90">p:data</span></a><span class="deltaxml-new" style="background:#90EE90">)?</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:viewport-source&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">Only one </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-new" style="background:#90EE90">connection</span></a></em><span class="deltaxml-new" style="background:#90EE90"> is allowed and it works the same way that connections work on a </span><a href="#p.input"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:input</span></code></a><span class="deltaxml-new" style="background:#90EE90">. </span><a name="err.inline.D0003.1"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0003"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0003</span></code></a><span class="deltaxml-new" style="background:#90EE90">) unless exactly one document appears on the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:viewport-source</span></code><span class="deltaxml-new" style="background:#90EE90">. No </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> expression is allowed.</span></p></section><section id="p.output" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">5.4 p:output</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:output</span></code><span class="deltaxml-new" style="background:#90EE90"> identifies an output port, optionally connecting an input for it, if necessary.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">port</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  sequence? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  primary? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">port</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute defines the name of the port. </span><a name="err.inline.S0011.2"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0011"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0011</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to identify two ports with the same name on the same step.</span></p><p><span class="deltaxml-new" style="background:#90EE90">An output declaration can indicate if a sequence of documents is allowed to appear on the declared port. If </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><span class="deltaxml-new" style="background:#90EE90"> is specified with the value </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, then a sequence is allowed. </span><a name="err.inline.D0007"></a><span class="deltaxml-new" style="background:#90EE90">If </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><span class="deltaxml-new" style="background:#90EE90"> is not specified on </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:output</span></code><span class="deltaxml-new" style="background:#90EE90">, or has the value false, then it is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0007"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0007</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the step does not produce exactly one document on the declared port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is used to identify the primary output port. An output port is a primary output port if </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><span class="deltaxml-new" style="background:#90EE90"> is specified with the value </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or if the step has only a single output port and primary is not specified. </span><a name="err.inline.S0014"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0014"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0014</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to identify more than one output port as primary.</span></p><p><span class="deltaxml-new" style="background:#90EE90">On </span><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-new" style="background:#90EE90">compound steps</span></a></em><span class="deltaxml-new" style="background:#90EE90">, the declaration </span><span class="rfc2119" id="p.output.7.2"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> be accompanied by a </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-new" style="background:#90EE90">connection</span></a></em><span class="deltaxml-new" style="background:#90EE90"> for the output.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">port</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  sequence? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  primary? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.empty"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      (</span><a href="#p.pipe"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.document"><span class="deltaxml-new" style="background:#90EE90">p:document</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.inline"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.data"><span class="deltaxml-new" style="background:#90EE90">p:data</span></a><span class="deltaxml-new" style="background:#90EE90">)+)?</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:output&gt;</span></code></p><p><a name="err.inline.S0029"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0029"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0029</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to specify a connection for a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:output</span></code><span class="deltaxml-new" style="background:#90EE90"> inside a </span><a href="#p.declare-step"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code></a><span class="deltaxml-new" style="background:#90EE90"> for an atomic step.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If a connection is provided for a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:output</span></code><span class="deltaxml-new" style="background:#90EE90">, documents are </span><em><span class="deltaxml-new" style="background:#90EE90">read from</span></em><span class="deltaxml-new" style="background:#90EE90"> that connection and those documents form the output that </span><em><span class="deltaxml-new" style="background:#90EE90">is written</span></em><span class="deltaxml-new" style="background:#90EE90"> to the output port. In other words, placing a </span><a href="#p.document"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:document</span></code></a><span class="deltaxml-new" style="background:#90EE90"> inside a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:output</span></code><span class="deltaxml-new" style="background:#90EE90"> causes the processor to </span><em><span class="deltaxml-new" style="background:#90EE90">read that document</span></em><span class="deltaxml-new" style="background:#90EE90"> and provide it on the output port. It </span><em><span class="deltaxml-new" style="background:#90EE90">does not</span></em><span class="deltaxml-new" style="background:#90EE90"> cause the processor to </span><em><span class="deltaxml-new" style="background:#90EE90">write</span></em><span class="deltaxml-new" style="background:#90EE90"> the output to that document.</span></p></section><section id="p.log" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">5.5 p:log</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:log</span></code><span class="deltaxml-new" style="background:#90EE90"> element is a debugging aid. It associates a URI with a specific output port on a step:</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:log</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">port</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  href? = </span><var><span class="deltaxml-new" style="background:#90EE90">anyURI</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The semantics of </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:log</span></code><span class="deltaxml-new" style="background:#90EE90"> are that it writes to the specified IRI whatever document or documents appear on the specified port. </span><a name="impl-31"></a><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">href</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is not specified, the location of the log file or files is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><a name="impl-32"></a><span class="deltaxml-new" style="background:#90EE90">How each document or sequence of documents is represented in a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:log</span></code><span class="deltaxml-new" style="background:#90EE90"> is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">. Pipelines are not expected to be able to consume their own logging output. </span><a name="impl-33"></a><span class="deltaxml-new" style="background:#90EE90">The ability of a step to read the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:log</span></code><span class="deltaxml-new" style="background:#90EE90"> output of some former step is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p><p><a name="err.inline.S0026"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0026"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0026</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the port specified on the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:log</span></code><span class="deltaxml-new" style="background:#90EE90"> is not the name of an output port on the step in which it appears or if more than one </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:log</span></code><span class="deltaxml-new" style="background:#90EE90"> element is applied to the same port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Implementations may, at user option, ignore all </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:log</span></code><span class="deltaxml-new" style="background:#90EE90"> elements.</span></p><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">This element represents a potential security risk: running unexamined 3rd-party pipelines could result in vital system resources being overwritten.</span></p></div></section><section id="p.serialization" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">5.6 p:serialization</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:serialization</span></code><span class="deltaxml-new" style="background:#90EE90"> element allows the user to request serialization properties on a </span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90"> output. </span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:serialization</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">port</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  byte-order-mark? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  cdata-section-elements? = </span><var><span class="deltaxml-new" style="background:#90EE90">NMTOKENS</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  doctype-public? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  doctype-system? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  encoding? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  escape-uri-attributes? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  include-content-type? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  indent? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  media-type? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  method? = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  normalization-form? = </span><var><span class="deltaxml-new" style="background:#90EE90">NFC|NFD|NFKC|NFKD|fully-normalized|none|xs:NMTOKEN</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  omit-xml-declaration? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  standalone? = </span><var><span class="deltaxml-new" style="background:#90EE90">true|false|omit</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  undeclare-prefixes? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  version? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">If the pipeline processor serializes the output on the specified port, it </span><span class="rfc2119" id="p.serialization.4.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> use the serialization options specified. If the processor is not serializing (if, for example, the pipeline has been called from another pipeline), then the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:serialization</span></code><span class="rfc2119" id="p.serialization.4.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be ignored. The processor </span><span class="rfc2119" id="p.serialization.4.4"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> reject statically a pipeline that requests serialization options that it cannot provide.</span></p><p><a name="impl-34"></a><span class="deltaxml-new" style="background:#90EE90">The default value of any serialization options not specified on a particular </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:serialization</span></code><span class="deltaxml-new" style="background:#90EE90"> element is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">. The allowed options are defined by [</span><a href="#xml-serialization"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Serialization</span></span></a><span class="deltaxml-new" style="background:#90EE90">]. </span><a name="err.inline.D0020"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0020"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0020</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the combination of serialization options specified or defaulted is not allowed. Implementations </span><span class="rfc2119" id="p.serialization.5.4"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> check that all of the specified serialization options are allowed if they serialize the specified output. If the specified output is not being serialized (because it is being returned as the result of a call from within another pipeline, for example) implementations </span><span class="rfc2119" id="p.serialization.5.5"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> but are not required to check that the specified options are allowed.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The semantics of the attributes on a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:serialization</span></code><span class="deltaxml-new" style="background:#90EE90"> are described in </span><a href="#serialization-options" title="Serialization Options"><span class="deltaxml-new" style="background:#90EE90">Section 7.3, “Serialization Options”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><a name="err.inline.S0039"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0039"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0039</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the port specified on the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:serialization</span></code><span class="deltaxml-new" style="background:#90EE90"> is not the name of an output port on the pipeline in which it appears or if more than one </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:serialization</span></code><span class="deltaxml-new" style="background:#90EE90"> element is applied to the same port.</span></p></section><section id="variables-options-parameters" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">5.7 Variables, Options, and Parameters</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">Variables, options, and parameters provide a mechanism for pipeline authors to construct temporary results and hold onto them for reuse.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Variables are created in compound steps and, like XSLT variables, are single assignment, though they may be shadowed by subsequent declarations of other variables with the same name.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Options can be declared on atomic or compound steps. The value of an option can be specified by the caller invoking the step. Any value specified by the caller takes precedence over any default value specified in the declaration.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Parameters, unlike options and variables, have names that can be computed at runtime. The most common use of parameters is to pass parameter values to XSLT stylesheets.</span></p><section id="p.variable" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">5.7.1 p:variable</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:variable</span></code><span class="deltaxml-new" style="background:#90EE90"> declares a variable and associates a value with it.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The name of the variable </span><span class="rfc2119" id="p.variable.3.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a QName. If it does not contain a prefix then it is in no namespace. </span><a name="err.inline.S0028"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0028"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0028</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to declare an option or variable in the XProc namespace. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The variable's value is specified with a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute. The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute </span><span class="rfc2119" id="p.variable.4.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be specified. The content of the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is an XPath expression which will be evaluated to provide the value of the variable.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:variable</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">name</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">select</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    ((</span><a href="#p.empty"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.pipe"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.document"><span class="deltaxml-new" style="background:#90EE90">p:document</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.inline"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.data"><span class="deltaxml-new" style="background:#90EE90">p:data</span></a><span class="deltaxml-new" style="background:#90EE90">)? &amp; </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.namespaces"><span class="deltaxml-new" style="background:#90EE90">p:namespaces</span></a><span class="deltaxml-new" style="background:#90EE90">*)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:variable&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">If a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> expression is given, it is evaluated as an XPath expression using the appropriate context as described in </span><a href="#xpath-context" title="XPaths in XProc"><span class="deltaxml-new" style="background:#90EE90">Section 2.6, “XPaths in XProc”</span></a><span class="deltaxml-new" style="background:#90EE90">, for the enclosing </span><em class="glossterm"><a href="#dt-container"><span class="deltaxml-new" style="background:#90EE90">container</span></a></em><span class="deltaxml-new" style="background:#90EE90">, with the addition of bindings for all preceding-sibling </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:variable</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#p.option"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:option</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements. Regardless of the implicit type of the expression, the type is treated as an </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">xs:untypedAtomic</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Since all </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-new" style="background:#90EE90">in-scope bindings</span></a></em><span class="deltaxml-new" style="background:#90EE90"> are present in the Processor XPath Context as variable bindings, </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> expressions may refer to the value of </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-new" style="background:#90EE90">in-scope bindings</span></a></em><span class="deltaxml-new" style="background:#90EE90"> by variable reference. If a variable reference uses a QName that is not the name of an </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-new" style="background:#90EE90">in-scope binding</span></a></em><span class="deltaxml-new" style="background:#90EE90">, an XPath evaluation error will occur.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> expression is given, the </span><em class="glossterm"><a href="#dt-readable-ports"><span class="deltaxml-new" style="background:#90EE90">readable ports</span></a></em><span class="deltaxml-new" style="background:#90EE90"> available for document connections are the </span><em class="glossterm"><a href="#dt-readable-ports"><span class="deltaxml-new" style="background:#90EE90">readable ports</span></a></em><span class="deltaxml-new" style="background:#90EE90"> in the environment inherited by the first step in the surrounding </span><em class="glossterm"><a href="#dt-container"><span class="deltaxml-new" style="background:#90EE90">container</span></a></em><span class="deltaxml-new" style="background:#90EE90">'s </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-new" style="background:#90EE90">contained steps</span></a></em><span class="deltaxml-new" style="background:#90EE90">. However, in order to avoid ordering paradoxes, </span><a name="err.inline.S0019"></a><span class="deltaxml-new" style="background:#90EE90">it is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0019"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0019</span></code></a><span class="deltaxml-new" style="background:#90EE90">) for a variable's document connection to refer to the output port of any step in the surrounding </span><em class="glossterm"><a href="#dt-container"><span class="deltaxml-new" style="background:#90EE90">container</span></a></em><span class="deltaxml-new" style="background:#90EE90">'s </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-new" style="background:#90EE90">contained steps</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> expression is given but no document connection is provided, the implicit connection is to the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-new" style="background:#90EE90">default readable port</span></a></em><span class="deltaxml-new" style="background:#90EE90"> in the environment inherited by the first step in the surrounding </span><em class="glossterm"><a href="#dt-container"><span class="deltaxml-new" style="background:#90EE90">container</span></a></em><span class="deltaxml-new" style="background:#90EE90">'s </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-new" style="background:#90EE90">contained steps</span></a></em><span class="deltaxml-new" style="background:#90EE90">. If there is no default readable port, the connection is treated as if </span><a href="#p.empty"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></code></a><span class="deltaxml-new" style="background:#90EE90"> was specified.</span></p><p><a name="err.inline.D0008.1"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0008"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0008</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if a sequence of more than one document appears on the connection for a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:variable</span></code><span class="deltaxml-new" style="background:#90EE90">. If </span><a href="#p.empty"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></code></a><span class="deltaxml-new" style="background:#90EE90"> is given or implied as the document connection, the context item is undefined. </span><a name="err.inline.D0026"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0026"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0026</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> expression makes reference to the context node, size, or position when the context item is undefined. </span></p></section><section id="p.option" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">5.7.2 p:option</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:option</span></code><span class="deltaxml-new" style="background:#90EE90"> declares an option and may associate a default value with it. The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:option</span></code><span class="deltaxml-new" style="background:#90EE90"> tag can only be used in a </span><a href="#p.declare-step"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or a </span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90"> (which is a syntactic abbreviation for a step declaration).</span></p><p><span class="deltaxml-new" style="background:#90EE90">The name of the option </span><span class="rfc2119" id="p.option.3.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a QName. If it does not contain a prefix then it is in no namespace. </span><a name="err.inline.S0028.1"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0028"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0028</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to declare an option or variable in the XProc namespace.</span></p><p><a name="err.inline.S0004.1"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0004"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0004</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to declare two or more options on the same step with the same name.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">name</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  required? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">An option may be declared as </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">required</span></code><span class="deltaxml-new" style="background:#90EE90">. </span><a name="err.inline.S0018"></a><span class="deltaxml-new" style="background:#90EE90">If an option is required, it is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0018"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0018</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to invoke the step without specifying a value for that option.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If an option is not declared to be required, it </span><span class="rfc2119" id="p.option.7.1"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> be given a default value. The value is specified with a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">name</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  required? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">select</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">If a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is specified, its content is an XPath expression which will be evaluated to provide the value of the option, which may differ from one instance of the step type to another.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> expression is only evaluated when its actual value is needed by an instance of the step type being declared. In this case, it is evaluated as described in </span><a href="#p.with-option" title="p:with-option"><span class="deltaxml-new" style="background:#90EE90">Section 5.7.3, “p:with-option”</span></a><span class="deltaxml-new" style="background:#90EE90"> except that</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">The context item is undefined.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">the variable bindings consist only of bindings for options whose declaration precedes the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:option</span></code><span class="deltaxml-new" style="background:#90EE90"> itself in the surrounding step </span><em class="glossterm"><a href="#dt-signature"><span class="deltaxml-new" style="background:#90EE90">signature</span></a></em><span class="deltaxml-new" style="background:#90EE90">;</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">the in-scope namespaces are the in-scope namespaces of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:option</span></code><span class="deltaxml-new" style="background:#90EE90"> itself.</span></p></li></ul></div><p><a name="err.inline.S0017"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0017"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0017</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to specify that an option is both </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">required</span></code><em><span class="deltaxml-new" style="background:#90EE90">and</span></em><span class="deltaxml-new" style="background:#90EE90"> has a default value.</span></p><p><a name="err.inline.D0026.1"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0026"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0026</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> expression makes reference to the context node, size, or position.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Regardless of the implicit type of the expression, the value is an </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">xs:untypedAtomic</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p></section><section id="p.with-option" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">5.7.3 p:with-option</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></code><span class="deltaxml-new" style="background:#90EE90"> provides an actual value for an option when a step is invoked.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The name of the option </span><span class="rfc2119" id="p.with-option.3.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a QName. If it does not contain a prefix then it is in no namespace. </span><a name="err.inline.S0031.1"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0031"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0031</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to use an option name in </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></code><span class="deltaxml-new" style="background:#90EE90"> if the step type being invoked has not declared an option with that name. (This error does not apply for steps in the XProc namespace when the processor is operating in </span><a href="#vers-forwcomp"><span class="deltaxml-new" style="background:#90EE90">forwards-compatible mode</span></a><span class="deltaxml-new" style="background:#90EE90">.)</span></p><p><a name="err.inline.S0004.2"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0004"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0004</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to include more than one </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></code><span class="deltaxml-new" style="background:#90EE90"> with the same option name as part of the same step invocation.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The actual value is specified with a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute. The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute </span><span class="rfc2119" id="p.with-option.5.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be specified. The value of the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is an XPath expression which will be evaluated to provide the value of the variable.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:with-option</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">name</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">select</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    ((</span><a href="#p.empty"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.pipe"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.document"><span class="deltaxml-new" style="background:#90EE90">p:document</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.inline"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.data"><span class="deltaxml-new" style="background:#90EE90">p:data</span></a><span class="deltaxml-new" style="background:#90EE90">)? &amp; </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.namespaces"><span class="deltaxml-new" style="background:#90EE90">p:namespaces</span></a><span class="deltaxml-new" style="background:#90EE90">*)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:with-option&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">Regardless of the implicit type of the expression, the value is an </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">xs:untypedAtomic</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">All </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-new" style="background:#90EE90">in-scope bindings</span></a></em><span class="deltaxml-new" style="background:#90EE90"> for the step instance itself are present in the Processor XPath Context as variable bindings, so </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> expressions may refer to any option or variable bound in those </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-new" style="background:#90EE90">in-scope bindings</span></a></em><span class="deltaxml-new" style="background:#90EE90"> by variable reference. If a variable reference uses a QName that is not the name of an </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-new" style="background:#90EE90">in-scope binding</span></a></em><span class="deltaxml-new" style="background:#90EE90"> or preceding sibling option, an XPath evaluation error will occur.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> expression is used but no document connection is provided, the implicit connection is to the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-new" style="background:#90EE90">default readable port</span></a></em><span class="deltaxml-new" style="background:#90EE90">. If there is no default readable port, the connection is treated as if </span><a href="#p.empty"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></code></a><span class="deltaxml-new" style="background:#90EE90"> was specified.</span></p><p><a name="err.inline.D0008.2"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0008"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0008</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if a sequence of more than one document appears on the connection for a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></code><span class="deltaxml-new" style="background:#90EE90">. If </span><a href="#p.empty"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></code></a><span class="deltaxml-new" style="background:#90EE90"> is given or implied as the document connection, the context item is undefined. </span><a name="err.inline.D0026.2"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0026"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0026</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> expression makes reference to the context node, size, or position when the context item is undefined. </span></p></section><section id="p.with-param" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">5.7.4 p:with-param</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></code><span class="deltaxml-new" style="background:#90EE90"> element is used to establish the value of a parameter. The parameter </span><span class="rfc2119" id="p.with-param.2.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be given a value when it is used. (Parameter names aren't known in advance; there's no provision for declaring them.)</span></p><p><span class="deltaxml-new" style="background:#90EE90">The name of the parameter </span><span class="rfc2119" id="p.with-param.3.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a QName. If it does not contain a prefix then it is in no namespace. </span><a name="err.inline.D0031"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0031"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0031</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to use the XProc namespace in the name of a parameter.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The value is specified with a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute. The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute </span><span class="rfc2119" id="p.with-param.4.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be specified. The content of the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is an XPath expression which will be evaluated to provide the value of the variable.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:with-param</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">name</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">select</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  port? = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    ((</span><a href="#p.empty"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.pipe"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.document"><span class="deltaxml-new" style="background:#90EE90">p:document</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.inline"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.data"><span class="deltaxml-new" style="background:#90EE90">p:data</span></a><span class="deltaxml-new" style="background:#90EE90">)? &amp; </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.namespaces"><span class="deltaxml-new" style="background:#90EE90">p:namespaces</span></a><span class="deltaxml-new" style="background:#90EE90">*)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:with-param&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The values of parameters for a step </span><span class="rfc2119" id="p.with-param.6.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be computed after all the options in the step's </span><em class="glossterm"><a href="#dt-signature"><span class="deltaxml-new" style="background:#90EE90">signature</span></a></em><span class="deltaxml-new" style="background:#90EE90"> have had their values computed. If a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> expression is given on a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></code><span class="deltaxml-new" style="background:#90EE90">, it is evaluated as an XPath expression using the appropriate context as described in </span><a href="#xpath-context" title="XPaths in XProc"><span class="deltaxml-new" style="background:#90EE90">Section 2.6, “XPaths in XProc”</span></a><span class="deltaxml-new" style="background:#90EE90">, for the containing step, with the addition of variable bindings for all options declared in the containing step's </span><em class="glossterm"><a href="#dt-signature"><span class="deltaxml-new" style="background:#90EE90">signature</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Regardless of the implicit type of the expression, the value is an </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">xs:untypedAtomic</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">All </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-new" style="background:#90EE90">in-scope bindings</span></a></em><span class="deltaxml-new" style="background:#90EE90"> for the step instance itself are present in the Processor XPath Context as variable bindings, so </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> expressions may refer to any option or variable bound in those </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-new" style="background:#90EE90">in-scope bindings</span></a></em><span class="deltaxml-new" style="background:#90EE90">, as well as to any option declared in the step signature, by variable reference. If a variable reference uses a QName that is not the name of an </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-new" style="background:#90EE90">in-scope binding</span></a></em><span class="deltaxml-new" style="background:#90EE90"> or declared option, an XPath evaluation error will occur.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> expression is used but no document connection is provided, the implicit connection is to the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-new" style="background:#90EE90">default readable port</span></a></em><span class="deltaxml-new" style="background:#90EE90">. If there is no default readable port, the connection is treated as if </span><a href="#p.empty"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></code></a><span class="deltaxml-new" style="background:#90EE90"> was specified.</span></p><p><a name="err.inline.D0008.3"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0008"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0008</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if a sequence of more than one document appears on the connection for a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></code><span class="deltaxml-new" style="background:#90EE90">. If </span><a href="#p.empty"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></code></a><span class="deltaxml-new" style="background:#90EE90"> is given or implied as the document connection, the context item is undefined. </span><a name="err.inline.D0026.3"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0026"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0026</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> expression makes reference to the context node, size, or position when the context item is undefined. </span></p><p><span class="deltaxml-new" style="background:#90EE90">If the optional </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">port</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is specified, then the parameter appears on the named port, otherwise the parameter appears on the step's </span><em class="glossterm"><a href="#dt-primary-parameter-input-port"><span class="deltaxml-new" style="background:#90EE90">primary parameter input port</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span><a name="err.inline.S0034"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0034"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0034</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the specified port is not a parameter input port or if no port is specified and the step does not have a primary parameter input port. </span></p></section><section id="opt-param-bindings" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">5.7.5 Namespaces on variables, options, and parameters</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">Variable, option and parameter values carry with them not only their literal or computed string value but also a set of namespaces. To see why this is necessary, consider the following step:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:delete xmlns:p="http://www.w3.org/ns/xproc"&gt; &lt;p:with-option name="match" select="'html:div'" xmlns:html="http://www.w3.org/1999/xhtml"/&gt; &lt;/p:delete&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">The </span><a href="#c.delete"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:delete</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step will delete elements that match the expression “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">html:div</span></code><span class="deltaxml-new" style="background:#90EE90">”, but that expression can only be correctly interpreted if there's a namespace binding for the prefix “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">html</span></code><span class="deltaxml-new" style="background:#90EE90">” so that binding has to travel with the option.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The default namespace bindings associated with a variable, option or parameter value are computed as follows:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute was used to specify the value and it consisted of a single </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">VariableReference</span></code><span class="deltaxml-new" style="background:#90EE90"> (per [</span><a href="#xpath2"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XPath 2.0</span></span></a><span class="deltaxml-new" style="background:#90EE90">]), then the namespace bindings from the referenced option or variable are used.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute was used to specify the value and it evaluated to a node-set, then the in-scope namespaces from the first node in the selected node-set (or, if it's not an element, its parent) are used.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The expression is evaluated in the appropriate context, See </span><a href="#xpath-context" title="XPaths in XProc"><span class="deltaxml-new" style="background:#90EE90">Section 2.6, “XPaths in XProc”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Otherwise, the in-scope namespaces from the element providing the value are used. (For options specified using </span><a href="#option-shortcut"><span class="deltaxml-new" style="background:#90EE90">syntactic shortcuts</span></a><span class="deltaxml-new" style="background:#90EE90">, the step element itself is providing the value.)</span></p></li></ol></div><p><span class="deltaxml-new" style="background:#90EE90">The default namespace is never included in the namespace bindings for a variable, option or parameter value. Unqualified names are always in no-namespace.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Unfortunately, in more complex situations, there may be no single variable, option or parameter that can reliably be expected to have the correct set of namespace bindings. Consider this pipeline:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:pipeline type="ex:delete-in-div" version="1.0" xmlns:p="http://www.w3.org/ns/xproc" xmlns:ex="http://example.org/ns/ex" xmlns:h="http://www.w3.org/1999/xhtml"&gt; &lt;p:option name="divchild" required="true"/&gt; &lt;p:delete&gt; &lt;p:with-option name="match" select="concat('h:div/',$divchild)"/&gt; &lt;/p:delete&gt; &lt;/p:pipeline&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">It defines an atomic step (“</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">ex:delete-in-div</span></code><span class="deltaxml-new" style="background:#90EE90">”) that deletes elements that occur inside of XHTML div elements. It might be used as follows:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;ex:delete-in-div xmlns:p="http://www.w3.org/ns/xproc" xmlns:ex="http://example.org/ns/ex" xmlns:html="http://www.w3.org/1999/xhtml" divchild="html:p[@class='delete']"/&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">In this case, the </span><code class="varname"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option passed to the </span><a href="#c.delete"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:delete</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step needs </span><em><span class="deltaxml-new" style="background:#90EE90">both</span></em><span class="deltaxml-new" style="background:#90EE90"> the namespace binding of “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">h</span></code><span class="deltaxml-new" style="background:#90EE90">” specified in the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">ex:delete-in-div</span></code><span class="deltaxml-new" style="background:#90EE90"> pipeline definition </span><em><span class="deltaxml-new" style="background:#90EE90">and</span></em><span class="deltaxml-new" style="background:#90EE90"> the namespace binding of “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">html</span></code><span class="deltaxml-new" style="background:#90EE90">” specified in the </span><code class="varname"><span class="deltaxml-new" style="background:#90EE90">divchild</span></code><span class="deltaxml-new" style="background:#90EE90"> option on the call of that pipeline. It's not sufficient to provide just one of the sets of bindings.</span></p><p id="p.namespaces"><span class="deltaxml-new" style="background:#90EE90">The </span><a href="#p.namespaces"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:namespaces</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element can be used as a child of </span><a href="#p.variable"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:variable</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#p.with-option"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#p.with-param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> to provide explicit bindings.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:namespaces</span><br /><span class="deltaxml-new" style="background:#90EE90">  binding? = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  element? = </span><var><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  except-prefixes? = </span><var><span class="deltaxml-new" style="background:#90EE90">prefix list</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The namespace bindings specified by a </span><a href="#p.namespaces"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:namespaces</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element are determined as follows:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">binding</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is specified, it </span><span class="rfc2119" id="opt-param-bindings.16.1.1.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> contain the name of a single </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-new" style="background:#90EE90">in-scope binding</span></a></em><span class="deltaxml-new" style="background:#90EE90">. The namespace bindings associated with that binding are used. </span><a name="err.inline.S0020"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0020"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0020</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">binding</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute on </span><a href="#p.namespaces"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:namespaces</span></code></a><span class="deltaxml-new" style="background:#90EE90"> is specified and its value is not the name of an </span><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-new" style="background:#90EE90">in-scope binding</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">element</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is specified, it </span><span class="rfc2119" id="opt-param-bindings.16.2.1.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> contain an XPath expression which identifies a single element node (the input connection for this expression is the same as the connection for the </span><a href="#p.option"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:option</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#p.with-param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> which contains it). The in-scope namespaces of that node are used.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The expression is evaluated in the appropriate context, See </span><a href="#xpath-context" title="XPaths in XProc"><span class="deltaxml-new" style="background:#90EE90">Section 2.6, “XPaths in XProc”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><a name="err.inline.D0009"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0009"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0009</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">element</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute on </span><a href="#p.namespaces"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:namespaces</span></code></a><span class="deltaxml-new" style="background:#90EE90"> is specified and it does not identify a single element node. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">If neither </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">binding</span></code><span class="deltaxml-new" style="background:#90EE90"> nor </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">element</span></code><span class="deltaxml-new" style="background:#90EE90"> is specified, the in-scope namespaces on the </span><a href="#p.namespaces"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:namespaces</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element itself are used.</span></p></li></ol></div><p><span class="deltaxml-new" style="background:#90EE90">Irrespective of how the set of namespaces are determined, the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">except-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute can be used to exclude one or more namespaces. The value of the except-prefixes attribute </span><span class="rfc2119" id="opt-param-bindings.17.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a sequence of tokens, each of which </span><span class="rfc2119" id="opt-param-bindings.17.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a prefix bound to a namespace in the in-scope namespaces of the </span><a href="#p.namespaces"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:namespaces</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element. All bindings of prefixes to each of the namespaces thus identified are excluded. </span><a name="err.inline.S0051"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0051"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0051</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">except-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute on </span><a href="#p.namespaces"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:namespaces</span></code></a><span class="deltaxml-new" style="background:#90EE90"> does not contain a list of tokens or if any of those tokens is not a prefix bound to a namespace in the in-scope namespaces of the </span><a href="#p.namespaces"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:namespaces</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element. </span></p><p><a name="err.inline.S0041"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0041"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0041</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to specify both </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">binding</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">element</span></code><span class="deltaxml-new" style="background:#90EE90"> on the same </span><a href="#p.namespaces"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:namespaces</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element. </span></p><p><span class="deltaxml-new" style="background:#90EE90">If a </span><a href="#p.variable"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:variable</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#p.with-option"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#p.with-param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> includes one or more </span><a href="#p.namespaces"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:namespaces</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements, then the union of all the namespaces specified on those elements are used as the bindings for the variable, option or parameter value. In this case, the in-scope namespaces on the </span><a href="#p.variable"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:variable</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#p.with-option"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#p.with-param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> are ignored. </span><a name="err.inline.D0013"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0013"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0013</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the specified namespace bindings are inconsistent; that is, if the same prefix is bound to two different namespace names.</span></p><p><span class="deltaxml-new" style="background:#90EE90">For example, this would allow the preceding example to work:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:pipeline type="ex:delete-in-div" version="1.0" xmlns:p="http://www.w3.org/ns/xproc" xmlns:ex="http://example.org/ns/ex" xmlns:h="http://www.w3.org/1999/xhtml"&gt; &lt;p:option name="divchild" required="true"/&gt; &lt;p:delete&gt; &lt;p:with-option name="match" select="concat('h:div/',$divchild)"&gt; &lt;p:namespaces xmlns:html="http://www.w3.org/1999/xhtml"/&gt; &lt;/p:with-option&gt; &lt;/p:delete&gt; &lt;/p:pipeline&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">The </span><a href="#p.namespaces"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:namespaces</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element provides namespace bindings for both of the prefixes necessary to correctly interpret the expression ultimately passed to the </span><a href="#c.delete"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:delete</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step (the binding for </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">html:</span></code><span class="deltaxml-new" style="background:#90EE90"> is explicitly provided and the binding for </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">h:</span></code><span class="deltaxml-new" style="background:#90EE90"> is in-scope). </span></p><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">The use of </span><a href="#p.namespaces"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:namespaces</span></code></a><span class="deltaxml-new" style="background:#90EE90"> here, when all of the bindings are provided with explicit namespace declarations, is unnecessary. The bindings could simply be placed on the parent </span><a href="#p.with-option"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element. We use </span><a href="#p.namespaces"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:namespaces</span></code></a><span class="deltaxml-new" style="background:#90EE90"> here only to make the example parallel to the one which follows.</span></p></div><p><span class="deltaxml-new" style="background:#90EE90">The preceding solution has the weakness that it depends on knowing the bindings that will be used by the caller. A more flexible solution would use the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">binding</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute to copy the bindings from the caller's option value.</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:pipeline type="ex:delete-in-div" version="1.0" xmlns:p="http://www.w3.org/ns/xproc" xmlns:ex="http://example.org/ns/ex" xmlns:h="http://www.w3.org/1999/xhtml"&gt; &lt;p:option name="divchild" required="true"/&gt; &lt;p:delete&gt; &lt;p:with-option name="match" select="concat('h:div/',$divchild)"&gt; &lt;p:namespaces binding="divchild"/&gt; &lt;p:namespaces xmlns:h="http://www.w3.org/1999/xhtml"/&gt; &lt;/p:with-option&gt; &lt;/p:delete&gt; &lt;/p:pipeline&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">This example will succeed as long as the caller-specified option does not bind the “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">h</span></code><span class="deltaxml-new" style="background:#90EE90">” prefix to something other than the XHTML namespace. </span></p></section></section><section id="p.declare-step" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">5.8 p:declare-step</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code><span class="deltaxml-new" style="background:#90EE90"> provides the type and </span><em class="glossterm"><a href="#dt-signature"><span class="deltaxml-new" style="background:#90EE90">signature</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of an </span><em class="glossterm"><a href="#dt-atomic-step"><span class="deltaxml-new" style="background:#90EE90">atomic step</span></a></em><span class="deltaxml-new" style="background:#90EE90"> or pipeline. It declares the inputs, outputs, and options for all steps of that type.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span><br /><span class="deltaxml-new" style="background:#90EE90">  name? = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  type? = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  psvi-required? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  xpath-version? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  exclude-inline-prefixes? = </span><var><span class="deltaxml-new" style="background:#90EE90">prefix list</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  version? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.input"><span class="deltaxml-new" style="background:#90EE90">p:input</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.output"><span class="deltaxml-new" style="background:#90EE90">p:output</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.option"><span class="deltaxml-new" style="background:#90EE90">p:option</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.log"><span class="deltaxml-new" style="background:#90EE90">p:log</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.serialization"><span class="deltaxml-new" style="background:#90EE90">p:serialization</span></a><span class="deltaxml-new" style="background:#90EE90">)*,</span><br /><span class="deltaxml-new" style="background:#90EE90">    ((</span><a href="#p.declare-step"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.pipeline"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.import"><span class="deltaxml-new" style="background:#90EE90">p:import</span></a><span class="deltaxml-new" style="background:#90EE90">)*,</span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><var><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></var><span class="deltaxml-new" style="background:#90EE90">)?</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">type</span></code><span class="deltaxml-new" style="background:#90EE90"> can be from any namespace provided that the expanded-QName of the value has a non-null namespace URI. </span><a name="err.inline.S0025"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0025"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0025</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the expanded-QName value of the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">type</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is in no namespace or in the XProc namespace. Except as described in </span><a href="#versioning-considerations" title="Versioning Considerations"><span class="deltaxml-new" style="background:#90EE90">Section 2.13, “Versioning Considerations”</span></a><span class="deltaxml-new" style="background:#90EE90">, the XProc namespace </span><span class="rfc2119" id="p.declare-step.4.4"><span class="deltaxml-new" style="background:#90EE90">must not</span></span><span class="deltaxml-new" style="background:#90EE90"> be used in the type of steps. Neither users nor implementers may define additional steps in the XProc namespace.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Irrespective of the context in which the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code><span class="deltaxml-new" style="background:#90EE90"> occurs, there are initially no option or variable names in-scope inside a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code><span class="deltaxml-new" style="background:#90EE90">. That is, </span><a href="#p.option"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:option</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#p.variable"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:variable</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements can refer to values declared by their preceding siblings, but not by any of their ancestors.</span></p><p><a name="impl-35"></a><span class="deltaxml-new" style="background:#90EE90">When a declared step is evaluated directly by the XProc processor (as opposed to occurring as an atomic step in some </span><em class="glossterm"><a href="#dt-container"><span class="deltaxml-new" style="background:#90EE90">container</span></a></em><span class="deltaxml-new" style="background:#90EE90">), how the input and output ports are connected to documents is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">A step declaration is not a </span><a href="#step-concept"><span class="deltaxml-new" style="background:#90EE90">step</span></a><span class="deltaxml-new" style="background:#90EE90"> in its own right. Sibling steps cannot refer to the inputs or outputs of a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code><span class="deltaxml-new" style="background:#90EE90"> using </span><a href="#p.pipe"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></code></a><span class="deltaxml-new" style="background:#90EE90">; only instances of the type can be referenced.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute identifies the version of XProc for which this step declaration was authored. If the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code><span class="deltaxml-new" style="background:#90EE90"> has no ancestors in the XProc namespace, then it </span><span class="rfc2119" id="p.declare-step.8.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> have a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute. See </span><a href="#versioning-considerations" title="Versioning Considerations"><span class="deltaxml-new" style="background:#90EE90">Section 2.13, “Versioning Considerations”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">For a description of </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">psvi-required</span></code><span class="deltaxml-new" style="background:#90EE90">, see </span><a href="#psvi-support" title="PSVIs in XProc"><span class="deltaxml-new" style="background:#90EE90">Section 2.8, “PSVIs in XProc”</span></a><span class="deltaxml-new" style="background:#90EE90">. For </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xpath-version</span></code><span class="deltaxml-new" style="background:#90EE90">, see </span><a href="#xpath-context" title="XPaths in XProc"><span class="deltaxml-new" style="background:#90EE90">Section 2.6, “XPaths in XProc”</span></a><span class="deltaxml-new" style="background:#90EE90">. For </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">exclude-inline-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90">, see </span><a href="#p.inline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></code></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><section id="declare-atomic-steps" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">5.8.1 Declaring atomic steps</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">When declaring an atomic step, the subpipeline in the declaration </span><span class="rfc2119" id="declare-atomic-steps.2.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be empty. And, conversely, if the subpipeline in a declaration is empty, the declaration </span><span class="rfc2119" id="declare-atomic-steps.2.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be for an atomic step.</span></p><p><a name="impl-36"></a><span class="deltaxml-new" style="background:#90EE90">Implementations may use </span><em class="glossterm"><a href="#dt-extension-attribute"><span class="deltaxml-new" style="background:#90EE90">extension attributes</span></a></em><span class="deltaxml-new" style="background:#90EE90"> to provide </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></em><span class="deltaxml-new" style="background:#90EE90"> information about a declared step. For example, such an attribute might identify the code which implements steps of this type.</span></p><p><span class="deltaxml-new" style="background:#90EE90">It is not an error for a pipeline to include declarations for steps that a particular processor does not know how to implement. It is, of course, an error to attempt to evaluate such steps.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If </span><a href="#p.log"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:log</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#p.serialization"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:serialization</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements appear in the declaration of an atomic step, they will only be used if the atomic step is directly evaluated by the processor. They have no effect if the step appears in a </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90">; only the serialization options of the “top level” step or pipeline are used because that is the only step which the processor is required to serialize.</span></p></section><section id="declare-pipelines" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">5.8.2 Declaring pipelines</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">When a </span><a href="#p.declare-step"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code></a><span class="deltaxml-new" style="background:#90EE90"> declares a pipeline, that pipeline encapsulates the behavior of the specified </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90">. Its children declare inputs, outputs, and options that the pipeline exposes and identify the steps in its subpipeline. </span></p><p><a name="impl-37"></a><span class="deltaxml-new" style="background:#90EE90">The subpipeline may include declarations of additional steps (e.g., other pipelines or other step types that are provided by a particular implementation or in some </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90"> way) and import other pipelines. If a pipeline has been imported, it may be invoked as a step within the subpipeline that imported it.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The environment inherited by the </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90"> is the </span><em class="glossterm"><a href="#dt-empty-environment"><span class="deltaxml-new" style="background:#90EE90">empty environment</span></a></em><span class="deltaxml-new" style="background:#90EE90"> with these modifications:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">All of the declared inputs are added to the </span><em class="glossterm"><a href="#dt-readable-ports"><span class="deltaxml-new" style="background:#90EE90">readable ports</span></a></em><span class="deltaxml-new" style="background:#90EE90"> in the environment.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">If a </span><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-new" style="background:#90EE90">primary input port</span></a></em><span class="deltaxml-new" style="background:#90EE90"> is declared, that port is the </span><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-new" style="background:#90EE90">default readable port</span></a></em><span class="deltaxml-new" style="background:#90EE90">, otherwise the default readable port is undefined.</span></p></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">If a </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-new" style="background:#90EE90">primary output port</span></a></em><span class="deltaxml-new" style="background:#90EE90"> is declared and that port has no </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-new" style="background:#90EE90">connection</span></a></em><span class="deltaxml-new" style="background:#90EE90">, then it is connected to the </span><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-new" style="background:#90EE90">primary output port</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of the </span><em class="glossterm"><a href="#dt-last-step"><span class="deltaxml-new" style="background:#90EE90">last step</span></a></em><span class="deltaxml-new" style="background:#90EE90"> in the </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span><a name="err.inline.S0006.2"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0006"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0006</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the primary output port is unconnected and the </span><em class="glossterm"><a href="#dt-last-step"><span class="deltaxml-new" style="background:#90EE90">last step</span></a></em><span class="deltaxml-new" style="background:#90EE90"> in the subpipeline does not have a primary output port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The requested </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xpath-version</span></code><span class="rfc2119" id="declare-pipelines.7.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be used to evaluate XPath expressions subject to the constraints outlined in </span><a href="#xpath-context" title="XPaths in XProc"><span class="deltaxml-new" style="background:#90EE90">Section 2.6, “XPaths in XProc”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">psvi-required</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute allows the author to declare that a step relies on the processor's ability to pass PSVI annotations between steps, see </span><a href="#psvi-support" title="PSVIs in XProc"><span class="deltaxml-new" style="background:#90EE90">Section 2.8, “PSVIs in XProc”</span></a><span class="deltaxml-new" style="background:#90EE90">. If the attribute is not specified, the value “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">” is assumed. </span></p></section></section><section id="p.library" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">5.9 p:library</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:library</span></code><span class="deltaxml-new" style="background:#90EE90"> is a collection of step declarations and/or pipeline definitions.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:library</span><br /><span class="deltaxml-new" style="background:#90EE90">  psvi-required? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  xpath-version? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  exclude-inline-prefixes? = </span><var><span class="deltaxml-new" style="background:#90EE90">prefix list</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  version? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.import"><span class="deltaxml-new" style="background:#90EE90">p:import</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.declare-step"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.pipeline"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></a><span class="deltaxml-new" style="background:#90EE90">)*</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:library&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute identifies the version of XProc for which this library was authored. If the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:library</span></code><span class="deltaxml-new" style="background:#90EE90"> has no ancestors in the XProc namespace, then it </span><span class="rfc2119" id="p.library.4.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> have a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute. See </span><a href="#versioning-considerations" title="Versioning Considerations"><span class="deltaxml-new" style="background:#90EE90">Section 2.13, “Versioning Considerations”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">For a description of </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">psvi-required</span></code><span class="deltaxml-new" style="background:#90EE90">, see </span><a href="#psvi-support" title="PSVIs in XProc"><span class="deltaxml-new" style="background:#90EE90">Section 2.8, “PSVIs in XProc”</span></a><span class="deltaxml-new" style="background:#90EE90">; for </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xpath-version</span></code><span class="deltaxml-new" style="background:#90EE90">, see </span><a href="#xpath-context" title="XPaths in XProc"><span class="deltaxml-new" style="background:#90EE90">Section 2.6, “XPaths in XProc”</span></a><span class="deltaxml-new" style="background:#90EE90">; for </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">exclude-inline-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90">, see </span><a href="#p.inline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></code></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">The steps declared in a pipeline library are referred to by their type. It is not an error to put a </span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#p.declare-step"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code></a><span class="deltaxml-new" style="background:#90EE90"> without a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">type</span></code><span class="deltaxml-new" style="background:#90EE90"> in a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:library</span></code><span class="deltaxml-new" style="background:#90EE90">, but there is no standard mechanism for instantiating it or referring to it. It is effectively invisible.</span></p></div><p><span class="deltaxml-new" style="background:#90EE90">Libraries can import pipelines and/or other libraries. See also </span><a href="#handling-imports" title="Handling Circular and Re-entrant Library Imports (Non-Normative)"><span class="deltaxml-new" style="background:#90EE90">Appendix G, </span><i><span class="deltaxml-new" style="background:#90EE90">Handling Circular and Re-entrant Library Imports (Non-Normative)</span></i></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></section><section id="p.import" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">5.10 p:import</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">An </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:import</span></code><span class="deltaxml-new" style="background:#90EE90"> loads a pipeline or pipeline library, making it available in the pipeline or library which contains the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:import</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:import</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">href</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">anyURI</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">An import statement loads the specified IRI and makes any pipelines declared within it available to the current pipeline. </span></p><p><a name="err.inline.S0052"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0052"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0052</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the URI of a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:import</span></code><span class="deltaxml-new" style="background:#90EE90"> cannot be retrieved or if, once retrieved, it does not point to a </span><a href="#p.library"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:library</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#p.declare-step"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code></a><span class="deltaxml-new" style="background:#90EE90">, or </span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90">. </span><a name="err.inline.S0053"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0053"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0053</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to import a single pipeline if that pipeline does not have a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">type</span></code><span class="deltaxml-new" style="background:#90EE90">. </span></p><p><span class="deltaxml-new" style="background:#90EE90">Attempts to retrieve the library identified by the URI value may be redirected at the parser level (for example, in an entity resolver) or below (at the protocol level, for example, via an HTTP Location: header). In the absence of additional information outside the scope of this specification within the resource, the base URI of the library is always the URI of the actual resource returned. In other words, it is the URI of the resource retrieved after all redirection has occurred.</span></p><p><span class="deltaxml-new" style="background:#90EE90">As imports are processed, a processor may encounter new </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:import</span></code><span class="deltaxml-new" style="background:#90EE90"> elements whose library URI is the same as one it has already processed in some other context. This may happen as a consequence of resolving the URI. If the actual base URI is the same as one that has already been processed, the implementation must recognize it as the same library and should not need to process the resource. Also, a duplicate, circular chain of imports, or a re-entrant import is not an error and implementations must take the necessary steps to avoid infinite loops and/or incorrect notification of duplicate step definitions. It is not an error for a library to import itself. An example of such steps is listed in </span><a href="#handling-imports" title="Handling Circular and Re-entrant Library Imports (Non-Normative)"><span class="deltaxml-new" style="background:#90EE90">Appendix G, </span><i><span class="deltaxml-new" style="background:#90EE90">Handling Circular and Re-entrant Library Imports (Non-Normative)</span></i></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">A library is considered the same library if the URI of the resource retrieved is the same. If a pipeline or library author uses two different URI values that resolve to the same resource, they must not be considered the same imported library.</span></p></section><section id="p.pipe" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">5.11 p:pipe</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></code><span class="deltaxml-new" style="background:#90EE90"> connects an input to a port on another step.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:pipe</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">step</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">port</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></code><span class="deltaxml-new" style="background:#90EE90"> element connects to a readable port of another step. It identifies the readable port to which it connects with the name of the step in the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">step</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute and the name of the port on that step in the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">port</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute.</span></p><p><a name="err.inline.S0022"></a><span class="deltaxml-new" style="background:#90EE90">In all cases except the </span><a href="#p.output"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:output</span></code></a><span class="deltaxml-new" style="background:#90EE90"> of a </span><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-new" style="background:#90EE90">compound step</span></a></em><span class="deltaxml-new" style="background:#90EE90">, it is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0022"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0022</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the port identified by a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></code><span class="deltaxml-new" style="background:#90EE90"> is not in the </span><em class="glossterm"><a href="#dt-readable-ports"><span class="deltaxml-new" style="background:#90EE90">readable ports</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of the step that contains the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></code><span class="deltaxml-new" style="background:#90EE90"> that is a </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-new" style="background:#90EE90">connection</span></a></em><span class="deltaxml-new" style="background:#90EE90"> for an </span><a href="#p.output"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:output</span></code></a><span class="deltaxml-new" style="background:#90EE90"> of a </span><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-new" style="background:#90EE90">compound step</span></a></em><span class="deltaxml-new" style="background:#90EE90"> may connect to one of the readable ports of the compound step or to an output port on one of the compound step's </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-new" style="background:#90EE90">contained steps</span></a></em><span class="deltaxml-new" style="background:#90EE90">. In other words, the output of a compound step can simply be a copy of one of the available inputs or it can be the output of one of its children.</span></p></section><section id="p.inline" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">5.12 p:inline</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></code><span class="deltaxml-new" style="background:#90EE90"> provides a document inline.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:inline</span><br /><span class="deltaxml-new" style="background:#90EE90">  exclude-inline-prefixes? = </span><var><span class="deltaxml-new" style="background:#90EE90">prefix list</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><var><span class="deltaxml-new" style="background:#90EE90">anyElement</span></var><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:inline&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The content of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></code><span class="deltaxml-new" style="background:#90EE90"> element is wrapped in a document node and passed as input. The base URI of the document is the base URI of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></code><span class="deltaxml-new" style="background:#90EE90"> element. </span><a name="err.inline.S0024"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0024"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0024</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the content of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></code><span class="deltaxml-new" style="background:#90EE90"> element does not consist of exactly one element, optionally preceded and/or followed by any number of processing instructions, comments or whitespace characters.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The in-scope namespaces of the inline document differ from the in-scope namespace of the content of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></code><span class="deltaxml-new" style="background:#90EE90"> element in that bindings for all its </span><em><span class="deltaxml-new" style="background:#90EE90">excluded namespaces</span></em><span class="deltaxml-new" style="background:#90EE90">, as defined below, are removed:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">The XProc namespace itself (</span><code class="uri"><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/ns/xproc</span></code><span class="deltaxml-new" style="background:#90EE90">) is excluded.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">A namespace URI designated by using an </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">exclude-inline-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute on the enclosing </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></code><span class="deltaxml-new" style="background:#90EE90"> is excluded.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">A namespace URI designated by using an </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">exclude-inline-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute on any ancestor </span><a href="#p.declare-step"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#p.pipeline"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code></a><span class="deltaxml-new" style="background:#90EE90">, or </span><a href="#p.library"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:library</span></code></a><span class="deltaxml-new" style="background:#90EE90"> is also excluded. (In other words, the effect of several </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">exclude-inline-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> attributes among the ancestors of </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></code><span class="deltaxml-new" style="background:#90EE90"> is cumulative.)</span></p></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">The value of each </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">exclude-inline-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is interpreted as follows:</span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the attribute is either </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">#all</span></code><span class="deltaxml-new" style="background:#90EE90">, or a whitespace-separated list of tokens, each of which is either a namespace prefix or </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">#default</span></code><span class="deltaxml-new" style="background:#90EE90">. The namespace bound to each of the prefixes is designated as an excluded namespace. </span><a name="err.inline.S0057"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0057"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0057</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">exclude-inline-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute does not contain a list of tokens or if any of those tokens (except </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">#all</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">#default</span></code><span class="deltaxml-new" style="background:#90EE90">) is not a prefix bound to a namespace in the in-scope namespaces of the element on which it occurs.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The default namespace of the element on which </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">exclude-inline-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> occurs may be designated as an excluded namespace by including </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">#default</span></code><span class="deltaxml-new" style="background:#90EE90"> in the list of namespace prefixes. </span><a name="err.inline.S0058"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0058"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0058</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the value </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">#default</span></code><span class="deltaxml-new" style="background:#90EE90"> is used within the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">exclude-inline-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute and there is no default namespace in scope. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The value </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">#all</span></code><span class="deltaxml-new" style="background:#90EE90"> indicates that all namespaces that are in scope for the element on which </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">exclude-inline-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> occurs are designated as excluded namespaces.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The XProc processor </span><span class="rfc2119" id="p.inline.11.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> include all in-scope prefixes that are not explicitly excluded. If the namespace associated with an excluded prefix is used in the expanded-QName of a descendant element or attribute, the processor </span><span class="rfc2119" id="p.inline.11.2"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> include that prefix anyway, or it may generate a new prefix.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Consider this example:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="1.0"&gt; &lt;p:output port="result"/&gt; &lt;p:serialization port="result" indent="true"/&gt; &lt;p:identity xmlns:a="http://example.com/a" xmlns:b="http://example.com/b" xmlns:c="http://example.com/c"&gt; &lt;p:input port="source"&gt; &lt;p:inline exclude-inline-prefixes="a b"&gt; &lt;doc&gt; &lt;b:part/&gt; &lt;/doc&gt; &lt;/p:inline&gt; &lt;/p:input&gt; &lt;/p:identity&gt; &lt;/p:declare-step&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">which might produce a result like this:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;doc xmlns:c="http://example.com/c"&gt; &lt;b:part xmlns:b="http://example.com/b"/&gt; &lt;/doc&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">The declaration for “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">c</span></code><span class="deltaxml-new" style="background:#90EE90">” must be present because it was not excluded. The “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">part</span></code><span class="deltaxml-new" style="background:#90EE90">” element uses the namespace bound to “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">b</span></code><span class="deltaxml-new" style="background:#90EE90">”, so </span><em><span class="deltaxml-new" style="background:#90EE90">some</span></em><span class="deltaxml-new" style="background:#90EE90"> binding must be present. In this example, the original prefix has been preserved, but it would be equally correct if a different prefix had been used.</span></p></section><section id="p.document" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">5.13 p:document</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:document</span></code><span class="deltaxml-new" style="background:#90EE90"> reads an XML document from a URI.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:document</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">href</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">anyURI</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The document identified by the URI in the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">href</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is loaded and returned. If the URI protocol supports redirection, then redirects </span><span class="rfc2119" id="p.document.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be followed.</span></p><p><a name="err.inline.D0011"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0011"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0011</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the resource referenced by a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:document</span></code><span class="deltaxml-new" style="background:#90EE90"> element does not exist, cannot be accessed, or is not a well-formed XML document. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The parser which the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:document</span></code><span class="deltaxml-new" style="background:#90EE90"> element employs </span><span class="rfc2119" id="p.document.6.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> process the external subset; all general and external parsed entities </span><span class="rfc2119" id="p.document.6.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be fully expanded. It </span><span class="rfc2119" id="p.document.6.4"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> perform </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xml:id</span></code><span class="deltaxml-new" style="background:#90EE90"> processing, but it </span><span class="rfc2119" id="p.document.6.6"><span class="deltaxml-new" style="background:#90EE90">must not</span></span><span class="deltaxml-new" style="background:#90EE90"> perform any other processing, such as expanding XIncludes. The parser </span><span class="rfc2119" id="p.document.6.7"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be conformant to </span><em class="citetitle"><span class="deltaxml-new" style="background:#90EE90">Namespaces in XML</span></em><span class="deltaxml-new" style="background:#90EE90">. Loading the document </span><span class="rfc2119" id="p.document.6.9"><span class="deltaxml-new" style="background:#90EE90">must not</span></span><span class="deltaxml-new" style="background:#90EE90"> fail due to validation errors.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Use the </span><a href="#c.load"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:load</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step if you need to perform DTD-based validation. </span></p><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:document</span></code><span class="deltaxml-new" style="background:#90EE90"> always </span><em><span class="deltaxml-new" style="background:#90EE90">reads</span></em><span class="deltaxml-new" style="background:#90EE90"> from the specified IRI. In the context of a </span><a href="#p.input"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:input</span></code></a><span class="deltaxml-new" style="background:#90EE90">, this seems perfectly natural. In the context of a </span><a href="#p.output"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:output</span></code></a><span class="deltaxml-new" style="background:#90EE90">, this may seem a little asymmetrical. Putting a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:document</span></code><span class="deltaxml-new" style="background:#90EE90"> in a </span><a href="#p.output"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:output</span></code></a><span class="deltaxml-new" style="background:#90EE90"> causes the pipeline to </span><em><span class="deltaxml-new" style="background:#90EE90">read</span></em><span class="deltaxml-new" style="background:#90EE90"> from the specified IRI and provide that document </span><em><span class="deltaxml-new" style="background:#90EE90">as an output</span></em><span class="deltaxml-new" style="background:#90EE90"> on that port. </span></p><p><span class="deltaxml-new" style="background:#90EE90">Use </span><a href="#c.store"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:store</span></code></a><span class="deltaxml-new" style="background:#90EE90"> to store the results that appear on a </span><a href="#p.output"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:output</span></code></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div></section><section id="p.data" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">5.14 p:data</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:data</span></code><span class="deltaxml-new" style="background:#90EE90"> reads an arbitrary resource from a URI.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:data</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">href</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">anyURI</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  wrapper? = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  wrapper-prefix? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  wrapper-namespace? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  content-type? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The resource identified by the URI in the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">href</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is loaded, encoded, wrapped in the wrapper element, and returned as a document. If the URI protocol supports redirection, then redirects </span><span class="rfc2119" id="p.data.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be followed.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute </span><span class="rfc2119" id="p.data.5.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">QName</span></code><span class="deltaxml-new" style="background:#90EE90">. If the lexical value does not contain a colon, then the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">wrapper-namespace</span></code><span class="deltaxml-new" style="background:#90EE90"> may be used to specify the namespace of the wrapper. In that case, the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">wrapper-prefix</span></code><span class="deltaxml-new" style="background:#90EE90"> may be specified to suggest a prefix for the wrapper element. </span><a name="err.inline.D0034"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0034"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0034</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to specify a new namespace or prefix if the lexical value of the specified name contains a colon (or if no </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></code><span class="deltaxml-new" style="background:#90EE90"> is explicitly specified).</span></p><p><span class="deltaxml-new" style="background:#90EE90">In other words, these two </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:data</span></code><span class="deltaxml-new" style="background:#90EE90"> elements produce equivalent wrappers:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:data href="..." xmlns:x="http://example.com/ns/" wrapper="x:wrap"/&gt; &lt;p:data href="..." wrapper="wrap" wrapper-prefix="x" wrapper-namespace="http://example.com/ns/"/&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">but this </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:data</span></code><span class="deltaxml-new" style="background:#90EE90"> element will raise an error:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:data href="..." xmlns:x="http://example.com/ns/" wrapper="x:wrap" wrapper-prefix="x" wrapper-namespace="http://example.com/ns/"/&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">If no wrapper element is specified, the default is </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:data</span></code><span class="deltaxml-new" style="background:#90EE90">:</span></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:data</span><br /><span class="deltaxml-new" style="background:#90EE90">  content-type? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  charset? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  encoding? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:data&gt;</span></code></p><p><a name="err.inline.D0029"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0029"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0029</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the document referenced by a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:data</span></code><span class="deltaxml-new" style="background:#90EE90"> element does not exist, cannot be accessed, or cannot be encoded as specified. </span></p><p><span class="deltaxml-new" style="background:#90EE90">Exactly how the data is encoded depends on the media type of the resource. If the resource has a content type associated with it (e.g., if the resource was retrieved with HTTP), then that content type </span><span class="rfc2119" id="p.data.13.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be used, otherwise, if the user specified a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> on the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:data</span></code><span class="deltaxml-new" style="background:#90EE90">, then that content type should be assumed. </span><a name="impl-38"></a><span class="deltaxml-new" style="background:#90EE90">If no content type was specified or is associated with the resource, the inferred content type is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">If the media type of the response is an XML media type or text type with a </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">charset</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter that is a Unicode character encoding (per [</span><a href="#unicodetr17"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Unicode TR#17</span></span></a><span class="deltaxml-new" style="background:#90EE90">]) or is recognized as a non-XML media type whose contents are encoded as a sequence of Unicode characters (e.g. it has a </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">charset</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter or the definition of the media type is such that it requires Unicode), the data </span><span class="rfc2119" id="p.data.14.1.1.4"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be encoded as Unicode character sequence.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">If the media type is not an appropriate text type, or if the processor does not recognize the media type, the content is base64-encoded.</span></p></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">The resulting data is wrapped in an element with the name specified in the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute (or </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:data</span></code><span class="deltaxml-new" style="background:#90EE90"> if no </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></code><span class="deltaxml-new" style="background:#90EE90"> is specified).</span></p><p><span class="deltaxml-new" style="background:#90EE90">Implementations </span><span class="rfc2119" id="p.data.16.1"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> add a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute to the wrapper element which indicates the specified or inferred media type of the resource (including any parameters). If the content was base64-encoded, the wrapper </span><span class="rfc2119" id="p.data.16.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> have an </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute which specifies “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">base64</span></code><span class="deltaxml-new" style="background:#90EE90">”.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If an </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> is specified, a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">charset</span></code><span class="deltaxml-new" style="background:#90EE90"> may also be specified. The character set may be specified as a parameter on the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> or via the separate </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">charset</span></code><span class="deltaxml-new" style="background:#90EE90"> option. If it is specified in both places, the values </span><span class="rfc2119" id="p.data.17.5"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be consistent.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90">, or </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">charset</span></code><span class="deltaxml-new" style="background:#90EE90"> attributes are specified on a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:data</span></code><span class="deltaxml-new" style="background:#90EE90"> wrapper, they </span><span class="rfc2119" id="p.data.18.5"><span class="deltaxml-new" style="background:#90EE90">must not</span></span><span class="deltaxml-new" style="background:#90EE90"> be in a namespace; if the user-specified wrapper is not </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:data</span></code><span class="deltaxml-new" style="background:#90EE90">, then the attributes </span><span class="rfc2119" id="p.data.18.7"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be in the </span><code class="uri"><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/ns/xproc-step</span></code><span class="deltaxml-new" style="background:#90EE90"> namespace.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Implementations may record additional details in </span><a href="#extension-attributes"><span class="deltaxml-new" style="background:#90EE90">extension attributes</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">For example, this </span><a href="#c.identity"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:identity</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:identity name="readcsv"&gt; &lt;p:input port="source"&gt; &lt;p:data href="stateabbr.csv"/&gt; &lt;/p:input&gt; &lt;/p:identity&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">might produce output like this:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:data xmlns:c="http://www.w3.org/2007/03/xproc-step" content-type="text/plain"&gt; AL,Alabama AK,Alaska AZ,Arizona … &lt;/c:data&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">Whereas this pipeline fragment:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:identity name="readpng"&gt; &lt;p:input port="source"&gt; &lt;p:data href="icon.png" content-type="image/png"/&gt; &lt;/p:input&gt; &lt;/p:identity&gt; &lt;p:add-attribute name="makeimg" match="img" attribute-name="src"&gt; &lt;p:input port="source"&gt;&lt;p:inline&gt;&lt;img/&gt;&lt;/p:inline&gt;&lt;/p:input&gt; &lt;p:with-option name="attribute-value" select="concat('data:image/png;base64,',/*/node())"&gt; &lt;p:pipe step="readpng" port="result"/&gt; &lt;/p:with-option&gt; &lt;/p:add-attribute&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">produces a single </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">img</span></code><span class="deltaxml-new" style="background:#90EE90"> element with an inline graphic (represented using a </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">data:</span></code><span class="deltaxml-new" style="background:#90EE90"> URI):</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBI WXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH1QsEDycHOWjhgQAAAB10RVh0Q29tbWVudABDcmVhdGVk IHdpdGggVGhlIEdJTVDvZCVuAAABjklEQVQ4y42Tv0tbcRTFz3t5kuQFwUVFEYIGU6q4mU0RlCDR qYO2g4gdghUyKSFDwD/AwS2IoIMSHOLgpOLg4CIOWdy76GBoqQUJLlr66aCW6LuoF+7wvefcc3/w vZLgpbe0wOoqn/Ro5TKRVIpLi6tkkpoFpFJUj48JSVI2y4LnBTm+D1paYqa5OQiGw5DN8nV7m1hv L99f4o4Dk5Mc6Pwcd2yMXauL/n5+FAqsWdXjca5LJbokSXt7fOzu5toSaWsLxpqaIJcjr0ZbXGQh HDaWZPjQEGc7O3jPBC4u8EZHOXkruaODPxsbDMuylRWSra3cviYwO0upMcdtfNRqGq/X5esVu7nR BxMol4knEtTfGsH3+bu8zLdnydUqXjrN/nsWKEEiwdXmJp3/BYpFctFokOi6EIsF444DU1McSZLW 1+nq6eGnVWlkhNrcHBXXNUe5z+f5rEyGA8cxD+pufp7BYtH+yhL09fFbkYjd4vQ0W08jFgp8se7l wY3gwAC/KhXanwROTwlNTHBocf8BTQe7F9dc2bMAAAAASUVORK5CYII="/&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">Some steps, such as </span><a href="#c.xquery"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xquery</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#c.validate-with-relax-ng"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-relax-ng</span></code></a><span class="deltaxml-new" style="background:#90EE90">, are designed to process non-XML inputs. If a base64-encoded input occurs in such a context, it </span><span class="rfc2119" id="p.data.28.3"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> be decoded before processing. In this way, for example, an XQuery document can be read with </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:data</span></code><span class="deltaxml-new" style="background:#90EE90"> and passed to the </span><a href="#c.xquery"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xquery</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step without regard to how the data was encoded.</span></p></section><section id="p.empty" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">5.15 p:empty</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></code><span class="deltaxml-new" style="background:#90EE90"> connects to an </span><em class="glossterm"><a href="#dt-empty-sequence"><span class="deltaxml-new" style="background:#90EE90">empty sequence</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of documents.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:empty /&gt;</span></code></p></section><section id="p.documentation" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">5.16 p:documentation</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:documentation</span></code><span class="deltaxml-new" style="background:#90EE90"> contains human-readable documentation.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:documentation&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><var><span class="deltaxml-new" style="background:#90EE90">any-well-formed-content</span></var><span class="deltaxml-new" style="background:#90EE90">*</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:documentation&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">There are no constraints on the content of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:documentation</span></code><span class="deltaxml-new" style="background:#90EE90"> element. Documentation is ignored by pipeline processors. See </span><a href="#documentation" title="Documentation"><span class="deltaxml-new" style="background:#90EE90">Section 3.6, “Documentation”</span></a><span class="deltaxml-new" style="background:#90EE90">. </span></p></section><section id="p.pipeinfo" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">5.17 p:pipeinfo</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeinfo</span></code><span class="deltaxml-new" style="background:#90EE90"> contains ancillary information for steps in the pipeline.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:pipeinfo&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><var><span class="deltaxml-new" style="background:#90EE90">any-well-formed-content</span></var><span class="deltaxml-new" style="background:#90EE90">*</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:pipeinfo&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">There are no constraints on the content of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeinfo</span></code><span class="deltaxml-new" style="background:#90EE90"> element, see </span><a href="#annotations" title="Processor annotations"><span class="deltaxml-new" style="background:#90EE90">Section 3.7, “Processor annotations”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></section></section><section id="errors" class="section"><div class="section-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">6 Errors</span></h2></div><p><span class="deltaxml-new" style="background:#90EE90">Errors in a pipeline can be divided into two classes: static errors and dynamic errors.</span></p><section id="static-errors" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">6.1 Static Errors</span></h3></div><p><span id="dt-static-error" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: A </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">static error</span></em><span class="deltaxml-new" style="background:#90EE90"> is one which can be detected before pipeline evaluation is even attempted.]</span></span><span class="deltaxml-new" style="background:#90EE90"> Examples of static errors include cycles and incorrect specification of inputs and outputs. </span></p><p><span class="deltaxml-new" style="background:#90EE90">Static errors are fatal and must be detected before any steps are evaluated.</span></p><p><span class="deltaxml-new" style="background:#90EE90">For a complete list of static errors, see </span><a href="#app.static-errors" title="Static Errors"><span class="deltaxml-new" style="background:#90EE90">Section 1, “Static Errors”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></section><section id="dynamic-errors" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">6.2 Dynamic Errors</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">A </span><span id="dt-dynamic-error" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: A </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></em><span class="deltaxml-new" style="background:#90EE90"> is one which occurs while a pipeline is being evaluated.]</span></span><span class="deltaxml-new" style="background:#90EE90"> Examples of dynamic errors include references to URIs that cannot be resolved, steps which fail, and pipelines that exhaust the capacity of an implementation (such as memory or disk space).</span></p><p><span class="deltaxml-new" style="background:#90EE90">If a step fails due to a dynamic error, failure propagates upwards until either a </span><a href="#p.try"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code></a><span class="deltaxml-new" style="background:#90EE90"> is encountered or the entire pipeline fails. In other words, outside of a </span><a href="#p.try"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code></a><span class="deltaxml-new" style="background:#90EE90">, step failure causes the entire pipeline to fail.</span></p><p><span class="deltaxml-new" style="background:#90EE90">For a complete list of dynamic errors, see </span><a href="#app.dynamic-errors" title="Dynamic Errors"><span class="deltaxml-new" style="background:#90EE90">Section 2, “Dynamic Errors”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></section><section id="step-errors" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">6.3 Step Errors</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">Several of the steps in the standard and option step library can generate dynamic errors.</span></p><p><span class="deltaxml-new" style="background:#90EE90">For a complete list of the dynamic errors raised by builtin pipeline steps, see </span><a href="#app.step-errors" title="Step Errors"><span class="deltaxml-new" style="background:#90EE90">Section 3, “Step Errors”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></section></section><section id="std-components" class="section"><div class="section-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">7 Standard Step Library</span></h2></div><p><span class="deltaxml-new" style="background:#90EE90">This section describes the standard XProc steps. A machine-readable description of these steps may be found in </span><a href="http://www.w3.org/2008/xproc-1.0.xpl"><span class="deltaxml-new" style="background:#90EE90">xproc-1.0.xpl</span></a><span class="deltaxml-new" style="background:#90EE90">. </span></p><p><span class="deltaxml-new" style="background:#90EE90">When a step in this library produces an output document, the base URI of the output is the base URI of the step's primary input document unless the step's process explicitly sets an </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xml:base</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute or the step's description explicitly states how the base URI is constructed.</span></p><p id="cv.result"><span class="deltaxml-new" style="background:#90EE90">Also, in this section, several steps use this element for result information:</span></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:result&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:result&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">When a step uses an XPath to compute an option value, the XPath context is as defined in </span><a href="#xpath-context" title="XPaths in XProc"><span class="deltaxml-new" style="background:#90EE90">Section 2.6, “XPaths in XProc”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">When a step specifies a particular version of a technology, implementations </span><span class="rfc2119" id="std-components.7.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> implement that version or a subsequent version that is backwards compatible with that version. At user-option, they may implement other non-backwards compatible versions.</span></p><section id="std-required" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">7.1 Required Steps</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">This section describes standard steps that must be supported by any conforming processor.</span></p><section id="c.add-attribute" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.1 p:add-attribute</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:add-attribute</span></code><span class="deltaxml-new" style="background:#90EE90"> step adds a single attribute to a set of matching elements. The input document specified on the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> is processed for matches specified by the match pattern in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option. For each of these matches, the attribute whose name is specified by the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">attribute-name</span></code><span class="deltaxml-new" style="background:#90EE90"> option is set to the attribute value specified by the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">attribute-value</span></code><span class="deltaxml-new" style="background:#90EE90"> option. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The resulting document is produced on the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> output port and consists of a exact copy of the input with the exception of the matched elements. Each of the matched elements is copied to the output with the addition of the specified attribute with the specified value. </span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:add-attribute</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">attribute-name</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">attribute-prefix</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                           </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">NCName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">attribute-namespace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                        </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">attribute-value</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">            </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.add-attribute.5.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an XSLTMatchPattern. </span><a name="err.inline.C0023.1"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0023"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0023</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the match pattern does not match an element.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">attribute-name</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.add-attribute.6.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">QName</span></code><span class="deltaxml-new" style="background:#90EE90">. If the lexical value does not contain a colon, then the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">attribute-namespace</span></code><span class="deltaxml-new" style="background:#90EE90"> may be used to specify the namespace of the attribute. In that case, the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">attribute-prefix</span></code><span class="deltaxml-new" style="background:#90EE90"> may be specified to suggest a prefix for the attribute name. </span><a name="err.inline.D0034.1"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0034"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0034</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to specify a new namespace or prefix if the lexical value of the specified name contains a colon. The corresponding expanded name is used to construct the attribute.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">attribute-value</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.add-attribute.7.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a legal attribute value according to XML.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If an attribute with the same name as the expanded name from the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">attribute-name</span></code><span class="deltaxml-new" style="background:#90EE90"> option exists on the matched element, the value specified in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">attribute-value</span></code><span class="deltaxml-new" style="background:#90EE90"> option is used to set the value of that existing attribute. That is, the value of the existing attribute is changed to the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">attribute-value</span></code><span class="deltaxml-new" style="background:#90EE90"> value. </span></p><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">If multiple attributes need to be set on the same element(s), the </span><a href="#c.set-attributes"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:set-attributes</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step can be used to set them all at once.</span></p></div><p><span class="deltaxml-new" style="background:#90EE90">This step cannot be used to add namespace declarations. </span><a name="err.inline.C0059"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0059"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0059</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the QName value in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">attribute-name</span></code><span class="deltaxml-new" style="background:#90EE90"> option uses the prefix “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xmlns</span></code><span class="deltaxml-new" style="background:#90EE90">” or any other prefix that resolves to the namespace name “</span><code class="uri"><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/2000/xmlns/</span></code><span class="deltaxml-new" style="background:#90EE90">”. Note, however, that while namespace declarations cannot be added explicitly by this step, adding an attribute whose name is in a namespace for which there is no namespace declaration in scope on the matched element may result in a namespace binding being added by </span><a href="#namespace-fixup" title="Namespace Fixup on Outputs"><span class="deltaxml-new" style="background:#90EE90">Section 2.4.1, “Namespace Fixup on Outputs”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If an attribute named </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xml:base</span></code><span class="deltaxml-new" style="background:#90EE90"> is added or changed, the base URI of the element </span><span class="rfc2119" id="c.add-attribute.11.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> also be amended accordingly.</span></p></section><section id="c.add-xml-base" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.2 p:add-xml-base</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:add-xml-base</span></code><span class="deltaxml-new" style="background:#90EE90"> step exposes the base URI via explicit </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">xml:base</span></code><span class="deltaxml-new" style="background:#90EE90"> attributes. The input document from the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port is replicated to the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> port with </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">xml:base</span></code><span class="deltaxml-new" style="background:#90EE90"> attributes added to or corrected on each element as specified by the options on this step.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:add-xml-base</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">all</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">relative</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                   </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">all</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.add-xml-base.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a boolean.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">relative</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.add-xml-base.5.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a boolean.</span></p><p><a name="err.inline.C0058"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0058"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0058</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">all</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">relative</span></code><span class="deltaxml-new" style="background:#90EE90"> options are </span><em><span class="deltaxml-new" style="background:#90EE90">both</span></em><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:add-xml-base</span></code><span class="deltaxml-new" style="background:#90EE90"> step modifies its input as follows:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">For the document element: force the element to have an </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xml:base</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute with the document's [base URI] property's value as its value.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">For other elements:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">all</span></code><span class="deltaxml-new" style="background:#90EE90"> option has the value </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, force the element to have an </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xml:base</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute with the element's [base URI] value as its value.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">If the element's [base URI] is different from the its parent's [base URI], force the element to have an </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xml:base</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute with the following value: if the value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">relative</span></code><span class="deltaxml-new" style="background:#90EE90"> option is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, a string which, when resolved against the parent's [base URI], will give the element's [base URI], otherwise the element's [base URI].</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Otherwise, if there is an </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xml:base</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute present, remove it. </span></p></li></ul></div></li></ul></div></section><section id="c.compare" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.3 p:compare</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:compare</span></code><span class="deltaxml-new" style="background:#90EE90"> step compares two documents for equality.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:compare</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">alternate</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">fail-if-not-equal</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">fail-if-not-equal</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.compare.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a boolean.</span></p><p><span class="deltaxml-new" style="background:#90EE90">This step takes single documents on each of two ports and compares them using the </span><code class="function"><span class="deltaxml-new" style="background:#90EE90">fn:deep-equal</span></code><span class="deltaxml-new" style="background:#90EE90"> (as defined in [</span><a href="#xpath-functions"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XPath 2.0 Functions and Operators</span></span></a><span class="deltaxml-new" style="background:#90EE90">]). </span><a name="err.inline.C0019"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0019"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0019</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the documents are not equal, and the value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">fail-if-not-equal</span></code><span class="deltaxml-new" style="background:#90EE90"> option is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">. If the documents are equal, or if the value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">fail-if-not-equal</span></code><span class="deltaxml-new" style="background:#90EE90"> option is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">, a </span><a href="#cv.result"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:result</span></code></a><span class="deltaxml-new" style="background:#90EE90"> document is produced with contents </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> if the documents are equal, otherwise </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p></section><section id="c.count" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.4 p:count</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:count</span></code><span class="deltaxml-new" style="background:#90EE90"> step counts the number of documents in the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> input sequence and returns a single document on </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> containing that number. The generated document contains a single </span><a href="#cv.result"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:result</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element whose contents is the string representation of the number of documents in the sequence.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:count</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">limit</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">0</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                           </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">integer</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">limit</span></code><span class="deltaxml-new" style="background:#90EE90"> option is specified and is greater than zero, the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:count</span></code><span class="deltaxml-new" style="background:#90EE90"> step will count at most that many documents. This provides a convenient mechanism to discover, for example, if a sequence consists of more than 1 document, without requiring every single document to be buffered before processing can continue.</span></p></section><section id="c.delete" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.5 p:delete</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:delete</span></code><span class="deltaxml-new" style="background:#90EE90"> step deletes items specified by a match pattern from the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> input document and produces the resulting document, with the deleted items removed, on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> port.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:delete</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.delete.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an XSLTMatchPattern. A match pattern may match multiple items to be deleted.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If an element is selected by the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option, the entire subtree rooted at that element is deleted.</span></p><p><span class="deltaxml-new" style="background:#90EE90">This step cannot be used to remove namespaces. </span><a name="err.inline.C0062"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0062"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0062</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option matches a namespace node. Also, note that deleting an attribute named </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xml:base</span></code><span class="deltaxml-new" style="background:#90EE90"> does not change the base URI of the element on which it occurred.</span></p></section><section id="c.directory-list" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.6 p:directory-list</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:directory-list</span></code><span class="deltaxml-new" style="background:#90EE90"> step produces a list of the contents of a specified directory.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:directory-list</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">path</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">include-filter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">RegularExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">exclude-filter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">RegularExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">path</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.directory-list.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></code><span class="deltaxml-new" style="background:#90EE90">. It is interpreted as an IRI reference. If it is relative, it is made absolute against the base URI of the element on which it is specified (</span><a href="#p.with-option"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:directory-list</span></code><span class="deltaxml-new" style="background:#90EE90"> in the case of a </span><a href="#option-shortcut"><span class="deltaxml-new" style="background:#90EE90">syntactic shortcut</span></a><span class="deltaxml-new" style="background:#90EE90"> value).</span></p><p><a name="err.inline.C0017"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0017"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0017</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the absolute path does not identify a directory. </span><a name="err.inline.C0012"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0012"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0012</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the contents of the directory path are not available to the step due to access restrictions in the environment in which the pipeline is run.</span></p><p><a name="impl-39"></a><span class="deltaxml-new" style="background:#90EE90">Conformant processors </span><span class="rfc2119" id="c.directory-list.6.1.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> support directory paths whose scheme is </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">file</span></code><span class="deltaxml-new" style="background:#90EE90">. It is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90"> what other schemes are supported by </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:directory-list</span></code><span class="deltaxml-new" style="background:#90EE90">, and what the interpretation of 'directory', 'file' and 'contents' is for those schemes. </span></p><p><span class="deltaxml-new" style="background:#90EE90">If present, the value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">include-filter</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">exclude-filter</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.directory-list.7.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a regular expression as specified in [</span><a href="#xpath-functions"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XPath 2.0 Functions and Operators</span></span></a><span class="deltaxml-new" style="background:#90EE90">], section 7.61 “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">Regular Expression Syntax</span></code><span class="deltaxml-new" style="background:#90EE90">”.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">include-filter</span></code><span class="deltaxml-new" style="background:#90EE90"> pattern matches a directory entry's name, the entry is included in the output. If the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">exclude-filter</span></code><span class="deltaxml-new" style="background:#90EE90"> pattern matches a directory entry's name, the entry is excluded in the output. If both options are provided, the include filter is processed first, then the exclude filter.</span></p><p id="cv.directory"><span class="deltaxml-new" style="background:#90EE90">The result document produced for the specified directory path has a </span><a href="#cv.directory"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:directory</span></code></a><span class="deltaxml-new" style="background:#90EE90"> document element whose base URI is the directory path and whose </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">name</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is the last segment of the directory path (that is, the directory's (local) name).</span></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:directory</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">name</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#cv.file"><span class="deltaxml-new" style="background:#90EE90">c:file</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#cv.directory"><span class="deltaxml-new" style="background:#90EE90">c:directory</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#cv.other"><span class="deltaxml-new" style="background:#90EE90">c:other</span></a><span class="deltaxml-new" style="background:#90EE90">)*</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:directory&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">Its contents are determined as follows, based on the entries in the directory identified by the directory path. For each entry in the directory, if either no </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">filter</span></code><span class="deltaxml-new" style="background:#90EE90"> was specified, or the (local) name of the entry matches the filter pattern, a </span><a href="#cv.file"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:file</span></code></a><span class="deltaxml-new" style="background:#90EE90">, a </span><a href="#cv.directory"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:directory</span></code></a><span class="deltaxml-new" style="background:#90EE90">, or a </span><a href="#cv.other"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:other</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element is produced, as follows: </span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">A </span><a href="#cv.directory"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:directory</span></code></a><span class="deltaxml-new" style="background:#90EE90"> is produced for each subdirectory not determined to be special.</span></p></li><li><p id="cv.file"><span class="deltaxml-new" style="background:#90EE90">A </span><a href="#cv.file"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:file</span></code></a><span class="deltaxml-new" style="background:#90EE90"> is produced for each file not determined to be special.</span></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:file</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">name</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p></li><li><p id="cv.other"><a name="impl-40"></a><span class="deltaxml-new" style="background:#90EE90">Any file or directory determined to be special by the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:directory-list</span></code><span class="deltaxml-new" style="background:#90EE90"> step may be output using a </span><a href="#cv.other"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:other</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element but the criteria for marking a file as special are </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:other</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">name</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">When a directory entry is a subdirectory, that directory's entries are not output as part of that entry's </span><a href="#cv.directory"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:directory</span></code></a><span class="deltaxml-new" style="background:#90EE90">. A user must apply this step again to the subdirectory to list subdirectory contents.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Each of the elements </span><a href="#cv.file"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:file</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#cv.directory"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:directory</span></code></a><span class="deltaxml-new" style="background:#90EE90">, and </span><a href="#cv.other"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:other</span></code></a><span class="deltaxml-new" style="background:#90EE90"> has a </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">name</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute when it appears within the top-level </span><a href="#cv.directory"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:directory</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element, whose value is a relative IRI reference, giving the (local) file or directory name.</span></p><p><a name="impl-41"></a><span class="deltaxml-new" style="background:#90EE90">Any attributes other than </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">name</span></code><span class="deltaxml-new" style="background:#90EE90"> on </span><a href="#cv.file"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:file</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#cv.directory"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:directory</span></code></a><span class="deltaxml-new" style="background:#90EE90">, or </span><a href="#cv.other"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:other</span></code></a><span class="deltaxml-new" style="background:#90EE90"> are </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></section><section id="c.error" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.7 p:error</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:error</span></code><span class="deltaxml-new" style="background:#90EE90"> step generates a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> using the input provided to the step.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:error</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">code</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">code-prefix</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">NCName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">code-namespace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">code</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.error.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">QName</span></code><span class="deltaxml-new" style="background:#90EE90">. If the lexical value does not contain a colon, then the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">code-namespace</span></code><span class="deltaxml-new" style="background:#90EE90"> may be used to specify the namespace of the code. In that case, the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">code-prefix</span></code><span class="deltaxml-new" style="background:#90EE90"> may be specified to suggest a prefix for the code. </span><a name="err.inline.D0034.2"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0034"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0034</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to specify a new namespace or prefix if the lexical value of the specified name contains a colon.</span></p><p><span class="deltaxml-new" style="background:#90EE90">This step uses the document provided on its input as the content of the error raised. An instance of the </span><a href="#cv.errors"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:errors</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element will be produced on the error output port, as is always the case for </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic errors</span></a></em><span class="deltaxml-new" style="background:#90EE90">. The error generated can be caught by a </span><a href="#p.try"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code></a><span class="deltaxml-new" style="background:#90EE90"> just like any other dynamic error.</span></p><p><span class="deltaxml-new" style="background:#90EE90">For authoring convenience, the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:error</span></code><span class="deltaxml-new" style="background:#90EE90"> step is declared with a single, primary output port. With respect to </span><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-new" style="background:#90EE90">connections</span></a></em><span class="deltaxml-new" style="background:#90EE90">, this port behaves like any other output port even though nothing can ever appear on it since the step always fails.</span></p><p><span class="deltaxml-new" style="background:#90EE90">For example, given the following invocation:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:error xmlns:my="http://www.example.org/error" name="bad-document" code="my:unk12"&gt; &lt;p:input port="source"&gt; &lt;p:inline&gt; &lt;message&gt;The document element is unknown.&lt;/message&gt; &lt;/p:inline&gt; &lt;/p:input&gt; &lt;/p:error&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">The error vocabulary element (and document) generated on the error output port would be:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:errors xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:p="http://www.w3.org/ns/xproc" xmlns:my="http://www.example.org/error"&gt; &lt;c:error name="bad-document" type="p:error" code="my:unk12"&gt;&lt;message&gt;The document element is unknown.&lt;/message&gt; &lt;/c:error&gt; &lt;/c:errors&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">href</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">line</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">column</span></code><span class="deltaxml-new" style="background:#90EE90">, or </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">offset</span></code><span class="deltaxml-new" style="background:#90EE90">, might also be present on the </span><a href="#cv.error"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:error</span></code></a><span class="deltaxml-new" style="background:#90EE90"> to identify the location of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:error</span></code><span class="deltaxml-new" style="background:#90EE90"> element in the pipeline.</span></p></section><section id="c.escape-markup" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.8 p:escape-markup</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:escape-markup</span></code><span class="deltaxml-new" style="background:#90EE90"> step applies XML serialization to the children of the document element and replaces those children with their serialization. The outcome is a single element with text content that represents the "escaped" syntax of the children as they were serialized.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:escape-markup</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">''</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">ListOfQNames</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">indent</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                 </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">method</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'xml'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'omit'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                 </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">"true" | "false" | "omit"</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">version</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'1.0'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                     </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">This step supports the standard serialization options as specified in </span><a href="#serialization-options" title="Serialization Options"><span class="deltaxml-new" style="background:#90EE90">Section 7.3, “Serialization Options”</span></a><span class="deltaxml-new" style="background:#90EE90">. These options control how the output markup is produced before it is escaped. </span></p><p><span class="deltaxml-new" style="background:#90EE90">For example, the input:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;description&gt; &lt;div xmlns="http://www.w3.org/1999/xhtml"&gt; &lt;p&gt;This is a chunk of XHTML.&lt;/p&gt; &lt;/div&gt; &lt;/description&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">produces:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;description&gt; &amp;lt;div xmlns="http://www.w3.org/1999/xhtml"&amp;gt; &amp;lt;p&gt;This is a chunk of XHTML.&amp;lt;/p&amp;gt; &amp;lt;/div&amp;gt; &lt;/description&gt;</span></code></pre><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">The result of this step is an XML document that contains the Unicode characters that are the characters that result from escaping the input. It is not encoded characters in a serialized octet stream, therefore, the serialization options related to encoding characters (</span><code class="option"><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90">, and </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90">) do not apply. They are omitted from the standard serialization options on this step.</span></p></div><p><span class="deltaxml-new" style="background:#90EE90">By default, this step </span><span class="rfc2119" id="c.escape-markup.10.1"><span class="deltaxml-new" style="background:#90EE90">must not</span></span><span class="deltaxml-new" style="background:#90EE90"> generate an XML declaration in the escaped result.</span></p></section><section id="c.filter" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.9 p:filter</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:filter</span></code><span class="deltaxml-new" style="background:#90EE90"> step selects portions of the source document based on a (possibly dynamically constructed) XPath select expression.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:filter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                     </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">This step behaves just like an </span><a href="#p.input"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:input</span></code></a><span class="deltaxml-new" style="background:#90EE90"> with a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> expression except that the select expression is computed dynamically.</span></p></section><section id="c.http-request" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.10 p:http-request</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></code><span class="deltaxml-new" style="background:#90EE90"> step provides for interaction with resources over HTTP or related protocols. The input document provided on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port specifies a request by a single </span><a href="#cv.request"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:request</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element. This element specifies the method, resource, and other request properties as well as possibly including an entity body (content) for the request.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                            </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">''</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">ListOfQNames</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                   </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">indent</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                 </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">method</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'xml'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'none'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">NormalizationForm</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'omit'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                 </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">"true" | "false" | "omit"</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">version</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'1.0'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                     </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The standard serialization options are provided to control the serialization of any XML content which is sent as part of the request. The effect of these options is as specified in </span><a href="#serialization-options" title="Serialization Options"><span class="deltaxml-new" style="background:#90EE90">Section 7.3, “Serialization Options”</span></a><span class="deltaxml-new" style="background:#90EE90">. See </span><a href="#c.request_body" title="Request Entity body conversion"><span class="deltaxml-new" style="background:#90EE90">Section 7.1.10.2, “Request Entity body conversion”</span></a><span class="deltaxml-new" style="background:#90EE90"> for a discussion of when serialization occurs in constructing a request.</span></p><p><a name="err.inline.C0040"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0040"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0040</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the document element of the document that arrives on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port is not </span><a href="#cv.request"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:request</span></code></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><section id="cv.request" class="section"><div class="section-titlepage"><h5><span class="deltaxml-new" style="background:#90EE90">7.1.10.1 Specifying a request</span></h5></div><p><span class="deltaxml-new" style="background:#90EE90">An HTTP request is represented by a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:request</span></code><span class="deltaxml-new" style="background:#90EE90"> element.</span></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:request</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">method</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  href? = </span><var><span class="deltaxml-new" style="background:#90EE90">anyURI</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  detailed? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  status-only? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  username? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  password? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  auth-method? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  send-authorization? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  override-content-type? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#cv.header"><span class="deltaxml-new" style="background:#90EE90">c:header</span></a><span class="deltaxml-new" style="background:#90EE90">*,</span><br /><span class="deltaxml-new" style="background:#90EE90">     (</span><a href="#cv.multipart"><span class="deltaxml-new" style="background:#90EE90">c:multipart</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#cv.body"><span class="deltaxml-new" style="background:#90EE90">c:body</span></a><span class="deltaxml-new" style="background:#90EE90">)?)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:request&gt;</span></code></p><p><a name="err.inline.C0006"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0006"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0006</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">method</span></code><span class="deltaxml-new" style="background:#90EE90"> is not specified on a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:request</span></code><span class="deltaxml-new" style="background:#90EE90">. </span><a name="err.inline.C0005"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0005"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0005</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the request contains a </span><a href="#cv.body"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:body</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#cv.multipart"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:multipart</span></code></a><span class="deltaxml-new" style="background:#90EE90"> but the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">method</span></code><span class="deltaxml-new" style="background:#90EE90"> does not allow for an entity body being sent with the request.</span></p><p><a name="err.inline.C0004"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0004"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0004</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">status-only</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute has the value </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> and the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">detailed</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute does not have the value </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">method</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute specifies the method to be used against the IRI specified by the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">href</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute, e.g. </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">GET</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">POST</span></code><span class="deltaxml-new" style="background:#90EE90"> (the value is not case-sensitive). If the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">href</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is not absolute, it will be resolved against the base URI of the element on which it is occurs.</span></p><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">In the case of simple “GET” requests, implementors are encouraged to support as many protocols as practical. In particular, pipeline authors may attempt to use </span><a href="#c.http-request"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></code></a><span class="deltaxml-new" style="background:#90EE90"> to load documents with computed URIs using the </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">file:</span></code><span class="deltaxml-new" style="background:#90EE90"> scheme.</span></p></div><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">username</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is specified, the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">username</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">password</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">auth-method</span></code><span class="deltaxml-new" style="background:#90EE90">, and </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">send-authorization</span></code><span class="deltaxml-new" style="background:#90EE90"> attributes are used to handle authentication according to the selected authentication method.</span></p><p><span class="deltaxml-new" style="background:#90EE90">For the purposes of avoiding an authentication challenge, if the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">send-authorization</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute has the value </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> and the authentication method specified by the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">auth-method</span></code><span class="deltaxml-new" style="background:#90EE90"> supports generation of an </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">Authorization</span></code><span class="deltaxml-new" style="background:#90EE90"> header without a challenge, then an </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">Authorization</span></code><span class="deltaxml-new" style="background:#90EE90"> header is generated and sent on the first request. If the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">send-authorization</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is absent or has the value </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">, then the first request is sent without an </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">Authorization</span></code><span class="deltaxml-new" style="background:#90EE90"> header.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the initial response to the request is an authentication challenge, the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">auth-method</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">username</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">password</span></code><span class="deltaxml-new" style="background:#90EE90"> and any relevant data from the challenge are used to generate an </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">Authorization</span></code><span class="deltaxml-new" style="background:#90EE90"> header and the request is sent again. If that authorization fails, the request is not retried.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Appropriate values for the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">auth-method</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute are “Basic” or “Digest” but other values are allowed. If the authentication method is “Basic” or “Digest”, authentication is handled as per [</span><a href="#rfc2617"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 2617</span></span></a><span class="deltaxml-new" style="background:#90EE90">]. </span><a name="impl-42"></a><span class="deltaxml-new" style="background:#90EE90">The interpretation of </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">auth-method</span></code><span class="deltaxml-new" style="background:#90EE90"> values on </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:request</span></code><span class="deltaxml-new" style="background:#90EE90"> other than “Basic” or “Digest” is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><a name="err.inline.C0003"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0003"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0003</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if a </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">username</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">password</span></code><span class="deltaxml-new" style="background:#90EE90"> is specified without specifying an </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">auth-method</span></code><span class="deltaxml-new" style="background:#90EE90">, if the requested </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">auth-method</span></code><span class="deltaxml-new" style="background:#90EE90"> isn't supported, or the authentication challenge contains an authentication method that isn't supported. All implementations are required to support "Basic" and "Digest" authentication per [</span><a href="#rfc2617"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 2617</span></span></a><span class="deltaxml-new" style="background:#90EE90">].</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">c:header</span></code><span class="deltaxml-new" style="background:#90EE90"> element specifies a header name and value, either for inclusion in a request, or as received in a response.</span></p><p id="cv.header" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:header</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">name</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">value</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The request is formulated from the attribute values on the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:request</span></code><span class="deltaxml-new" style="background:#90EE90"> element and its </span><a href="#cv.header"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:header</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#cv.multipart"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:multipart</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#cv.body"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:body</span></code></a><span class="deltaxml-new" style="background:#90EE90"> children, if present, and transmitted to the host (and port, if present) specified by the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">href</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute. The details of how the request entity body, if any, is constructed are given in </span><a href="#c.response_body" title="Converting Response Entity Bodies"><span class="deltaxml-new" style="background:#90EE90">Section 7.1.10.4, “Converting Response Entity Bodies”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">When the request is formulated, the step and/or protocol implementation may add headers as necessary to either complete the request or as appropriate for the content specified (e.g. transfer encodings). A user of this step is guaranteed that their requested headers and content will be sent with the exception of any conflicts with protocol-related headers.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><a href="#c.http-request"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step allows users to specify independently values that are not always independent. For example, some combinations of </span><a href="#cv.header"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:header</span></code></a><span class="deltaxml-new" style="background:#90EE90"> values (e.g., </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">Content-Type</span></code><span class="deltaxml-new" style="background:#90EE90">) may be inconsistent with values that the step and/or protocol implementation must set. In a few cases, the step provides more than one mechanism to specify what is actually a single value (e.g., the boundary string in multipart messages). </span><a name="err.inline.C0020"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0020"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0020</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the the user specifies a value or values that are inconsistent with each other or with the requirements of the step or protocol. </span></p></section><section id="c.request_body" class="section"><div class="section-titlepage"><h5><span class="deltaxml-new" style="background:#90EE90">7.1.10.2 Request Entity body conversion</span></h5></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">c:multipart</span></code><span class="deltaxml-new" style="background:#90EE90"> element specifies a multi-part body, per [</span><a href="#rfc1521"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 1521</span></span></a><span class="deltaxml-new" style="background:#90EE90">], either for inclusion in a request or as received in a response.</span></p><p id="cv.multipart" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:multipart</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">content-type</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">boundary</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><a href="#cv.body"><span class="deltaxml-new" style="background:#90EE90">c:body</span></a><span class="deltaxml-new" style="background:#90EE90">+</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:multipart&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">In the context of a request, the media type of the </span><a href="#cv.multipart"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:multipart</span></code></a><span class="rfc2119" id="c.request_body.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a multipart media type (i.e. have a main type of 'multipart'). If the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is not specified, a value of "multipart/mixed" will be assumed.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">boundary</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is required and is used to provide a multipart boundary marker. The implementation must use this boundary marker and must prefix the value with the string “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">--</span></code><span class="deltaxml-new" style="background:#90EE90">” when formulating the multipart message. </span><a name="err.inline.C0002"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0002"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0002</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the value starts with the string “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">--</span></code><span class="deltaxml-new" style="background:#90EE90">”.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the boundary is also specified as a parameter in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> option, then the parameter value specified and the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">boundary</span></code><span class="deltaxml-new" style="background:#90EE90"> value specified </span><span class="rfc2119" id="c.request_body.6.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be the same. If the boundary is specified in both the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">boundary</span></code><span class="deltaxml-new" style="background:#90EE90"> option and the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> option then the two values </span><span class="rfc2119" id="c.request_body.6.6"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be the same.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><a href="#cv.body"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:body</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element holds the body or body part of the message. Each of the attributes holds controls some aspect of the encoding the request body or decoding the body element's content when the request is formulated. These are specified as follows:</span></p><p id="cv.body" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:body</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">content-type</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  encoding? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  id? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  description? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  disposition? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><var><span class="deltaxml-new" style="background:#90EE90">anyElement</span></var><span class="deltaxml-new" style="background:#90EE90">*</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:body&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute specifies the media type of the body or body part, that is, the value of its </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">Content-Type</span></code><span class="deltaxml-new" style="background:#90EE90"> header. If the media type is not an XML type or text, the content must already be base64-encoded.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute controls the decoding of the element content for formulating the body. A value of </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">base64</span></code><span class="deltaxml-new" style="background:#90EE90"> indicates the element's content is a base64 encoded string whose byte stream should be sent as the message body. </span><a name="impl-43"></a><span class="deltaxml-new" style="background:#90EE90">An implementation may support encodings other than </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">base64</span></code><span class="deltaxml-new" style="background:#90EE90"> but these encodings and their names are </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span><a name="err.inline.C0052"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0052"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0052</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the encoding specified is not supported by the implementation.</span></p><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">The </span><a href="#c.http-request"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step provides only a single set of serialization options for XML media types. There's no direct support for sending a multipart message with two XML parts encoded differently.</span></p></div><p><span class="deltaxml-new" style="background:#90EE90">For each body or body part, the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">id</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute specifies the value of the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">Content-ID</span></code><span class="deltaxml-new" style="background:#90EE90"> header; the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">description</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute specifies the value of the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">Content-Description</span></code><span class="deltaxml-new" style="background:#90EE90"> header; and the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">disposition</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute specifies the value of the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">Content-Disposition</span></code><span class="deltaxml-new" style="background:#90EE90"> header. </span></p><p><span class="deltaxml-new" style="background:#90EE90">If an entity body is to be sent as part of a request (e.g. a </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">POST</span></code><span class="deltaxml-new" style="background:#90EE90">), either a </span><a href="#cv.body"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:body</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element, specifying the request entity body, or a </span><a href="#cv.multipart"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:multipart</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element, specifying multiple entity body parts, may be used. When </span><a href="#cv.multipart"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:multipart</span></code></a><span class="deltaxml-new" style="background:#90EE90"> is used it may contain multiple </span><a href="#cv.body"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:body</span></code></a><span class="deltaxml-new" style="background:#90EE90"> children. A </span><a href="#cv.body"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:body</span></code></a><span class="deltaxml-new" style="background:#90EE90"> specifies the construction of a body or body part as follows:</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute does not specify an XML media type, or the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">base64</span></code><span class="deltaxml-new" style="background:#90EE90">”, then </span><a name="err.inline.C0028"></a><span class="deltaxml-new" style="background:#90EE90">it is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0028"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0028</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the content of the </span><a href="#cv.body"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:body</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element does not consist entirely of characters, and the entity body or body part will consist of exactly those characters.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Otherwise (the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute </span><em><span class="deltaxml-new" style="background:#90EE90">does</span></em><span class="deltaxml-new" style="background:#90EE90"> specify an XML media type and the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is </span><em><span class="deltaxml-new" style="background:#90EE90">not</span></em><span class="deltaxml-new" style="background:#90EE90"> 'base64'), </span><a name="err.inline.C0022"></a><span class="deltaxml-new" style="background:#90EE90">it is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0022"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0022</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the content of the </span><a href="#cv.body"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:body</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element does not consist of exactly one element, optionally preceded and/or followed by any number of processing instructions, comments or whitespace characters, and the entity body or body part will consist of the serialization of a document node containing that content. The serialization of that document is controlled by the serialization options on the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></code><span class="deltaxml-new" style="background:#90EE90"> step itself.</span></p><p><span class="deltaxml-new" style="background:#90EE90">For example, the following input to a </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></code><span class="deltaxml-new" style="background:#90EE90"> step will POST a small XML document:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:request method="POST" href="http://example.com/someservice"&gt; &lt;c:body xmlns:c="http://www.w3.org/ns/xproc-step" content-type="application/xml"&gt; &lt;doc&gt; &lt;title&gt;My document&lt;/title&gt; &lt;/doc&gt; &lt;/c:body&gt; &lt;/c:request&gt; </span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">The corresponding request should look something like this:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">POST http://example.com/someservice HTTP/1.1 Host: example.com Content-Type: application/xml; charset="utf-8" &lt;?xml version='1.0'?&gt; &lt;doc&gt; &lt;title&gt;My document&lt;/title&gt; &lt;/doc&gt; </span></code></pre></section><section id="c.request_response" class="section"><div class="section-titlepage"><h5><span class="deltaxml-new" style="background:#90EE90">7.1.10.3 Managing the response</span></h5></div><p><span class="deltaxml-new" style="background:#90EE90">The handling of the response to the request and the generation of the step's result document is controlled by the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">status-only</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">override-content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">detailed</span></code><span class="deltaxml-new" style="background:#90EE90"> attributes on the </span><a href="#cv.request"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:request</span></code></a><span class="deltaxml-new" style="background:#90EE90"> input.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">override-content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute controls interpretation of the response's </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">Content-Type</span></code><span class="deltaxml-new" style="background:#90EE90"> header. If this attribute is present, the response will be treated as if it returned the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">Content-Type</span></code><span class="deltaxml-new" style="background:#90EE90"> given by its value. This original </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">Content-Type</span></code><span class="deltaxml-new" style="background:#90EE90"> header will however be reflected unchanged as a </span><a href="#cv.header"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:header</span></code></a><span class="deltaxml-new" style="background:#90EE90"> in the result document. </span><a name="err.inline.C0030"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0030"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0030</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">override-content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> value cannot be used (e.g. </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">text/plain</span></code><span class="deltaxml-new" style="background:#90EE90"> to override </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">image/png</span></code><span class="deltaxml-new" style="background:#90EE90">).</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">status-only</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute has the value </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, the result document will contain only header information. The entity of the response will not be processed to produce a </span><a href="#cv.body"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:body</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#cv.multipart"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:multipart</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><a href="#c.response"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:response</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element represents an HTTP response. The response's status code is encoded in the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">status</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute and the headers and entity body are processing into </span><a href="#cv.header"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:header</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#cv.multipart"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:multipart</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#cv.body"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:body</span></code></a><span class="deltaxml-new" style="background:#90EE90"> content.</span></p><p id="c.response" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:response</span><br /><span class="deltaxml-new" style="background:#90EE90">  status? = </span><var><span class="deltaxml-new" style="background:#90EE90">integer</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#cv.header"><span class="deltaxml-new" style="background:#90EE90">c:header</span></a><span class="deltaxml-new" style="background:#90EE90">*,</span><br /><span class="deltaxml-new" style="background:#90EE90">     (</span><a href="#cv.multipart"><span class="deltaxml-new" style="background:#90EE90">c:multipart</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#cv.body"><span class="deltaxml-new" style="background:#90EE90">c:body</span></a><span class="deltaxml-new" style="background:#90EE90">)?)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:response&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">detailed</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute determines the content of the result document. If it is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, the response to the request is handled as follows:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-new" style="background:#90EE90">A single </span><a href="#c.response"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:response</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element is produced with the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">status</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute containing the status of the response received.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Each response header is translated into a </span><a href="#cv.header"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:header</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Unless the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">status-only</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute has a value </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, the entity body of the response is converted into a </span><a href="#cv.body"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:body</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#cv.multipart"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:multipart</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element via the rules given in </span><a href="#c.response_body" title="Converting Response Entity Bodies"><span class="deltaxml-new" style="background:#90EE90">Section 7.1.10.4, “Converting Response Entity Bodies”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></li></ol></div><p><span class="deltaxml-new" style="background:#90EE90">Otherwise (the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">detailed</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is not specified or its value is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">), the response to the request is handled as follows:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-new" style="background:#90EE90">If the media type (as determined by the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">override-content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute or the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">Content-Type</span></code><span class="deltaxml-new" style="background:#90EE90"> response header) is an XML media type, the entity is decoded if necessary, then parsed as an XML document and produced on the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> output port as the entire output of the step.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Otherwise, the entity body of the response is converted into a </span><a href="#cv.body"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:body</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#cv.multipart"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:multipart</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element via the rules given in </span><a href="#c.response_body" title="Converting Response Entity Bodies"><span class="deltaxml-new" style="background:#90EE90">Section 7.1.10.4, “Converting Response Entity Bodies”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></li></ol></div><p><span class="deltaxml-new" style="background:#90EE90">In either case the base URI of the output document is the resolved value of the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">href</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute from the input </span><a href="#cv.request"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:request</span></code></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><section id="redirects" class="section"><div class="section-titlepage"><h6><span class="deltaxml-new" style="background:#90EE90">7.1.10.3.1 Redirects</span></h6></div><p><span class="deltaxml-new" style="background:#90EE90">One possible response from an HTTP request is a redirect, indicated by a status code in the three-hundred range. The precise semantics of the 3xx return codes are laid out by section </span><em class="citetitle"><span class="deltaxml-new" style="background:#90EE90">10.3 Redirection 3xx</span></em><span class="deltaxml-new" style="background:#90EE90"> in [</span><a href="#rfc2616"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 2616</span></span></a><span class="deltaxml-new" style="background:#90EE90">]. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><a href="#c.http-request"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step </span><span class="rfc2119" id="redirects.3.2"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> follow redirect requests (in a manner consistent with [</span><a href="#rfc2616"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 2616</span></span></a><span class="deltaxml-new" style="background:#90EE90">]) if they are returned by the server. </span></p></section><section id="cookies" class="section"><div class="section-titlepage"><h6><span class="deltaxml-new" style="background:#90EE90">7.1.10.3.2 Cookies</span></h6></div><p><span class="deltaxml-new" style="background:#90EE90">With one exception, in version 1.0 of XProc, the </span><a href="#c.http-request"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step does not provide any standard mechanisms for managing cookies. </span><a name="impl-44"></a><span class="deltaxml-new" style="background:#90EE90">Pipeline authors that need to preserve cookies across several </span><a href="#c.http-request"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></code></a><span class="deltaxml-new" style="background:#90EE90"> calls in the same pipeline or across multiple invocations of the same or different pipelines will have to rely on </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90"> mechanisms. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The exception arises in the case of redirection. If a redirect response includes cookies, those cookies </span><span class="rfc2119" id="cookies.3.1"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> be forwarded as appropriate to the redirected location when the redirection is followed.</span></p><p><span class="deltaxml-new" style="background:#90EE90">This behavior will allow the </span><a href="#c.http-request"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step to interoperate with web services that use cookies as part of an authentication protocol.</span></p></section></section><section id="c.response_body" class="section"><div class="section-titlepage"><h5><span class="deltaxml-new" style="background:#90EE90">7.1.10.4 Converting Response Entity Bodies</span></h5></div><p><span class="deltaxml-new" style="background:#90EE90">The entity of a response may be multipart per [</span><a href="#rfc1521"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 1521</span></span></a><span class="deltaxml-new" style="background:#90EE90">]. In those situations, the result document will be a </span><a href="#cv.multipart"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:multipart</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element that contains multiple </span><a href="#cv.body"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:body</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements inside.</span></p><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">Although it is technically possible for any of the individual parts of a multipart message to </span><em><span class="deltaxml-new" style="background:#90EE90">also</span></em><span class="deltaxml-new" style="background:#90EE90"> be multipart, XProc does not provide a standard representation for such messages. </span><a name="impl-45"></a><span class="deltaxml-new" style="background:#90EE90">The interpretation of a multipart message inside another multipart message is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></div><p><span class="deltaxml-new" style="background:#90EE90">The result of the </span><a href="#c.http-request"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step is an XML document. For media types (images, binaries, etc.) that can't be represented as a sequence of Unicode characters, the response is encoded as </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">base64</span></code><span class="deltaxml-new" style="background:#90EE90"> and then returned as text children of the </span><a href="#cv.body"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:body</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element. If the content is base64-encoded, the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute on </span><a href="#cv.body"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:body</span></code></a><span class="deltaxml-new" style="background:#90EE90"> must be set to “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">base64</span></code><span class="deltaxml-new" style="background:#90EE90">”.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the media type of the response is a text type with a </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">charset</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter that is a Unicode character encoding (per [</span><a href="#unicodetr17"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Unicode TR#17</span></span></a><span class="deltaxml-new" style="background:#90EE90">]) or is recognized as a non-XML media type whose contents are encoded as a sequence of Unicode characters (e.g. it has a character parameter or the definition of the media type is such that it requires Unicode), the content of the constructed </span><a href="#cv.body"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:body</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element is the translation of the text into a sequence of Unicode characters.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the response is an XML media type, the content of the constructed </span><a href="#cv.body"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:body</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element is the result of decoding the body as necessary, then parsing it with an XML parser. If the content is not well-formed, the step fails.</span></p><p><span class="deltaxml-new" style="background:#90EE90">In a </span><a href="#cv.body"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:body</span></code></a><span class="deltaxml-new" style="background:#90EE90"> in a response, the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute </span><span class="rfc2119" id="c.response_body.7.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an exact copy of the value returned in the </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">Content-Type</span></code><span class="deltaxml-new" style="background:#90EE90"> header. That is, it must reflect the content type actually returned, not any override value that may have been specified, and it must include any parameters returned by the server.</span></p><p><span class="deltaxml-new" style="background:#90EE90">In the case of a multipart response, the same rules apply when constructing a </span><a href="#cv.body"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:body</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element for each body part encountered.</span></p><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">Given the above description, any content identified as </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">text/html</span></code><span class="deltaxml-new" style="background:#90EE90"> will be encoded as (escaped) text or base64-encoded in the </span><a href="#cv.body"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:body</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element, as HTML isn't always well-formed XML. A user can attempt to convert such content into XML using the </span><a href="#c.unescape-markup"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:unescape-markup</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step.</span></p></div></section><section id="example-http-request" class="section"><div class="section-titlepage"><h5><span class="deltaxml-new" style="background:#90EE90">7.1.10.5 HTTP Request Example</span></h5></div><p><span class="deltaxml-new" style="background:#90EE90">A simple form might be posted as follows:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:request method="POST" href="http://www.example.com/form-action" xmlns:c="http://www.w3.org/ns/xproc-step"&gt; &lt;c:body content-type="application/x-www-form-urlencoded"&gt; name=W3C&amp;amp;spec=XProc &lt;/c:body&gt; &lt;/c:request&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">and if the response was an XHTML document, the result document would be:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:response status="200" xmlns:c="http://www.w3.org/ns/xproc-step"&gt; &lt;c:header name="Date" value=" Wed, 09 May 2007 23:12:24 GMT"/&gt; &lt;c:header name="Server" value="Apache/1.3.37 (Unix) PHP/4.4.5"/&gt; &lt;c:header name="Vary" value="negotiate,accept"/&gt; &lt;c:header name="TCN" value="choice"/&gt; &lt;c:header name="P3P" value="policyref='http://www.w3.org/2001/05/P3P/p3p.xml'"/&gt; &lt;c:header name="Cache-Control" value="max-age=600"/&gt; &lt;c:header name="Expires" value="Wed, 09 May 2007 23:22:24 GMT"/&gt; &lt;c:header name="Last-Modified" value="Tue, 08 May 2007 16:10:49 GMT"/&gt; &lt;c:header name="ETag" value="'4640a109;42380ddc'"/&gt; &lt;c:header name="Accept-Ranges" value="bytes"/&gt; &lt;c:header name="Keep-Alive" value="timeout=2, max=100"/&gt; &lt;c:header name="Connection" value="Keep-Alive"/&gt; &lt;c:body content-type="application/xhtml+xml"&gt; &lt;html xmlns="http://www.w3.org/1999/xhtml"&gt; &lt;head&gt;&lt;title&gt;OK&lt;/title&gt;&lt;/head&gt; &lt;body&gt;&lt;p&gt;OK!&lt;/p&gt;&lt;/body&gt; &lt;/html&gt; &lt;/c:body&gt; &lt;/c:response&gt;</span></code></pre></section></section><section id="c.identity" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.11 p:identity</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:identity</span></code><span class="deltaxml-new" style="background:#90EE90"> step makes a verbatim copy of its input available on its output.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:identity</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">If the implementation supports passing PSVI annotations between steps, the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:identity</span></code><span class="deltaxml-new" style="background:#90EE90"> step </span><span class="rfc2119" id="c.identity.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> preserve any annotations that appear in the input.</span></p></section><section id="c.insert" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.12 p:insert</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:insert</span></code><span class="deltaxml-new" style="background:#90EE90"> step inserts the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">insertion</span></code><span class="deltaxml-new" style="background:#90EE90"> port's document into the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port's document relative to the matching elements in the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port's document.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:insert</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">insertion</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'/*'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                        </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">position</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                   </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">"first-child" | "last-child" | "before" | "after"</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.insert.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an XSLTMatchPattern. </span><a name="err.inline.C0023.2"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0023"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0023</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if that pattern matches anything other than element, text, processing-instruction, or comment nodes. Multiple matches are allowed, in which case multiple copies of the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">insertion</span></code><span class="deltaxml-new" style="background:#90EE90"> documents will occur. If no elements match, then the document is unchanged.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">position</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.insert.5.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an NMTOKEN in the following list: </span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">“</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">first-child</span></code><span class="deltaxml-new" style="background:#90EE90">” - the insertion is made as the first child of the match;</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">“</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">last-child</span></code><span class="deltaxml-new" style="background:#90EE90">” - the insertion is made as the last child of the match;</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">“</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">before</span></code><span class="deltaxml-new" style="background:#90EE90">” - the insertion is made as the immediate preceding sibling of the match;</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">“</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">after</span></code><span class="deltaxml-new" style="background:#90EE90">” - the insertion is made as the immediate following sibling of the match.</span></p></li></ul></div><p><a name="err.inline.C0025"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0025"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0025</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the match pattern matches anything other than an element node and the value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">position</span></code><span class="deltaxml-new" style="background:#90EE90"> option is “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">first-child</span></code><span class="deltaxml-new" style="background:#90EE90">” or “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">last-child</span></code><span class="deltaxml-new" style="background:#90EE90">”.</span></p><p><span class="deltaxml-new" style="background:#90EE90">As the inserted elements are part of the output of the step they are not considered in determining matching elements. If an empty sequence appears on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">insertion</span></code><span class="deltaxml-new" style="background:#90EE90"> port, the result will be the same as the source.</span></p></section><section id="c.label-elements" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.13 p:label-elements</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:label-elements</span></code><span class="deltaxml-new" style="background:#90EE90"> step generates a label for each matched element and stores that label in the specified attribute.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:label-elements</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">attribute</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'xml:id'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">attribute-prefix</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                           </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">NCName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">attribute-namespace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                        </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">label</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'concat("_",$p:index)'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'*'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">replace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">attribute</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.label-elements.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">QName</span></code><span class="deltaxml-new" style="background:#90EE90">. If the lexical value does not contain a colon, then the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">attribute-namespace</span></code><span class="deltaxml-new" style="background:#90EE90"> may be used to specify the namespace of the attribute name. In that case, the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">attribute-prefix</span></code><span class="deltaxml-new" style="background:#90EE90"> may be specified to suggest a prefix for the attribute name. </span><a name="err.inline.D0034.3"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0034"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0034</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to specify a new namespace or prefix if the lexical value of the specified name contains a colon. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">label</span></code><span class="deltaxml-new" style="background:#90EE90"> option is an XPath expression used to generate the value of the attribute label.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.label-elements.6.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an XSLTMatchPattern. </span><a name="err.inline.C0023.3"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0023"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0023</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if that expression matches anything other than element nodes.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">replace</span></code><span class="rfc2119" id="c.label-elements.7.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a boolean value and is used to indicate whether existing attribute values are replaced.</span></p><p><span class="deltaxml-new" style="background:#90EE90">This step operates by generating attribute labels for each element matched. For every matched element, the expression is evaluated with the context node set to the matched element. An attribute is added to the matched element using the attribute name is specified the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">attribute</span></code><span class="deltaxml-new" style="background:#90EE90"> option and the string value of result of evaluating the expression. If the attribute already exists on the matched element, the value is replaced with the string value only if the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">replace</span></code><span class="deltaxml-new" style="background:#90EE90"> option has the value of </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If this step is used to add or change the value of an attribute named “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xml:base</span></code><span class="deltaxml-new" style="background:#90EE90">”, the base URI of the element </span><span class="rfc2119" id="c.label-elements.9.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> also be amended accordingly.</span></p><p><span class="deltaxml-new" style="background:#90EE90">An implementation must bind the variable “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">p:index</span></code><span class="deltaxml-new" style="background:#90EE90">” in the static context of each evaluation of the XPath expression to the position of the element in the sequence of matched elements. In other words, the first element (in document order) matched gets the value “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">1</span></code><span class="deltaxml-new" style="background:#90EE90">”, the second gets the value “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">2</span></code><span class="deltaxml-new" style="background:#90EE90">”, the third, “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">3</span></code><span class="deltaxml-new" style="background:#90EE90">”, etc.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The result of the p:label-elements step is the input document with the attribute labels associated with matched elements. All other non-matching content remains the same.</span></p></section><section id="c.load" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.14 p:load</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:load</span></code><span class="deltaxml-new" style="background:#90EE90"> step has no inputs but produces as its result an XML resource specified by an IRI.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:load</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">href</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">dtd-validate</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">              </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">href</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.load.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></code><span class="deltaxml-new" style="background:#90EE90">. It is interpreted as an IRI reference. If it is relative, it is made absolute against the base URI of the element on which it is specified (</span><a href="#p.with-option"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:load</span></code><span class="deltaxml-new" style="background:#90EE90"> in the case of a </span><a href="#option-shortcut"><span class="deltaxml-new" style="background:#90EE90">syntactic shortcut</span></a><span class="deltaxml-new" style="background:#90EE90"> value).</span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">dtd-validate</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.load.5.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a boolean.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:load</span></code><span class="deltaxml-new" style="background:#90EE90"> step is the same as </span><a href="#p.document"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:document</span></code></a><span class="deltaxml-new" style="background:#90EE90"> with two additions:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-new" style="background:#90EE90">The URI to be accessed can be constructed dynamically by the pipeline.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:load</span></code><span class="deltaxml-new" style="background:#90EE90"> step has an option to invoke DTD validation. </span></p></li></ol></div><p><span class="deltaxml-new" style="background:#90EE90">When </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">dtd-validate</span></code><span class="deltaxml-new" style="background:#90EE90"> is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:load</span></code><span class="deltaxml-new" style="background:#90EE90"> processing is the same as </span><a href="#p.document"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:document</span></code></a><span class="deltaxml-new" style="background:#90EE90"> processing on the computed </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">href</span></code><span class="deltaxml-new" style="background:#90EE90"> value.</span></p><p><span class="deltaxml-new" style="background:#90EE90">When </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">dtd-validate</span></code><span class="deltaxml-new" style="background:#90EE90"> is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:load</span></code><span class="deltaxml-new" style="background:#90EE90"> processing is the same as </span><a href="#p.document"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:document</span></code></a><span class="deltaxml-new" style="background:#90EE90"> processing on the computed </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">href</span></code><span class="deltaxml-new" style="background:#90EE90"> value but </span><span class="rfc2119" id="c.load.9.6"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> use a validating parser. </span><a name="err.inline.C0027"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0027"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0027</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the document is not valid or the step doesn't support DTD validation. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The retrieved document is produced on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> port. The base URI of the result is the (absolute) IRI used to retrieve it.</span></p></section><section id="c.make-absolute-uris" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.15 p:make-absolute-uris</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:make-absolute-uris</span></code><span class="deltaxml-new" style="background:#90EE90"> step makes an element or attribute's value in the source document an absolute IRI value in the result document.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:make-absolute-uris</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">base-uri</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                   </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.make-absolute-uris.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an XSLTMatchPattern. </span><a name="err.inline.C0023.4"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0023"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0023</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the pattern matches anything other than element or attribute nodes.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">base-uri</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.make-absolute-uris.5.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></code><span class="deltaxml-new" style="background:#90EE90">. It is interpreted as an IRI reference. If it is relative, it is made absolute against the base URI of the element on which it is specified (</span><a href="#p.with-option"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:make-absolute-uris</span></code><span class="deltaxml-new" style="background:#90EE90"> in the case of a </span><a href="#option-shortcut"><span class="deltaxml-new" style="background:#90EE90">syntactic shortcut</span></a><span class="deltaxml-new" style="background:#90EE90"> value).</span></p><p><span class="deltaxml-new" style="background:#90EE90">For every element or attribute in the input document which matches the specified pattern, its XPath string-value is resolved against the specified base URI and the resulting absolute IRI is used as the matched node's entire contents in the output.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The base URI used for resolution defaults to the matched attribute's element or the matched element's base URI unless the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">base-uri</span></code><span class="deltaxml-new" style="background:#90EE90"> option is specified. When the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">base-uri</span></code><span class="deltaxml-new" style="background:#90EE90"> option is specified, the option value is used as the base URI regardless of any contextual base URI value in the document. This option value is resolved against the base URI of the </span><a href="#p.option"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:option</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element used to set the option.</span></p><p><a name="impl-46"></a><span class="deltaxml-new" style="background:#90EE90">If the IRI reference specified by the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">base-uri</span></code><span class="deltaxml-new" style="background:#90EE90"> option on </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:make-absolute-uris</span></code><span class="deltaxml-new" style="background:#90EE90"> is not valid, or if it is absent and the input document has no base URI, the results are </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p></section><section id="c.namespace-rename" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.16 p:namespace-rename</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:namespace-rename</span></code><span class="deltaxml-new" style="background:#90EE90"> step renames any namespace declaration or use of a namespace in a document to a new IRI value.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:namespace-rename</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">from</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">to</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">apply-to</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'all'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">"all" | "elements" | "attributes"</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">from</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.namespace-rename.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></code><span class="deltaxml-new" style="background:#90EE90">. It </span><span class="rfc2119" id="c.namespace-rename.4.4"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> be either empty or absolute, but will not be resolved in any case.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">to</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.namespace-rename.5.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></code><span class="deltaxml-new" style="background:#90EE90">. It </span><span class="rfc2119" id="c.namespace-rename.5.4"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> be empty or absolute, but will not be resolved in any case.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">apply-to</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.namespace-rename.6.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be one of “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">all</span></code><span class="deltaxml-new" style="background:#90EE90">”, “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">elements</span></code><span class="deltaxml-new" style="background:#90EE90">”, or “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">attributes</span></code><span class="deltaxml-new" style="background:#90EE90">”. If the value is “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">elements</span></code><span class="deltaxml-new" style="background:#90EE90">”, only elements will be renamed, if the value is “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">attributes</span></code><span class="deltaxml-new" style="background:#90EE90">”, only attributes will be renamed, if the value is “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">all</span></code><span class="deltaxml-new" style="background:#90EE90">”, both elements and attributes will be renamed.</span></p><p><a name="err.inline.C0014"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0014"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0014</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the XML namespace (</span><code class="uri"><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/XML/1998/namespace</span></code><span class="deltaxml-new" style="background:#90EE90">) or the XMLNS namespace (</span><code class="uri"><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/2000/xmlns/</span></code><span class="deltaxml-new" style="background:#90EE90">) is the value of either the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">from</span></code><span class="deltaxml-new" style="background:#90EE90"> option or the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">to</span></code><span class="deltaxml-new" style="background:#90EE90"> option.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">from</span></code><span class="deltaxml-new" style="background:#90EE90"> option is the same as the value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">to</span></code><span class="deltaxml-new" style="background:#90EE90"> option, the input is reproduced unchanged on the output. Otherwise, namespace bindings, namespace attributes and element and attribute names are changed as follows:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">Namespace bindings: If the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">from</span></code><span class="deltaxml-new" style="background:#90EE90"> option is present and its value is not the empty string, then every binding of a prefix (or the default namespace) in the input document whose value is the same as the value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">from</span></code><span class="deltaxml-new" style="background:#90EE90"> option is</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">replaced in the output with a binding to the value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">to</span></code><span class="deltaxml-new" style="background:#90EE90"> option, provided it is present and not the empty string;</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">otherwise (the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">to</span></code><span class="deltaxml-new" style="background:#90EE90"> option is not specified or has an empty string as its value) absent from the output.</span></p></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">from</span></code><span class="deltaxml-new" style="background:#90EE90"> option is absent, or its value is the empty string, then no bindings are changed or removed.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Elements and attributes: If the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">from</span></code><span class="deltaxml-new" style="background:#90EE90"> option is present and its value is not the empty string, for every element and attribute, as appropriate, in the input whose namespace name is the same as the value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">from</span></code><span class="deltaxml-new" style="background:#90EE90"> option, in the output its namespace name is</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">replaced with the value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">to</span></code><span class="deltaxml-new" style="background:#90EE90"> option, provided it is present and not the empty string;</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">otherwise (the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">to</span></code><span class="deltaxml-new" style="background:#90EE90"> option is not specified or has an empty string as its value) changed to have no value.</span></p></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">from</span></code><span class="deltaxml-new" style="background:#90EE90"> option is absent, or its value is the empty string, then for every element and attribute, as appropriate, whose namespace name has no value, in the output its namespace name is set to the value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">to</span></code><span class="deltaxml-new" style="background:#90EE90"> option.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Namespace attributes: If the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">from</span></code><span class="deltaxml-new" style="background:#90EE90"> option is present and its value is not the empty string, for every namespace attribute in the input whose value is the same as the value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">from</span></code><span class="deltaxml-new" style="background:#90EE90"> option, in the output</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">the namespace attribute's value is replaced with the value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">to</span></code><span class="deltaxml-new" style="background:#90EE90"> option, provided it is present and not the empty string;</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">otherwise (the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">to</span></code><span class="deltaxml-new" style="background:#90EE90"> option is not specified or has an empty string as its value) the namespace attribute is absent.</span></p></li></ul></div></li></ul></div><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">apply-to</span></code><span class="deltaxml-new" style="background:#90EE90"> option is primarily intended to make it possible to avoid renaming attributes when the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">from</span></code><span class="deltaxml-new" style="background:#90EE90"> option specifies no namespace, since many attributes are in no namespace.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Care should be taken when specifying no namespace with the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">to</span></code><span class="deltaxml-new" style="background:#90EE90"> option. Prefixed names in content, for example QNames and XPath expressions, may end up with no appropriate namespace binding.</span></p></div></section><section id="c.pack" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.17 p:pack</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:pack</span></code><span class="deltaxml-new" style="background:#90EE90"> step merges two document sequences in a pair-wise fashion.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:pack</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">alternate</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrapper-prefix</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">NCName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrapper-namespace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                          </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.pack.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">QName</span></code><span class="deltaxml-new" style="background:#90EE90">. If the lexical value does not contain a colon, then the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">wrapper-namespace</span></code><span class="deltaxml-new" style="background:#90EE90"> may be used to specify the namespace of the wrapper. In that case, the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">wrapper-prefix</span></code><span class="deltaxml-new" style="background:#90EE90"> may be specified to suggest a prefix for the wrapper element. </span><a name="err.inline.D0034.4"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0034"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0034</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to specify a new namespace or prefix if the lexical value of the specified name contains a colon.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The step takes each pair of documents, in order, one from the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port and one from the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">alternate</span></code><span class="deltaxml-new" style="background:#90EE90"> port, wraps them with a new element node whose QName is the value specified in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></code><span class="deltaxml-new" style="background:#90EE90"> option, and writes that element to the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> port as a document.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the step reaches the end of one input sequence before the other, then it simply wraps each of the remaining documents in the longer sequence.</span></p><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">In the common case, where the document element of a document in the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> sequence has two element children, any comments, processing instructions, or white space text nodes that occur between them may have come from either of the input documents; this step does not attempt to distinguish which one.</span></p></div></section><section id="c.parameters" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.18 p:parameters</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:parameters</span></code><span class="deltaxml-new" style="background:#90EE90"> step exposes a set of parameters as a </span><a href="#cv.param-set"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param-set</span></code></a><span class="deltaxml-new" style="background:#90EE90"> document.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr kind-attr"><span class="deltaxml-new" style="background:#90EE90">kind</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value kind-value"><span class="deltaxml-new" style="background:#90EE90">parameter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">Each parameter passed to the step is converted into a </span><a href="#cv.param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element. The step resolves duplicate parameters in the normal way (see </span><a href="#parameter-inputs" title="Parameter Inputs"><span class="deltaxml-new" style="background:#90EE90">Section 5.1.2, “Parameter Inputs”</span></a><span class="deltaxml-new" style="background:#90EE90">) so at most one parameter with any given name will appear in the result. The resulting </span><a href="#cv.param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements are wrapped in a </span><a href="#cv.param-set"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param-set</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and the parameter set document is written to the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> port. </span><a name="impl-47"></a><span class="deltaxml-new" style="background:#90EE90">The order in which </span><a href="#cv.param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements occur in the </span><a href="#cv.param-set"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param-set</span></code></a><span class="deltaxml-new" style="background:#90EE90"> is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">For consistency and user convenience, if any of the parameters have names that are in a namespace, the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">namespace</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute on the </span><a href="#cv.param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element </span><span class="rfc2119" id="c.parameters.5.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be used. Each </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">name</span></code><span class="rfc2119" id="c.parameters.5.5"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an NCName.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The base URI of the output document is the URI of the pipeline document that contains the step.</span></p><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">Since the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><span class="deltaxml-new" style="background:#90EE90"> port is </span><em><span class="deltaxml-new" style="background:#90EE90">not</span></em><span class="deltaxml-new" style="background:#90EE90"> primary, any explicit </span><a href="#p.with-param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> settings </span><span class="rfc2119" id="c.parameters.7.2.4"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> include a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">port</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute, per the last paragraph of </span><a href="#p.with-param" title="p:with-param"><span class="deltaxml-new" style="background:#90EE90">Section 5.7.4, “p:with-param”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div></section><section id="c.rename" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.19 p:rename</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:rename</span></code><span class="deltaxml-new" style="background:#90EE90"> step renames elements, attributes, or processing-instruction targets in a document.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:rename</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">new-name</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                   </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">new-prefix</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                 </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">NCName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">new-namespace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                              </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option must be an XSLTMatchPattern. </span><a name="err.inline.C0023.5"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0023"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0023</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the pattern matches anything other than element, attribute or processing instruction nodes.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">new-name</span></code><span class="deltaxml-new" style="background:#90EE90"> option must be a </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">QName</span></code><span class="deltaxml-new" style="background:#90EE90">. If the lexical value does not contain a colon, then the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">new-namespace</span></code><span class="deltaxml-new" style="background:#90EE90"> may be used to specify the namespace of the new name. In that case, the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">new-prefix</span></code><span class="deltaxml-new" style="background:#90EE90"> may be specified to suggest a prefix for the new name. </span><a name="err.inline.D0034.5"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0034"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0034</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to specify a new namespace or prefix if the lexical value of the specified name contains a colon. </span></p><p><span class="deltaxml-new" style="background:#90EE90">Each element, attribute, or processing-instruction in the input matched by the match pattern specified in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option is renamed in the output to the name specified by the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">new-name</span></code><span class="deltaxml-new" style="background:#90EE90"> option.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option matches an attribute and if the element on which it occurs already has an attribute whose expanded name is the same as the expanded name of the specified </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">new-name</span></code><span class="deltaxml-new" style="background:#90EE90">, then the results is as if the current attribute named “</span><em class="replaceable"><code><span class="deltaxml-new" style="background:#90EE90">new-name</span></code></em><span class="deltaxml-new" style="background:#90EE90">” was deleted before renaming the matched attribute.</span></p><p><span class="deltaxml-new" style="background:#90EE90">With respect to attributes named “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xml:base</span></code><span class="deltaxml-new" style="background:#90EE90">”, the following semantics apply: renaming an </span><em><span class="deltaxml-new" style="background:#90EE90">from</span></em><span class="deltaxml-new" style="background:#90EE90"> “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xml:base</span></code><span class="deltaxml-new" style="background:#90EE90">” </span><em><span class="deltaxml-new" style="background:#90EE90">to</span></em><span class="deltaxml-new" style="background:#90EE90"> something else has no effect on the underlying base URI of the element; however, if an attribute is renamed </span><em><span class="deltaxml-new" style="background:#90EE90">from</span></em><span class="deltaxml-new" style="background:#90EE90"> something else </span><em><span class="deltaxml-new" style="background:#90EE90">to</span></em><span class="deltaxml-new" style="background:#90EE90"> “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xml:base</span></code><span class="deltaxml-new" style="background:#90EE90">”, the base URI of the element </span><span class="rfc2119" id="c.rename.8.8"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> also be amended accordingly.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the pattern matches processing instructions, then it is the processing instruction target that is renamed. </span><a name="err.inline.C0013"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0013"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0013</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the pattern matches a processing instruction and the new name has a non-null namespace. </span></p></section><section id="c.replace" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.20 p:replace</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:replace</span></code><span class="deltaxml-new" style="background:#90EE90"> step replaces matching nodes in its primary input with the document element of the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">replacement</span></code><span class="deltaxml-new" style="background:#90EE90"> port's document.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:replace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">replacement</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.replace.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an XSLTMatchPattern. </span><a name="err.inline.C0023.6"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0023"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0023</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if that pattern matches anything other than element, text, processing-instruction, or comment nodes. Multiple matches are allowed, in which case multiple copies of the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">replacement</span></code><span class="deltaxml-new" style="background:#90EE90"> document will occur.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Every node in the primary input matching the specified pattern is replaced in the output is replaced by the document element of the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">replacement</span></code><span class="deltaxml-new" style="background:#90EE90"> document. Only non-nested matches are replaced. That is, once a node is replaced, its descendants cannot be matched.</span></p></section><section id="c.set-attributes" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.21 p:set-attributes</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:set-attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> step sets attributes on matching elements.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:set-attributes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">attributes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.set-attributes.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an XSLTMatchPattern. </span><a name="err.inline.C0023.7"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0023"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0023</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if that pattern matches anything other than element nodes.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Each attribute on the document element of the document that appears on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> port is copied to each element that matches the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> expression.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If an attribute with the same name as one of the attributes to be copied already exists, the value specified on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">attribute</span></code><span class="deltaxml-new" style="background:#90EE90"> port's document is used. The result port of this step produces a copy of the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port's document with the matching elements' attributes modified.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The matching elements are specified by the match pattern in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option. All matching elements are processed. If no elements match, the step will not change any elements.</span></p><p><span class="deltaxml-new" style="background:#90EE90">This step must not copy namespace declarations. If the attributes copied from the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> use namespaces, prefixes, or prefixes bound to different namespaces, the document produced on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> output port will require </span><a href="#namespace-fixup"><span class="deltaxml-new" style="background:#90EE90">namespace fixup</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If an attribute named </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xml:base</span></code><span class="deltaxml-new" style="background:#90EE90"> is added or changed, the base URI of the element </span><span class="rfc2119" id="c.set-attributes.9.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> also be amended accordingly.</span></p></section><section id="c.sink" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.22 p:sink</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:sink</span></code><span class="deltaxml-new" style="background:#90EE90"> step accepts a sequence of documents and discards them. It has no output.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:sink</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></section><section id="c.split-sequence" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.23 p:split-sequence</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:split-sequence</span></code><span class="deltaxml-new" style="background:#90EE90"> step accepts a sequence of documents and divides it into two sequences.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:split-sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">matched</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">not-matched</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">initial-only</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">              </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">test</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">test</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.split-sequence.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an XPathExpression.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The XPath expression in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">test</span></code><span class="deltaxml-new" style="background:#90EE90"> option is applied to each document in the input sequence. If the effective boolean value of the expression is true, the document is copied to the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">matched</span></code><span class="deltaxml-new" style="background:#90EE90"> port; otherwise it is copied to the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">not-matched</span></code><span class="deltaxml-new" style="background:#90EE90"> port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">initial-only</span></code><span class="deltaxml-new" style="background:#90EE90"> option is true, then when the first document that does not satisfy the test expression is encountered, it </span><em><span class="deltaxml-new" style="background:#90EE90">and all the documents that follow it</span></em><span class="deltaxml-new" style="background:#90EE90"> are written to the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">not-matched</span></code><span class="deltaxml-new" style="background:#90EE90"> port. In other words, it only writes the initial series of matched documents (which may be empty) to the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">matched</span></code><span class="deltaxml-new" style="background:#90EE90"> port. All other documents are written to the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">not-matched</span></code><span class="deltaxml-new" style="background:#90EE90"> port, irrespective of whether or not they match.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><a href="#xpath-context"><span class="deltaxml-new" style="background:#90EE90">XPath context</span></a><span class="deltaxml-new" style="background:#90EE90"> for the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">test</span></code><span class="deltaxml-new" style="background:#90EE90"> option changes over time. For each document that appears on the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port, the expression is evaluated with that document as the context document. The context position (</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">position()</span></code><span class="deltaxml-new" style="background:#90EE90">) is the position of that document within the sequence and the context size (</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">last()</span></code><span class="deltaxml-new" style="background:#90EE90">) is the total number of documents in the sequence.</span></p><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">In principle, this component cannot stream because it must buffer all of the input sequence in order to find the context size. In practice, if the test expression does not use the </span><code class="function"><span class="deltaxml-new" style="background:#90EE90">last()</span></code><span class="deltaxml-new" style="background:#90EE90"> function, the implementation can stream and ignore the context size.</span></p></div><p><span class="deltaxml-new" style="background:#90EE90">If the implementation supports passing PSVI annotations between steps, the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:split-sequence</span></code><span class="deltaxml-new" style="background:#90EE90"> step </span><span class="rfc2119" id="c.split-sequence.9.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> preserve any annotations that appear in the input.</span></p></section><section id="c.store" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.24 p:store</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:store</span></code><span class="deltaxml-new" style="background:#90EE90"> step stores a serialized version of its input to a URI. This step outputs a reference to the location of the stored document.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:store</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">href</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                            </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">''</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">ListOfQNames</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                   </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">indent</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                 </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">method</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'xml'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'none'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">NormalizationForm</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'omit'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                 </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">"true" | "false" | "omit"</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">version</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'1.0'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                     </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">href</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.store.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></code><span class="deltaxml-new" style="background:#90EE90">. If it is relative, it is made absolute against the base URI of the element on which it is specified (</span><a href="#p.with-option"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:store</span></code><span class="deltaxml-new" style="background:#90EE90"> in the case of a </span><a href="#option-shortcut"><span class="deltaxml-new" style="background:#90EE90">syntactic shortcut</span></a><span class="deltaxml-new" style="background:#90EE90"> value).</span></p><p><span class="deltaxml-new" style="background:#90EE90">The step attempts to store the XML document to the specified URI. </span><a name="err.inline.C0050"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0050"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0050</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the URI scheme is not supported or the step cannot store to the specified location.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The output of this step is a document containing a single </span><a href="#cv.result"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:result</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element whose content is the absolute URI of the document stored by the step.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The standard serialization options are provided to control the serialization of the XML content when it is stored. These options are as specified in </span><a href="#serialization-options" title="Serialization Options"><span class="deltaxml-new" style="background:#90EE90">Section 7.3, “Serialization Options”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></section><section id="c.string-replace" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.25 p:string-replace</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:string-replace</span></code><span class="deltaxml-new" style="background:#90EE90"> step matches nodes in the document provided on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port and replaces them with the string result of evaluating an XPath expression.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:string-replace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">replace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.string-replace.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an XSLTMatchPattern.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">replace</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.string-replace.5.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an XPathExpression.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The matched nodes are specified with the match pattern in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option. For each matching node, the XPath expression provided by the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">replace</span></code><span class="deltaxml-new" style="background:#90EE90"> option is evaluated with the matching node as the XPath context node. The string value of the result is used in the output. Nodes that do not match are copied without change.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the expression given in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option matches an </span><em><span class="deltaxml-new" style="background:#90EE90">attribute</span></em><span class="deltaxml-new" style="background:#90EE90">, the string value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">replace</span></code><span class="deltaxml-new" style="background:#90EE90"> expression is used as the new value of the attribute in the output. If the attribute is named “</span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xml:base</span></code><span class="deltaxml-new" style="background:#90EE90">”, the base URI of the element </span><span class="rfc2119" id="c.string-replace.7.5"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> also be amended accordingly.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the expression matches any other kind of node, the entire node (and </span><em><span class="deltaxml-new" style="background:#90EE90">not</span></em><span class="deltaxml-new" style="background:#90EE90"> just its contents) is replaced by the string value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">replace</span></code><span class="deltaxml-new" style="background:#90EE90"> expression.</span></p></section><section id="c.unescape-markup" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.26 p:unescape-markup</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:unescape-markup</span></code><span class="deltaxml-new" style="background:#90EE90"> step takes the string value of the document element and parses the content as if it was a Unicode character stream containing serialized XML. The output consists of the same document element with children that result from the parse. This is the reverse of the </span><a href="#c.escape-markup"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:escape-markup</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:unescape-markup</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">namespace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                  </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'application/xml'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                   </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">charset</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">namespace</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.unescape-markup.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></code><span class="deltaxml-new" style="background:#90EE90">. It </span><span class="rfc2119" id="c.unescape-markup.4.4"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> be absolute, but will not be resolved.</span></p><p><span class="deltaxml-new" style="background:#90EE90">When the string value is parsed, the original document element is preserved so that the result will be well-formed XML even if the content consists of multiple, sibling elements.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">namespace</span></code><span class="deltaxml-new" style="background:#90EE90"> option specifies a default namespace. Elements that are in no namespace in the unescaped content will be placed into this namespace unless there is an in-scope namespace declaration that specifies a different namespace (or explicitly undeclares the default namespace).</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.unescape-markup.7.2"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> be used to specify an alternate content type for the string value. An implementation </span><span class="rfc2119" id="c.unescape-markup.7.3"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> use a different parser to produce XML content depending on the specified content-type. For example, an implementation might provide an HTML to XHTML parser (e.g. [</span><a href="#tidy"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">HTML Tidy</span></span></a><span class="deltaxml-new" style="background:#90EE90">] or [</span><a href="#tagsoup"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">TagSoup</span></span></a><span class="deltaxml-new" style="background:#90EE90">]) for the content type '</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">text/html</span></code><span class="deltaxml-new" style="background:#90EE90">'.</span></p><p><span class="deltaxml-new" style="background:#90EE90">All implementations </span><span class="rfc2119" id="c.unescape-markup.8.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> support the content type </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">application/xml</span></code><span class="deltaxml-new" style="background:#90EE90">, and must use a standard XML parser for it. </span><a name="err.inline.C0051"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0051"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0051</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the content-type specified is not supported by the implementation. </span><a name="impl-48"></a><span class="deltaxml-new" style="background:#90EE90">Behavior of </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:unescape-markup</span></code><span class="deltaxml-new" style="background:#90EE90"> for </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><span class="deltaxml-new" style="background:#90EE90">s other than </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">application/xml</span></code><span class="deltaxml-new" style="background:#90EE90"> is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> option specifies how the data is encoded. All implementations </span><span class="rfc2119" id="c.unescape-markup.9.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> support the </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">base64</span></code><span class="deltaxml-new" style="background:#90EE90"> encoding (and the absence of an encoding option, which implies that the content is plain Unicode text). </span><a name="err.inline.C0052.1"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0052"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0052</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the encoding specified is not supported by the implementation.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If an </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> is specified, a </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">charset</span></code><span class="deltaxml-new" style="background:#90EE90"> may also be specified. The character set may be specified as a parameter on the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> or via the separate </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">charset</span></code><span class="deltaxml-new" style="background:#90EE90"> option. If it is specified in both places, the value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">charset</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.unescape-markup.10.6"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be used.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the specified </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">base64</span></code><span class="deltaxml-new" style="background:#90EE90">, then the character set </span><span class="rfc2119" id="c.unescape-markup.11.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be specified. </span><a name="err.inline.C0010"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0010"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0010</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if an encoding of </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">base64</span></code><span class="deltaxml-new" style="background:#90EE90"> is specified and the character set is not specified or if the specified character set is not supported by the implementation. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The octet-stream that results from decoding the text </span><span class="rfc2119" id="c.unescape-markup.12.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be interpreted using the character encoding named by the value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">charset</span></code><span class="deltaxml-new" style="background:#90EE90"> option to produce a sequence of Unicode characters to parse.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If no </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> is specified, the character set is ignored, irrespective of where it was specified.</span></p><p><span class="deltaxml-new" style="background:#90EE90">For example, with the 'namespace' option set to the XHTML namespace, the following input:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;description&gt; &amp;lt;p&gt;This is a chunk.&amp;lt;/p&gt; &amp;lt;p&gt;This is a another chunk.&amp;lt;/p&gt; &lt;/description&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">would produce:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;description&gt; &lt;p xmlns="http://www.w3.org/1999/xhtml"&gt;This is a chunk.&lt;/p&gt; &lt;p xmlns="http://www.w3.org/1999/xhtml"&gt;This is a another chunk.&lt;/p&gt; &lt;/description&gt;</span></code></pre></section><section id="c.unwrap" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.27 p:unwrap</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:unwrap</span></code><span class="deltaxml-new" style="background:#90EE90"> step replaces matched elements with their children.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:unwrap</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.unwrap.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an XSLTMatchPattern. </span><a name="err.inline.C0023.8"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0023"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0023</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if that pattern matches anything other than element nodes.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Every element in the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> document that matches the specified </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> pattern is replaced by its children, effectively “unwrapping” the children from their parent. Non-element nodes and unmatched elements are passed through unchanged.</span></p><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">The matching applies to the entire document, not just the “top-most” matches. A pattern of the form </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">h:div</span></code><span class="deltaxml-new" style="background:#90EE90"> will replace </span><em><span class="deltaxml-new" style="background:#90EE90">all</span></em><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">h:div</span></code><span class="deltaxml-new" style="background:#90EE90"> elements, not just the top-most ones.</span></p></div><p><span class="deltaxml-new" style="background:#90EE90">This step produces a single document; if the document element is unwrapped, the result might not be well-formed XML.</span></p></section><section id="c.wrap" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.28 p:wrap</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:wrap</span></code><span class="deltaxml-new" style="background:#90EE90"> step wraps matching nodes in the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> document with a new parent element.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:wrap</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrapper-prefix</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">NCName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrapper-namespace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                          </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">group-adjacent</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.wrap.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">QName</span></code><span class="deltaxml-new" style="background:#90EE90">. If the lexical value does not contain a colon, then the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">wrapper-namespace</span></code><span class="deltaxml-new" style="background:#90EE90"> may be used to specify the namespace of the wrapper. In that case, the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">wrapper-prefix</span></code><span class="deltaxml-new" style="background:#90EE90"> may be specified to suggest a prefix for the wrapper element. </span><a name="err.inline.D0034.6"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0034"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0034</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to specify a new namespace or prefix if the lexical value of the specified name contains a colon.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.wrap.5.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an XSLTMatchPattern. </span><a name="err.inline.C0023.9"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0023"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0023</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the pattern matches anything other than document, element, text, processing instruction, and comment nodes. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">group-adjacent</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.wrap.6.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an XPathExpression.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the node matched is the document node (</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">match="/"</span></code><span class="deltaxml-new" style="background:#90EE90">), the result is a new document where the document element is a new element node whose QName is the value specified in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></code><span class="deltaxml-new" style="background:#90EE90"> option. That new element contains copies of all of the children of the original document node.</span></p><p><span class="deltaxml-new" style="background:#90EE90">When the match pattern does not match the document node, every node that matches the specified </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> pattern is replaced with a new element node whose QName is the value specified in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></code><span class="deltaxml-new" style="background:#90EE90"> option. The content of that new element is a copy of the original, matching node. The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:wrap</span></code><span class="deltaxml-new" style="background:#90EE90"> step performs a "deep" wrapping, the children of the matching node and their descendants are processed and wrappers are added to all matching nodes. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">group-adjacent</span></code><span class="deltaxml-new" style="background:#90EE90"> option can be used to group adjacent matching nodes in a single wrapper element. The specified XPath expression is evaluated for each matching node with that node as the XPath context node. Whenever two or more adjacent matching nodes have the same “group adjacent” value, they are wrapped together in a single wrapper element.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Two matching nodes are considered adjacent if and only if they are siblings and either there are no nodes between them or all intervening, non-matching nodes are whitespace text, comment, or processing instruction nodes.</span></p></section><section id="c.wrap-sequence" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.29 p:wrap-sequence</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:wrap-sequence</span></code><span class="deltaxml-new" style="background:#90EE90"> step accepts a sequence of documents and produces either a single document or a new sequence of documents.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:wrap-sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrapper-prefix</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">NCName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrapper-namespace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                          </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">group-adjacent</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.wrap-sequence.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">QName</span></code><span class="deltaxml-new" style="background:#90EE90">. If the lexical value does not contain a colon, then the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">wrapper-namespace</span></code><span class="deltaxml-new" style="background:#90EE90"> may be used to specify the namespace of the wrapper. In that case, the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">wrapper-prefix</span></code><span class="deltaxml-new" style="background:#90EE90"> may be specified to suggest a prefix for the wrapper element. </span><a name="err.inline.D0034.7"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0034"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0034</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to specify a new namespace or prefix if the lexical value of the specified name contains a colon.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">group-adjacent</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.wrap-sequence.5.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an XPathExpression.</span></p><p><span class="deltaxml-new" style="background:#90EE90">In its simplest form, </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:wrap-sequence</span></code><span class="deltaxml-new" style="background:#90EE90"> takes a sequence of documents and produces a single, new document by placing each document in the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> sequence inside a new document element as sequential siblings. The name of the document element is the value specified in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></code><span class="deltaxml-new" style="background:#90EE90"> option.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">group-adjacent</span></code><span class="deltaxml-new" style="background:#90EE90"> option can be used to group adjacent documents. The </span><a href="#xpath-context"><span class="deltaxml-new" style="background:#90EE90">XPath context</span></a><span class="deltaxml-new" style="background:#90EE90"> for the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">group-adjacent</span></code><span class="deltaxml-new" style="background:#90EE90"> option changes over time. For each document that appears on the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port, the expression is evaluated with that document as the context document. The context position (</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">position()</span></code><span class="deltaxml-new" style="background:#90EE90">) is the position of that document within the sequence and the context size (</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">last()</span></code><span class="deltaxml-new" style="background:#90EE90">) is the total number of documents in the sequence. Whenever two or more sequentially adjacent documents have the same “group adjacent” value, they are wrapped together in a single wrapper element. </span></p></section><section id="c.xinclude" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.30 p:xinclude</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xinclude</span></code><span class="deltaxml-new" style="background:#90EE90"> step applies [</span><a href="#xinclude"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XInclude</span></span></a><span class="deltaxml-new" style="background:#90EE90">] processing to the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> document.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:xinclude</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">fixup-xml-base</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">            </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">fixup-xml-lang</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">            </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">fixup-xml-base</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.xinclude.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a boolean. If it is true, base URI fixup will be performed as per [</span><a href="#xinclude"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XInclude</span></span></a><span class="deltaxml-new" style="background:#90EE90">].</span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">fixup-xml-lang</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.xinclude.5.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a boolean. If it is true, language fixup will be performed as per [</span><a href="#xinclude"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XInclude</span></span></a><span class="deltaxml-new" style="background:#90EE90">].</span></p><p><span class="deltaxml-new" style="background:#90EE90">The included documents are located with the base URI of the input document and are not provided as input to the step.</span></p><p><a name="err.inline.C0029"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0029"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0029</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if an XInclude error occurs during processing. </span></p></section><section id="c.xslt" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.1.31 p:xslt</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xslt</span></code><span class="deltaxml-new" style="background:#90EE90"> step applies an [</span><a href="#xslt10"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XSLT 1.0</span></span></a><span class="deltaxml-new" style="background:#90EE90">] or [</span><a href="#xslt20"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XSLT 2.0</span></span></a><span class="deltaxml-new" style="background:#90EE90">] stylesheet to a document.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:xslt</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">stylesheet</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr kind-attr"><span class="deltaxml-new" style="background:#90EE90">kind</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value kind-value"><span class="deltaxml-new" style="background:#90EE90">parameter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">secondary</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">initial-mode</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                               </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">template-name</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                              </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">output-base-uri</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                            </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">version</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">If present, the value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">initial-mode</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.xslt.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">QName</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If present, the value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">template-name</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.xslt.5.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">QName</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If present, the value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">output-base-uri</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.xslt.6.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></code><span class="deltaxml-new" style="background:#90EE90">. If it is relative, it is made absolute against the base URI of the element on which it is specified (</span><a href="#p.with-option"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xslt</span></code><span class="deltaxml-new" style="background:#90EE90"> in the case of a </span><a href="#option-shortcut"><span class="deltaxml-new" style="background:#90EE90">syntactic shortcut</span></a><span class="deltaxml-new" style="background:#90EE90"> value).</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the step specifies a </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90">, then that version of XSLT </span><span class="rfc2119" id="c.xslt.7.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be used to process the transformation. </span><a name="err.inline.C0038"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0038"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0038</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the specified version of XSLT is not available. If the step does not specify a version, the implementation may use any version it has available and may use any means to determine what version to use, including, but not limited to, examining the version of the stylesheet.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The XSLT stylesheet provided on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">stylesheet</span></code><span class="deltaxml-new" style="background:#90EE90"> port is applied to the document on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port. Any parameters passed on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><span class="deltaxml-new" style="background:#90EE90"> port are used to define top-level stylesheet parameters. The primary result document of the transformation appears on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> port. All other result documents appear on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">secondary</span></code><span class="deltaxml-new" style="background:#90EE90"> port. If XSLT 1.0 is used, an empty sequence of documents </span><span class="rfc2119" id="c.xslt.8.6"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> appear on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">secondary</span></code><span class="deltaxml-new" style="background:#90EE90"> port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If a sequence of documents is provided on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port, the first document is used as the primary input document. The whole sequence is also the default collection. If no documents are provided on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port, the primary input document is undefined and the default collection is empty. </span><a name="err.inline.C0039"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0039"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0039</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if a sequence of documents (including an empty sequence) is provided to an XSLT 1.0 step. </span></p><p><span class="deltaxml-new" style="background:#90EE90">A dynamic error occurs if the XSLT processor signals a fatal error. This includes the case where the transformation terminates due to a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">xsl:message</span></code><span class="deltaxml-new" style="background:#90EE90"> instruction with a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">terminate</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute value of “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">”. </span><a name="impl-49"></a><span class="deltaxml-new" style="background:#90EE90">How XSLT message termination errors are reported to the XProc processor is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The invocation of the transformation is controlled by the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">initial-mode</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">template-name</span></code><span class="deltaxml-new" style="background:#90EE90"> options that set the initial mode and/or named template in the XSLT transformation where processing begins. </span><a name="err.inline.C0056"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0056"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0056</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the specified initial mode or named template cannot be applied to the specified stylesheet. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">output-base-uri</span></code><span class="deltaxml-new" style="background:#90EE90"> option sets the context's output base URI per the XSLT 2.0 specification, otherwise the base URI of the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> document is the base URI of the first document in the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port's sequence. If the value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">output-base-uri</span></code><span class="deltaxml-new" style="background:#90EE90"> option is not absolute, it will be resolved using the base URI of its </span><a href="#p.option"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:option</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element. An XSLT 1.0 step </span><span class="rfc2119" id="c.xslt.12.6"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> use the value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">output-base-uri</span></code><span class="deltaxml-new" style="background:#90EE90"> as the base URI of its output, if the option is specified.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If XSLT 2.0 is used, the outputs of this step </span><span class="rfc2119" id="c.xslt.13.1"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> include PSVI annotations.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The static and initial dynamic contexts of the XSLT processor are the contexts defined in </span><a href="#step-xpath-context-20" title="Step XPath Context"><span class="deltaxml-new" style="background:#90EE90">Section 2.6.2, “Step XPath Context”</span></a><span class="deltaxml-new" style="background:#90EE90"> with the following adjustments.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The dynamic context is augmented as follows:</span></p><div class="variablelist"><dl><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Context item</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The first document that appears on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Variable values</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Any parameters passed on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><span class="deltaxml-new" style="background:#90EE90"> port are available as variable bindings to the XSLT processor.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Function implementations</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The function implementations provided by the XSLT processor.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Default collection</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The sequence of documents provided on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port. </span></p></dd></dl></div></section></section><section id="std-optional" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">7.2 Optional Steps</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">The following steps are optional. If they are supported by a processor, they must conform to the semantics outlined here, but a conformant processor is not required to support all (or any) of these steps.</span></p><section id="c.exec" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.2.1 p:exec</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:exec</span></code><span class="deltaxml-new" style="background:#90EE90"> step runs an external command passing the input that arrives on its </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port as standard input, reading </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> from standard output, and </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">errors</span></code><span class="deltaxml-new" style="background:#90EE90"> from standard error.</span></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:exec</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">errors</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">exit-status</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">command</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">args</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">''</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                           </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">cwd</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                        </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">source-is-xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">              </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">result-is-xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">              </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrap-result-lines</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">errors-is-xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrap-error-lines</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">          </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">path-separator</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">failure-threshold</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                          </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">integer</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">arg-separator</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">' '</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                 </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                            </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">''</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">ListOfQNames</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                   </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">indent</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                 </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">method</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'xml'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'none'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">NormalizationForm</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'omit'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                 </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">"true" | "false" | "omit"</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">version</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'1.0'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                     </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The values of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">command</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">args</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">cwd</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">path-separator</span></code><span class="deltaxml-new" style="background:#90EE90">, and </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">arg-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> options </span><span class="rfc2119" id="c.exec.4.6"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be strings.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The values of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">source-is-xml</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">result-is-xml</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">errors-is-xml</span></code><span class="deltaxml-new" style="background:#90EE90">, and </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">fix-slashes</span></code><span class="deltaxml-new" style="background:#90EE90"> options </span><span class="rfc2119" id="c.exec.5.5"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be boolean.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:exec</span></code><span class="deltaxml-new" style="background:#90EE90"> step executes the command passed on </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">command</span></code><span class="deltaxml-new" style="background:#90EE90"> with the arguments passed on </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">args</span></code><span class="deltaxml-new" style="background:#90EE90">. The processor does not interpolate the values of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">command</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">args</span></code><span class="deltaxml-new" style="background:#90EE90"> (for example, expanding references to environment variables). </span><a name="err.inline.C0033"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0033"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0033</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the command cannot be run. </span></p><p><span class="deltaxml-new" style="background:#90EE90">If </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">cwd</span></code><span class="deltaxml-new" style="background:#90EE90"> is specified, then the current working directory is changed to the value of that option before execution begins. </span><a name="err.inline.C0034"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0034"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0034</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the current working directory cannot be changed to the value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">cwd</span></code><span class="deltaxml-new" style="background:#90EE90"> option. </span><a name="impl-50"></a><span class="deltaxml-new" style="background:#90EE90">If </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">cwd</span></code><span class="deltaxml-new" style="background:#90EE90"> is not specified, the current working directory is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">path-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> option is specified, every occurrence of the character identified as the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">path-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> character that occurs in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">command</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">args</span></code><span class="deltaxml-new" style="background:#90EE90">, or </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">cwd</span></code><span class="deltaxml-new" style="background:#90EE90"> will be replaced by the platform-specific path separator character. </span><a name="err.inline.C0063"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0063"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0063</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">path-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> option is specified and is not exactly one character long. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">args</span></code><span class="deltaxml-new" style="background:#90EE90"> option is a string. In order to support passing more than one argument to a command, the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">args</span></code><span class="deltaxml-new" style="background:#90EE90"> string is broken into a sequence of values. The </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">arg-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> option specifies the character that is used to separate values; by default it is a single space </span><a name="err.inline.C0066"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0066"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0066</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">arg-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> option is specified and is not exactly one character long. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The following examples of </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:exec</span></code><span class="deltaxml-new" style="background:#90EE90"> are equivalent. The first uses the default </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">arg-separator</span></code><span class="deltaxml-new" style="background:#90EE90">:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:exec command="someCommand" args="arg1 arg2 arg3"/&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">The second specifies an alternate separator:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:exec command="someCommand" args="arg1,arg2,arg3" arg-separator=","/&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">If one of the arguments contains a space (e.g., a filename that contains a space), then you must specify an alternate separator.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port is declared to accept a sequence so that it can be empty. If no document appears on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port, then the command receives nothing on standard input. If a document does arrive on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port, it will be passed to the command as its standard input. </span><a name="err.inline.D0006.1"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0006"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0006</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if more than one document appears on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:exec</span></code><span class="deltaxml-new" style="background:#90EE90"> step. If </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">source-is-xml</span></code><span class="deltaxml-new" style="background:#90EE90"> is true, the serialization options are used to convert the input into serialized XML which is passed to the command, otherwise the XPath string-value of the document is passed.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The standard output of the command is read and returned on </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90">; the standard error output is read and returned on </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">errors</span></code><span class="deltaxml-new" style="background:#90EE90">. In order to assure that the result will be an XML document, each of the results will be wrapped in a </span><a href="#cv.result"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:result</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">result-is-xml</span></code><span class="deltaxml-new" style="background:#90EE90"> is true, the standard output of the program is assumed to be XML and will be parsed as a single document. If it is false, the output is assumed </span><em><span class="deltaxml-new" style="background:#90EE90">not</span></em><span class="deltaxml-new" style="background:#90EE90"> to be XML and will be returned as escaped text.</span></p><p id="cv.line"><span class="deltaxml-new" style="background:#90EE90">If </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">wrap-result-lines</span></code><span class="deltaxml-new" style="background:#90EE90"> is true, a </span><a href="#cv.line"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:line</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element will be wrapped around each line of output.</span></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:line&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:line&gt;</span></code></p><p><a name="err.inline.C0035"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0035"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0035</span></code></a><span class="deltaxml-new" style="background:#90EE90">) to specify both </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">result-is-xml</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">wrap-result-lines</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The same rules apply to the standard error output of the program, with the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">errors-is-xml</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">wrap-error-lines</span></code><span class="deltaxml-new" style="background:#90EE90"> options, respectively.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If either of the results are XML, they </span><span class="rfc2119" id="c.exec.22.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be parsed with namespaces enabled and validation turned off, just like </span><a href="#p.document"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:document</span></code></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">exit-status</span></code><span class="deltaxml-new" style="background:#90EE90"> port always returns a single </span><a href="#cv.result"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:result</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element which contains the system exit status that the process returned. </span><a name="impl-51"></a><span class="deltaxml-new" style="background:#90EE90">The specific exit status values returned by a process invoked with </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:exec</span></code><span class="deltaxml-new" style="background:#90EE90"> are </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If a </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">failure-threshold</span></code><span class="deltaxml-new" style="background:#90EE90"> value is supplied, and the exit status is greater than that threshold, then the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:exec</span></code><span class="deltaxml-new" style="background:#90EE90"> step </span><span class="rfc2119" id="c.exec.24.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> fail. </span><a name="err.inline.C0064"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0064"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0064</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the exit code from the command is greater than the specified </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">failure-threshold</span></code><span class="deltaxml-new" style="background:#90EE90"> value. This failure, like any step failure, can be captured with a </span><a href="#p.try"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:try</span></code></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></section><section id="c.hash" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.2.2 p:hash</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:hash</span></code><span class="deltaxml-new" style="background:#90EE90"> step generates a hash, or digital “fingerprint”, for some value and injects it into the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> document.</span></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:hash</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr kind-attr"><span class="deltaxml-new" style="background:#90EE90">kind</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value kind-value"><span class="deltaxml-new" style="background:#90EE90">parameter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">value</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">algorithm</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                  </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">version</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">algorithm</span></code><span class="deltaxml-new" style="background:#90EE90"> option must be a QName. If it does not have a prefix, then it must be one of the following values: “crc”, “md”, or “sha”.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> is not specified, the default version is algorithm-defined. For “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">crc</span></code><span class="deltaxml-new" style="background:#90EE90">” it is 32, for “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">md</span></code><span class="deltaxml-new" style="background:#90EE90">” it is 5, for “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">sha</span></code><span class="deltaxml-new" style="background:#90EE90">” it is 1.</span></p><p><span class="deltaxml-new" style="background:#90EE90">A hash is constructed from the string specified in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">value</span></code><span class="deltaxml-new" style="background:#90EE90"> option using the specified algorithm and version. Implementations </span><span class="rfc2119" id="c.hash.6.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> support [</span><a href="#bib.crc"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">CRC32</span></span></a><span class="deltaxml-new" style="background:#90EE90">], [</span><a href="#rfc1321"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">MD5</span></span></a><span class="deltaxml-new" style="background:#90EE90">], and [</span><a href="#bib.sha"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">SHA1</span></span></a><span class="deltaxml-new" style="background:#90EE90">] hashes. </span><a name="impl-52"></a><span class="deltaxml-new" style="background:#90EE90">It is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90"> what other algorithms are supported. The resulting hash </span><span class="rfc2119" id="c.hash.6.7"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> be returned as a string of hexadecimal characters. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option must be an XSLTMatchPattern.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The hash of the specified value is computed using the algorithm and parameters specified. </span><a name="err.inline.C0036"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0036"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0036</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the requested hash algorithm is not one that the processor understands or if the value or parameters are not appropriate for that algorithm.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The matched nodes are specified with the match pattern in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option. For each matching node, the string value of the computed hash is used in the output (if more than one node matches, the </span><em><span class="deltaxml-new" style="background:#90EE90">same</span></em><span class="deltaxml-new" style="background:#90EE90"> hash value is used in each match). Nodes that do not match are copied without change.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the expression given in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option matches an </span><em><span class="deltaxml-new" style="background:#90EE90">attribute</span></em><span class="deltaxml-new" style="background:#90EE90">, the hash is used as the new value of the attribute in the output. If the attribute is named “</span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xml:base</span></code><span class="deltaxml-new" style="background:#90EE90">”, the base URI of the element </span><span class="rfc2119" id="c.hash.10.4"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> also be amended accordingly.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the expression matches any other kind of node, the entire node (and </span><em><span class="deltaxml-new" style="background:#90EE90">not</span></em><span class="deltaxml-new" style="background:#90EE90"> just its contents) is replaced by the hash.</span></p></section><section id="c.uuid" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.2.3 p:uuid</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:uuid</span></code><span class="deltaxml-new" style="background:#90EE90"> step generates a [</span><a href="#bib.uuid"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">UUID</span></span></a><span class="deltaxml-new" style="background:#90EE90">] and injects it into the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> document.</span></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:uuid</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">version</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">integer</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option must be an XSLTMatchPattern. The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> option must be an integer.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> is specified, that version of UUID must be computed. </span><a name="err.inline.C0060"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0060"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0060</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the processor does not support the specified </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> of the UUID algorithm. </span><a name="impl-53"></a><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> is not specified, the version of UUID computed is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Implementations </span><span class="rfc2119" id="c.uuid.6.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> support version 4 UUIDs. </span><a name="impl-54"></a><span class="deltaxml-new" style="background:#90EE90">Support for other versions of UUID, and the mechanism by which the necessary inputs are made available for computing other versions, is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The matched nodes are specified with the match pattern in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option. For each matching node, the generated UUID is used in the output (if more than one node matches, the </span><em><span class="deltaxml-new" style="background:#90EE90">same</span></em><span class="deltaxml-new" style="background:#90EE90"> UUID is used in each match). Nodes that do not match are copied without change.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the expression given in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option matches an </span><em><span class="deltaxml-new" style="background:#90EE90">attribute</span></em><span class="deltaxml-new" style="background:#90EE90">, the UUID is used as the new value of the attribute in the output. If the attribute is named “</span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xml:base</span></code><span class="deltaxml-new" style="background:#90EE90">”, the base URI of the element </span><span class="rfc2119" id="c.uuid.8.4"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> also be amended accordingly.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the expression matches any other kind of node, the entire node (and </span><em><span class="deltaxml-new" style="background:#90EE90">not</span></em><span class="deltaxml-new" style="background:#90EE90"> just its contents) is replaced by the UUID.</span></p></section><section id="c.validate-with-relax-ng" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.2.4 p:validate-with-relax-ng</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-relax-ng</span></code><span class="deltaxml-new" style="background:#90EE90"> step applies [</span><a href="#iso19757-2"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RELAX NG</span></span></a><span class="deltaxml-new" style="background:#90EE90">] validation to the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> document.</span></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-relax-ng</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">schema</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">dtd-attribute-values</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">dtd-id-idref-warnings</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">               </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The values of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">dtd-attribute-values</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">dtd-id-idref-warnings</span></code><span class="deltaxml-new" style="background:#90EE90"> options </span><span class="rfc2119" id="c.validate-with-relax-ng.4.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be booleans.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the root element of the schema is </span><a href="#p.data"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:data</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or has a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">c:content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute that specifies a text content type or a media type that the implementation recognizes, then the step </span><span class="rfc2119" id="c.validate-with-relax-ng.5.3"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> treat the text node descendants of the element as a [</span><a href="#relaxng-compact-syntax"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RELAX NG Compact Syntax</span></span></a><span class="deltaxml-new" style="background:#90EE90">] document for validation.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">dtd-attribute-values</span></code><span class="deltaxml-new" style="background:#90EE90"> option is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, then the attribute value defaulting conventions of [</span><a href="#relaxng-dtd-compat"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RELAX NG DTD Compatibility</span></span></a><span class="deltaxml-new" style="background:#90EE90">] are also applied.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">dtd-id-idref-warnings</span></code><span class="deltaxml-new" style="background:#90EE90"> option is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, then the validator </span><span class="rfc2119" id="c.validate-with-relax-ng.7.3"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> treat a schema that is incompatible with the ID/IDREF/IDREFs feature of [</span><a href="#relaxng-dtd-compat"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RELAX NG DTD Compatibility</span></span></a><span class="deltaxml-new" style="background:#90EE90">] as if the document was invalid. </span></p><p><a name="err.inline.C0053"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0053"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0053</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><span class="deltaxml-new" style="background:#90EE90"> option is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> and the input document is not valid.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The output from this step is a copy of the input, possibly augmented by application of the [</span><a href="#relaxng-dtd-compat"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RELAX NG DTD Compatibility</span></span></a><span class="deltaxml-new" style="background:#90EE90">]. The output of this step </span><span class="rfc2119" id="c.validate-with-relax-ng.9.2"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> include PSVI annotations.</span></p><p><a name="impl-55"></a><span class="deltaxml-new" style="background:#90EE90">Support for [</span><a href="#relaxng-dtd-compat"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RELAX NG DTD Compatibility</span></span></a><span class="deltaxml-new" style="background:#90EE90">] is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></section><section id="c.validate-with-schematron" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.2.5 p:validate-with-schematron</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-schematron</span></code><span class="deltaxml-new" style="background:#90EE90"> step applies [</span><a href="#iso19757-3"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Schematron</span></span></a><span class="deltaxml-new" style="background:#90EE90">] processing to the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> document.</span></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-schematron</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr kind-attr"><span class="deltaxml-new" style="background:#90EE90">kind</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value kind-value"><span class="deltaxml-new" style="background:#90EE90">parameter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">schema</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">report</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">phase</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'#ALL'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">               </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><a name="err.inline.C0054"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0054"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0054</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><span class="deltaxml-new" style="background:#90EE90"> option is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> and any Schematron assertions fail.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">phase</span></code><span class="deltaxml-new" style="background:#90EE90"> option identifies the Schematron validation phase with which validation begins.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><span class="deltaxml-new" style="background:#90EE90"> port provides name/value pairs which correspond to Schematron external variables.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> output from this step is a copy of the input.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Schematron assertions and reports, if any, </span><span class="rfc2119" id="c.validate-with-schematron.8.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> appear on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">report</span></code><span class="deltaxml-new" style="background:#90EE90"> port. The output </span><span class="rfc2119" id="c.validate-with-schematron.8.3"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> be in </span><em class="citetitle"><span class="deltaxml-new" style="background:#90EE90">Schematron Validation Report Language</span></em><span class="deltaxml-new" style="background:#90EE90"> (SVRL).</span></p><p><span class="deltaxml-new" style="background:#90EE90">The output of this step </span><span class="rfc2119" id="c.validate-with-schematron.9.1"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> include PSVI annotations.</span></p></section><section id="c.validate-with-xml-schema" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.2.6 p:validate-with-xml-schema</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-xml-schema</span></code><span class="deltaxml-new" style="background:#90EE90"> step applies [</span><a href="#xmlschema-1"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">W3C XML Schema: Part 1</span></span></a><span class="deltaxml-new" style="background:#90EE90">] validity assessment to the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> input.</span></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-xml-schema</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">schema</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">use-location-hints</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">        </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">try-namespaces</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">            </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">               </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">mode</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'strict'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                     </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">"strict" | "lax"</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The values of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">use-location-hints</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">try-namespaces</span></code><span class="deltaxml-new" style="background:#90EE90">, and </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><span class="deltaxml-new" style="background:#90EE90"> options </span><span class="rfc2119" id="c.validate-with-xml-schema.4.4"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be boolean.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">mode</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.validate-with-xml-schema.5.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an NMTOKEN whose value is either “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">strict</span></code><span class="deltaxml-new" style="background:#90EE90">” or “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">lax</span></code><span class="deltaxml-new" style="background:#90EE90">”.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Validation is performed against the set of schemas represented by the documents on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">schema</span></code><span class="deltaxml-new" style="background:#90EE90"> port. These schemas must be used in preference to any schema locations provided by schema location hints encountered during schema validation, that is, schema locations supplied for </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">xs:import</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">xsi:schema-location</span></code><span class="deltaxml-new" style="background:#90EE90">, or determined by schema-processor-defined namespace-based strategies, for the namespaces covered by the documents available on the schemas port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">xs:include</span></code><span class="deltaxml-new" style="background:#90EE90"> elements occur within the supplied schema documents, they are treated like any other </span><a href="#external-docs"><span class="deltaxml-new" style="background:#90EE90">external documents</span></a><span class="deltaxml-new" style="background:#90EE90">. </span><a name="impl-56"></a><span class="deltaxml-new" style="background:#90EE90">It is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90"> if the documents supplied on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">schemas</span></code><span class="deltaxml-new" style="background:#90EE90"> port are considered when resolving </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">xs:include</span></code><span class="deltaxml-new" style="background:#90EE90"> elements in the schema documents provided. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">use-location-hints</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">try-namespaces</span></code><span class="deltaxml-new" style="background:#90EE90"> options allow the pipeline author to control how the schema processor should attempt to locate schema documents necessary but not provided on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">schema</span></code><span class="deltaxml-new" style="background:#90EE90"> port. Any schema documents provided on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">schema</span></code><span class="deltaxml-new" style="background:#90EE90"> port </span><span class="rfc2119" id="c.validate-with-xml-schema.8.5"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be used in preference to schema documents located by other means.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">use-location-hints</span></code><span class="deltaxml-new" style="background:#90EE90"> option is “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">”, the processor </span><span class="rfc2119" id="c.validate-with-xml-schema.9.3"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> make use of schema location hints to locate schema documents. If the option is “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">”, the processor </span><span class="rfc2119" id="c.validate-with-xml-schema.9.5"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> ignore any such hints.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">try-namespaces</span></code><span class="deltaxml-new" style="background:#90EE90"> option is “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">”, the processor </span><span class="rfc2119" id="c.validate-with-xml-schema.10.3"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> attempt to dereference the namespace URI to locate schema documents. If the option is “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">”, the processor </span><span class="rfc2119" id="c.validate-with-xml-schema.10.5"><span class="deltaxml-new" style="background:#90EE90">should not</span></span><span class="deltaxml-new" style="background:#90EE90"> dereference namespace URIs.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">mode</span></code><span class="deltaxml-new" style="background:#90EE90"> option allow the pipeline author to control how schema validation begins. The “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">strict</span></code><span class="deltaxml-new" style="background:#90EE90">” mode means that the document element must be declared and schema-valid, otherwise it will be treated as invalid. The “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">lax</span></code><span class="deltaxml-new" style="background:#90EE90">” mode means that the absence of a declaration for the document element does not itself count as an unsuccessful outcome of validation.</span></p><p><a name="err.inline.C0053.1"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0053"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0053</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><span class="deltaxml-new" style="background:#90EE90"> option is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> and the input document is not valid. If the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><span class="deltaxml-new" style="background:#90EE90"> option is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">, it is not an error for the document to be invalid. In this case, if the implementation does not support the PSVI, </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-xml-schema</span></code><span class="deltaxml-new" style="background:#90EE90"> is essentially just an “identity” step, but if the implementation </span><em><span class="deltaxml-new" style="background:#90EE90">does</span></em><span class="deltaxml-new" style="background:#90EE90"> support the PSVI, then the resulting document will have additional type information (at least for the subtrees that are valid).</span></p><p><span class="deltaxml-new" style="background:#90EE90">When XML Schema validation assessment is performed, the processor is invoked in the mode specified by the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">mode</span></code><span class="deltaxml-new" style="background:#90EE90"> option. </span><a name="err.inline.C0055"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0055"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0055</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the implementation does not support the specified mode. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> of the assessment is a document with the Post-Schema-Validation-Infoset (PSVI) ([</span><a href="#xmlschema-1"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">W3C XML Schema: Part 1</span></span></a><span class="deltaxml-new" style="background:#90EE90">]) annotations, if the pipeline implementation supports such annotations. If not, the input document is reproduced with any defaulting of attributes and elements performed as specified by the XML Schema recommendation.</span></p></section><section id="c.www-form-urldecode" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.2.7 p:www-form-urldecode</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:www-form-urldecode</span></code><span class="deltaxml-new" style="background:#90EE90"> step decodes a </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">x-www-form-urlencoded</span></code><span class="deltaxml-new" style="background:#90EE90"> string into a set of parameters.</span></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:www-form-urldecode</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">value</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">value</span></code><span class="deltaxml-new" style="background:#90EE90"> option is interpreted as a string of parameter values encoded using the </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">x-www-form-urlencoded</span></code><span class="deltaxml-new" style="background:#90EE90"> algorithm. It turns each such encoded name/value pair into a parameter. The entire set of parameters is written (as a </span><a href="#cv.param-set"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param-set</span></code></a><span class="deltaxml-new" style="background:#90EE90">) on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> output port.</span></p><p><a name="err.inline.C0037"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0037"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0037</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">value</span></code><span class="deltaxml-new" style="background:#90EE90"> provided is not a properly </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">x-www-form-urlencoded</span></code><span class="deltaxml-new" style="background:#90EE90"> value. </span><a name="err.inline.C0061"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0061"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0061</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the name of any encoded parameter name is not a valid </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">xs:NCName</span></code><span class="deltaxml-new" style="background:#90EE90">. In other words, this step can only decode simple name/value pairs where the names do not contain colons or any characters that cannot be used in XML names. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The order of the </span><a href="#cv.param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements in the result is the same as the order of the encoded parameters, reading from left to right.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If any parameter name occurs more than once in the encoded string, the resulting parameter set will contain a </span><a href="#cv.param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> for each instance. However, only one of these will actually be used if the parameter set is passed to another step on its </span><em class="glossterm"><a href="#dt-parameter-input-port"><span class="deltaxml-new" style="background:#90EE90">parameter input port</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></section><section id="c.www-form-urlencode" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.2.8 p:www-form-urlencode</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:www-form-urlencode</span></code><span class="deltaxml-new" style="background:#90EE90"> step encodes a set of parameter values as a </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">x-www-form-urlencoded</span></code><span class="deltaxml-new" style="background:#90EE90"> string and injects it into the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> document.</span></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:www-form-urlencode</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr kind-attr"><span class="deltaxml-new" style="background:#90EE90">kind</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value kind-value"><span class="deltaxml-new" style="background:#90EE90">parameter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option must be an XSLTMatchPattern.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The set of parameters is encoded as a single </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">x-www-form-urlencoded</span></code><span class="deltaxml-new" style="background:#90EE90"> string of name/value pairs. When parameters are encoded into name/value pairs, </span><em><span class="deltaxml-new" style="background:#90EE90">only</span></em><span class="deltaxml-new" style="background:#90EE90"> the local name of each parameter is used. The namespace name is ignored and no prefix or colon appears in the name. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The parameters are encoded in document order. That is, the first parameter appears first in the resulting string, the second parameter second, etc. reading from left to right.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The matched nodes are specified with the match pattern in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option. For each matching node, the encoded string is used in the output. Nodes that do not match are copied without change.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the expression given in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">match</span></code><span class="deltaxml-new" style="background:#90EE90"> option matches an </span><em><span class="deltaxml-new" style="background:#90EE90">attribute</span></em><span class="deltaxml-new" style="background:#90EE90">, the encoded string is used as the new value of the attribute in the output. If the expression matches any other kind of node, the entire node (and </span><em><span class="deltaxml-new" style="background:#90EE90">not</span></em><span class="deltaxml-new" style="background:#90EE90"> just its contents) is replaced by the encoded string.</span></p></section><section id="c.xquery" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.2.9 p:xquery</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xquery</span></code><span class="deltaxml-new" style="background:#90EE90"> step applies an [</span><a href="#xquery10"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XQuery 1.0</span></span></a><span class="deltaxml-new" style="background:#90EE90">] query to the sequence of documents provided on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port.</span></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:xquery</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">query</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr kind-attr"><span class="deltaxml-new" style="background:#90EE90">kind</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value kind-value"><span class="deltaxml-new" style="background:#90EE90">parameter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">If a sequence of documents is provided on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port, the first document is used as the initial context item. The whole sequence is also the default collection. If no documents are provided on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port, the initial context item is undefined and the default collection is empty.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">query</span></code><span class="deltaxml-new" style="background:#90EE90"> port must receive a single document:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">If the document root element is </span><a href="#cv.query"><code id="cv.query" class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:query</span></code></a><span class="deltaxml-new" style="background:#90EE90">, the text descendants of this element are considered the query.</span></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:query&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:query&gt;</span></code></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">If the document root element is in the XQueryX namespace, the document is treated as an XQueryX-encoded query. </span><a name="impl-57"></a><span class="deltaxml-new" style="background:#90EE90">Support for XQueryX is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">If the document root element is </span><a href="#p.data"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:data</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and either does not have a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute or has a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute that specifies a text content type or a media type that the implementation recognizes, then the text descendants of this element are considered the query.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">If the document root element is not </span><a href="#p.data"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:data</span></code></a><span class="deltaxml-new" style="background:#90EE90"> but has a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">c:content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute that specifies a text content type or a media type that the implementation recognizes, then the text descendants of this element are considered the query.</span></p></li><li><p><a name="impl-58"></a><span class="deltaxml-new" style="background:#90EE90">Otherwise, the interpretation of the query is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">The result of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xquery</span></code><span class="deltaxml-new" style="background:#90EE90"> step must be a sequence of documents. </span><a name="err.inline.C0057"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0057"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0057</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the sequence that results from evaluating the XQuery contains items other than documents and elements. Any elements that appear in the result sequence will be treated as documents with the element as their document element.</span></p><p><span class="deltaxml-new" style="background:#90EE90">For example:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90"> &lt;c:query&gt; declare namespace atom="http://www.w3.org/2005/Atom"; /atom:feed/atom:entry &lt;/c:query&gt; </span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">The output of this step </span><span class="rfc2119" id="c.xquery.10.1"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> include PSVI annotations.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The static context of the XQuery processor is augmented in the following way:</span></p><div class="variablelist"><dl><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Statically known default collection type</span></span></dt><dd><p><code class="literal"><span class="deltaxml-new" style="background:#90EE90">document()*</span></code></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Statically known namespaces:</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Unchanged from the implementation defaults. No namespace declarations in the XProc pipeline are automatically exposed in the static context. </span></p></dd></dl></div><p><span class="deltaxml-new" style="background:#90EE90">The dynamic context of the XQuery processor is augmented in the following way:</span></p><div class="variablelist"><dl><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Context item</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The first document that appears on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Context position</span></span></dt><dd><p><code class="literal"><span class="deltaxml-new" style="background:#90EE90">1</span></code></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Context size</span></span></dt><dd><p><code class="literal"><span class="deltaxml-new" style="background:#90EE90">1</span></code></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Variable values</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Any parameters passed on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><span class="deltaxml-new" style="background:#90EE90"> port augment any implementation-defined variable bindings known to the XQuery processor. The parameter values are passed to the XQuery processor as values of type </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">xs:untypedAtomic</span></code><span class="deltaxml-new" style="background:#90EE90">. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Function implementations</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The function implementations provided by the XQuery processor.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Current dateTime</span></span></dt><dd><p><a name="impl-59"></a><span class="deltaxml-new" style="background:#90EE90">The point in time returned as the current dateTime is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Implicit timezone</span></span></dt><dd><p><a name="impl-60"></a><span class="deltaxml-new" style="background:#90EE90">The implicit timezone is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Available documents</span></span></dt><dd><p><a name="impl-61"></a><span class="deltaxml-new" style="background:#90EE90">The set of available documents (those that may be retrieved with a URI) is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Available collections</span></span></dt><dd><p><a name="impl-62"></a><span class="deltaxml-new" style="background:#90EE90">The set of available collections is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Default collection</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The sequence of documents provided on the </span><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port. </span></p></dd></dl></div><section id="example-xquery" class="section tocsuppress"><div class="section-titlepage"><h5><span class="deltaxml-new" style="background:#90EE90">7.2.9.1 Example</span></h5></div><p><span class="deltaxml-new" style="background:#90EE90">The following pipeline applies XInclude processing and schema validation before using XQuery:</span></p><figure id="ex.c.xquery" class="example-wrapper"><div class="title"><span class="deltaxml-new" style="background:#90EE90">Example 11. A Sample Pipeline Document</span></div><div class="example"><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:pipeline xmlns:p="http://www.w3.org/ns/xproc" version="1.0"&gt; &lt;p:xinclude/&gt; &lt;p:validate-with-xml-schema name="validate"&gt; &lt;p:input port="schema"&gt; &lt;p:document href="http://example.com/path/to/schema.xsd"/&gt; &lt;/p:input&gt; &lt;/p:validate-with-xml-schema&gt; &lt;p:xquery&gt; &lt;p:input port="query"&gt; &lt;p:data href="countp.xq" /&gt; &lt;/p:input&gt; &lt;/p:xquery&gt; &lt;/p:pipeline&gt;</span></code></pre></div></figure><p><span class="deltaxml-new" style="background:#90EE90">Where </span><code class="filename"><span class="deltaxml-new" style="background:#90EE90">countp.xq</span></code><span class="deltaxml-new" style="background:#90EE90"> might contain:</span></p><pre class="programlisting language-markup line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;count&gt;{count(.//p)}&lt;/count&gt;</span></code></pre></section></section><section id="c.xsl-formatter" class="section"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">7.2.10 p:xsl-formatter</span></h4></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xsl-formatter</span></code><span class="deltaxml-new" style="background:#90EE90"> step receives an [</span><a href="#xsl11"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XSL 1.1</span></span></a><span class="deltaxml-new" style="background:#90EE90">] document and renders the content. The result of rendering is stored to the URI provided via the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">href</span></code><span class="deltaxml-new" style="background:#90EE90"> option. A reference to that result is produced on the output port.</span></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:xsl-formatter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr kind-attr"><span class="deltaxml-new" style="background:#90EE90">kind</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value kind-value"><span class="deltaxml-new" style="background:#90EE90">parameter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">href</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                               </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">href</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.xsl-formatter.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></code><span class="deltaxml-new" style="background:#90EE90">. If it is relative, it is made absolute against the base URI of the element on which it is specified (</span><a href="#p.with-option"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></code></a><span class="deltaxml-new" style="background:#90EE90"> or </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xsl-formatter</span></code><span class="deltaxml-new" style="background:#90EE90"> in the case of a </span><a href="#option-shortcut"><span class="deltaxml-new" style="background:#90EE90">syntactic shortcut</span></a><span class="deltaxml-new" style="background:#90EE90"> value).</span></p><p><span class="deltaxml-new" style="background:#90EE90">The content-type of the output is controlled by the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> option. This option specifies a media type as defined by [</span><a href="#media-types"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">IANA Media Types</span></span></a><span class="deltaxml-new" style="background:#90EE90">]. The option may include media type parameters as well (e.g. "application/someformat; charset=UTF-8"). </span><a name="impl-63"></a><span class="deltaxml-new" style="background:#90EE90">The use of media type parameters on the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> option is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><a name="impl-64"></a><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> option is not specified, the output type is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">. The default </span><span class="rfc2119" id="c.xsl-formatter.6.2"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> be PDF.</span></p><p><a name="impl-65"></a><span class="deltaxml-new" style="background:#90EE90">A formatter may take any number of optional rendering parameters via the step's parameters; such parameters are defined by the XSL implementation used and are </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The output of this step is a document containing a single </span><a href="#cv.result"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:result</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element whose content is the absolute URI of the document stored by the step.</span></p></section></section><section id="serialization-options" class="section"><div class="section-titlepage"><h3><span class="deltaxml-new" style="background:#90EE90">7.3 Serialization Options</span></h3></div><p><span class="deltaxml-new" style="background:#90EE90">Several steps in this step library require serialization options to control the serialization of XML. These options are used to control serialization as in the [</span><a href="#xml-serialization"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Serialization</span></span></a><span class="deltaxml-new" style="background:#90EE90">] specification.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The following options may be present on steps that perform serialization:</span></p><div class="variablelist"><dl><dt><span class="term"><code class="option"><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The value of this option </span><span class="rfc2119" id="serialization-options.4.1.2.1.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a boolean. If it's not specified, the default varies by encoding: for UTF-16 it's true, for all others, it's false.</span></p></dd><dt><span class="term"><code class="option"><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The value of this option </span><span class="rfc2119" id="serialization-options.4.2.2.1.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a list of </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">QName</span></code><span class="deltaxml-new" style="background:#90EE90">s. They are interpreted as elements name.</span></p></dd><dt><span class="term"><code class="option"><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The value of this option </span><span class="rfc2119" id="serialization-options.4.3.2.1.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a string. The public identifier of the doctype.</span></p></dd><dt><span class="term"><code class="option"><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The value of this option </span><span class="rfc2119" id="serialization-options.4.4.2.1.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></code><span class="deltaxml-new" style="background:#90EE90">. The system identifier of the doctype. It need not be absolute, and is not resolved.</span></p></dd><dt><span class="term"><code class="option"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">A character set name. </span><a name="impl-66"></a><span class="deltaxml-new" style="background:#90EE90">If no </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> is specified, the encoding used is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">. If the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">method</span></code><span class="deltaxml-new" style="background:#90EE90"> is “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xml</span></code><span class="deltaxml-new" style="background:#90EE90">” or “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xhtml</span></code><span class="deltaxml-new" style="background:#90EE90">”, the implementation defined encoding </span><span class="rfc2119" id="serialization-options.4.5.2.1.1.6"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be either UTF-8 or UTF-16.</span></p></dd><dt><span class="term"><code class="option"><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The value of this option </span><span class="rfc2119" id="serialization-options.4.6.2.1.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a boolean. It is ignored unless the specified method is “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xhtml</span></code><span class="deltaxml-new" style="background:#90EE90">” or “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">html</span></code><span class="deltaxml-new" style="background:#90EE90">”.</span></p></dd><dt><span class="term"><code class="option"><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The value of this option </span><span class="rfc2119" id="serialization-options.4.7.2.1.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a boolean. It is ignored unless the specified method is “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xhtml</span></code><span class="deltaxml-new" style="background:#90EE90">” or “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">html</span></code><span class="deltaxml-new" style="background:#90EE90">”.</span></p></dd><dt><span class="term"><code class="option"><span class="deltaxml-new" style="background:#90EE90">indent</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The value of this option </span><span class="rfc2119" id="serialization-options.4.8.2.1.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a boolean.</span></p></dd><dt><span class="term"><code class="option"><span class="deltaxml-new" style="background:#90EE90">media-type</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The value of this option </span><span class="rfc2119" id="serialization-options.4.9.2.1.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a string. It specifies the media type (MIME content type). If not specified, the default varies according to the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">method</span></code><span class="deltaxml-new" style="background:#90EE90">:</span></p><div class="variablelist"><dl><dt><span class="term"><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xml</span></code></span></dt><dd><p><code class="literal"><span class="deltaxml-new" style="background:#90EE90">application/xml</span></code></p></dd><dt><span class="term"><code class="literal"><span class="deltaxml-new" style="background:#90EE90">html</span></code></span></dt><dd><p><code class="literal"><span class="deltaxml-new" style="background:#90EE90">text/html</span></code></p></dd><dt><span class="term"><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xhtml</span></code></span></dt><dd><p><code class="literal"><span class="deltaxml-new" style="background:#90EE90">application/xhtml+xml</span></code></p></dd><dt><span class="term"><code class="literal"><span class="deltaxml-new" style="background:#90EE90">text</span></code></span></dt><dd><p><code class="literal"><span class="deltaxml-new" style="background:#90EE90">text/plain</span></code></p></dd></dl></div><p><a name="impl-67"></a><span class="deltaxml-new" style="background:#90EE90">For methods other than </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xml</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">html</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xhtml</span></code><span class="deltaxml-new" style="background:#90EE90">, and </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">text</span></code><span class="deltaxml-new" style="background:#90EE90">; the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><span class="deltaxml-new" style="background:#90EE90"> is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p></dd><dt><span class="term"><code class="option"><span class="deltaxml-new" style="background:#90EE90">method</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The value of this option </span><span class="rfc2119" id="serialization-options.4.10.2.1.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">QName</span></code><span class="deltaxml-new" style="background:#90EE90">. It specifies the serialization method.</span></p></dd><dt><span class="term"><code class="option"><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The value of this option </span><span class="rfc2119" id="serialization-options.4.11.2.1.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an NMTOKEN, one of the enumerated values </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">NFC</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">NFD</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">NFKC</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">NFKD</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">fully-normalized</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">none</span></code><span class="deltaxml-new" style="background:#90EE90"> or an implementation-defined value.</span></p></dd><dt><span class="term"><code class="option"><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The value of this option </span><span class="rfc2119" id="serialization-options.4.12.2.1.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a boolean.</span></p></dd><dt><span class="term"><code class="option"><span class="deltaxml-new" style="background:#90EE90">standalone</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The value of this option </span><span class="rfc2119" id="serialization-options.4.13.2.1.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an NMTOKEN, one of the enumerated values </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">, or </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">omit</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt><span class="term"><code class="option"><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The value of this option </span><span class="rfc2119" id="serialization-options.4.14.2.1.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a boolean.</span></p></dd><dt><span class="term"><code class="option"><span class="deltaxml-new" style="background:#90EE90">version</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The value of this option </span><span class="rfc2119" id="serialization-options.4.15.2.1.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a string.</span></p></dd></dl></div><p><span class="deltaxml-new" style="background:#90EE90">In order to be consistent with the rest of this specification, boolean values for the serialization parameters must use one of the XML Schema lexical forms for boolean: "true", "false", "1", or "0". This is different from the [</span><a href="#xml-serialization"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Serialization</span></span></a><span class="deltaxml-new" style="background:#90EE90">] specification which uses “yes” and “no”. No change in semantics is implied by this different spelling.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">method</span></code><span class="deltaxml-new" style="background:#90EE90"> option controls the serialization method used by this component with standard values of 'html', 'xml', 'xhtml', and 'text' but only the 'xml' value is required to be supported. The interpretation of the remaining options is as specified in [</span><a href="#xml-serialization"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Serialization</span></span></a><span class="deltaxml-new" style="background:#90EE90">].</span></p><p><a name="impl-68"></a><span class="deltaxml-new" style="background:#90EE90">Implementations may support other method values but their results are </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p><p><span class="deltaxml-new" style="background:#90EE90">A minimally conforming implementation must support the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">xml</span></code><span class="deltaxml-new" style="background:#90EE90"> output method with the following option values:</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> must support the value </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">1.0</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> must support the values </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">UTF-8</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><span class="deltaxml-new" style="background:#90EE90"> must be supported. If the value is not specified or has the value </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">no</span></code><span class="deltaxml-new" style="background:#90EE90">, an XML declaration must be produced.</span></p></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">All other option values may be ignored for the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">xml</span></code><span class="deltaxml-new" style="background:#90EE90"> output method.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If a processor chooses to implement an option for serialization, it must conform to the semantics defined in the [</span><a href="#xml-serialization"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Serialization</span></span></a><span class="deltaxml-new" style="background:#90EE90">] specification.</span></p><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><p><span class="deltaxml-new" style="background:#90EE90">The use-character-maps parameter in [</span><a href="#xml-serialization"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Serialization</span></span></a><span class="deltaxml-new" style="background:#90EE90">] specification has not been provided in the standard serialization options provided by this specification.</span></p></div></section></section><article id="conformance" class="appendix"><header class="appendix-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">A Conformance</span></h2></header><div class="toc"><h2 id="TableOfContents"><span class="deltaxml-new" style="background:#90EE90">Table of Contents</span></h2><ul class="toc"><li><span><span class="deltaxml-new" style="background:#90EE90">1 </span><a href="#implementation-defined"><span class="deltaxml-new" style="background:#90EE90">Implementation-defined features</span></a></span></li><li><span><span class="deltaxml-new" style="background:#90EE90">2 </span><a href="#implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">Implementation-dependent features</span></a></span></li><li><span><span class="deltaxml-new" style="background:#90EE90">3 </span><a href="#infoset-conformance"><span class="deltaxml-new" style="background:#90EE90">Infoset Conformance</span></a></span></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">Conformant processors </span><span class="rfc2119" id="conformance.2.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> implement all of the features described in this specification except those that are explicitly identified as optional.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Some aspects of processor behavior are not completely specified; those features are either </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></em><span class="deltaxml-new" style="background:#90EE90"> or </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span id="dt-implementation-dependent" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: An </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></em><span class="deltaxml-new" style="background:#90EE90"> feature is one where the implementation has discretion in how it is performed. Implementations are not required to document or explain how </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></em><span class="deltaxml-new" style="background:#90EE90"> features are performed.]</span></span></p><p><span id="dt-implementation-defined" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: An </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></em><span class="deltaxml-new" style="background:#90EE90"> feature is one where the implementation has discretion in how it is performed. Conformant implementations </span><span class="rfc2119" id="dt-implementation-defined.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> document how </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90"> features are performed.]</span></span></p><section id="implementation-defined" class="section"><div class="section-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">1 Implementation-defined features</span></h2></div><p><span class="deltaxml-new" style="background:#90EE90">The following features are implementation-defined:</span></p><ol class="features"><li><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined what additional step types, if any, are provided. See </span><a href="#step-concept" title="Steps"><span class="deltaxml-new" style="background:#90EE90">Section 2.1, “Steps”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">How inputs are connected to XML documents outside the pipeline is implementation-defined. See </span><a href="#input-output" title="Inputs and Outputs"><span class="deltaxml-new" style="background:#90EE90">Section 2.2, “Inputs and Outputs”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">How pipeline outputs are connected to XML documents outside the pipeline is implementation-defined. See </span><a href="#input-output" title="Inputs and Outputs"><span class="deltaxml-new" style="background:#90EE90">Section 2.2, “Inputs and Outputs”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">In Version 1.0 of XProc, how (or if) implementers provide local resolution mechanisms and how (or if) they provide access to intermediate results by URI is implementation-defined. See </span><a href="#external-docs" title="External Documents"><span class="deltaxml-new" style="background:#90EE90">Section 2.2.1, “External Documents”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">Except for cases which are specifically called out in , the extent to which namespace fixup, and other checks for outputs which cannot be serialized, are performed on intermediate outputs is implementation-defined. See </span><a href="#namespace-fixup" title="Namespace Fixup on Outputs"><span class="deltaxml-new" style="background:#90EE90">Section 2.4.1, “Namespace Fixup on Outputs”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The version of Unicode supported is implementation-defined, but it is recommended that the most recent version of Unicode be used. See </span><a href="#xproc-xpath-context-20" title="Processor XPath Context"><span class="deltaxml-new" style="background:#90EE90">Section 2.6.1, “Processor XPath Context”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The point in time returned as the current dateTime is implementation-defined. See </span><a href="#xproc-xpath-context-20" title="Processor XPath Context"><span class="deltaxml-new" style="background:#90EE90">Section 2.6.1, “Processor XPath Context”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The implicit timezone is implementation-defined. See </span><a href="#xproc-xpath-context-20" title="Processor XPath Context"><span class="deltaxml-new" style="background:#90EE90">Section 2.6.1, “Processor XPath Context”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The implicit timezone is implementation-defined. See </span><a href="#step-xpath-context-20" title="Step XPath Context"><span class="deltaxml-new" style="background:#90EE90">Section 2.6.2, “Step XPath Context”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The exact format of the language string is implementation-defined but should be consistent with the xml:lang attribute. See </span><a href="#f.system-property" title="System Properties"><span class="deltaxml-new" style="background:#90EE90">Section 2.7.1, “System Properties”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined if the processor supports any other XPath extension functions. See </span><a href="#other-xpath-extension-functions" title="Other XPath Extension Functions"><span class="deltaxml-new" style="background:#90EE90">Section 2.7.8, “Other XPath Extension Functions”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">Whether or not the pipeline processor supports passing PSVI annotations between steps is implementation-defined. See </span><a href="#psvi-support" title="PSVIs in XProc"><span class="deltaxml-new" style="background:#90EE90">Section 2.8, “PSVIs in XProc”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The exact PSVI properties that are preserved when documents are passed between steps is implementation-defined. See </span><a href="#psvi-support" title="PSVIs in XProc"><span class="deltaxml-new" style="background:#90EE90">Section 2.8, “PSVIs in XProc”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined what PSVI properties, if any, are produced by extension steps. See </span><a href="#psvi-support" title="PSVIs in XProc"><span class="deltaxml-new" style="background:#90EE90">Section 2.8, “PSVIs in XProc”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">How outside values are specified for pipeline options on the pipeline initially invoked by the processor is implementation-defined. See </span><a href="#options" title="Options"><span class="deltaxml-new" style="background:#90EE90">Section 2.10, “Options”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">How outside values are specified for pipeline parameters on the pipeline initially invoked by the processor is implementation-defined. See </span><a href="#parameters" title="Parameters"><span class="deltaxml-new" style="background:#90EE90">Section 2.11, “Parameters”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">Support for pipeline documents written in XML 1.1 and pipeline inputs and outputs that use XML 1.1 is implementation-defined. See </span><a href="#syntax" title="Syntax Overview"><span class="deltaxml-new" style="background:#90EE90">Section 3, “Syntax Overview”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The semantics of p:pipeinfo elements are implementation-defined. See </span><a href="#annotations" title="Processor annotations"><span class="deltaxml-new" style="background:#90EE90">Section 3.7, “Processor annotations”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The set of URI schemes actually supported is implementation-defined. See </span><a href="#common-errors" title="Common errors"><span class="deltaxml-new" style="background:#90EE90">Section 3.11, “Common errors”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The presence of other compound steps is implementation-defined; XProc provides no standard mechanism for defining them or describing what they can contain. See </span><a href="#p.extension" title="Extension Steps"><span class="deltaxml-new" style="background:#90EE90">Section 4.8, “Extension Steps”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">If the href attribute is not specified, the location of the log file or files is implementation-defined. See </span><a href="#p.log" title="p:log"><span class="deltaxml-new" style="background:#90EE90">Section 5.5, “p:log”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">How each document or sequence of documents is represented in a p:log is implementation-defined. See </span><a href="#p.log" title="p:log"><span class="deltaxml-new" style="background:#90EE90">Section 5.5, “p:log”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The default value of any serialization options not specified on a particular p:serialization element is implementation-defined. See </span><a href="#p.serialization" title="p:serialization"><span class="deltaxml-new" style="background:#90EE90">Section 5.6, “p:serialization”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">When a declared step is evaluated directly by the XProc processor (as opposed to occurring as an atomic step in some container), how the input and output ports are connected to documents is implementation-defined. See </span><a href="#p.declare-step" title="p:declare-step"><span class="deltaxml-new" style="background:#90EE90">Section 5.8, “p:declare-step”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The subpipeline may include declarations of additional steps (e.g., other pipelines or other step types that are provided by a particular implementation or in some implementation-defined way) and import other pipelines. See </span><a href="#declare-pipelines" title="Declaring pipelines"><span class="deltaxml-new" style="background:#90EE90">Section 5.8.2, “Declaring pipelines”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">Conformant processors must support directory paths whose scheme is file. It is implementation-defined what other schemes are supported by p:directory-list, and what the interpretation of 'directory', 'file' and 'contents' is for those schemes. See </span><a href="#c.directory-list" title="p:directory-list"><span class="deltaxml-new" style="background:#90EE90">Section 7.1.6, “p:directory-list”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">Any file or directory determined to be special by the p:directory-list step may be output using a c:other element but the criteria for marking a file as special are implementation-defined. See </span><a href="#c.directory-list" title="p:directory-list"><span class="deltaxml-new" style="background:#90EE90">Section 7.1.6, “p:directory-list”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">Any attributes other than name on c:file, c:directory, or c:other are implementation-defined. See </span><a href="#c.directory-list" title="p:directory-list"><span class="deltaxml-new" style="background:#90EE90">Section 7.1.6, “p:directory-list”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The interpretation of auth-method values on c:request other than “Basic” or “Digest” is implementation-defined. See </span><a href="#cv.request" title="Specifying a request"><span class="deltaxml-new" style="background:#90EE90">Section 7.1.10.1, “Specifying a request”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">An implementation may support encodings other than base64 but these encodings and their names are implementation-defined. See </span><a href="#c.request_body" title="Request Entity body conversion"><span class="deltaxml-new" style="background:#90EE90">Section 7.1.10.2, “Request Entity body conversion”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">Pipeline authors that need to preserve cookies across several p:http-request calls in the same pipeline or across multiple invocations of the same or different pipelines will have to rely on implementation-defined mechanisms. See </span><a href="#cookies" title="Cookies"><span class="deltaxml-new" style="background:#90EE90">Section 7.1.10.3.2, “Cookies”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">Behavior of p:unescape-markup for content-types other than application/xml is implementation-defined. See </span><a href="#c.unescape-markup" title="p:unescape-markup"><span class="deltaxml-new" style="background:#90EE90">Section 7.1.26, “p:unescape-markup”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">If cwd is not specified, the current working directory is implementation-defined. See </span><a href="#c.exec" title="p:exec"><span class="deltaxml-new" style="background:#90EE90">Section 7.2.1, “p:exec”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined what other algorithms are supported. See </span><a href="#c.hash" title="p:hash"><span class="deltaxml-new" style="background:#90EE90">Section 7.2.2, “p:hash”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">If the version is not specified, the version of UUID computed is implementation-defined. See </span><a href="#c.uuid" title="p:uuid"><span class="deltaxml-new" style="background:#90EE90">Section 7.2.3, “p:uuid”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">Support for other versions of UUID, and the mechanism by which the necessary inputs are made available for computing other versions, is implementation-defined. See </span><a href="#c.uuid" title="p:uuid"><span class="deltaxml-new" style="background:#90EE90">Section 7.2.3, “p:uuid”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined if the documents supplied on the schemas port are considered when resolving xs:include elements in the schema documents provided. See </span><a href="#c.validate-with-xml-schema" title="p:validate-with-xml-schema"><span class="deltaxml-new" style="background:#90EE90">Section 7.2.6, “p:validate-with-xml-schema”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">Support for XQueryX is implementation-defined. See </span><a href="#c.xquery" title="p:xquery"><span class="deltaxml-new" style="background:#90EE90">Section 7.2.9, “p:xquery”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">Otherwise, the interpretation of the query is implementation-defined. See </span><a href="#c.xquery" title="p:xquery"><span class="deltaxml-new" style="background:#90EE90">Section 7.2.9, “p:xquery”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The point in time returned as the current dateTime is implementation-defined. See </span><a href="#c.xquery" title="p:xquery"><span class="deltaxml-new" style="background:#90EE90">Section 7.2.9, “p:xquery”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The implicit timezone is implementation-defined. See </span><a href="#c.xquery" title="p:xquery"><span class="deltaxml-new" style="background:#90EE90">Section 7.2.9, “p:xquery”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The use of media type parameters on the content-type option is implementation-defined. See </span><a href="#c.xsl-formatter" title="p:xsl-formatter"><span class="deltaxml-new" style="background:#90EE90">Section 7.2.10, “p:xsl-formatter”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">If the content-type option is not specified, the output type is implementation-defined. See </span><a href="#c.xsl-formatter" title="p:xsl-formatter"><span class="deltaxml-new" style="background:#90EE90">Section 7.2.10, “p:xsl-formatter”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">A formatter may take any number of optional rendering parameters via the step's parameters; such parameters are defined by the XSL implementation used and are implementation-defined. See </span><a href="#c.xsl-formatter" title="p:xsl-formatter"><span class="deltaxml-new" style="background:#90EE90">Section 7.2.10, “p:xsl-formatter”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">Implementations may support other method values but their results are implementation-defined. See </span><a href="#serialization-options" title="Serialization Options"><span class="deltaxml-new" style="background:#90EE90">Section 7.3, “Serialization Options”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined whether additional information items and properties, particularly those made available in the PSVI, are preserved between steps. See </span><a href="#infoset-conformance" title="Infoset Conformance"><span class="deltaxml-new" style="background:#90EE90">Section 3, “Infoset Conformance”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li></ol></section><section id="implementation-dependent" class="section"><div class="section-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">2 Implementation-dependent features</span></h2></div><p><span class="deltaxml-new" style="background:#90EE90">The following features are implementation-dependent:</span></p><ol class="features"><li><span class="deltaxml-new" style="background:#90EE90">The evaluation order of steps not connected to one another is implementation-dependent See </span><a href="#pipeline-concepts" title="Pipeline Concepts"><span class="deltaxml-new" style="background:#90EE90">Section 2, “Pipeline Concepts”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">Outside of a try/catch, the disposition of error messages is implementation-dependent See </span><a href="#input-output" title="Inputs and Outputs"><span class="deltaxml-new" style="background:#90EE90">Section 2.2, “Inputs and Outputs”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">Resolving a URI locally may involve resolvers of various sorts and possibly appeal to implementation-dependent mechanisms such as catalog files. See </span><a href="#external-docs" title="External Documents"><span class="deltaxml-new" style="background:#90EE90">Section 2.2.1, “External Documents”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">Whether (and when and how) or not the intermediate results that pass between steps are ever written to a filesystem is implementation-dependent. See </span><a href="#external-docs" title="External Documents"><span class="deltaxml-new" style="background:#90EE90">Section 2.2.1, “External Documents”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The set of available documents (those that may be retrieved with a URI) is implementation-dependent. See </span><a href="#xproc-xpath-context-20" title="Processor XPath Context"><span class="deltaxml-new" style="background:#90EE90">Section 2.6.1, “Processor XPath Context”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The set of available collections is implementation-dependent. See </span><a href="#xproc-xpath-context-20" title="Processor XPath Context"><span class="deltaxml-new" style="background:#90EE90">Section 2.6.1, “Processor XPath Context”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The set of available documents (those that may be retrieved with a URI) is implementation-dependent. See </span><a href="#step-xpath-context-20" title="Step XPath Context"><span class="deltaxml-new" style="background:#90EE90">Section 2.6.2, “Step XPath Context”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">Which steps are forbidden, what privileges are needed to access resources, and under what circumstances these security constraints apply is implementation-dependent. See </span><a href="#security-considerations" title="Security Considerations"><span class="deltaxml-new" style="background:#90EE90">Section 2.12, “Security Considerations”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The value of the p:episode system property in a use-when expression is implementation-dependent. See </span><a href="#use-when" title="Conditional Element Exclusion"><span class="deltaxml-new" style="background:#90EE90">Section 3.9, “Conditional Element Exclusion”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The results of testing for steps not in the XProc namespace in a use-when expression are implementation-dependent. See </span><a href="#use-when" title="Conditional Element Exclusion"><span class="deltaxml-new" style="background:#90EE90">Section 3.9, “Conditional Element Exclusion”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The ability of a step to read the p:log output of some former step is implementation-dependent. See </span><a href="#p.log" title="p:log"><span class="deltaxml-new" style="background:#90EE90">Section 5.5, “p:log”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">Implementations may use extension attributes to provide implementation-dependent information about a declared step. See </span><a href="#declare-atomic-steps" title="Declaring atomic steps"><span class="deltaxml-new" style="background:#90EE90">Section 5.8.1, “Declaring atomic steps”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">If no content type was specified or is associated with the resource, the inferred content type is implementation-dependent. See </span><a href="#p.data" title="p:data"><span class="deltaxml-new" style="background:#90EE90">Section 5.14, “p:data”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The interpretation of a multipart message inside another multipart message is implementation-dependent. See </span><a href="#c.response_body" title="Converting Response Entity Bodies"><span class="deltaxml-new" style="background:#90EE90">Section 7.1.10.4, “Converting Response Entity Bodies”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">If the IRI reference specified by the base-uri option on p:make-absolute-uris is not valid, or if it is absent and the input document has no base URI, the results are implementation-dependent. See </span><a href="#c.make-absolute-uris" title="p:make-absolute-uris"><span class="deltaxml-new" style="background:#90EE90">Section 7.1.15, “p:make-absolute-uris”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The order in which c:param elements occur in the c:param-set is implementation-dependent. See </span><a href="#c.parameters" title="p:parameters"><span class="deltaxml-new" style="background:#90EE90">Section 7.1.18, “p:parameters”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">How XSLT message termination errors are reported to the XProc processor is implementation-dependent. See </span><a href="#c.xslt" title="p:xslt"><span class="deltaxml-new" style="background:#90EE90">Section 7.1.31, “p:xslt”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The specific exit status values returned by a process invoked with p:exec are implementation-dependent. See </span><a href="#c.exec" title="p:exec"><span class="deltaxml-new" style="background:#90EE90">Section 7.2.1, “p:exec”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The set of available documents (those that may be retrieved with a URI) is implementation-dependent. See </span><a href="#c.xquery" title="p:xquery"><span class="deltaxml-new" style="background:#90EE90">Section 7.2.9, “p:xquery”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li><span class="deltaxml-new" style="background:#90EE90">The set of available collections is implementation-dependent. See </span><a href="#c.xquery" title="p:xquery"><span class="deltaxml-new" style="background:#90EE90">Section 7.2.9, “p:xquery”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li></ol></section><section id="infoset-conformance" class="section"><div class="section-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">3 Infoset Conformance</span></h2></div><p><span class="deltaxml-new" style="background:#90EE90">This specification conforms to the XML Information Set [</span><a href="#xml-infoset-rec"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Infoset</span></span></a><span class="deltaxml-new" style="background:#90EE90">]. The information corresponding to the following information items and properties must be available to the processor for the documents that flow through the pipeline.</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="literal info-item"><span class="deltaxml-new" style="background:#90EE90">Document Information Item</span></code><span class="deltaxml-new" style="background:#90EE90"> with </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[base URI]</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[children]</span></code><span class="deltaxml-new" style="background:#90EE90"> properties.</span></p></li><li><p><code class="literal info-item"><span class="deltaxml-new" style="background:#90EE90">Element Information Items</span></code><span class="deltaxml-new" style="background:#90EE90"> with </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[base URI]</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[children]</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[attributes]</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[in-scope namespaces]</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[prefix]</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[local name]</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[namespace name]</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[parent]</span></code><span class="deltaxml-new" style="background:#90EE90"> properties.</span></p></li><li><p><code class="literal info-item"><span class="deltaxml-new" style="background:#90EE90">Attribute Information Items</span></code><span class="deltaxml-new" style="background:#90EE90"> with </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[namespace name]</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[prefix]</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[local name]</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[normalized value]</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[attribute type]</span></code><span class="deltaxml-new" style="background:#90EE90">, and </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[owner element]</span></code><span class="deltaxml-new" style="background:#90EE90"> properties.</span></p></li><li><p><code class="literal info-item"><span class="deltaxml-new" style="background:#90EE90">Character Information Items</span></code><span class="deltaxml-new" style="background:#90EE90"> with </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[character code]</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[parent]</span></code><span class="deltaxml-new" style="background:#90EE90">, and, optionally, </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[element content whitespace]</span></code><span class="deltaxml-new" style="background:#90EE90"> properties.</span></p></li><li><p><code class="literal info-item"><span class="deltaxml-new" style="background:#90EE90">Processing Instruction Information Items</span></code><span class="deltaxml-new" style="background:#90EE90"> with </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[base URI]</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[target]</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[content]</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[parent]</span></code><span class="deltaxml-new" style="background:#90EE90"> properties.</span></p></li><li><p><code class="literal info-item"><span class="deltaxml-new" style="background:#90EE90">Comment Information Items</span></code><span class="deltaxml-new" style="background:#90EE90"> with </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[content]</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[parent]</span></code><span class="deltaxml-new" style="background:#90EE90"> properties.</span></p></li><li><p><code class="literal info-item"><span class="deltaxml-new" style="background:#90EE90">Namespace Information Items</span></code><span class="deltaxml-new" style="background:#90EE90"> with </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[prefix]</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code class="literal infoset-property"><span class="deltaxml-new" style="background:#90EE90">[namespace name]</span></code><span class="deltaxml-new" style="background:#90EE90"> properties.</span></p></li></ul></div><p><a name="impl-69"></a><span class="deltaxml-new" style="background:#90EE90">It is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90"> whether additional information items and properties, particularly those made available in the PSVI, are preserved between steps.</span></p></section></article><article id="references" class="appendix"><header class="appendix-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">B References</span></h2></header><div class="toc"><h2 id="TableOfContents"><span class="deltaxml-new" style="background:#90EE90">Table of Contents</span></h2><ul class="toc"><li><span><span class="deltaxml-new" style="background:#90EE90">1 </span><a href="#normative-references"><span class="deltaxml-new" style="background:#90EE90">Normative References</span></a></span></li><li><span><span class="deltaxml-new" style="background:#90EE90">2 </span><a href="#informative-references"><span class="deltaxml-new" style="background:#90EE90">Informative References</span></a></span></li></ul></div><section id="normative-references" class="section"><div class="section-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">1 Normative References</span></h2></div><div class="bibliolist"><div id="use-cases" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XProc V2.0 Requirements</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.w3.org/TR/xproc-v2-req/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">XProc V2.0 Requirements</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. Alex Milowski, James Fuller, and Norman Walsh editors. W3C Working Draft 5 November 2013. </span></p></div><div id="xml-infoset-rec" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Infoset</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.w3.org/TR/xml-infoset/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">XML Information Set (Second Edition)</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. John Cowan, Richard Tobin, editors. W3C Working Group Note 04 February 2004. </span></p></div><div id="xml10" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XML 1.0</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.w3.org/TR/REC-xml/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">Extensible Markup Language (XML) 1.0 (Fifth Edition)</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. Tim Bray, Jean Paoli, C. M. Sperberg-McQueen, et. al. editors. W3C Recommendation 26 November 2008.</span></p></div><div id="xmlns10" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Namespaces 1.0</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.w3.org/TR/REC-xml-names/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">Namespaces in XML 1.0 (Third Edition)</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. Tim Bray, Dave Hollander, Andrew Layman, et. al., editors. W3C Recommendation 8 December 2009.</span></p></div><div id="xml11" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XML 1.1</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.w3.org/TR/xml11/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">Extensible Markup Language (XML) 1.1 (Second Edition)</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. Tim Bray, Jean Paoli, C. M. Sperberg-McQueen, et. al. editors. W3C Recommendation 16 August 2006.</span></p></div><div id="xmlns11" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Namespaces 1.1</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.w3.org/TR/xml-names11/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">Namespaces in XML 1.1 (Second Edition)</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. Tim Bray, Dave Hollander, Andrew Layman, et. al., editors. W3C Recommendation 16 August 2006.</span></p></div><div id="xslt10" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XSLT 1.0</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.w3.org/TR/xslt"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">XSL Transformations (XSLT) Version 1.0</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. James Clark, editor. W3C Recommendation. 16 November 1999.</span></p></div><div id="xpath2" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XPath 2.0</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.w3.org/TR/xpath20/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">XML Path Language (XPath) 2.0</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. Anders Berglund, Scott Boag, Don Chamberlin, et. al., editors. W3C Recommendation. 23 January 2007.</span></p></div><div id="xpath-datamodel" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XQuery 1.0 and XPath 2.0 Data Model (XDM)</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.w3.org/TR/xpath-datamodel/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">XQuery 1.0 and XPath 2.0 Data Model (XDM)</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. Mary Fernández, Ashok Malhotra, Jonathan Marsh, </span><em class="foreignphrase"><span class="deltaxml-new" style="background:#90EE90">et. al.</span></em><span class="deltaxml-new" style="background:#90EE90">, editors. W3C Recommendation. 23 January 2007.</span></p></div><div id="xpath-functions" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XPath 2.0 Functions and Operators</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.w3.org/TR/xpath-functions/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">XQuery 1.0 and XPath 2.0 Functions and Operators</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. Ashok Malhotra, Jim Melton, and Norman Walsh, editors. W3C Recommendation. 23 January 2007.</span></p></div><div id="xslt20" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XSLT 2.0</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.w3.org/TR/xslt20/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">XSL Transformations (XSLT) Version 2.0</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. Michael Kay, editor. W3C Recommendation. 23 January 2007.</span></p></div><div id="xsl11" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XSL 1.1</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.w3.org/TR/xsl/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">Extensible Stylesheet Language (XSL) Version 1.1</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. Anders Berglund, editor. W3C Recommendation. 5 December 2006.</span></p></div><div id="xquery10" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XQuery 1.0</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.w3.org/TR/xquery/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">XQuery 1.0: An XML Query Language</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. Scott Boag, Don Chamberlin, Mary Fernández, et. al., editors. W3C Recommendation. 23 January 2007.</span></p></div><div id="iso19757-2" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RELAX NG</span></span><span class="deltaxml-new" style="background:#90EE90">] ISO/IEC JTC 1/SC 34. </span><a href="http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=52348"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">ISO/IEC 19757-2:2008(E) Document Schema Definition Language (DSDL) -- Part 2: Regular-grammar-based validation -- RELAX NG</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90"> 2008. </span></p></div><div id="relaxng-compact-syntax" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RELAX NG Compact Syntax</span></span><span class="deltaxml-new" style="background:#90EE90">] ISO/IEC JTC 1/SC 34. </span><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">ISO/IEC 19757-2:2003/Amd 1:2006 Document Schema Definition Languages (DSDL) — Part 2: Grammar-based validation — RELAX NG AMENDMENT 1 Compact Syntax</span></cite></span><span class="deltaxml-new" style="background:#90EE90"> 2006. </span></p></div><div id="relaxng-dtd-compat" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RELAX NG DTD Compatibility</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">RELAX NG DTD Compatibility</span></cite></span><span class="deltaxml-new" style="background:#90EE90">. OASIS Committee Specification. 3 December 2001. </span></p></div><div id="iso19757-3" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Schematron</span></span><span class="deltaxml-new" style="background:#90EE90">] ISO/IEC JTC 1/SC 34. </span><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">ISO/IEC 19757-3:2006(E) Document Schema Definition Languages (DSDL) — Part 3: Rule-based validation — Schematron</span></cite></span><span class="deltaxml-new" style="background:#90EE90"> 2006. </span></p></div><div id="xmlschema-1" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">W3C XML Schema: Part 1</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.w3.org/TR/xmlschema-1/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">XML Schema Part 1: Structures Second Edition</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. Henry S. Thompson, David Beech, Murray Maloney, et. al., editors. World Wide Web Consortium, 28 October 2004. </span></p></div><div id="xmlschema-2" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">W3C XML Schema: Part 2</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.w3.org/TR/xmlschema-2/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">XML Schema Part 2: Datatypes Second Edition</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. Paul V. Biron and Ashok Malhotra, editors. World Wide Web Consortium, 28 October 2004. </span></p></div><div id="xml-id" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">xml:id</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.w3.org/TR/xml-id/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">xml:id Version 1.0</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. Jonathan Marsh, Daniel Veillard, and Norman Walsh, editors. W3C Recommendation. 9 September 2005.</span></p></div><div id="xinclude" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XInclude</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.w3.org/TR/xinclude/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">XML Inclusions (XInclude) Version 1.0 (Second Edition)</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. Jonathan Marsh, David Orchard, and Daniel Veillard, editors. W3C Recommendation. 15 November 2006.</span></p></div><div id="xml-base" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XML Base</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.w3.org/TR/xmlbase/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">XML Base (Second Edition)</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. Jonathan Marsh and Richard Tobin, editors. W3C Recommendation. 28 January 2009.</span></p></div><div id="xptr-framework" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XPointer Framework</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.w3.org/TR/xptr-framework/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">XPointer Framework</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. Paul Grosso, Eve Maler, Jonathan Marsh, et. al., editors. W3C Recommendation. 25 March 2003.</span></p></div><div id="xptr-element" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XPointer element() Scheme</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.w3.org/TR/xptr-element/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">XPointer element() Scheme</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. Paul Grosso, Eve Maler, Jonathan Marsh, et. al., editors. W3C Recommendation. 25 March 2003.</span></p></div><div id="xml-serialization" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Serialization</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.w3.org/TR/xslt-xquery-serialization/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">XSLT 2.0 and XQuery 1.0 Serialization</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. Scott Boag, Michael Kay, Joanne Tong, Norman Walsh, and Henry Zongaro, editors. W3C Recommendation. 23 January 2007.</span></p></div><div id="rfc1321" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">MD5</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.ietf.org/rfc/rfc1321.txt"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">RFC 1321: The MD5 Message-Digest Algorithm</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. R. Rivest. Network Working Group, IETF, April 1992.</span></p></div><div id="rfc1521" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 1521</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.ietf.org/rfc/rfc1521.txt"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">RFC 1521: MIME (Multipurpose Internet Mail Extensions) Part One: Mechanisms for Specifying and Describing the Format of Internet Message Bodies</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. N. Borenstein, N. Freed, editors. Internet Engineering Task Force. September, 1993.</span></p></div><div id="rfc2119" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 2119</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.ietf.org/rfc/rfc2119.txt"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">Key words for use in RFCs to Indicate Requirement Levels</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. S. Bradner. Network Working Group, IETF, Mar 1997. </span></p></div><div id="rfc2396" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 2396</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.ietf.org/rfc/rfc2396.txt"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">Uniform Resource Identifiers (URI): Generic Syntax</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. T. Berners-Lee, R. Fielding, and L. Masinter. Network Working Group, IETF, Aug 1998. </span></p></div><div id="rfc2616" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 2616</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.ietf.org/rfc/rfc2616.txt"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">RFC 2616: Hypertext Transfer Protocol — HTTP/1.1</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. R. Fielding, J. Gettys, J. Mogul, et. al., editors. Internet Engineering Task Force. June, 1999.</span></p></div><div id="rfc2617" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 2617</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.ietf.org/rfc/rfc2617.txt"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">RFC 2617: HTTP Authentication: Basic and Digest Access Authentication</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. J. Franks, P. Hallam-Baker, J. Hostetler, S. Lawrence, P. Leach, A. Luotonen, L. Stewart. June, 1999 .</span></p></div><div id="rfc3023" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 3023</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.ietf.org/rfc/rfc3023.txt"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">RFC 3023: XML Media Types</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. M. Murata, S. St. Laurent, and D. Kohn, editors. Internet Engineering Task Force. January, 2001.</span></p></div><div id="rfc3548" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 3548</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.ietf.org/rfc/rfc3548.txt"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">RFC 3548: The Base16, Base32, and Base64 Data Encodings</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. S. Josefsson, Editor. Internet Engineering Task Force. July, 2003.</span></p></div><div id="rfc3986" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 3986</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.ietf.org/rfc/rfc3986.txt"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">RFC 3986: Uniform Resource Identifier (URI): General Syntax</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. T. Berners-Lee, R. Fielding, and L. Masinter, editors. Internet Engineering Task Force. January, 2005.</span></p></div><div id="rfc3987" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 3987</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.ietf.org/rfc/rfc3987.txt"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">RFC 3987: Internationalized Resource Identifiers (IRIs)</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. M. Duerst and M. Suignard, editors. Internet Engineering Task Force. January, 2005.</span></p></div><div id="unicodetr17" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Unicode TR#17</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://unicode.org/reports/tr17/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">Unicode Technical Report #17: Character Encoding Model</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. Ken Whistler, Mark Davis, and Asmus Freytag, authors. The Unicode Consortium. 11 November 2008.</span></p></div><div id="media-types" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">IANA Media Types</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.iana.org/assignments/media-types/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">IANA MIME Media Types</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. Internet Engineering Task Force. </span></p></div><div id="tidy" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">HTML Tidy</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://tidy.sourceforge.net/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">HTML Tidy Library Project</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. SourceForge project. </span></p></div><div id="tagsoup" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">TagSoup</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://ccil.org/~cowan/XML/tagsoup/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">TagSoup - Just Keep On Truckin'</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. John Cowan. </span></p></div><div id="bib.uuid" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">UUID</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.itu.int/ITU-T/studygroups/com17/oid.html"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">ITU X.667: Information technology - Open Systems Interconnection - Procedures for the operation of OSI Registration Authorities: Generation and registration of Universally Unique Identifiers (UUIDs) and their use as ASN.1 Object Identifier components</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. 2004.</span></p></div><div id="bib.sha" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">SHA1</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.itl.nist.gov/fipspubs/fip180-1.htm"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">Federal Information Processing Standards Publication 180-1: Secure Hash Standard</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. 1995.</span></p></div></div></section><section id="informative-references" class="section"><div class="section-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">2 Informative References</span></h2></div><div class="bibliolist"><div id="rfc4122" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 4122</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.ietf.org/rfc/rfc4122.txt"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">RFC 4122: A Universally Unique IDentifier (UUID) URN Namespace</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. P. Leach and M. Mealling, editors. Internet Engineering Task Force. July, 2005.</span></p></div><div id="bib.crc" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">CRC32</span></span><span class="deltaxml-new" style="background:#90EE90">] “32-Bit Cyclic Redundancy Codes for Internet Applications”, </span><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">The International Conference on Dependable Systems and Networks: 459</span></cite></span><span class="deltaxml-new" style="background:#90EE90">. </span><span class="biblioid"><span class="deltaxml-new" style="background:#90EE90">10.1109/DSN.2002.1028931</span></span><span class="deltaxml-new" style="background:#90EE90">. P. Koopman. June 2002. </span></p></div></div></section></article><article id="glossary" class="appendix"><header class="appendix-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">C Glossary</span></h2></header><div class="glosslist"><dl><dt id="glossary.2.1" class="glossentry"><em class="glossterm"><a href="#dt-Namespaces-in-XML"><span class="deltaxml-new" style="background:#90EE90">Namespaces in XML</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">Unless otherwise noted, the term </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">Namespaces in XML</span></em><span class="deltaxml-new" style="background:#90EE90"> refers equally to [</span><a href="#xmlns10"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Namespaces 1.0</span></span></a><span class="deltaxml-new" style="background:#90EE90">] and [</span><a href="#xmlns11"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Namespaces 1.1</span></span></a><span class="deltaxml-new" style="background:#90EE90">].</span></p></dd><dt id="glossary.2.2" class="glossentry"><em class="glossterm"><a href="#dt-XML"><span class="deltaxml-new" style="background:#90EE90">XML</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">XProc is intended to work equally well with [</span><a href="#xml10"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XML 1.0</span></span></a><span class="deltaxml-new" style="background:#90EE90">] and [</span><a href="#xml11"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XML 1.1</span></span></a><span class="deltaxml-new" style="background:#90EE90">]. Unless otherwise noted, the term “</span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">XML</span></em><span class="deltaxml-new" style="background:#90EE90">” refers equally to both versions.</span></p></dd><dt id="glossary.2.3" class="glossentry"><em class="glossterm"><a href="#dt-ancestors"><span class="deltaxml-new" style="background:#90EE90">ancestors</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">The </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">ancestors</span></em><span class="deltaxml-new" style="background:#90EE90"> of a step, if it has any, are its </span><em class="glossterm"><a href="#dt-container"><span class="deltaxml-new" style="background:#90EE90">container</span></a></em><span class="deltaxml-new" style="background:#90EE90"> and the ancestors of its container.</span></p></dd><dt id="glossary.2.4" class="glossentry"><em class="glossterm"><a href="#dt-atomic-step"><span class="deltaxml-new" style="background:#90EE90">atomic step</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">An </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">atomic step</span></em><span class="deltaxml-new" style="background:#90EE90"> is a step that performs a unit of XML processing, such as XInclude or transformation, and has no internal </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p></dd><dt id="glossary.2.5" class="glossentry"><em class="glossterm"><a href="#dt-bag-merger"><span class="deltaxml-new" style="background:#90EE90">bag-merger</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">The </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">bag-merger</span></em><span class="deltaxml-new" style="background:#90EE90"> of two or more bags (where a bag is an unordered list or, equivalently, something like a set except that it may contain duplicates) is a bag constructed by starting with an empty bag and adding each member of each of the input bags in turn to it. It follows that the cardinality of the result is the sum of the cardinality of all the input bags.</span></p></dd><dt id="glossary.2.6" class="glossentry"><em class="glossterm"><a href="#dt-by-source"><span class="deltaxml-new" style="background:#90EE90">by source</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">A document is specified </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">by source</span></em><span class="deltaxml-new" style="background:#90EE90"> if it references a specific port on another step.</span></p></dd><dt id="glossary.2.7" class="glossentry"><em class="glossterm"><a href="#dt-by-URI"><span class="deltaxml-new" style="background:#90EE90">by URI</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">A document is specified </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">by URI</span></em><span class="deltaxml-new" style="background:#90EE90"> if it is referenced with a URI.</span></p></dd><dt id="glossary.2.8" class="glossentry"><em class="glossterm"><a href="#dt-compound-step"><span class="deltaxml-new" style="background:#90EE90">compound step</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">A </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">compound step</span></em><span class="deltaxml-new" style="background:#90EE90"> is a step that contains a </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt id="glossary.2.9" class="glossentry"><em class="glossterm"><a href="#dt-connection"><span class="deltaxml-new" style="background:#90EE90">connection</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">A </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">connection</span></em><span class="deltaxml-new" style="background:#90EE90"> associates an input or output port with some data source.</span></p></dd><dt id="glossary.2.10" class="glossentry"><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-new" style="background:#90EE90">contained steps</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">The steps that occur directly within, or within non-step wrappers directly within, a step are called that step's </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">contained steps</span></em><span class="deltaxml-new" style="background:#90EE90">. In other words, “container” and “contained steps” are inverse relationships.</span></p></dd><dt id="glossary.2.11" class="glossentry"><em class="glossterm"><a href="#dt-container"><span class="deltaxml-new" style="background:#90EE90">container</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">A compound step or multi-container step is a </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">container</span></em><span class="deltaxml-new" style="background:#90EE90"> for the steps directly within it or within non-step wrappers directly within it.</span></p></dd><dt id="glossary.2.12" class="glossentry"><em class="glossterm"><a href="#dt-declared-inputs"><span class="deltaxml-new" style="background:#90EE90">declared inputs</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">The input ports declared on a step are its </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">declared inputs</span></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt id="glossary.2.13" class="glossentry"><em class="glossterm"><a href="#dt-declared-options"><span class="deltaxml-new" style="background:#90EE90">declared options</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">The options declared on a step are its </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">declared options</span></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt id="glossary.2.14" class="glossentry"><em class="glossterm"><a href="#dt-declared-outputs"><span class="deltaxml-new" style="background:#90EE90">declared outputs</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">The output ports declared on a step are its </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">declared outputs</span></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt id="glossary.2.15" class="glossentry"><em class="glossterm"><a href="#dt-default-readable-port"><span class="deltaxml-new" style="background:#90EE90">default readable port</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">The </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">default readable port</span></em><span class="deltaxml-new" style="background:#90EE90">, which may be undefined, is a specific step name/port name pair from the set of readable ports.</span></p></dd><dt id="glossary.2.16" class="glossentry"><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">A </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></em><span class="deltaxml-new" style="background:#90EE90"> is one which occurs while a pipeline is being evaluated.</span></p></dd><dt id="glossary.2.17" class="glossentry"><em class="glossterm"><a href="#dt-empty-environment"><span class="deltaxml-new" style="background:#90EE90">empty environment</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">The </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">empty environment</span></em><span class="deltaxml-new" style="background:#90EE90"> contains no readable ports, an undefined default readable port and no in-scope bindings.</span></p></dd><dt id="glossary.2.18" class="glossentry"><em class="glossterm"><a href="#dt-empty-sequence"><span class="deltaxml-new" style="background:#90EE90">empty sequence</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">An </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">empty sequence</span></em><span class="deltaxml-new" style="background:#90EE90"> of documents is specified with the </span><a href="#p.empty"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element.</span></p></dd><dt id="glossary.2.19" class="glossentry"><em class="glossterm"><a href="#dt-environment"><span class="deltaxml-new" style="background:#90EE90">environment</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">The </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">environment</span></em><span class="deltaxml-new" style="background:#90EE90"> is a context-dependent collection of information available within subpipelines.</span></p></dd><dt id="glossary.2.20" class="glossentry"><em class="glossterm"><a href="#dt-extension-attribute"><span class="deltaxml-new" style="background:#90EE90">extension attribute</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">An element from the XProc namespace </span><span class="rfc2119" id="glossary.2.20.2.1.1"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> have any attribute not from the XProc namespace, provided that the expanded-QName of the attribute has a non-null namespace URI. Such an attribute is called an </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">extension attribute</span></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt id="glossary.2.21" class="glossentry"><em class="glossterm"><a href="#dt-in-scope-bindings"><span class="deltaxml-new" style="background:#90EE90">in-scope bindings</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">The </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">in-scope bindings</span></em><span class="deltaxml-new" style="background:#90EE90"> are a set of name-value pairs, based on </span><em class="glossterm"><a href="#dt-option"><span class="deltaxml-new" style="background:#90EE90">option</span></a></em><span class="deltaxml-new" style="background:#90EE90"> and </span><em class="glossterm"><a href="#dt-variable"><span class="deltaxml-new" style="background:#90EE90">variable</span></a></em><span class="deltaxml-new" style="background:#90EE90"> bindings.</span></p></dd><dt id="glossary.2.22" class="glossentry"><em class="glossterm"><a href="#dt-inherited-environment"><span class="deltaxml-new" style="background:#90EE90">inherited environment</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">The </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">inherited environment</span></em><span class="deltaxml-new" style="background:#90EE90"> of a </span><em class="glossterm"><a href="#dt-contained-steps"><span class="deltaxml-new" style="background:#90EE90">contained step</span></a></em><span class="deltaxml-new" style="background:#90EE90"> is an environment that is the same as the environment of its </span><em class="glossterm"><a href="#dt-container"><span class="deltaxml-new" style="background:#90EE90">container</span></a></em><span class="deltaxml-new" style="background:#90EE90"> with the </span><a href="#dt-standard-modifications"><span class="deltaxml-new" style="background:#90EE90">standard modifications</span></a><span class="deltaxml-new" style="background:#90EE90">. </span></p></dd><dt id="glossary.2.23" class="glossentry"><em class="glossterm"><a href="#dt-inline-document"><span class="deltaxml-new" style="background:#90EE90">inline document</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">An </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">inline document</span></em><span class="deltaxml-new" style="background:#90EE90"> is specified directly in the body of the element to which it connects.</span></p></dd><dt id="glossary.2.24" class="glossentry"><em class="glossterm"><a href="#dt-last-step"><span class="deltaxml-new" style="background:#90EE90">last step</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">The </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">last step</span></em><span class="deltaxml-new" style="background:#90EE90"> in a subpipeline is its last step in document order.</span></p></dd><dt id="glossary.2.25" class="glossentry"><em class="glossterm"><a href="#dt-matches"><span class="deltaxml-new" style="background:#90EE90">matches</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">A step </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">matches</span></em><span class="deltaxml-new" style="background:#90EE90"> its signature if and only if it specifies an input for each declared input, it specifies no inputs that are not declared, it specifies an option for each option that is declared to be required, and it specifies no options that are not declared.</span></p></dd><dt id="glossary.2.26" class="glossentry"><em class="glossterm"><a href="#dt-multi-container-step"><span class="deltaxml-new" style="background:#90EE90">multi-container step</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">A </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">multi-container step</span></em><span class="deltaxml-new" style="background:#90EE90"> is a step that contains several alternate </span><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipelines</span></a></em><span class="deltaxml-new" style="background:#90EE90">. </span></p></dd><dt id="glossary.2.27" class="glossentry"><em class="glossterm"><a href="#dt-namespace-fixup"><span class="deltaxml-new" style="background:#90EE90">namespace fixup</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">To produce a serializable </span><em class="glossterm"><a href="#dt-XML"><span class="deltaxml-new" style="background:#90EE90">XML</span></a></em><span class="deltaxml-new" style="background:#90EE90"> document, the XProc processor must sometimes add additional namespace nodes, perhaps even renaming prefixes, to satisfy the constraints of </span><em class="glossterm"><a href="#dt-Namespaces-in-XML"><span class="deltaxml-new" style="background:#90EE90">Namespaces in XML</span></a></em><span class="deltaxml-new" style="background:#90EE90">. This process is referred to as </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">namespace fixup</span></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt id="glossary.2.28" class="glossentry"><em class="glossterm"><a href="#dt-option"><span class="deltaxml-new" style="background:#90EE90">option</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">An </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">option</span></em><span class="deltaxml-new" style="background:#90EE90"> is a name/value pair where the name is an </span><a href="http://www.w3.org/TR/REC-xml-names/#dt-expname"><span class="deltaxml-new" style="background:#90EE90">expanded name</span></a><span class="deltaxml-new" style="background:#90EE90"> and the value </span><span class="rfc2119" id="glossary.2.28.2.1.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a string or </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">xs:untypedAtomic</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt id="glossary.2.29" class="glossentry"><em class="glossterm"><a href="#dt-parameter"><span class="deltaxml-new" style="background:#90EE90">parameter</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">A </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">parameter</span></em><span class="deltaxml-new" style="background:#90EE90"> is a name/value pair where the name is an </span><a href="http://www.w3.org/TR/REC-xml-names/#dt-expname"><span class="deltaxml-new" style="background:#90EE90">expanded name</span></a><span class="deltaxml-new" style="background:#90EE90"> and the value </span><span class="rfc2119" id="glossary.2.29.2.1.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a string or </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">xs:untypedAtomic</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt id="glossary.2.30" class="glossentry"><em class="glossterm"><a href="#dt-parameter-input-port"><span class="deltaxml-new" style="background:#90EE90">parameter input port</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">A </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">parameter input port</span></em><span class="deltaxml-new" style="background:#90EE90"> is a distinguished kind of input port which accepts (only) dynamically constructed parameter name/value pairs.</span></p></dd><dt id="glossary.2.31" class="glossentry"><em class="glossterm"><a href="#dt-pipeline"><span class="deltaxml-new" style="background:#90EE90">pipeline</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">A </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">pipeline</span></em><span class="deltaxml-new" style="background:#90EE90"> is a set of connected steps, with outputs of one step flowing into inputs of another.</span></p></dd><dt id="glossary.2.32" class="glossentry"><em class="glossterm"><a href="#dt-primary-parameter-input-port"><span class="deltaxml-new" style="background:#90EE90">primary parameter input port</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">If a step has a parameter input port which is explicitly marked “</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">primary='true'</span></code><span class="deltaxml-new" style="background:#90EE90">”, or if it has exactly one parameter input port and that port is </span><em><span class="deltaxml-new" style="background:#90EE90">not</span></em><span class="deltaxml-new" style="background:#90EE90"> explicitly marked “</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">primary='false'</span></code><span class="deltaxml-new" style="background:#90EE90">”, then that parameter input port is the </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">primary parameter input port</span></em><span class="deltaxml-new" style="background:#90EE90"> of the step.</span></p></dd><dt id="glossary.2.33" class="glossentry"><em class="glossterm"><a href="#dt-primary-input-port"><span class="deltaxml-new" style="background:#90EE90">primary input port</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">If a step has a document input port which is explicitly marked “</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">primary='true'</span></code><span class="deltaxml-new" style="background:#90EE90">”, or if it has exactly one document input port and that port is </span><em><span class="deltaxml-new" style="background:#90EE90">not</span></em><span class="deltaxml-new" style="background:#90EE90"> explicitly marked “</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">primary='false'</span></code><span class="deltaxml-new" style="background:#90EE90">”, then that input port is the </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">primary input port</span></em><span class="deltaxml-new" style="background:#90EE90"> of the step.</span></p></dd><dt id="glossary.2.34" class="glossentry"><em class="glossterm"><a href="#dt-primary-output-port"><span class="deltaxml-new" style="background:#90EE90">primary output port</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">If a step has a document output port which is explicitly marked “</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">primary='true'</span></code><span class="deltaxml-new" style="background:#90EE90">”, or if it has exactly one document output port and that port is </span><em><span class="deltaxml-new" style="background:#90EE90">not</span></em><span class="deltaxml-new" style="background:#90EE90"> explicitly marked “</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">primary='false'</span></code><span class="deltaxml-new" style="background:#90EE90">”, then that output port is the </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">primary output port</span></em><span class="deltaxml-new" style="background:#90EE90"> of the step.</span></p></dd><dt id="glossary.2.35" class="glossentry"><em class="glossterm"><a href="#dt-readable-ports"><span class="deltaxml-new" style="background:#90EE90">readable ports</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">The </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">readable ports</span></em><span class="deltaxml-new" style="background:#90EE90"> are a set of step name/port name pairs.</span></p></dd><dt id="glossary.2.36" class="glossentry"><em class="glossterm"><a href="#dt-signature"><span class="deltaxml-new" style="background:#90EE90">signature</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">The </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">signature</span></em><span class="deltaxml-new" style="background:#90EE90"> of a step is the set of inputs, outputs, and options that it is declared to accept.</span></p></dd><dt id="glossary.2.37" class="glossentry"><em class="glossterm"><a href="#dt-specified-options"><span class="deltaxml-new" style="background:#90EE90">specified options</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">The options on a step which have specified values, either because a </span><a href="#p.with-option"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element specifies a value or because the declaration included a default value, are its </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">specified options</span></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt id="glossary.2.38" class="glossentry"><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">A </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">static error</span></em><span class="deltaxml-new" style="background:#90EE90"> is one which can be detected before pipeline evaluation is even attempted.</span></p></dd><dt id="glossary.2.39" class="glossentry"><em class="glossterm"><a href="#dt-step"><span class="deltaxml-new" style="background:#90EE90">step</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">A </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">step</span></em><span class="deltaxml-new" style="background:#90EE90"> is the basic computational unit of a pipeline.</span></p></dd><dt id="glossary.2.40" class="glossentry"><em class="glossterm"><a href="#dt-step-type-exports"><span class="deltaxml-new" style="background:#90EE90">step type exports</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">The </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">step type exports</span></em><span class="deltaxml-new" style="background:#90EE90"> of an XProc element, against the background of a set of URIs of resources already visited (call this set </span><em><span class="deltaxml-new" style="background:#90EE90">Visited</span></em><span class="deltaxml-new" style="background:#90EE90">), are defined by cases.</span></p></dd><dt id="glossary.2.41" class="glossentry"><em class="glossterm"><a href="#dt-subpipeline"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">Sibling steps (and the connections between them) form a </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt id="glossary.2.42" class="glossentry"><em class="glossterm"><a href="#dt-variable"><span class="deltaxml-new" style="background:#90EE90">variable</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">A </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">variable</span></em><span class="deltaxml-new" style="background:#90EE90"> is a name/value pair where the name is an </span><a href="http://www.w3.org/TR/REC-xml-names/#dt-expname"><span class="deltaxml-new" style="background:#90EE90">expanded name</span></a><span class="deltaxml-new" style="background:#90EE90"> and the value </span><span class="rfc2119" id="glossary.2.42.2.1.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be a string or </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">xs:untypedAtomic</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt id="glossary.2.43" class="glossentry"><em class="glossterm"><a href="#dt-visible"><span class="deltaxml-new" style="background:#90EE90">visible</span></a></em></dt><dd class="glossdef"><p><span class="deltaxml-new" style="background:#90EE90">If two names are in the same scope, we say that they are </span><em class="firstterm"><span class="deltaxml-new" style="background:#90EE90">visible</span></em><span class="deltaxml-new" style="background:#90EE90"> to each other. </span></p></dd></dl></div></article><article id="language-summary" class="appendix"><header class="appendix-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">D Pipeline Language Summary</span></h2></header><p><span class="deltaxml-new" style="background:#90EE90">This appendix summarizes the XProc pipeline language. Machine readable descriptions of this language are available in </span><a href="schemas/xproc.rng"><span class="deltaxml-new" style="background:#90EE90">RELAX NG</span></a><span class="deltaxml-new" style="background:#90EE90"> (and the RELAX NG </span><a href="schemas/xproc.rnc"><span class="deltaxml-new" style="background:#90EE90">compact syntax</span></a><span class="deltaxml-new" style="background:#90EE90">), </span><a href="schemas/xproc.xsd"><span class="deltaxml-new" style="background:#90EE90">W3C XML Schema</span></a><span class="deltaxml-new" style="background:#90EE90">, and </span><a href="schemas/xproc.dtd"><span class="deltaxml-new" style="background:#90EE90">DTD</span></a><span class="deltaxml-new" style="background:#90EE90"> syntaxes.</span></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:pipeline</span><br /><span class="deltaxml-new" style="background:#90EE90">  name? = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  type? = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  psvi-required? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  xpath-version? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  exclude-inline-prefixes? = </span><var><span class="deltaxml-new" style="background:#90EE90">prefix list</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  version? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.input"><span class="deltaxml-new" style="background:#90EE90">p:input</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.output"><span class="deltaxml-new" style="background:#90EE90">p:output</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.option"><span class="deltaxml-new" style="background:#90EE90">p:option</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.log"><span class="deltaxml-new" style="background:#90EE90">p:log</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.serialization"><span class="deltaxml-new" style="background:#90EE90">p:serialization</span></a><span class="deltaxml-new" style="background:#90EE90">)*,</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.declare-step"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.pipeline"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.import"><span class="deltaxml-new" style="background:#90EE90">p:import</span></a><span class="deltaxml-new" style="background:#90EE90">)*,</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><var><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></var><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:pipeline&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:for-each</span><br /><span class="deltaxml-new" style="background:#90EE90">  name? = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    ((</span><a href="#p.iteration-source"><span class="deltaxml-new" style="background:#90EE90">p:iteration-source</span></a><span class="deltaxml-new" style="background:#90EE90">? &amp; </span><br /><span class="deltaxml-new" style="background:#90EE90">      (</span><a href="#p.output"><span class="deltaxml-new" style="background:#90EE90">p:output</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.log"><span class="deltaxml-new" style="background:#90EE90">p:log</span></a><span class="deltaxml-new" style="background:#90EE90">)*),</span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><var><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></var><span class="deltaxml-new" style="background:#90EE90">)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:for-each&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:viewport</span><br /><span class="deltaxml-new" style="background:#90EE90">  name? = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">match</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    ((</span><a href="#p.viewport-source"><span class="deltaxml-new" style="background:#90EE90">p:viewport-source</span></a><span class="deltaxml-new" style="background:#90EE90">? &amp; </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.output"><span class="deltaxml-new" style="background:#90EE90">p:output</span></a><span class="deltaxml-new" style="background:#90EE90">? &amp; </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.log"><span class="deltaxml-new" style="background:#90EE90">p:log</span></a><span class="deltaxml-new" style="background:#90EE90">?),</span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><var><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></var><span class="deltaxml-new" style="background:#90EE90">)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:viewport&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:choose</span><br /><span class="deltaxml-new" style="background:#90EE90">  name? = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.xpath-context"><span class="deltaxml-new" style="background:#90EE90">p:xpath-context</span></a><span class="deltaxml-new" style="background:#90EE90">?,</span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.variable"><span class="deltaxml-new" style="background:#90EE90">p:variable</span></a><span class="deltaxml-new" style="background:#90EE90">*,</span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.when"><span class="deltaxml-new" style="background:#90EE90">p:when</span></a><span class="deltaxml-new" style="background:#90EE90">*,</span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.otherwise"><span class="deltaxml-new" style="background:#90EE90">p:otherwise</span></a><span class="deltaxml-new" style="background:#90EE90">?)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:choose&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:xpath-context&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.empty"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.pipe"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.document"><span class="deltaxml-new" style="background:#90EE90">p:document</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.inline"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.data"><span class="deltaxml-new" style="background:#90EE90">p:data</span></a><span class="deltaxml-new" style="background:#90EE90">)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:xpath-context&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:when</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">test</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.xpath-context"><span class="deltaxml-new" style="background:#90EE90">p:xpath-context</span></a><span class="deltaxml-new" style="background:#90EE90">?,</span><br /><span class="deltaxml-new" style="background:#90EE90">     (</span><a href="#p.output"><span class="deltaxml-new" style="background:#90EE90">p:output</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.log"><span class="deltaxml-new" style="background:#90EE90">p:log</span></a><span class="deltaxml-new" style="background:#90EE90">)*,</span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><var><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></var><span class="deltaxml-new" style="background:#90EE90">)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:when&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:otherwise&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    ((</span><a href="#p.output"><span class="deltaxml-new" style="background:#90EE90">p:output</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.log"><span class="deltaxml-new" style="background:#90EE90">p:log</span></a><span class="deltaxml-new" style="background:#90EE90">)*,</span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><var><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></var><span class="deltaxml-new" style="background:#90EE90">)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:otherwise&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:group</span><br /><span class="deltaxml-new" style="background:#90EE90">  name? = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    ((</span><a href="#p.output"><span class="deltaxml-new" style="background:#90EE90">p:output</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.log"><span class="deltaxml-new" style="background:#90EE90">p:log</span></a><span class="deltaxml-new" style="background:#90EE90">)*,</span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><var><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></var><span class="deltaxml-new" style="background:#90EE90">)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:group&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:try</span><br /><span class="deltaxml-new" style="background:#90EE90">  name? = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.variable"><span class="deltaxml-new" style="background:#90EE90">p:variable</span></a><span class="deltaxml-new" style="background:#90EE90">*,</span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.group"><span class="deltaxml-new" style="background:#90EE90">p:group</span></a><span class="deltaxml-new" style="background:#90EE90">,</span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.catch"><span class="deltaxml-new" style="background:#90EE90">p:catch</span></a><span class="deltaxml-new" style="background:#90EE90">)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:try&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:catch</span><br /><span class="deltaxml-new" style="background:#90EE90">  name? = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    ((</span><a href="#p.output"><span class="deltaxml-new" style="background:#90EE90">p:output</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.log"><span class="deltaxml-new" style="background:#90EE90">p:log</span></a><span class="deltaxml-new" style="background:#90EE90">)*,</span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><var><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></var><span class="deltaxml-new" style="background:#90EE90">)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:catch&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;</span><var><span class="deltaxml-new" style="background:#90EE90">p:atomic-step</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  name? = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.input"><span class="deltaxml-new" style="background:#90EE90">p:input</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.with-option"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.with-param"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.log"><span class="deltaxml-new" style="background:#90EE90">p:log</span></a><span class="deltaxml-new" style="background:#90EE90">)*</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/</span><var><span class="deltaxml-new" style="background:#90EE90">p:atomic-step</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></p><p id="R.1" prefix="pfx" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;</span><var><span class="deltaxml-new" style="background:#90EE90">pfx:atomic-step</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  name? = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.input"><span class="deltaxml-new" style="background:#90EE90">p:input</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.with-option"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.with-param"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.log"><span class="deltaxml-new" style="background:#90EE90">p:log</span></a><span class="deltaxml-new" style="background:#90EE90">)*</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/</span><var><span class="deltaxml-new" style="background:#90EE90">pfx:atomic-step</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">port</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  sequence? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  primary? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  kind? = "document"</span><br /><span class="deltaxml-new" style="background:#90EE90">  select? = </span><var><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.empty"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      (</span><a href="#p.document"><span class="deltaxml-new" style="background:#90EE90">p:document</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.inline"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.data"><span class="deltaxml-new" style="background:#90EE90">p:data</span></a><span class="deltaxml-new" style="background:#90EE90">)+)?</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:input&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">port</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  select? = </span><var><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.empty"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      (</span><a href="#p.pipe"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.document"><span class="deltaxml-new" style="background:#90EE90">p:document</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.inline"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.data"><span class="deltaxml-new" style="background:#90EE90">p:data</span></a><span class="deltaxml-new" style="background:#90EE90">)+)?</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:input&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">port</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  sequence? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  primary? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">kind</span></strong><span class="deltaxml-new" style="background:#90EE90"> = "parameter"&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.empty"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      (</span><a href="#p.document"><span class="deltaxml-new" style="background:#90EE90">p:document</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.inline"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a><span class="deltaxml-new" style="background:#90EE90">)+)?</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:input&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:iteration-source</span><br /><span class="deltaxml-new" style="background:#90EE90">  select? = </span><var><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.empty"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      (</span><a href="#p.pipe"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.document"><span class="deltaxml-new" style="background:#90EE90">p:document</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.inline"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.data"><span class="deltaxml-new" style="background:#90EE90">p:data</span></a><span class="deltaxml-new" style="background:#90EE90">)+)?</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:iteration-source&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:viewport-source&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.pipe"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.document"><span class="deltaxml-new" style="background:#90EE90">p:document</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.inline"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.data"><span class="deltaxml-new" style="background:#90EE90">p:data</span></a><span class="deltaxml-new" style="background:#90EE90">)?</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:viewport-source&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">port</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  sequence? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  primary? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">port</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  sequence? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  primary? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.empty"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      (</span><a href="#p.pipe"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.document"><span class="deltaxml-new" style="background:#90EE90">p:document</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.inline"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">       </span><a href="#p.data"><span class="deltaxml-new" style="background:#90EE90">p:data</span></a><span class="deltaxml-new" style="background:#90EE90">)+)?</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:output&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:log</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">port</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  href? = </span><var><span class="deltaxml-new" style="background:#90EE90">anyURI</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:serialization</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">port</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  byte-order-mark? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  cdata-section-elements? = </span><var><span class="deltaxml-new" style="background:#90EE90">NMTOKENS</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  doctype-public? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  doctype-system? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  encoding? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  escape-uri-attributes? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  include-content-type? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  indent? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  media-type? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  method? = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  normalization-form? = </span><var><span class="deltaxml-new" style="background:#90EE90">NFC|NFD|NFKC|NFKD|fully-normalized|none|xs:NMTOKEN</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  omit-xml-declaration? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  standalone? = </span><var><span class="deltaxml-new" style="background:#90EE90">true|false|omit</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  undeclare-prefixes? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  version? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:variable</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">name</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">select</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    ((</span><a href="#p.empty"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.pipe"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.document"><span class="deltaxml-new" style="background:#90EE90">p:document</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.inline"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.data"><span class="deltaxml-new" style="background:#90EE90">p:data</span></a><span class="deltaxml-new" style="background:#90EE90">)? &amp; </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.namespaces"><span class="deltaxml-new" style="background:#90EE90">p:namespaces</span></a><span class="deltaxml-new" style="background:#90EE90">*)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:variable&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">name</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  required? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">name</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  required? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">select</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:with-option</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">name</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">select</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    ((</span><a href="#p.empty"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.pipe"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.document"><span class="deltaxml-new" style="background:#90EE90">p:document</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.inline"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.data"><span class="deltaxml-new" style="background:#90EE90">p:data</span></a><span class="deltaxml-new" style="background:#90EE90">)? &amp; </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.namespaces"><span class="deltaxml-new" style="background:#90EE90">p:namespaces</span></a><span class="deltaxml-new" style="background:#90EE90">*)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:with-option&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:with-param</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">name</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">select</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  port? = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    ((</span><a href="#p.empty"><span class="deltaxml-new" style="background:#90EE90">p:empty</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.pipe"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.document"><span class="deltaxml-new" style="background:#90EE90">p:document</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.inline"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.data"><span class="deltaxml-new" style="background:#90EE90">p:data</span></a><span class="deltaxml-new" style="background:#90EE90">)? &amp; </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.namespaces"><span class="deltaxml-new" style="background:#90EE90">p:namespaces</span></a><span class="deltaxml-new" style="background:#90EE90">*)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:with-param&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:namespaces</span><br /><span class="deltaxml-new" style="background:#90EE90">  binding? = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  element? = </span><var><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  except-prefixes? = </span><var><span class="deltaxml-new" style="background:#90EE90">prefix list</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span><br /><span class="deltaxml-new" style="background:#90EE90">  name? = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  type? = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  psvi-required? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  xpath-version? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  exclude-inline-prefixes? = </span><var><span class="deltaxml-new" style="background:#90EE90">prefix list</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  version? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.input"><span class="deltaxml-new" style="background:#90EE90">p:input</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.output"><span class="deltaxml-new" style="background:#90EE90">p:output</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.option"><span class="deltaxml-new" style="background:#90EE90">p:option</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.log"><span class="deltaxml-new" style="background:#90EE90">p:log</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.serialization"><span class="deltaxml-new" style="background:#90EE90">p:serialization</span></a><span class="deltaxml-new" style="background:#90EE90">)*,</span><br /><span class="deltaxml-new" style="background:#90EE90">    ((</span><a href="#p.declare-step"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.pipeline"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#p.import"><span class="deltaxml-new" style="background:#90EE90">p:import</span></a><span class="deltaxml-new" style="background:#90EE90">)*,</span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><var><span class="deltaxml-new" style="background:#90EE90">subpipeline</span></var><span class="deltaxml-new" style="background:#90EE90">)?</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:library</span><br /><span class="deltaxml-new" style="background:#90EE90">  psvi-required? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  xpath-version? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  exclude-inline-prefixes? = </span><var><span class="deltaxml-new" style="background:#90EE90">prefix list</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  version? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#p.import"><span class="deltaxml-new" style="background:#90EE90">p:import</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.declare-step"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#p.pipeline"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></a><span class="deltaxml-new" style="background:#90EE90">)*</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:library&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:import</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">href</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">anyURI</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:pipe</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">step</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">port</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:inline</span><br /><span class="deltaxml-new" style="background:#90EE90">  exclude-inline-prefixes? = </span><var><span class="deltaxml-new" style="background:#90EE90">prefix list</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><var><span class="deltaxml-new" style="background:#90EE90">anyElement</span></var><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:inline&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:document</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">href</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">anyURI</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:data</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">href</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">anyURI</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  wrapper? = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  wrapper-prefix? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  wrapper-namespace? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  content-type? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:empty /&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:documentation&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><var><span class="deltaxml-new" style="background:#90EE90">any-well-formed-content</span></var><span class="deltaxml-new" style="background:#90EE90">*</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:documentation&gt;</span></code></p><p id="R.1" prefix="p" class="element-syntax element-syntax-language-construct"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:pipeinfo&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><var><span class="deltaxml-new" style="background:#90EE90">any-well-formed-content</span></var><span class="deltaxml-new" style="background:#90EE90">*</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/p:pipeinfo&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The core steps are also summarized here.</span></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:add-attribute</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">attribute-name</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">attribute-prefix</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                           </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">NCName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">attribute-namespace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                        </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">attribute-value</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">            </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:add-xml-base</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">all</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">relative</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                   </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:compare</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">alternate</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">fail-if-not-equal</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:count</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">limit</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">0</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                           </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">integer</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:delete</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:directory-list</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">path</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">include-filter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">RegularExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">exclude-filter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">RegularExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:error</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">code</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">code-prefix</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">NCName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">code-namespace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:escape-markup</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">''</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">ListOfQNames</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">indent</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                 </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">method</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'xml'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'omit'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                 </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">"true" | "false" | "omit"</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">version</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'1.0'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                     </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:filter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                     </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                            </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">''</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">ListOfQNames</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                   </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">indent</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                 </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">method</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'xml'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'none'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">NormalizationForm</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'omit'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                 </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">"true" | "false" | "omit"</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">version</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'1.0'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                     </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:identity</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:insert</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">insertion</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'/*'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                        </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">position</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                   </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">"first-child" | "last-child" | "before" | "after"</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:label-elements</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">attribute</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'xml:id'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">attribute-prefix</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                           </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">NCName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">attribute-namespace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                        </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">label</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'concat("_",$p:index)'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'*'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">replace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:load</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">href</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">dtd-validate</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">              </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:make-absolute-uris</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">base-uri</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                   </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:namespace-rename</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">from</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">to</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">apply-to</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'all'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">"all" | "elements" | "attributes"</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:pack</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">alternate</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrapper-prefix</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">NCName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrapper-namespace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                          </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr kind-attr"><span class="deltaxml-new" style="background:#90EE90">kind</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value kind-value"><span class="deltaxml-new" style="background:#90EE90">parameter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:rename</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">new-name</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                   </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">new-prefix</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                 </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">NCName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">new-namespace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                              </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:replace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">replacement</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:set-attributes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">attributes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:sink</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:split-sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">matched</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">not-matched</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">initial-only</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">              </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">test</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:store</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">href</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                            </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">''</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">ListOfQNames</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                   </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">indent</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                 </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">method</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'xml'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'none'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">NormalizationForm</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'omit'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                 </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">"true" | "false" | "omit"</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">version</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'1.0'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                     </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:string-replace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">replace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:unescape-markup</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">namespace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                  </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'application/xml'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                   </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">charset</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:unwrap</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:wrap</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrapper-prefix</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">NCName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrapper-namespace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                          </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">group-adjacent</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:wrap-sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrapper-prefix</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">NCName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrapper-namespace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                          </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">group-adjacent</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:xinclude</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">fixup-xml-base</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">            </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">fixup-xml-lang</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">            </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-rqd"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:xslt</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">stylesheet</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr kind-attr"><span class="deltaxml-new" style="background:#90EE90">kind</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value kind-value"><span class="deltaxml-new" style="background:#90EE90">parameter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">secondary</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">initial-mode</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                               </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">template-name</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                              </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">output-base-uri</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                            </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">version</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">As are the optional steps.</span></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:exec</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">errors</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">exit-status</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">command</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">args</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">''</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                           </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">cwd</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                        </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">source-is-xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">              </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">result-is-xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">              </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrap-result-lines</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">errors-is-xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrap-error-lines</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">          </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">path-separator</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">failure-threshold</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                          </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">integer</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">arg-separator</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">' '</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                 </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                            </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">''</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">ListOfQNames</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                   </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">indent</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                 </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">method</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'xml'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'none'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">NormalizationForm</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'omit'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                 </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">"true" | "false" | "omit"</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">version</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'1.0'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                     </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:hash</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr kind-attr"><span class="deltaxml-new" style="background:#90EE90">kind</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value kind-value"><span class="deltaxml-new" style="background:#90EE90">parameter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">value</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">algorithm</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                  </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">QName</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">version</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:uuid</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">version</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                                    </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">integer</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-relax-ng</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">schema</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">dtd-attribute-values</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">dtd-id-idref-warnings</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">               </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-schematron</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr kind-attr"><span class="deltaxml-new" style="background:#90EE90">kind</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value kind-value"><span class="deltaxml-new" style="background:#90EE90">parameter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">schema</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">report</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">phase</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'#ALL'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">               </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-xml-schema</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">schema</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">use-location-hints</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">        </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">try-namespaces</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'false'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">            </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'true'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">               </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">boolean</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">mode</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'strict'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                     </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">"strict" | "lax"</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:www-form-urldecode</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">value</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:www-form-urlencode</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr kind-attr"><span class="deltaxml-new" style="background:#90EE90">kind</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value kind-value"><span class="deltaxml-new" style="background:#90EE90">parameter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTMatchPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:xquery</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">query</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr kind-attr"><span class="deltaxml-new" style="background:#90EE90">kind</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value kind-value"><span class="deltaxml-new" style="background:#90EE90">parameter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p class="element-syntax element-syntax-declare-step-opt"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:xsl-formatter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr kind-attr"><span class="deltaxml-new" style="background:#90EE90">kind</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value kind-value"><span class="deltaxml-new" style="background:#90EE90">parameter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">href</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">anyURI</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                               </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">And the step vocabulary elements.</span></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:param</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">name</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">QName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  namespace? = </span><var><span class="deltaxml-new" style="background:#90EE90">anyURI</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">value</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:param-set&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><a href="#cv.param"><span class="deltaxml-new" style="background:#90EE90">c:param</span></a><span class="deltaxml-new" style="background:#90EE90">*</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:param-set&gt;</span></code></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:data</span><br /><span class="deltaxml-new" style="background:#90EE90">  content-type? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  charset? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  encoding? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:data&gt;</span></code></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:result&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:result&gt;</span></code></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:directory</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">name</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#cv.file"><span class="deltaxml-new" style="background:#90EE90">c:file</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#cv.directory"><span class="deltaxml-new" style="background:#90EE90">c:directory</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><a href="#cv.other"><span class="deltaxml-new" style="background:#90EE90">c:other</span></a><span class="deltaxml-new" style="background:#90EE90">)*</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:directory&gt;</span></code></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:file</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">name</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:other</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">name</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:request</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">method</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">NCName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  href? = </span><var><span class="deltaxml-new" style="background:#90EE90">anyURI</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  detailed? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  status-only? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  username? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  password? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  auth-method? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  send-authorization? = </span><var><span class="deltaxml-new" style="background:#90EE90">boolean</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  override-content-type? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#cv.header"><span class="deltaxml-new" style="background:#90EE90">c:header</span></a><span class="deltaxml-new" style="background:#90EE90">*,</span><br /><span class="deltaxml-new" style="background:#90EE90">     (</span><a href="#cv.multipart"><span class="deltaxml-new" style="background:#90EE90">c:multipart</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#cv.body"><span class="deltaxml-new" style="background:#90EE90">c:body</span></a><span class="deltaxml-new" style="background:#90EE90">)?)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:request&gt;</span></code></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:header</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">name</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">value</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90"> /&gt;</span></code></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:multipart</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">content-type</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">boundary</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><a href="#cv.body"><span class="deltaxml-new" style="background:#90EE90">c:body</span></a><span class="deltaxml-new" style="background:#90EE90">+</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:multipart&gt;</span></code></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:body</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">content-type</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  encoding? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  id? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  description? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  disposition? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><var><span class="deltaxml-new" style="background:#90EE90">anyElement</span></var><span class="deltaxml-new" style="background:#90EE90">*</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:body&gt;</span></code></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:response</span><br /><span class="deltaxml-new" style="background:#90EE90">  status? = </span><var><span class="deltaxml-new" style="background:#90EE90">integer</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    (</span><a href="#cv.header"><span class="deltaxml-new" style="background:#90EE90">c:header</span></a><span class="deltaxml-new" style="background:#90EE90">*,</span><br /><span class="deltaxml-new" style="background:#90EE90">     (</span><a href="#cv.multipart"><span class="deltaxml-new" style="background:#90EE90">c:multipart</span></a><span class="deltaxml-new" style="background:#90EE90"> | </span><br /><span class="deltaxml-new" style="background:#90EE90">      </span><a href="#cv.body"><span class="deltaxml-new" style="background:#90EE90">c:body</span></a><span class="deltaxml-new" style="background:#90EE90">)?)</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:response&gt;</span></code></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:line&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:line&gt;</span></code></p><p id="R.1" prefix="c" class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:query&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:query&gt;</span></code></p></article><article id="errors-list" class="appendix"><header class="appendix-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">E List of Error Codes</span></h2></header><div class="toc"><h2 id="TableOfContents"><span class="deltaxml-new" style="background:#90EE90">Table of Contents</span></h2><ul class="toc"><li><span><span class="deltaxml-new" style="background:#90EE90">1 </span><a href="#app.static-errors"><span class="deltaxml-new" style="background:#90EE90">Static Errors</span></a></span></li><li><span><span class="deltaxml-new" style="background:#90EE90">2 </span><a href="#app.dynamic-errors"><span class="deltaxml-new" style="background:#90EE90">Dynamic Errors</span></a></span></li><li><span><span class="deltaxml-new" style="background:#90EE90">3 </span><a href="#app.step-errors"><span class="deltaxml-new" style="background:#90EE90">Step Errors</span></a></span></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">The following error codes are defined by this specification.</span></p><section id="app.static-errors" class="section"><div class="section-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">1 Static Errors</span></h2></div><p><span class="deltaxml-new" style="background:#90EE90">The following </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static errors</span></a></em><span class="deltaxml-new" style="background:#90EE90"> are defined:</span></p><div id="static-error-summary"><h5><span class="deltaxml-new" style="background:#90EE90">Static Errors</span></h5><dl class="errs"><dt><a name="err.S0001"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0001</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if there are any loops in the connections between steps: no step can be connected to itself nor can there be any sequence of connections through other steps that leads back to itself.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0001"><span class="deltaxml-new" style="background:#90EE90">Connections</span></a></p></dd><dt><a name="err.S0002"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0002</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">All steps in the same scope must have unique names: it is a static error if two steps with the same name appear in the same scope.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0002"><span class="deltaxml-new" style="background:#90EE90">Scoping of Names</span></a></p></dd><dt><a name="err.S0003"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0003</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if any declared input is not connected.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0003"><span class="deltaxml-new" style="background:#90EE90">Inputs and Outputs</span></a></p></dd><dt><a name="err.S0004"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0004</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if an option or variable declaration duplicates the name of any other option or variable in the same environment.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0004"><span class="deltaxml-new" style="background:#90EE90">Scoping of Names</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.S0004.1"><span class="deltaxml-new" style="background:#90EE90">p:option</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.S0004.2"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></a></p></dd><dt><a name="err.S0005"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0005</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if the primary output port of any step is not connected.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0005"><span class="deltaxml-new" style="background:#90EE90">Inputs and Outputs</span></a></p></dd><dt><a name="err.S0006"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0006</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if the primary output port has no explicit connection and the last step in the subpipeline does not have a primary output port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0006"><span class="deltaxml-new" style="background:#90EE90">p:for-each</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.S0006.1"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.S0006.2"><span class="deltaxml-new" style="background:#90EE90">Declaring pipelines</span></a></p></dd><dt><a name="err.S0007"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0007</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if two subpipelines in a p:choose declare different outputs.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0007"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></a></p></dd><dt><a name="err.S0008"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0008</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if any element in the XProc namespace has attributes not defined by this specification unless they are extension attributes.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0008"><span class="deltaxml-new" style="background:#90EE90">Common errors</span></a></p></dd><dt><a name="err.S0009"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0009</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if the p:group and p:catch subpipelines declare different outputs.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0009"><span class="deltaxml-new" style="background:#90EE90">p:try</span></a></p></dd><dt><a name="err.S0010"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0010</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if a pipeline contains a step whose specified inputs, outputs, and options do not match the signature for steps of that type.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0010"><span class="deltaxml-new" style="background:#90EE90">Extension Steps</span></a></p></dd><dt><a name="err.S0011"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0011</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error to identify two ports with the same name on the same step.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0011"><span class="deltaxml-new" style="background:#90EE90">Document Inputs</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.S0011.1"><span class="deltaxml-new" style="background:#90EE90">Parameter Inputs</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.S0011.2"><span class="deltaxml-new" style="background:#90EE90">p:output</span></a></p></dd><dt><a name="err.S0014"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0014</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error to identify more than one output port as primary.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0014"><span class="deltaxml-new" style="background:#90EE90">p:output</span></a></p></dd><dt><a name="err.S0015"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0015</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if a compound step has no contained steps.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0015"><span class="deltaxml-new" style="background:#90EE90">Common errors</span></a></p></dd><dt><a name="err.S0017"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0017</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error to specify that an option is both required and has a default value.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0017"><span class="deltaxml-new" style="background:#90EE90">p:option</span></a></p></dd><dt><a name="err.S0018"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0018</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">If an option is required, it is a static error to invoke the step without specifying a value for that option.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0018"><span class="deltaxml-new" style="background:#90EE90">p:option</span></a></p></dd><dt><a name="err.S0019"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0019</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">it is a static error for a variable's document connection to refer to the output port of any step in the surrounding container's contained steps</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0019"><span class="deltaxml-new" style="background:#90EE90">p:variable</span></a></p></dd><dt><a name="err.S0020"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0020</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if the binding attribute on p:namespaces is specified and its value is not the name of an in-scope binding.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0020"><span class="deltaxml-new" style="background:#90EE90">Namespaces on variables, options, and parameters</span></a></p></dd><dt><a name="err.S0022"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0022</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">In all cases except the p:output of a compound step, it is a static error if the port identified by a p:pipe is not in the readable ports of the step that contains the p:pipe.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0022"><span class="deltaxml-new" style="background:#90EE90">p:pipe</span></a></p></dd><dt><a name="err.S0024"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0024</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if the content of the p:inline element does not consist of exactly one element, optionally preceded and/or followed by any number of processing instructions, comments or whitespace characters.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0024"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a></p></dd><dt><a name="err.S0025"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0025</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if the expanded-QName value of the type attribute is in no namespace or in the XProc namespace.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0025"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></a></p></dd><dt><a name="err.S0026"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0026</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if the port specified on the p:log is not the name of an output port on the step in which it appears or if more than one p:log element is applied to the same port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0026"><span class="deltaxml-new" style="background:#90EE90">p:log</span></a></p></dd><dt><a name="err.S0027"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0027</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if an option is specified with both the shortcut form and the long form.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0027"><span class="deltaxml-new" style="background:#90EE90">Syntactic Shortcut for Option Values</span></a></p></dd><dt><a name="err.S0028"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0028</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error to declare an option or variable in the XProc namespace.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0028"><span class="deltaxml-new" style="background:#90EE90">p:variable</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.S0028.1"><span class="deltaxml-new" style="background:#90EE90">p:option</span></a></p></dd><dt><a name="err.S0029"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0029</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error to specify a connection for a p:output inside a p:declare-step for an atomic step.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0029"><span class="deltaxml-new" style="background:#90EE90">p:output</span></a></p></dd><dt><a name="err.S0030"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0030</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error to specify that more than one input port is the primary.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0030"><span class="deltaxml-new" style="background:#90EE90">Document Inputs</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.S0030.1"><span class="deltaxml-new" style="background:#90EE90">Parameter Inputs</span></a></p></dd><dt><a name="err.S0031"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0031</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error to use an option on an atomic step that is not declared on steps of that type.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0031"><span class="deltaxml-new" style="background:#90EE90">Syntactic Shortcut for Option Values</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.S0031.1"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></a></p></dd><dt><a name="err.S0032"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0032</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if no connection is provided and the default readable port is undefined.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0032"><span class="deltaxml-new" style="background:#90EE90">Document Inputs</span></a></p></dd><dt><a name="err.S0033"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0033</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error to specify any kind of input other than “document” or “parameter”.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0033"><span class="deltaxml-new" style="background:#90EE90">Parameter Inputs</span></a></p></dd><dt><a name="err.S0034"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0034</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if the specified port is not a parameter input port or if no port is specified and the step does not have a primary parameter input port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0034"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></a></p></dd><dt><a name="err.S0035"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0035</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if the declaration of a parameter input port contains a connection; parameter input port declarations must be empty.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0035"><span class="deltaxml-new" style="background:#90EE90">Parameter Inputs</span></a></p></dd><dt><a name="err.S0036"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0036</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">All the step types in a pipeline or library must have unique names: it is a static error if any step type name is built-in and/or declared or defined more than once in the same scope.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0036"><span class="deltaxml-new" style="background:#90EE90">Scoping of Names</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.S0036.1"><span class="deltaxml-new" style="background:#90EE90">Handling Circular and Re-entrant Library Imports (Non-Normative)</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.S0036.2"><span class="deltaxml-new" style="background:#90EE90">Handling Circular and Re-entrant Library Imports (Non-Normative)</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.S0036.3"><span class="deltaxml-new" style="background:#90EE90">Handling Circular and Re-entrant Library Imports (Non-Normative)</span></a></p></dd><dt><a name="err.S0037"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0037</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if any step directly contains text nodes that do not consist entirely of whitespace.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0037"><span class="deltaxml-new" style="background:#90EE90">Common errors</span></a></p></dd><dt><a name="err.S0038"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0038</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if any required attribute is not provided.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0038"><span class="deltaxml-new" style="background:#90EE90">Common errors</span></a></p></dd><dt><a name="err.S0039"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0039</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if the port specified on the p:serialization is not the name of an output port on the pipeline in which it appears or if more than one p:serialization element is applied to the same port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0039"><span class="deltaxml-new" style="background:#90EE90">p:serialization</span></a></p></dd><dt><a name="err.S0040"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0040</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error to specify any value other than true.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0040"><span class="deltaxml-new" style="background:#90EE90">Parameter Inputs</span></a></p></dd><dt><a name="err.S0041"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0041</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error to specify both binding and element on the same p:namespaces element.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0041"><span class="deltaxml-new" style="background:#90EE90">Namespaces on variables, options, and parameters</span></a></p></dd><dt><a name="err.S0042"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0042</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error to attempt to provide a connection for an input port on the declaration of an atomic step.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0042"><span class="deltaxml-new" style="background:#90EE90">Document Inputs</span></a></p></dd><dt><a name="err.S0044"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0044</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if any element in the XProc namespace or any step has element children other than those specified for it by this specification. In particular, the presence of atomic steps for which there is no visible declaration may raise this error. </span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0044"><span class="deltaxml-new" style="background:#90EE90">Common errors</span></a></p></dd><dt><a name="err.S0048"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0048</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error to use a declared step as a compound step.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0048"><span class="deltaxml-new" style="background:#90EE90">Extension Steps</span></a></p></dd><dt><a name="err.S0051"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0051</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if the except-prefixes attribute on p:namespaces does not contain a list of tokens or if any of those tokens is not a prefix bound to a namespace in the in-scope namespaces of the p:namespaces element.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0051"><span class="deltaxml-new" style="background:#90EE90">Namespaces on variables, options, and parameters</span></a></p></dd><dt><a name="err.S0052"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0052</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if the URI of a p:import cannot be retrieved or if, once retrieved, it does not point to a p:library, p:declare-step, or p:pipeline.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0052"><span class="deltaxml-new" style="background:#90EE90">p:import</span></a></p></dd><dt><a name="err.S0053"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0053</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error to import a single pipeline if that pipeline does not have a type.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0053"><span class="deltaxml-new" style="background:#90EE90">p:import</span></a></p></dd><dt><a name="err.S0055"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0055</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if a primary parameter input port is unconnected and the pipeline that contains the step has no primary parameter input port unless at least one explicit p:with-param is provided for that port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0055"><span class="deltaxml-new" style="background:#90EE90">Parameter Inputs</span></a></p></dd><dt><a name="err.S0057"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0057</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if the exclude-inline-prefixes attribute does not contain a list of tokens or if any of those tokens (except #all or #default) is not a prefix bound to a namespace in the in-scope namespaces of the element on which it occurs.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0057"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a></p></dd><dt><a name="err.S0058"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0058</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if the value #default is used within the exclude-inline-prefixes attribute and there is no default namespace in scope.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0058"><span class="deltaxml-new" style="background:#90EE90">p:inline</span></a></p></dd><dt><a name="err.S0059"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0059</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if the pipeline element is not p:pipeline, p:declare-step, or p:library.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0059"><span class="deltaxml-new" style="background:#90EE90">Common errors</span></a></p></dd><dt><a name="err.S0060"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0060</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if the processor encounters an explicit request for a previous version of the language and it is unable to process the pipeline using those semantics.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0060"><span class="deltaxml-new" style="background:#90EE90">Backwards-compatible Mode</span></a></p></dd><dt><a name="err.S0061"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0061</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if a use-when expression refers to the context or attempts to refer to any documents or collections.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0061"><span class="deltaxml-new" style="background:#90EE90">Conditional Element Exclusion</span></a></p></dd><dt><a name="err.S0062"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0062</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if a required version attribute is not present.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0062"><span class="deltaxml-new" style="background:#90EE90">Versioning Considerations</span></a></p></dd><dt><a name="err.S0063"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0063</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a static error if the value of the version attribute is not a xs:decimal.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.S0063"><span class="deltaxml-new" style="background:#90EE90">Versioning Considerations</span></a></p></dd></dl></div></section><section id="app.dynamic-errors" class="section"><div class="section-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">2 Dynamic Errors</span></h2></div><p><span class="deltaxml-new" style="background:#90EE90">The following </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic errors</span></a></em><span class="deltaxml-new" style="background:#90EE90"> are defined:</span></p><div id="dynamic-error-summary"><h5><span class="deltaxml-new" style="background:#90EE90">Dynamic Errors</span></h5><dl class="errs"><dt><a name="err.D0001"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0001</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if a non-XML resource is produced on a step output or arrives on a step input.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0001"><span class="deltaxml-new" style="background:#90EE90">Inputs and Outputs</span></a></p></dd><dt><a name="err.D0003"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0003</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the viewport source does not provide exactly one document. </span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0003"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.D0003.1"><span class="deltaxml-new" style="background:#90EE90">p:viewport-source</span></a></p></dd><dt><a name="err.D0004"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0004</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if no subpipeline is selected by the p:choose and no default is provided.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0004"><span class="deltaxml-new" style="background:#90EE90">p:choose</span></a></p></dd><dt><a name="err.D0005"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0005</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if more than one document appears on the connection for the xpath-context.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0005"><span class="deltaxml-new" style="background:#90EE90">p:xpath-context</span></a></p></dd><dt><a name="err.D0006"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0006</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">If sequence is not specified, or has the value false, then it is a dynamic error unless exactly one document appears on the declared port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0006"><span class="deltaxml-new" style="background:#90EE90">Document Inputs</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.D0006.1"><span class="deltaxml-new" style="background:#90EE90">p:exec</span></a></p></dd><dt><a name="err.D0007"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0007</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">If sequence is not specified on p:output, or has the value false, then it is a dynamic error if the step does not produce exactly one document on the declared port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0007"><span class="deltaxml-new" style="background:#90EE90">p:output</span></a></p></dd><dt><a name="err.D0008"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0008</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if a document sequence appears where a document to be used as the context node is expected.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0008"><span class="deltaxml-new" style="background:#90EE90">Processor XPath Context</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.D0008.1"><span class="deltaxml-new" style="background:#90EE90">p:variable</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.D0008.2"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.D0008.3"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></a></p></dd><dt><a name="err.D0009"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0009</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the element attribute on p:namespaces is specified and it does not identify a single element node.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0009"><span class="deltaxml-new" style="background:#90EE90">Namespaces on variables, options, and parameters</span></a></p></dd><dt><a name="err.D0010"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0010</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the match expression on p:viewport does not match an element or document.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0010"><span class="deltaxml-new" style="background:#90EE90">p:viewport</span></a></p></dd><dt><a name="err.D0011"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0011</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the resource referenced by a p:document element does not exist, cannot be accessed, or is not a well-formed XML document.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0011"><span class="deltaxml-new" style="background:#90EE90">p:document</span></a></p></dd><dt><a name="err.D0012"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0012</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if any attempt is made to dereference a URI where the scheme of the URI reference is not supported.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0012"><span class="deltaxml-new" style="background:#90EE90">Common errors</span></a></p></dd><dt><a name="err.D0013"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0013</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the specified namespace bindings are inconsistent; that is, if the same prefix is bound to two different namespace names.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0013"><span class="deltaxml-new" style="background:#90EE90">Namespaces on variables, options, and parameters</span></a></p></dd><dt><a name="err.D0014"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0014</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error for any unqualified attribute names other than “name”, “namespace”, or “value” to appear on a c:param element.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0014"><span class="deltaxml-new" style="background:#90EE90">The c:param element</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.D0014.1"><span class="deltaxml-new" style="background:#90EE90">The c:param-set element</span></a></p></dd><dt><a name="err.D0015"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0015</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the specified QName cannot be resolved with the in-scope namespace declarations.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0015"><span class="deltaxml-new" style="background:#90EE90">System Properties</span></a></p></dd><dt><a name="err.D0016"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0016</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the select expression on a p:input returns atomic values or anything other than element or document nodes (or an empty sequence).</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0016"><span class="deltaxml-new" style="background:#90EE90">Document Inputs</span></a></p></dd><dt><a name="err.D0017"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0017</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the running pipeline attempts to invoke a step which the processor does not know how to perform.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0017"><span class="deltaxml-new" style="background:#90EE90">Extension Steps</span></a></p></dd><dt><a name="err.D0018"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0018</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the parameter list contains any elements other than c:param.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0018"><span class="deltaxml-new" style="background:#90EE90">The c:param-set element</span></a></p></dd><dt><a name="err.D0019"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0019</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if any option value does not satisfy the type required for that option.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0019"><span class="deltaxml-new" style="background:#90EE90">Common errors</span></a></p></dd><dt><a name="err.D0020"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0020</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the combination of serialization options specified or defaulted is not allowed.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0020"><span class="deltaxml-new" style="background:#90EE90">p:serialization</span></a></p></dd><dt><a name="err.D0021"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0021</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error for a pipeline to attempt to access a resource for which it has insufficient privileges or perform a step which is forbidden.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0021"><span class="deltaxml-new" style="background:#90EE90">Security Considerations</span></a></p></dd><dt><a name="err.D0022"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0022</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if a processor that does not support PSVI annotations attempts to invoke a step which asserts that they are required.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0022"><span class="deltaxml-new" style="background:#90EE90">PSVIs in XProc</span></a></p></dd><dt><a name="err.D0025"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0025</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the namespace attribute is specified, the name contains a colon, and the specified namespace is not the same as the in-scope namespace binding for the specified prefix.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0025"><span class="deltaxml-new" style="background:#90EE90">The c:param element</span></a></p></dd><dt><a name="err.D0026"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0026</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the select expression makes reference to the context node, size, or position when the context item is undefined.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0026"><span class="deltaxml-new" style="background:#90EE90">p:variable</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.D0026.1"><span class="deltaxml-new" style="background:#90EE90">p:option</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.D0026.2"><span class="deltaxml-new" style="background:#90EE90">p:with-option</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.D0026.3"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></a></p></dd><dt><a name="err.D0028"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0028</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if any attribute value does not satisfy the type required for that attribute.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0028"><span class="deltaxml-new" style="background:#90EE90">Common errors</span></a></p></dd><dt><a name="err.D0029"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0029</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the document referenced by a p:data element does not exist, cannot be accessed, or cannot be encoded as specified.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0029"><span class="deltaxml-new" style="background:#90EE90">p:data</span></a></p></dd><dt><a name="err.D0030"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0030</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if a step is unable or incapable of performing its function.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0030"><span class="deltaxml-new" style="background:#90EE90">Common errors</span></a></p></dd><dt><a name="err.D0031"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0031</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error to use the XProc namespace in the name of a parameter.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0031"><span class="deltaxml-new" style="background:#90EE90">p:with-param</span></a></p></dd><dt><a name="err.D0033"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0033</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the name specified is not the name of an in-scope option or variable.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0033"><span class="deltaxml-new" style="background:#90EE90">Value Available</span></a></p></dd><dt><a name="err.D0034"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0034</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error to specify a new namespace or prefix if the lexical value of the specified name contains a colon (or if no wrapper is explicitly specified).</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0034"><span class="deltaxml-new" style="background:#90EE90">p:data</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.D0034.1"><span class="deltaxml-new" style="background:#90EE90">p:add-attribute</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.D0034.2"><span class="deltaxml-new" style="background:#90EE90">p:error</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.D0034.3"><span class="deltaxml-new" style="background:#90EE90">p:label-elements</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.D0034.4"><span class="deltaxml-new" style="background:#90EE90">p:pack</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.D0034.5"><span class="deltaxml-new" style="background:#90EE90">p:rename</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.D0034.6"><span class="deltaxml-new" style="background:#90EE90">p:wrap</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.D0034.7"><span class="deltaxml-new" style="background:#90EE90">p:wrap-sequence</span></a></p></dd></dl></div></section><section id="app.step-errors" class="section"><div class="section-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">3 Step Errors</span></h2></div><p><span class="deltaxml-new" style="background:#90EE90">The following </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic errors</span></a></em><span class="deltaxml-new" style="background:#90EE90"> can be raised by steps in this specification:</span></p><div id="step-error-summary"><h5><span class="deltaxml-new" style="background:#90EE90">Step Errors</span></h5><dl class="errs"><dt><a name="err.C0002"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0002</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the value starts with the string “--”.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0002"><span class="deltaxml-new" style="background:#90EE90">Request Entity body conversion</span></a></p></dd><dt><a name="err.C0003"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0003</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if a username or password is specified without specifying an auth-method, if the requested auth-method isn't supported, or the authentication challenge contains an authentication method that isn't supported.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0003"><span class="deltaxml-new" style="background:#90EE90">Specifying a request</span></a></p></dd><dt><a name="err.C0004"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0004</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the status-only attribute has the value true and the detailed attribute does not have the value true.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0004"><span class="deltaxml-new" style="background:#90EE90">Specifying a request</span></a></p></dd><dt><a name="err.C0005"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0005</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the request contains a c:body or c:multipart but the method does not allow for an entity body being sent with the request.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0005"><span class="deltaxml-new" style="background:#90EE90">Specifying a request</span></a></p></dd><dt><a name="err.C0006"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0006</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the method is not specified on a c:request. </span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0006"><span class="deltaxml-new" style="background:#90EE90">Specifying a request</span></a></p></dd><dt><a name="err.C0010"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0010</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if an encoding of base64 is specified and the character set is not specified or if the specified character set is not supported by the implementation.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0010"><span class="deltaxml-new" style="background:#90EE90">p:unescape-markup</span></a></p></dd><dt><a name="err.C0012"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0012</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the contents of the directory path are not available to the step due to access restrictions in the environment in which the pipeline is run.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0012"><span class="deltaxml-new" style="background:#90EE90">p:directory-list</span></a></p></dd><dt><a name="err.C0013"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0013</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the pattern matches a processing instruction and the new name has a non-null namespace.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0013"><span class="deltaxml-new" style="background:#90EE90">p:rename</span></a></p></dd><dt><a name="err.C0014"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0014</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the XML namespace (http://www.w3.org/XML/1998/namespace) or the XMLNS namespace (http://www.w3.org/2000/xmlns/) is the value of either the from option or the to option.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0014"><span class="deltaxml-new" style="background:#90EE90">p:namespace-rename</span></a></p></dd><dt><a name="err.C0017"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0017</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the absolute path does not identify a directory.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0017"><span class="deltaxml-new" style="background:#90EE90">p:directory-list</span></a></p></dd><dt><a name="err.C0019"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0019</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the documents are not equal, and the value of the fail-if-not-equal option is true.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0019"><span class="deltaxml-new" style="background:#90EE90">p:compare</span></a></p></dd><dt><a name="err.C0020"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0020</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the the user specifies a value or values that are inconsistent with each other or with the requirements of the step or protocol.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0020"><span class="deltaxml-new" style="background:#90EE90">Specifying a request</span></a></p></dd><dt><a name="err.C0022"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0022</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">it is a dynamic error if the content of the c:body element does not consist of exactly one element, optionally preceded and/or followed by any number of processing instructions, comments or whitespace characters</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0022"><span class="deltaxml-new" style="background:#90EE90">Request Entity body conversion</span></a></p></dd><dt><a name="err.C0023"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0023</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if a select expression or match pattern returns a node type that is not allowed by the step.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0023"><span class="deltaxml-new" style="background:#90EE90">Common errors</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.C0023.1"><span class="deltaxml-new" style="background:#90EE90">p:add-attribute</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.C0023.2"><span class="deltaxml-new" style="background:#90EE90">p:insert</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.C0023.3"><span class="deltaxml-new" style="background:#90EE90">p:label-elements</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.C0023.4"><span class="deltaxml-new" style="background:#90EE90">p:make-absolute-uris</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.C0023.5"><span class="deltaxml-new" style="background:#90EE90">p:rename</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.C0023.6"><span class="deltaxml-new" style="background:#90EE90">p:replace</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.C0023.7"><span class="deltaxml-new" style="background:#90EE90">p:set-attributes</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.C0023.8"><span class="deltaxml-new" style="background:#90EE90">p:unwrap</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.C0023.9"><span class="deltaxml-new" style="background:#90EE90">p:wrap</span></a></p></dd><dt><a name="err.C0025"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0025</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the match pattern matches anything other than an element node and the value of the position option is “first-child” or “last-child”.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0025"><span class="deltaxml-new" style="background:#90EE90">p:insert</span></a></p></dd><dt><a name="err.C0027"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0027</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the document is not valid or the step doesn't support DTD validation.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0027"><span class="deltaxml-new" style="background:#90EE90">p:load</span></a></p></dd><dt><a name="err.C0028"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0028</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">it is a dynamic error if the content of the c:body element does not consist entirely of characters</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0028"><span class="deltaxml-new" style="background:#90EE90">Request Entity body conversion</span></a></p></dd><dt><a name="err.C0029"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0029</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if an XInclude error occurs during processing.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0029"><span class="deltaxml-new" style="background:#90EE90">p:xinclude</span></a></p></dd><dt><a name="err.C0030"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0030</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the override-content-type value cannot be used (e.g. text/plain to override image/png).</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0030"><span class="deltaxml-new" style="background:#90EE90">Managing the response</span></a></p></dd><dt><a name="err.C0033"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0033</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the command cannot be run.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0033"><span class="deltaxml-new" style="background:#90EE90">p:exec</span></a></p></dd><dt><a name="err.C0034"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0034</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the current working directory cannot be changed to the value of the cwd option.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0034"><span class="deltaxml-new" style="background:#90EE90">p:exec</span></a></p></dd><dt><a name="err.C0035"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0035</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error to specify both result-is-xml and wrap-result-lines.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0035"><span class="deltaxml-new" style="background:#90EE90">p:exec</span></a></p></dd><dt><a name="err.C0036"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0036</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the requested hash algorithm is not one that the processor understands or if the value or parameters are not appropriate for that algorithm.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0036"><span class="deltaxml-new" style="background:#90EE90">p:hash</span></a></p></dd><dt><a name="err.C0037"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0037</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the value provided is not a properly x-www-form-urlencoded value.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0037"><span class="deltaxml-new" style="background:#90EE90">p:www-form-urldecode</span></a></p></dd><dt><a name="err.C0038"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0038</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the specified version of XSLT is not available.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0038"><span class="deltaxml-new" style="background:#90EE90">p:xslt</span></a></p></dd><dt><a name="err.C0039"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0039</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if a sequence of documents (including an empty sequence) is provided to an XSLT 1.0 step.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0039"><span class="deltaxml-new" style="background:#90EE90">p:xslt</span></a></p></dd><dt><a name="err.C0040"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0040</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the document element of the document that arrives on the source port is not c:request.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0040"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></a></p></dd><dt><a name="err.C0050"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0050</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the URI scheme is not supported or the step cannot store to the specified location.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0050"><span class="deltaxml-new" style="background:#90EE90">p:store</span></a></p></dd><dt><a name="err.C0051"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0051</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the content-type specified is not supported by the implementation.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0051"><span class="deltaxml-new" style="background:#90EE90">p:unescape-markup</span></a></p></dd><dt><a name="err.C0052"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0052</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the encoding specified is not supported by the implementation.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0052"><span class="deltaxml-new" style="background:#90EE90">Request Entity body conversion</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.C0052.1"><span class="deltaxml-new" style="background:#90EE90">p:unescape-markup</span></a></p></dd><dt><a name="err.C0053"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0053</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the assert-valid option is true and the input document is not valid.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0053"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-relax-ng</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.C0053.1"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-xml-schema</span></a></p></dd><dt><a name="err.C0054"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0054</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the assert-valid option is true and any Schematron assertions fail.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0054"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-schematron</span></a></p></dd><dt><a name="err.C0055"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0055</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the implementation does not support the specified mode.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0055"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-xml-schema</span></a></p></dd><dt><a name="err.C0056"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0056</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the specified initial mode or named template cannot be applied to the specified stylesheet.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0056"><span class="deltaxml-new" style="background:#90EE90">p:xslt</span></a></p></dd><dt><a name="err.C0057"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0057</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the sequence that results from evaluating the XQuery contains items other than documents and elements.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0057"><span class="deltaxml-new" style="background:#90EE90">p:xquery</span></a></p></dd><dt><a name="err.C0058"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0058</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the all and relative options are both true.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0058"><span class="deltaxml-new" style="background:#90EE90">p:add-xml-base</span></a></p></dd><dt><a name="err.C0059"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0059</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the QName value in the attribute-name option uses the prefix “xmlns” or any other prefix that resolves to the namespace name “http://www.w3.org/2000/xmlns/”. </span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0059"><span class="deltaxml-new" style="background:#90EE90">p:add-attribute</span></a></p></dd><dt><a name="err.C0060"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0060</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the processor does not support the specified version of the UUID algorithm.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0060"><span class="deltaxml-new" style="background:#90EE90">p:uuid</span></a></p></dd><dt><a name="err.C0061"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0061</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the name of any encoded parameter name is not a valid xs:NCName.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0061"><span class="deltaxml-new" style="background:#90EE90">p:www-form-urldecode</span></a></p></dd><dt><a name="err.C0062"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0062</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the match option matches a namespace node.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0062"><span class="deltaxml-new" style="background:#90EE90">p:delete</span></a></p></dd><dt><a name="err.C0063"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0063</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the path-separator option is specified and is not exactly one character long.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0063"><span class="deltaxml-new" style="background:#90EE90">p:exec</span></a></p></dd><dt><a name="err.C0064"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0064</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the exit code from the command is greater than the specified failure-threshold value.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0064"><span class="deltaxml-new" style="background:#90EE90">p:exec</span></a></p></dd><dt><a name="err.C0066"></a><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0066</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the arg-separator option is specified and is not exactly one character long.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0066"><span class="deltaxml-new" style="background:#90EE90">p:exec</span></a></p></dd></dl></div></section></article><article id="namespace-fixup-guidance" class="appendix"><header class="appendix-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">F Guidance on Namespace Fixup (Non-Normative)</span></h2></header><p><span class="deltaxml-new" style="background:#90EE90">An XProc processor may find it necessary to add missing namespace declarations to ensure that a document can be serialized. While this process is implementation defined, the purpose of this appendix is to provide guidance as to what an implementation might do to either prevent such situations or fix them as before serialization.</span></p><p><span class="deltaxml-new" style="background:#90EE90">When a namespace binding is generated, the prefix associated with the QName of the element or attribute in question should be used. From an Infoset perspective, this is accomplished by setting the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">[prefix]</span></code><span class="deltaxml-new" style="background:#90EE90"> on the element or attribute. Then when an implementation needs to add a namespace binding, it can reuse that prefix if possible. If reusing the prefix is not possible, the implementation must generate a new prefix that is unique to the in-scope namespace of the element or owner element of the attribute.</span></p><p><span class="deltaxml-new" style="background:#90EE90">An implementation can avoid namespace fixup by making sure that the standard step library does not output documents that require fixup. The following list contains suggestions as to how to accomplish this within the steps:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-new" style="background:#90EE90">Any step that outputs an element in the step vocabulary namespace </span><code class="uri"><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/ns/xproc-step</span></code><span class="deltaxml-new" style="background:#90EE90"> must ensure that namespace is declared. An implementation should generate a namespace binding using the prefix “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">c</span></code><span class="deltaxml-new" style="background:#90EE90">”.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">When attributes are added by </span><a href="#c.add-attribute"><span class="deltaxml-new" style="background:#90EE90">p:add-attribute</span></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#c.set-attributes"><span class="deltaxml-new" style="background:#90EE90">p:set-attributes</span></a><span class="deltaxml-new" style="background:#90EE90">, the step must ensure the namespace of the attributes added are declared. If the prefix used by the QName is not in the in-scope namespaces of the element on which the attribute was added, the step must add a namespace declaration of the prefix to the in-scope namespaces. If the prefix is amongst the in-scope namespace and is not bound to the same namespace name, a new prefix and namespace binding must be added. When a new prefix is generated, the prefix associated with the attribute should be changed to reflect that generated prefix value. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">When an element is renamed by </span><a href="#c.rename"><span class="deltaxml-new" style="background:#90EE90">p:rename</span></a><span class="deltaxml-new" style="background:#90EE90">, the step must ensure the namespace of the element is declared. If the prefix used by the QName is not in the in-scope namespaces of the element being renamed, the step must add a namespace declaration of the prefix to the in-scope namespaces. If the prefix is amongst the in-scope namespace and is not bound to the same namespace name, a new prefix and namespace binding must be added. When a new prefix is generated, the prefix associated with the element should be changed to reflect that generated prefix value. </span></p><p><span class="deltaxml-new" style="background:#90EE90">If the element does not have a namespace name and there is a default namespace, the default namespace must be undeclared. For each of the child elements, the original default namespace declaration must be preserved by adding a default namespace declaration unless the child element has a different default namespace.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">When an attribute is renamed by </span><a href="#c.rename"><span class="deltaxml-new" style="background:#90EE90">p:rename</span></a><span class="deltaxml-new" style="background:#90EE90">, the step must ensure the namespace of the renamed attribute is declared. If the prefix used by the QName is not in the in-scope namespaces of the element on which the attribute was added, the step must add a namespace declaration of the prefix to the in-scope namespaces. If the prefix is amongst the in-scope namespace and is not bound to the same namespace name, a new prefix and namespace binding must be added. When a new prefix is generated, the prefix associated with the attribute should be changed to reflect that generated prefix value. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">When an element wraps content via </span><a href="#c.wrap"><span class="deltaxml-new" style="background:#90EE90">p:wrap</span></a><span class="deltaxml-new" style="background:#90EE90">, there may be in-scope namespaces coming from ancestor elements of the new wrapper element. The step must ensure the namespace of the element is declared properly. By default, the wrapper element will inherit the in-scope namespaces of the parent element if one exists. As such, there may be a existing namespace declaration or default namespace.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the prefix used by the QName is not in the in-scope namespaces of the wrapper element, the step must add a namespace declaration of the prefix to the in-scope namespaces. If the prefix is amongst the in-scope namespace and is not bound to the same namespace name, a new prefix and namespace binding must be added. When a new prefix is generated, the prefix associated with the wrapper element should be changed to reflect that generated prefix value. </span></p><p><span class="deltaxml-new" style="background:#90EE90">If the element does not have a namespace name and there is a default namespace, the default namespace must be undeclared. For each of the child elements, the original default namespace declaration must be preserved by adding a default namespace declaration unless the child element has a different default namespace.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">When the wrapper element is added for </span><a href="#c.wrap-sequence"><span class="deltaxml-new" style="background:#90EE90">p:wrap-sequence</span></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#c.pack"><span class="deltaxml-new" style="background:#90EE90">p:pack</span></a><span class="deltaxml-new" style="background:#90EE90">, the prefix used by the QName must be added to the in-scope namespaces.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">When a element is removed via </span><a href="#c.unwrap"><span class="deltaxml-new" style="background:#90EE90">p:unwrap</span></a><span class="deltaxml-new" style="background:#90EE90">, an in-scope namespaces that are declared on the element must be copied to any child element except when the child element declares the same prefix or declares a new default namespace.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">In the output from </span><a href="#c.xslt"><span class="deltaxml-new" style="background:#90EE90">p:xslt</span></a><span class="deltaxml-new" style="background:#90EE90">, if an element was generated from the xsl:element or an attribute from xsl:attribute, the step must guarantee that an namespace declaration exists for the namespace name used. Depending on the XSLT implementation, the namespace declaration for the namespace name of the element or attribute may not be declared. It may also be the case that the original prefix is available. If the original prefix is available, the step should attempt to re-use that prefix. Otherwise, it must generate a prefix for a namespace binding and change the prefix associated the element or attribute.</span></p></li></ol></div></article><article id="handling-imports" class="appendix"><header class="appendix-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">G Handling Circular and Re-entrant Library Imports (Non-Normative)</span></h2></header><p><span class="deltaxml-new" style="background:#90EE90">When handling imports, an implementation needs to be able to detect the following situations, and distinguish them from cases where multiple import chains produce genuinely conflicting step definitions:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-new" style="background:#90EE90">Circular imports: A imports B, B imports A.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Re-entrant imports: A imports B and C, B imports D, C imports D.</span></p></li></ol></div><p><span class="deltaxml-new" style="background:#90EE90">One way to achieve this is as follows:</span></p><p><span id="dt-step-type-exports" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: The </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">step type exports</span></em><span class="deltaxml-new" style="background:#90EE90"> of an XProc element, against the background of a set of URIs of resources already visited (call this set </span><em><span class="deltaxml-new" style="background:#90EE90">Visited</span></em><span class="deltaxml-new" style="background:#90EE90">), are defined by cases.]</span></span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><a href="#dt-step-type-exports"><span class="deltaxml-new" style="background:#90EE90">step type exports</span></a><span class="deltaxml-new" style="background:#90EE90"> of an XProc element are as follows:</span></p><div class="variablelist"><dl><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">p:pipeline, p:declare-step</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">A singleton bag containing the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">type</span></code><span class="deltaxml-new" style="background:#90EE90"> of the element</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">p:library</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The </span><em class="glossterm"><a href="#dt-bag-merger"><span class="deltaxml-new" style="background:#90EE90">bag-merger</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of the </span><em class="glossterm"><a href="#dt-step-type-exports"><span class="deltaxml-new" style="background:#90EE90">step type exports</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of all the element's children</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">p:import</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Let </span><em><span class="deltaxml-new" style="background:#90EE90">RU</span></em><span class="deltaxml-new" style="background:#90EE90"> be the actual resolved URI of the resource identified by the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">href</span></code><span class="deltaxml-new" style="background:#90EE90"> of the element. If </span><em><span class="deltaxml-new" style="background:#90EE90">RU</span></em><span class="deltaxml-new" style="background:#90EE90"> is a member of </span><em><span class="deltaxml-new" style="background:#90EE90">Visited</span></em><span class="deltaxml-new" style="background:#90EE90">, then an empty bag, otherwise update </span><em><span class="deltaxml-new" style="background:#90EE90">Visited</span></em><span class="deltaxml-new" style="background:#90EE90"> by adding </span><em><span class="deltaxml-new" style="background:#90EE90">RU</span></em><span class="deltaxml-new" style="background:#90EE90"> to it, and return the </span><em class="glossterm"><a href="#dt-step-type-exports"><span class="deltaxml-new" style="background:#90EE90">step type exports</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of the document element of the retrieved representation</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">all other elements</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">An empty bag</span></p></dd></dl></div><p><span class="deltaxml-new" style="background:#90EE90">The changes to </span><em><span class="deltaxml-new" style="background:#90EE90">Visited</span></em><span class="deltaxml-new" style="background:#90EE90"> mandated by the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:import</span></code><span class="deltaxml-new" style="background:#90EE90"> case above are persistent, not scoped. That is, not only the recursive processing of the imported resource but also subsequent processing of siblings and ancestors must be against the background of the updated value. In practice this means either using a side-effected global variable, or not only passing </span><em><span class="deltaxml-new" style="background:#90EE90">Visited</span></em><span class="deltaxml-new" style="background:#90EE90"> as an argument to any recursive or iterative processing, but also </span><em><span class="deltaxml-new" style="background:#90EE90">returning</span></em><span class="deltaxml-new" style="background:#90EE90"> its updated value for subsequent use, along with the bag of step types.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Given a pipeline library document with actual resolved URI </span><em><span class="deltaxml-new" style="background:#90EE90">DU</span></em><span class="deltaxml-new" style="background:#90EE90">, </span><a name="err.inline.S0036.1"></a><span class="deltaxml-new" style="background:#90EE90">it is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0036"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0036</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><em class="glossterm"><a href="#dt-step-type-exports"><span class="deltaxml-new" style="background:#90EE90">step type exports</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of the document element of the retrieved representation, against the background of a singleton set containing </span><em><span class="deltaxml-new" style="background:#90EE90">DU</span></em><span class="deltaxml-new" style="background:#90EE90"> as the initial </span><em><span class="deltaxml-new" style="background:#90EE90">Visited</span></em><span class="deltaxml-new" style="background:#90EE90"> set, contains any duplicates.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Given a top-level pipeline document with actual resolved URI </span><em><span class="deltaxml-new" style="background:#90EE90">DU</span></em><span class="deltaxml-new" style="background:#90EE90">, </span><a name="err.inline.S0036.2"></a><span class="deltaxml-new" style="background:#90EE90">it is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0036"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0036</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><em class="glossterm"><a href="#dt-bag-merger"><span class="deltaxml-new" style="background:#90EE90">bag-merger</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of the </span><em class="glossterm"><a href="#dt-step-type-exports"><span class="deltaxml-new" style="background:#90EE90">step type exports</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of the document element of the retrieved representation with the </span><em class="glossterm"><a href="#dt-step-type-exports"><span class="deltaxml-new" style="background:#90EE90">step type exports</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of its children, against the background of a singleton set containing </span><em><span class="deltaxml-new" style="background:#90EE90">DU</span></em><span class="deltaxml-new" style="background:#90EE90"> as the initial </span><em><span class="deltaxml-new" style="background:#90EE90">Visited</span></em><span class="deltaxml-new" style="background:#90EE90"> set, contains any duplicates.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Given a non-top-level </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code><span class="deltaxml-new" style="background:#90EE90"> element, </span><a name="err.inline.S0036.3"></a><span class="deltaxml-new" style="background:#90EE90">it is a </span><em class="glossterm"><a href="#dt-static-error"><span class="deltaxml-new" style="background:#90EE90">static error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.S0036"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XS0036</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><em class="glossterm"><a href="#dt-bag-merger"><span class="deltaxml-new" style="background:#90EE90">bag-merger</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of the </span><em class="glossterm"><a href="#dt-step-type-exports"><span class="deltaxml-new" style="background:#90EE90">step type exports</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of its parent with the </span><em class="glossterm"><a href="#dt-step-type-exports"><span class="deltaxml-new" style="background:#90EE90">step type exports</span></a></em><span class="deltaxml-new" style="background:#90EE90"> of its children, against the background of a copy of the </span><em><span class="deltaxml-new" style="background:#90EE90">Visited</span></em><span class="deltaxml-new" style="background:#90EE90"> set of its parent as the initial </span><em><span class="deltaxml-new" style="background:#90EE90">Visited</span></em><span class="deltaxml-new" style="background:#90EE90"> set, contains any duplicates.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The phrase "a copy of the </span><em><span class="deltaxml-new" style="background:#90EE90">Visited</span></em><span class="deltaxml-new" style="background:#90EE90"> set" in the preceding paragraph is meant to indicate that checking of non-top-level </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></code><span class="deltaxml-new" style="background:#90EE90"> elements does </span><em><span class="deltaxml-new" style="background:#90EE90">not</span></em><span class="deltaxml-new" style="background:#90EE90"> have a persistent impact on the checking of its parent. The contrast is that whereas changes to </span><em><span class="deltaxml-new" style="background:#90EE90">Visited</span></em><span class="deltaxml-new" style="background:#90EE90"> pass both up </span><em><span class="deltaxml-new" style="background:#90EE90">and</span></em><span class="deltaxml-new" style="background:#90EE90"> down through </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:import</span></code><span class="deltaxml-new" style="background:#90EE90">, they pass only </span><em><span class="deltaxml-new" style="background:#90EE90">down</span></em><span class="deltaxml-new" style="background:#90EE90"> through </span><em><span class="deltaxml-new" style="background:#90EE90">p:pipeline</span></em><span class="deltaxml-new" style="background:#90EE90"> and </span><em><span class="deltaxml-new" style="background:#90EE90">p:declare-step</span></em><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span id="dt-bag-merger" class="termdef"><span class="deltaxml-new" style="background:#90EE90">[Definition: The </span><em class="glossterm"><span class="deltaxml-new" style="background:#90EE90">bag-merger</span></em><span class="deltaxml-new" style="background:#90EE90"> of two or more bags (where a bag is an unordered list or, equivalently, something like a set except that it may contain duplicates) is a bag constructed by starting with an empty bag and adding each member of each of the input bags in turn to it. It follows that the cardinality of the result is the sum of the cardinality of all the input bags.]</span></span></p></article><article id="parallelism" class="appendix"><header class="appendix-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">H Sequential steps, parallelism, and side-effects</span></h2></header><p><span class="deltaxml-new" style="background:#90EE90">XProc imposes as few constraints on the order in which steps must be evaluated as possible and almost no constraints on parallel execution.</span></p><p><span class="deltaxml-new" style="background:#90EE90">In the simple, and we believe overwhelmingly common case, inputs flow into the pipeline, through the pipeline from one step to the next, and results are produced at the end. The order of the steps is constrained by the input/output connections between them. Implementations are free to execute them in a purely sequential fashion or in parallel, as they see fit. The results are the same in either case.</span></p><p><span class="deltaxml-new" style="background:#90EE90">This is not true for pipelines which rely on side effects, such as the state of the filesystem or the state of the web. Consider the following pipeline:</span></p><pre class="programlisting line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:pipeline xmlns:p="http://www.w3.org/ns/xproc" version="1.0" name="main"&gt; &lt;p:xslt name="generate-stylesheet"&gt; &lt;p:input port="source"&gt; &lt;p:document href="someURI"/&gt; &lt;/p:input&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="someOtherURI"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;p:store name="save-xslt" href="gen-style.xsl"/&gt; &lt;p:xslt name="style"&gt; &lt;p:input port="source"&gt; &lt;p:pipe step="main" port="source"/&gt; &lt;/p:input&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="gen-style.xsl"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;/p:pipeline&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">There's no guarantee that “style” step will execute after the “save-xslt” step. In this case, the solution is straightforward. Even if you need the saved stylesheet, you don't need to rely on it in your pipeline:</span></p><pre class="programlisting line-numbers"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:pipeline xmlns:p="http://www.w3.org/ns/xproc" version="1.0" name="main"&gt; &lt;p:xslt name="generate-stylesheet"&gt; &lt;p:input port="source"&gt; &lt;p:document href="someURI"/&gt; &lt;/p:input&gt; &lt;p:input port="stylesheet"&gt; &lt;p:document href="someOtherURI"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;p:store name="save-xslt" href="gen-style.xsl"/&gt; &lt;p:xslt name="style"&gt; &lt;p:input port="source"&gt; &lt;p:pipe step="main" port="source"/&gt; &lt;/p:input&gt; &lt;p:input port="stylesheet"&gt; &lt;p:pipe step="generate-stylesheet" port="result"/&gt; &lt;/p:input&gt; &lt;/p:xslt&gt; &lt;/p:pipeline&gt;</span></code></pre><p><span class="deltaxml-new" style="background:#90EE90">Now the result is independent of the implementation strategy.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Implementations are free to invent additional control structures using </span><a href="#p.pipeinfo"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pipeinfo</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#extension-attributes"><span class="deltaxml-new" style="background:#90EE90">extension attributes</span></a><span class="deltaxml-new" style="background:#90EE90"> to provide greater control over parallelism in their implementations.</span></p></article><article id="xproc-media-type" class="appendix"><header class="appendix-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">I The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">application/xproc+xml</span></code><span class="deltaxml-new" style="background:#90EE90"> media type</span></h2></header><div class="toc"><h2 id="TableOfContents"><span class="deltaxml-new" style="background:#90EE90">Table of Contents</span></h2><ul class="toc"><li><span><span class="deltaxml-new" style="background:#90EE90">1 </span><a href="#media-type-registration"><span class="deltaxml-new" style="background:#90EE90">Registration of MIME media type application/xproc+xml</span></a></span></li><li><span><span class="deltaxml-new" style="background:#90EE90">2 </span><a href="#fragid"><span class="deltaxml-new" style="background:#90EE90">Fragment Identifiers</span></a></span></li></ul></div><p><span class="deltaxml-new" style="background:#90EE90">This appendix registers a new MIME media type, “</span><span class="quote"><code class="code"><span class="deltaxml-new" style="background:#90EE90">application/xproc+xml</span></code></span><span class="deltaxml-new" style="background:#90EE90">”.</span></p><section id="media-type-registration" class="section"><div class="section-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">1 Registration of MIME media type application/xproc+xml</span></h2></div><div class="variablelist"><dl><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">MIME media type name:</span></span></dt><dd><p><code class="code"><span class="deltaxml-new" style="background:#90EE90">application</span></code></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">MIME subtype name:</span></span></dt><dd><p><code class="code"><span class="deltaxml-new" style="background:#90EE90">xproc+xml</span></code></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Required parameters:</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">None. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Optional parameters:</span></span></dt><dd><div class="variablelist"><dl><dt><span class="term"><code class="code"><span class="deltaxml-new" style="background:#90EE90">charset</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">This parameter has identical semantics to the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">charset</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter of the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">application/xml</span></code><span class="deltaxml-new" style="background:#90EE90"> media type as specified in [</span><a href="#rfc3023"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 3023</span></span></a><span class="deltaxml-new" style="background:#90EE90">] or its successors. </span></p></dd></dl></div></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Encoding considerations:</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">By virtue of XProc content being XML, it has the same considerations when sent as “</span><span class="quote"><code class="code"><span class="deltaxml-new" style="background:#90EE90">application/xproc+xml</span></code></span><span class="deltaxml-new" style="background:#90EE90">” as does XML. See [</span><a href="#rfc3023"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 3023</span></span></a><span class="deltaxml-new" style="background:#90EE90">], Section 3.2. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Security considerations:</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Several XProc elements may refer to arbitrary URIs. In this case, the security issues of [</span><a href="#rfc2396"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 2396</span></span></a><span class="deltaxml-new" style="background:#90EE90">], section 7, should be considered.</span></p><p><span class="deltaxml-new" style="background:#90EE90">In addition, because of the extensibility features of XProc, it is possible that “application/xproc+xml” may describe content that has security implications beyond those described here. However, only in the case where the processor recognizes and processes the additional content, or where further processing of that content is dispatched to other processors, would security issues potentially arise. And in that case, they would fall outside the domain of this registration document.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Interoperability considerations:</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">This specification describes processing semantics that dictate behavior that must be followed when dealing with, among other things, unrecognized elements.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Because XProc is extensible, conformant "application/xproc+xml" processors can expect that content received is well-formed XML, but it cannot be guaranteed that the content is valid XProc or that the processor will recognize all of the elements and attributes in the document.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Published specification:</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">This media type registration is for XProc documents as described by this specification which is located at </span><a href="http://www.w3.org/TR/xproc"><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/TR/xproc</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Applications which use this media type:</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">There is no experimental, vendor specific, or personal tree predecessor to “</span><span class="quote"><code class="code"><span class="deltaxml-new" style="background:#90EE90">application/xproc+xml</span></code></span><span class="deltaxml-new" style="background:#90EE90">”, reflecting the fact that no applications currently recognize it. This new type is being registered in order to allow for the deployment of XProc on the World Wide Web, as a first class XML application. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Additional information:</span></span></dt><dd><div class="variablelist"><dl><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Magic number(s):</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">There is no single initial octet sequence that is always present in XProc documents. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">File extension(s):</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">XProc documents are most often identified with the extension “</span><span class="quote"><code class="filename"><span class="deltaxml-new" style="background:#90EE90">.xpl</span></code></span><span class="deltaxml-new" style="background:#90EE90">”. </span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Macintosh File Type Code(s):</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">TEXT</span></p></dd></dl></div></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Person &amp; email address to contact for further information:</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Norman Walsh, </span><code class="email"><span class="deltaxml-new" style="background:#90EE90">&lt;</span><a href="mailto:Norman.Walsh@MarkLogic.com"><span class="deltaxml-new" style="background:#90EE90">Norman.Walsh@MarkLogic.com</span></a><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Intended usage:</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">COMMON</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">Author/Change controller:</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The XProc specification is a work product of the World Wide Web Consortium's XML Processing Model Working Group. The W3C has change control over these specifications.</span></p></dd></dl></div></section><section id="fragid" class="section"><div class="section-titlepage"><h2><span class="deltaxml-new" style="background:#90EE90">2 Fragment Identifiers</span></h2></div><p><span class="deltaxml-new" style="background:#90EE90">For documents labeled as “</span><span class="quote"><code class="code"><span class="deltaxml-new" style="background:#90EE90">application/xproc+xml</span></code></span><span class="deltaxml-new" style="background:#90EE90">”, the fragment identifier notation is exactly that for “</span><span class="quote"><code class="code"><span class="deltaxml-new" style="background:#90EE90">application/xml</span></code></span><span class="deltaxml-new" style="background:#90EE90">”, as specified in [</span><a href="#rfc3023"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 3023</span></span></a><span class="deltaxml-new" style="background:#90EE90">] or its successors.</span></p></section></article></div><script src="http://docbook.github.com/release/2.0.5/base/js/prism.js"></script></body></html>